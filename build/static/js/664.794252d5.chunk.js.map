{"version":3,"file":"static/js/664.794252d5.chunk.js","mappings":"qQAyBA,MA0bA,EA1b2BA,KACvB,MAAOC,EAAkBC,IAAuBC,EAAAA,EAAAA,WAAS,IAClDC,EAAWC,IAAgBF,EAAAA,EAAAA,UAAS,QACpCG,EAAaC,IAAkBJ,EAAAA,EAAAA,UAAS,KACxCK,EAAYC,IAAiBN,EAAAA,EAAAA,WAAS,IACtCO,EAAuBC,IAA4BR,EAAAA,EAAAA,UAAS,KAC5DS,EAAUC,IAAeV,EAAAA,EAAAA,UAAS,OAClCW,EAAQC,IAAaZ,EAAAA,EAAAA,UAAS,MAE/Ba,GAAWC,EAAAA,EAAAA,OACX,MAAEC,EAAK,SAAEC,EAAQ,WAAEC,EAAU,qBAAEC,EAAoB,MAAEC,EAAK,uBAACC,EAAsB,0BAC9EC,EAAyB,qBACzBC,EAAoB,qBACpBC,IACIC,EAAAA,EAAAA,YAAWC,EAAAA,KAEjBC,EAAeC,IAAoB3B,EAAAA,EAAAA,WAAS,GAC7C4B,GAAUC,EAAAA,EAAAA,QAAO,MAEjBC,GAAcD,EAAAA,EAAAA,QAAO,MACrBE,GAAYF,EAAAA,EAAAA,QAAO,MAInBG,GAAWC,EAAAA,EAAAA,aAAY,MAErBP,GAAkBH,IAEtBI,GAAiB,GACjBN,EAA0Ba,GAAYA,EAAW,KAClD,CAACR,EAAeH,EAAsBF,KAEzCc,EAAAA,EAAAA,WAAU,KACN,MAAMC,EAASR,EAAQS,QACvB,IAAKD,EAAQ,OAEb,MAAME,EAAeA,KACjB,MAAM,UAAEC,EAAS,aAAEC,EAAY,aAAEC,GAAiBL,EAE9CG,EAAYE,GAAgBD,EAAe,KAC3CR,KAKR,OADAI,EAAOM,iBAAiB,SAAUJ,GAC3B,IAAMF,EAAOO,oBAAoB,SAAUL,IACnD,CAACN,KAGJG,EAAAA,EAAAA,WAAU,KACN,GAAIT,EAAe,CAEf,MAAMkB,EAAQC,WAAW,KACrBlB,GAAiB,IAClB,KAEH,MAAO,IAAMmB,aAAaF,EAC9B,GACD,CAAC7B,EAAOQ,EAAsBG,IAGjC,MAAMqB,EAAkBC,IACpB9C,EAAa8C,GACb1C,GAAc,GACdE,EAAyB,IACrBV,GAAkBC,GAAoB,IAGxCkD,EAAkBA,KACpB3C,GAAc,GACdE,EAAyB,KAGvB0C,EAAmBA,KACrB5C,GAAc,GACdE,EAAyB,KAGvB2C,EAAeA,KACjBzC,EAAY,MACZE,EAAU,MACVR,EAAe,IACfF,EAAa,QAGXkD,EAAeC,IACH,CACVC,OAAOC,EAAAA,EAAAA,KAACC,EAAAA,IAAa,CAACC,KAAM,GAAIC,UAAU,iBAC1CC,SAASJ,EAAAA,EAAAA,KAACK,EAAAA,IAAqB,CAACH,KAAM,GAAIC,UAAU,oBACpDG,QAAQN,EAAAA,EAAAA,KAACO,EAAAA,IAAY,CAACL,KAAM,GAAIC,UAAU,mBAEjCL,KAASE,EAAAA,EAAAA,KAACO,EAAAA,IAAY,CAACL,KAAM,GAAIC,UAAU,mBAGtDK,EAAaC,UACf,GAAI3D,EAEA,YADA4D,EAAyBC,GAG7B,MAAMC,EAAgB,IAAIpD,GACpBqD,EAAerD,EAAMsD,IAAKC,GAAQA,EAAIJ,KAAOA,GAAEK,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAQD,GAAG,IAAEE,QAASF,EAAIE,SAAWF,GAC1FtD,EAASoD,GACT,IACiCrD,EAAM0D,KAAMH,GAAQA,EAAIJ,KAAOA,GACnCM,aACfE,EAAAA,GAAiBC,IAAI,WAADC,OAAYV,UAEhCQ,EAAAA,GAAiBC,IAAI,WAADC,OAAYV,GAE9C,CAAE,MAAOW,GACL7D,EAASmD,EACb,GAGEW,EAAqBd,UACvB,GAAI3D,EAEA,YADA4D,EAAyBC,GAG7B,MAAMC,EAAgB,IAAIpD,GACpBgE,EAAuBhE,EAAM0D,KAAMH,GAAQA,EAAIJ,KAAOA,GAC5DlD,EAASD,EAAMiE,OAAQV,GAAQA,EAAIJ,KAAOA,IACtCa,IAAyBA,EAAqBE,MAC9C/D,IAEJ,UACUwD,EAAAA,GAAiBQ,OAAO,WAADN,OAAYV,GAC7C,CAAE,MAAOW,GACL7D,EAASmD,EACb,GAGEF,EAA4BC,IAC9B1D,EAA0B2E,GACtBA,EAAKC,SAASlB,GAAMiB,EAAKH,OAAQK,GAAUA,IAAUnB,GAAM,IAAIiB,EAAMjB,KAavEoB,EAAuBtB,UACzB,MAAMG,EAAgB,IAAIpD,GACpBwE,EAAchF,EACdiF,EAAqBzE,EAAMiE,OAAOV,GAAOiB,EAAYH,SAASd,EAAIJ,MAAQI,EAAIW,MAAMQ,OAC1FzE,EAASD,EAAMiE,OAAQV,IAASiB,EAAYH,SAASd,EAAIJ,MACzD5D,GAAc,GACdE,EAAyB,IACzB,IAAK,IAAIkF,EAAI,EAAGA,EAAIF,EAAoBE,IACpCxE,IAEJ,UACUyE,QAAQC,IAAIL,EAAYlB,IAAIH,GAAMQ,EAAAA,GAAiBQ,OAAO,WAADN,OAAYV,KAC/E,CAAE,MAAOW,GACL7D,EAASmD,EACb,GAGE0B,EAAcC,IAChB,IAAM,OAAOC,EAAAA,EAAAA,IAAoBC,EAAAA,EAAAA,GAASF,GAAO,CAAEG,WAAW,GAAS,CACvE,MAAOpB,GAAS,MAAO,EAAI,GAGzBqB,EAAgBC,IAClB,IAAM,OAAOC,EAAAA,EAAAA,IAAiBD,EAAY,eAAgB,gBAAkB,CAC5E,MAAOtB,GAAS,MAAO,EAAI,GAGzBwB,IAAwBC,EAAAA,EAAAA,SAAQ,KAClC,IAAIC,EAAWxF,GAAS,GACxB,MAAMyF,EAAiBrG,EAAYsG,cAanC,GAXkB,WAAdxG,EAAwBsG,EAAWA,EAASvB,OAAQV,IAASA,EAAIW,MAC9C,YAAdhF,IAAyBsG,EAAWA,EAASvB,OAAQV,GAAQA,EAAIE,SAEtErE,IACAoG,EAAWA,EAASvB,OAASV,IAAG,IAAAoC,EAAAC,EAAAC,EAAA,OACjB,QAAXF,EAAApC,EAAIuC,eAAO,IAAAH,OAAA,EAAXA,EAAaD,cAAcrB,SAASoB,MACzB,QADwCG,EACnDrC,EAAIwC,eAAO,IAAAH,OAAA,EAAXA,EAAaF,cAAcrB,SAASoB,MAC1B,QADyCI,EACnDtC,EAAIyC,cAAM,IAAAH,OAAA,EAAVA,EAAYH,cAAcrB,SAASoB,OAIvC/F,EAAU,CACV,MAAMuG,GAAchB,EAAAA,EAAAA,GAASvF,GAC7B8F,EAAWA,EAASvB,OAAQV,IAAQ0B,EAAAA,EAAAA,GAAS1B,EAAI2C,YAAcD,EACnE,CAEA,GAAIrG,EAAQ,CACR,MAAMuG,GAAYlB,EAAAA,EAAAA,GAASrF,GACrBwG,EAAoB,IAAIC,KAAKF,GACnCC,EAAkBE,QAAQF,EAAkBG,UAAY,GACxDf,EAAWA,EAASvB,OAAQV,IAAQ0B,EAAAA,EAAAA,GAAS1B,EAAI2C,WAAaE,EAClE,CAEA,OAAOZ,GACR,CAACxF,EAAOd,EAAWE,EAAaM,EAAUE,IAGvC4G,IAAmBjB,EAAAA,EAAAA,SAAQ,IAET,KAAhBnG,GACc,QAAdF,GACa,OAAbQ,GACW,OAAXE,EAEL,CAACR,EAAaF,EAAWQ,EAAUE,IAOhC6G,GAAiB,CAAEC,MAAO,CAAEC,MAAO,MAAQC,IAAK,CAAED,MAAO,MAE/D,OACIE,EAAAA,EAAAA,MAAA,OAAKlE,UAAS,iCAAAkB,OAA6C,SAAVzD,EAAmB,cAAgB,cAAe0G,SAAA,EAE/FD,EAAAA,EAAAA,MAACE,EAAAA,EAAOC,IAAG,CACPrE,UAAS,gDAAAkB,OACK,SAAVzD,EAAmB,2BAA6B,4BAEpD6G,QAAQ,SACRC,QAAQ,UACRC,SAhBW,CACnBC,OAAQ,CAAEC,GAAI,GAAIC,QAAS,GAC3BC,QAAS,CAAEF,EAAG,EAAGC,QAAS,EAAGE,WAAY,CAAEC,KAAM,SAAUC,UAAW,IAAKC,QAAS,MAcnDb,SAAA,EAEzBD,EAAAA,EAAAA,MAAA,OAAKlE,UAAS,kEAAAkB,OAA8E,SAAVzD,EAAmB,WAAa,YAAa0G,SAAA,EAC3HtE,EAAAA,EAAAA,KAACuE,EAAAA,EAAOa,OAAM,CAACC,QAnNNC,IAAM9I,GAAqBD,GAmNM4D,UAAS,GAAAkB,OAAe,SAAVzD,EAAmB,iCAAmC,qCAAuC2H,WAAY,CAAEpB,MAAO,KAAOqB,SAAU,CAAErB,MAAO,KAAOG,UACvMtE,EAAAA,EAAAA,KAACyF,EAAAA,IAAM,CAACvF,KAAM,QAElBmE,EAAAA,EAAAA,MAAA,OAAKlE,UAAU,uBAAsBmE,SAAA,EACjCtE,EAAAA,EAAAA,KAAC0F,EAAAA,IAAQ,CAACvF,UAAS,wDAAAkB,OAA6E,iBAAqCnB,KAAM,MAC3IF,EAAAA,EAAAA,KAAA,SAAOiF,KAAK,OAAOU,YAAY,YAAYxF,UAAS,kGAAAkB,OAA+G,SAAVzD,EAAmB,wGAA0G,qGAAuGgI,MAAOhJ,EAAaiJ,SAAWC,GAAMjJ,EAAeiJ,EAAEC,OAAOH,gBAGlcvB,EAAAA,EAAAA,MAAA,OAAKlE,UAAU,2DAA0DmE,SAAA,EACrEtE,EAAAA,EAAAA,KAAA,OAAKG,UAAS,iCAAAkB,OAA6C,SAAVzD,EAAmB,cAAgB,eAAgB0G,SAC/F,CAAC,MAAO,SAAU,WAAWxD,IAAKkF,IAC/B3B,EAAAA,EAAAA,MAACE,EAAAA,EAAOa,OAAM,CAAWa,MAAO,CAAEC,aAAc,QAAUb,QAASA,IAAM7F,EAAewG,GAAM7F,UAAS,qEAAAkB,OAAwE3E,IAAcsJ,EAAM,oCAAgD,SAAVpI,EAAmB,iCAAmC,qCAAuC2H,WAAY,CAAEpB,MAAO,MAAQqB,SAAU,CAAErB,MAAO,KAAOG,SAAA,CAChX,QAAR0B,IAAiBhG,EAAAA,EAAAA,KAACmG,EAAAA,IAAO,CAAChG,UAAU,SAASD,KAAM,KAC3C,WAAR8F,IAAoBhG,EAAAA,EAAAA,KAACoG,EAAAA,IAAU,CAACjG,UAAU,SAASD,KAAM,KACjD,YAAR8F,IAAqBhG,EAAAA,EAAAA,KAACqG,EAAAA,IAAM,CAAClG,UAAU,SAASD,KAAM,KACtD8F,IAJeA,OAQ5B3B,EAAAA,EAAAA,MAAA,OAAKlE,UAAU,kBAAiBmE,SAAA,EAC5BtE,EAAAA,EAAAA,KAAC0F,EAAAA,IAAQ,CAACvF,UAAS,sDAAAkB,OAA2E,iBAAqCnB,KAAM,MACzIF,EAAAA,EAAAA,KAAA,SAAOiF,KAAK,OAAOU,YAAY,0BAA0BxF,UAAS,2FAAAkB,OAAuG,SAAVzD,EAAmB,wGAA0G,mGAAqGgI,MAAOhJ,EAAaiJ,SAAWC,GAAMjJ,EAAeiJ,EAAEC,OAAOH,aAElcvB,EAAAA,EAAAA,MAAA,OAAKlE,UAAU,8BAA6BmE,SAAA,EACxCD,EAAAA,EAAAA,MAAA,UAAQgB,QAASA,KAAA,IAAAiB,EAAA,OAAyB,QAAzBA,EAAM/H,EAAYO,eAAO,IAAAwH,OAAA,EAAnBA,EAAqBC,cAAcpG,UAAS,yFAAAkB,OAAqG,SAAVzD,EAAmB,8DAAgE,2DAA4D0G,SAAA,EACzStE,EAAAA,EAAAA,KAAA,QAAAsE,SAAM,UACNtE,EAAAA,EAAAA,KAACwG,EAAAA,IAAU,CAACrG,UAAS,GAAAkB,OAAwB,iBAAqCnB,KAAM,SAE5FF,EAAAA,EAAAA,KAAA,SAAOyG,IAAKlI,EAAa0G,KAAK,OAAO9E,UAAU,UAAUyF,MAAO1I,GAAY,GAAI2I,SAAWC,GAAM3I,EAAY2I,EAAEC,OAAOH,UACtHvB,EAAAA,EAAAA,MAAA,UAAQgB,QAASA,KAAA,IAAAqB,EAAA,OAAuB,QAAvBA,EAAMlI,EAAUM,eAAO,IAAA4H,OAAA,EAAjBA,EAAmBH,cAAcpG,UAAS,yFAAAkB,OAAqG,SAAVzD,EAAmB,8DAAgE,2DAA4D0G,SAAA,EACvStE,EAAAA,EAAAA,KAAA,QAAAsE,SAAM,QACNtE,EAAAA,EAAAA,KAACwG,EAAAA,IAAU,CAACrG,UAAS,GAAAkB,OAAwB,iBAAqCnB,KAAM,SAE5FF,EAAAA,EAAAA,KAAA,SAAOyG,IAAKjI,EAAWyG,KAAK,OAAO9E,UAAU,UAAUyF,MAAOxI,GAAU,GAAIyI,SAAWC,GAAMzI,EAAUyI,EAAEC,OAAOH,UAChH5F,EAAAA,EAAAA,KAAA,UAAQqF,QAASzF,EAAcO,UAAS,kGAAAkB,OAA8G,SAAVzD,EAAmB,iFAAmF,8EAAgF+I,MAAM,gBAAerC,UACnVtE,EAAAA,EAAAA,KAAC4G,EAAAA,IAAO,CAAC1G,KAAM,WAGvBF,EAAAA,EAAAA,KAAA,OAAKG,UAAU,oBAAmBmE,UAC9BtE,EAAAA,EAAAA,KAAA,OAAKG,UAAU,8BAA6BmE,SACtCxH,GAKEuH,EAAAA,EAAAA,MAAAwC,EAAAA,SAAA,CAAAvC,SAAA,EACItE,EAAAA,EAAAA,KAACuE,EAAAA,EAAOa,OAAM,CAACC,QAAS1F,EAAkBsG,MAAO,CAAEC,aAAc,QAAU/F,UAAS,gEAAAkB,OAA4E,SAAVzD,EAAmB,8CAAgD,+CAAiD+G,SAAUV,GAAgBsB,WAAW,QAAQC,SAAS,MAAKlB,SAAC,YACtUD,EAAAA,EAAAA,MAACE,EAAAA,EAAOa,OAAM,CAACC,QAAStD,EAAsBkE,MAAO,CAAEC,aAAc,QAAU/F,UAAU,uGAAuGwE,SAAUV,GAAgBsB,WAAW,QAAQC,SAAS,MAAKlB,SAAA,EACvPtE,EAAAA,EAAAA,KAAC8G,EAAAA,IAAU,CAAC3G,UAAU,SAASD,KAAM,KAAM,gBAPnDmE,EAAAA,EAAAA,MAACE,EAAAA,EAAOa,OAAM,CAACa,MAAO,CAAEC,aAAc,OAASb,QAAS3F,EAAiBS,UAAU,sGAAsGwE,SAAUV,GAAgBsB,WAAW,QAAQC,SAAS,MAAKlB,SAAA,EAChPtE,EAAAA,EAAAA,KAAC+G,EAAAA,IAAQ,CAAC5G,UAAU,OAAOD,KAAM,KAAM,qBAgB/DF,EAAAA,EAAAA,KAAA,OACIyG,IAAKpI,EAEL8B,UAAS,0BAAAkB,OAA6BlD,GAAmD,KAAb,OAArB2E,SAAqB,IAArBA,QAAqB,EAArBA,GAAuBZ,QAAoD,GAArC,oCAA0CoC,UAEjH,OAArBxB,SAAqB,IAArBA,QAAqB,EAArBA,GAAuBZ,QAAS,GAC7BmC,EAAAA,EAAAA,MAAA,OAAKlE,UAAU,yBAAwBmE,SAAA,CAClCxB,GAAsBhC,IAAKwC,IACxBe,EAAAA,EAAAA,MAACE,EAAAA,EAAOC,IAAG,CAEPrE,UAAS,8EAAAkB,OACLrE,EAAsB6E,SAASyB,EAAQ3C,IAAM,2CAAuD,SAAV/C,EAAmB,kBAAoB,kBAAiB,KAAAyD,OAEjJiC,EAAQ5B,KAAuI,SAAV9D,EAAmB,cAAgB,WAA9I,SAAVA,EAAmB,6CAA+C,gDAEvFyH,QAASA,IAxKJ/B,KACzBxG,EACA4D,EAAyB4C,EAAQ3C,IAC1B2C,EAAQ0D,OACftJ,EAAW4F,EAAQ3C,IACnBrD,EAASgG,EAAQ0D,QAmKkBC,CAAwB3D,GACvCiC,WAAY,CAAEV,GAAI,EAAGqC,UAAW,+BAChClC,WAAY,CAAEmC,SAAU,KAAO7C,SAAA,EAE/BD,EAAAA,EAAAA,MAAA,OAAKlE,UAAU,gCAA+BmE,SAAA,EAC1CD,EAAAA,EAAAA,MAAA,OAAKlE,UAAU,mBAAkBmE,SAAA,EAC7BtE,EAAAA,EAAAA,KAAA,OAAKG,UAAU,YAAWmE,SAAExH,GAAckD,EAAAA,EAAAA,KAACoH,EAAAA,IAAa,CAAClH,KAAM,GAAIC,UAAYnD,EAAsB6E,SAASyB,EAAQ3C,IAAM,kBAAoB,kBAAyBd,EAAYyD,EAAQxD,SAC7LuE,EAAAA,EAAAA,MAAA,OAAKlE,UAAU,8BAA6BmE,SAAA,EACxCtE,EAAAA,EAAAA,KAAA,OAAKG,UAAS,kCAAAkB,OAA8C,SAAVzD,EAAmB,aAAe,iBAAkB0G,SAAEhB,EAAQC,WAChHvD,EAAAA,EAAAA,KAAA,OAAKG,UAAS,yBAAAkB,OAAqC,SAAVzD,EAAmB,gBAAkB,iBAAkB0G,SAAEhB,EAAQA,iBAGlHe,EAAAA,EAAAA,MAAA,OAAKlE,UAAS,wDAAAkB,OAAoE,SAAVzD,EAAmB,kBAAoB,sBAAuB0G,SAAA,EAClID,EAAAA,EAAAA,MAAA,OAAKlE,UAAU,4BAA2BmE,SAAA,EACtCtE,EAAAA,EAAAA,KAAA,OAAKG,UAAU,6EAA4EmE,SAAEhB,EAAQ+D,YACrGrH,EAAAA,EAAAA,KAAA,OAAKG,UAAS,0BAAAkB,OAAsC,SAAVzD,EAAmB,gBAAkB,iBAAkB0G,SAAEhB,EAAQE,aAE/Ga,EAAAA,EAAAA,MAAA,OAAKlE,UAAU,kCAAiCmE,SAAA,EAC5CtE,EAAAA,EAAAA,KAAA,QAAMG,UAAS,iBAAAkB,OAA6B,SAAVzD,EAAmB,gBAAkB,iBAAkB0G,SAAEhC,EAAWgB,EAAQI,cAC9G1D,EAAAA,EAAAA,KAAA,QAAMG,UAAS,UAAAkB,OAAsB,SAAVzD,EAAmB,gBAAkB,iBAAkB0G,SAAE3B,EAAaW,EAAQI,oBAGjHW,EAAAA,EAAAA,MAAA,OAAKlE,UAAU,iFAAgFmE,SAAA,EAC3FtE,EAAAA,EAAAA,KAACqG,EAAAA,IAAM,CAACnG,KAAM,GAAIC,UAAS,oCAAAkB,OAAsCiC,EAAQrC,OAAS,kBAAoB,uCAAyCoE,QAAUS,IAAQA,EAAEwB,kBAAmB9G,EAAW8C,EAAQ3C,QACzMX,EAAAA,EAAAA,KAAC8G,EAAAA,IAAU,CAAC5G,KAAM,GAAIC,UAAU,oEAAoEkF,QAAUS,IAAQA,EAAEwB,kBAAmB/F,EAAmB+B,EAAQ3C,cAG9K0D,EAAAA,EAAAA,MAAA,OAAKlE,UAAU,kDAAiDmE,SAAA,EAC5DtE,EAAAA,EAAAA,KAAA,OAAKG,UAAU,OAAMmE,SAAExH,GAAckD,EAAAA,EAAAA,KAACoH,EAAAA,IAAa,CAAClH,KAAM,GAAIC,UAAYnD,EAAsB6E,SAASyB,EAAQ3C,IAAM,kBAAoB,kBAAyBd,EAAYyD,EAAQxD,SACxLuE,EAAAA,EAAAA,MAAA,OAAKlE,UAAU,kEAAiEmE,SAAA,EAC5EtE,EAAAA,EAAAA,KAAA,OAAKG,UAAS,kCAAAkB,OAA8C,SAAVzD,EAAmB,aAAe,iBAAkB0G,SAAEhB,EAAQC,WAChHvD,EAAAA,EAAAA,KAAA,OAAKG,UAAS,yBAAAkB,OAAqC,SAAVzD,EAAmB,gBAAkB,iBAAkB0G,SAAEhB,EAAQA,cAE9Ge,EAAAA,EAAAA,MAAA,OAAKlE,UAAU,qEAAoEmE,SAAA,EAC/EtE,EAAAA,EAAAA,KAAA,OAAKG,UAAS,qCAAAkB,OAAiD,SAAVzD,EAAmB,aAAe,iBAAkB0G,SAAEhB,EAAQE,UACnHxD,EAAAA,EAAAA,KAAA,OAAKG,UAAU,2CAA0CmE,SAAEhB,EAAQ+D,eAEvEhD,EAAAA,EAAAA,MAAA,OAAKlE,UAAU,8EAA6EmE,SAAA,EACxFtE,EAAAA,EAAAA,KAAA,OAAKG,UAAS,yBAAAkB,OAAqC,SAAVzD,EAAmB,gBAAkB,iBAAkB0G,SAAEhC,EAAWgB,EAAQI,cACrH1D,EAAAA,EAAAA,KAAA,OAAKG,UAAS,gBAAAkB,OAA4B,SAAVzD,EAAmB,gBAAkB,iBAAkB0G,SAAE3B,EAAaW,EAAQI,iBAElHW,EAAAA,EAAAA,MAAA,OAAKlE,UAAU,2DAA0DmE,SAAA,EACrEtE,EAAAA,EAAAA,KAACuE,EAAAA,EAAOC,IAAG,CAACe,WAAY,CAAEpB,MAAO,KAAOqB,SAAU,CAAErB,MAAO,IAAMG,UAC7DtE,EAAAA,EAAAA,KAACqG,EAAAA,IAAM,CAACnG,KAAM,GAAIC,UAAS,oCAAAkB,OAAsCiC,EAAQrC,OAAS,kBAAoB,uCAAyCoE,QAAUS,IAAQA,EAAEwB,kBAAmB9G,EAAW8C,EAAQ3C,UAE7MX,EAAAA,EAAAA,KAACuE,EAAAA,EAAOC,IAAG,CAACe,WAAY,CAAEpB,MAAO,KAAOqB,SAAU,CAAErB,MAAO,IAAMG,UAC7DtE,EAAAA,EAAAA,KAAC8G,EAAAA,IAAU,CAAC5G,KAAM,GAAIC,UAAU,oEAAoEkF,QAAUS,IAAQA,EAAEwB,kBAAmB/F,EAAmB+B,EAAQ3C,iBApD7K2C,EAAQ3C,KA2DpBxC,IACGkG,EAAAA,EAAAA,MAAA,OAAKlE,UAAS,+DAAAkB,OAA4E,SAAVzD,EAAmB,gBAAkB,iBAAmB0G,SAAA,EACpItE,EAAAA,EAAAA,KAACuH,EAAAA,IAAM,CAACrH,KAAM,GAAIC,UAAU,6BAA6B8F,MAAO,CAAEuB,UAAW,8BAC7ExH,EAAAA,EAAAA,KAAA,QAAAsE,SAAM,wBAGZtG,IAA0BgC,EAAAA,EAAAA,KAAA,OAAKG,UAAS,oBAAAkB,OAA0C,iBAAqCiD,SAAC,+BAI7HnG,IAEG6B,EAAAA,EAAAA,KAAA,OAAKG,UAAU,gCAA+BmE,UAC1CtE,EAAAA,EAAAA,KAAA,OAAKG,UAAU,6CAA4CmE,SACtDN,IAEGK,EAAAA,EAAAA,MAAAwC,EAAAA,SAAA,CAAAvC,SAAA,EACItE,EAAAA,EAAAA,KAAC0F,EAAAA,IAAQ,CAACxF,KAAM,GAAIC,UAAS,QAAAkB,OAAoB,SAAVzD,EAAmB,kBAAoB,sBAC9EoC,EAAAA,EAAAA,KAAA,MAAIG,UAAS,yBAAAkB,OAAsC,SAAVzD,EAAmB,gBAAkB,iBAAkB0G,SAAC,sBACjGtE,EAAAA,EAAAA,KAAA,KAAGG,UAAS,gBAAAkB,OAA6B,SAAVzD,EAAmB,gBAAkB,iBAAmB0G,SAAC,iEAI5FD,EAAAA,EAAAA,MAAAwC,EAAAA,SAAA,CAAAvC,SAAA,EACItE,EAAAA,EAAAA,KAACoH,EAAAA,IAAa,CAAClH,KAAM,GAAIC,UAAU,yBACnCH,EAAAA,EAAAA,KAAA,MAAIG,UAAS,yBAAAkB,OAAsC,SAAVzD,EAAmB,gBAAkB,iBAAkB0G,SAAC,2BACjGtE,EAAAA,EAAAA,KAAA,KAAGG,UAAS,gBAAAkB,OAA6B,SAAVzD,EAAmB,gBAAkB,iBAAmB0G,SAAC,wCASpHtE,EAAAA,EAAAA,KAACyH,EAAAA,EAAe,CAAAnD,SACX/H,IACG8H,EAAAA,EAAAA,MAAAwC,EAAAA,SAAA,CAAAvC,SAAA,EACItE,EAAAA,EAAAA,KAACuE,EAAAA,EAAOC,IAAG,CAAerE,UAAU,8DAA8DsE,QAAS,CAAEK,QAAS,GAAKJ,QAAS,CAAEI,QAAS,GAAK4C,KAAM,CAAE5C,QAAS,GAAKO,QAASA,IAAM7I,GAAoB,IAA7L,YAChB6H,EAAAA,EAAAA,MAACE,EAAAA,EAAOC,IAAG,CAAerE,UAAS,yEAAAkB,OAAqF,SAAVzD,EAAmB,cAAgB,YAAc6G,QAAS,CAAEkD,EAAG,SAAWjD,QAAS,CAAEiD,EAAG,GAAKD,KAAM,CAAEC,EAAG,SAAW3C,WAAY,CAAEC,KAAM,QAAS2C,KAAM,YAAaT,SAAU,IAAM7C,SAAA,EAC7RD,EAAAA,EAAAA,MAAA,OAAKlE,UAAS,kDAAAkB,OAA8D,SAAVzD,EAAmB,kBAAoB,mBAAoB0G,SAAA,EACzHtE,EAAAA,EAAAA,KAAA,MAAIG,UAAS,qBAAAkB,OAAiC,SAAVzD,EAAmB,aAAe,iBAAkB0G,SAAC,uBACzFtE,EAAAA,EAAAA,KAACuE,EAAAA,EAAOa,OAAM,CAACC,QAASA,IAAM7I,GAAoB,GAAQ+I,WAAY,CAAEpB,MAAO,IAAK0D,OAAQ,IAAMrC,SAAU,CAAErB,MAAO,IAAMG,UACvHtE,EAAAA,EAAAA,KAAC4G,EAAAA,IAAO,CAAC1G,KAAM,GAAIC,UAAS,GAAAkB,OAAe,SAAVzD,EAAmB,gBAAkB,yBAG9EyG,EAAAA,EAAAA,MAAA,OAAKlE,UAAU,yBAAwBmE,SAAA,EACnCtE,EAAAA,EAAAA,KAAA,OAAKG,UAAS,sBAAAkB,OAAkC,SAAVzD,EAAmB,kBAAoB,mBAAoB0G,SAC5F,CAAC,MAAO,SAAU,WAAWxD,IAAKkF,IAAShG,EAAAA,EAAAA,KAAA,UAAkBqF,QAASA,IAAM7F,EAAewG,GAAM7F,UAAS,4DAAAkB,OAA8D3E,IAAcsJ,EAAM,+BAA4C,SAAVpI,EAAmB,kCAAoC,kCAAoC0G,SAAE0B,GAAnQA,OAE7D3B,EAAAA,EAAAA,MAAA,OAAKlE,UAAU,gBAAemE,SAAA,EAC1BD,EAAAA,EAAAA,MAAA,OAAKlE,UAAU,oCAAmCmE,SAAA,EAC9CD,EAAAA,EAAAA,MAAA,MAAIlE,UAAS,2CAAAkB,OAAuD,SAAVzD,EAAmB,gBAAkB,iBAAkB0G,SAAA,EAACtE,EAAAA,EAAAA,KAAC8H,EAAAA,IAAQ,CAAC3H,UAAU,oBAAoBD,KAAM,KAAM,cACtKF,EAAAA,EAAAA,KAAA,UAAQqF,QAASzF,EAAcO,UAAS,4CAAAkB,OAAwD,SAAVzD,EAAmB,8CAAgD,+CAAgD0G,SAAC,kBAE9MD,EAAAA,EAAAA,MAAA,OAAKlE,UAAU,8BAA6BmE,SAAA,EACxCD,EAAAA,EAAAA,MAAA,OAAKlE,UAAU,8BAA6BmE,SAAA,EACxCtE,EAAAA,EAAAA,KAAA,UAAQqF,QAASA,KAAA,IAAA0C,EAAA,OAAyB,QAAzBA,EAAMxJ,EAAYO,eAAO,IAAAiJ,OAAA,EAAnBA,EAAqBxB,cAAcpG,UAAS,iCAAAkB,OAA6C,SAAVzD,EAAmB,8BAAgC,4BAA6B0G,UAACtE,EAAAA,EAAAA,KAACwG,EAAAA,IAAU,CAACrG,UAAS,GAAAkB,OAAe,SAAVzD,EAAmB,gBAAkB,iBAAmBsC,KAAM,QAC/QF,EAAAA,EAAAA,KAAA,QAAMG,UAAS,gBAAAkB,OAA4B,SAAVzD,EAAmB,gBAAkB,iBAAkB0G,SAAEpH,GAAW8K,EAAAA,EAAAA,KAAOvF,EAAAA,EAAAA,GAASvF,GAAW,eAAiB,eACjJ8C,EAAAA,EAAAA,KAAA,SAAOyG,IAAKlI,EAAa0G,KAAK,OAAO9E,UAAU,UAAUyF,MAAO1I,GAAY,GAAI2I,SAAWC,GAAM3I,EAAY2I,EAAEC,OAAOH,aAE1HvB,EAAAA,EAAAA,MAAA,OAAKlE,UAAU,8BAA6BmE,SAAA,EACxCtE,EAAAA,EAAAA,KAAA,UAAQqF,QAASA,KAAA,IAAA4C,EAAA,OAAuB,QAAvBA,EAAMzJ,EAAUM,eAAO,IAAAmJ,OAAA,EAAjBA,EAAmB1B,cAAcpG,UAAS,iCAAAkB,OAA6C,SAAVzD,EAAmB,8BAAgC,4BAA6B0G,UAACtE,EAAAA,EAAAA,KAACwG,EAAAA,IAAU,CAACrG,UAAS,GAAAkB,OAAe,SAAVzD,EAAmB,gBAAkB,iBAAmBsC,KAAM,QAC7QF,EAAAA,EAAAA,KAAA,QAAMG,UAAS,gBAAAkB,OAA4B,SAAVzD,EAAmB,gBAAkB,iBAAkB0G,SAAElH,GAAS4K,EAAAA,EAAAA,KAAOvF,EAAAA,EAAAA,GAASrF,GAAS,eAAiB,aAC7I4C,EAAAA,EAAAA,KAAA,SAAOyG,IAAKjI,EAAWyG,KAAK,OAAO9E,UAAU,UAAUyF,MAAOxI,GAAU,GAAIyI,SAAWC,GAAMzI,EAAUyI,EAAEC,OAAOH,gBAGxH5F,EAAAA,EAAAA,KAAA,OAAKG,UAAU,sBAAqBmE,SAC9BxH,GAAoPuH,EAAAA,EAAAA,MAAAwC,EAAAA,SAAA,CAAAvC,SAAA,EAClPtE,EAAAA,EAAAA,KAAA,UAAQqF,QAAS1F,EAAkBQ,UAAS,mDAAAkB,OAA+D,SAAVzD,EAAmB,8CAAgD,+CAAgD0G,SAAC,YACrNtE,EAAAA,EAAAA,KAAA,UAAQqF,QAAStD,EAAsB5B,UAAU,yFAAwFmE,SAAC,eAF9HtE,EAAAA,EAAAA,KAAA,UAAQqF,QAAS3F,EAAiBS,UAAS,mDAAAkB,OAA+D,SAAVzD,EAAmB,8CAAgD,+CAAgD0G,SAAC,mBA7BpO,mB","sources":["TechLife/HRMS/Components/Notifications/NotificationSystem.jsx"],"sourcesContent":["import React, { useState, useEffect, useMemo, useCallback, useContext, useRef } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { Context } from '../HrmsContext';\r\nimport { notificationsApi } from '../../../../axiosInstance';\r\nimport {\r\n    FaBars,\r\n    FaTimes,\r\n    FaSearch,\r\n    FaEnvelope,\r\n    FaStar,\r\n    FaInbox,\r\n    FaFilter,\r\n    FaCalendar,\r\n    FaExclamationTriangle,\r\n    FaInfoCircle,\r\n    FaTimesCircle,\r\n    FaCheckCircle,\r\n    FaEraser,\r\n    FaTrashAlt,\r\n    FaSync,\r\n} from \"react-icons/fa\";\r\nimport { parseISO, formatDistanceToNow, format } from \"date-fns\";\r\nimport { formatInTimeZone } from \"date-fns-tz\";\r\n\r\nconst NotificationSystem = () => {\r\n    const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);\r\n    const [activeTab, setActiveTab] = useState(\"All\");\r\n    const [searchQuery, setSearchQuery] = useState(\"\");\r\n    const [isEditMode, setIsEditMode] = useState(false);\r\n    const [selectedNotifications, setSelectedNotifications] = useState([]);\r\n    const [fromDate, setFromDate] = useState(null);\r\n    const [toDate, setToDate] = useState(null);\r\n    \r\n    const navigate = useNavigate();\r\n    const { gdata, setGdata, markAsRead, decrementUnreadCount, theme,notificationPageNumber,\r\n             setNotificationPageNumber,\r\n             notificationPageSize,\r\n             hasMoreNotifications // <-- IMPORTED: Centralized status for infinite scroll\r\n             } = useContext(Context);\r\n\r\n    const [isLoadingMore, setIsLoadingMore] = useState(false);\r\n    const listRef = useRef(null);\r\n\r\n    const fromDateRef = useRef(null);\r\n    const toDateRef = useRef(null);\r\n\r\n    const toggleMobileMenu = () => setIsMobileMenuOpen(!isMobileMenuOpen);\r\n\r\n    const loadMore = useCallback(() => {\r\n        // Now using the centralized hasMoreNotifications status\r\n        if (isLoadingMore || !hasMoreNotifications) return;\r\n        \r\n        setIsLoadingMore(true);\r\n        setNotificationPageNumber(prevPage => prevPage + 1);\r\n    }, [isLoadingMore, hasMoreNotifications, setNotificationPageNumber]); // <-- Dependency updated\r\n\r\n    useEffect(() => {\r\n        const listEl = listRef.current;\r\n        if (!listEl) return;\r\n\r\n        const handleScroll = () => {\r\n            const { scrollTop, scrollHeight, clientHeight } = listEl;\r\n            // Trigger loadMore when near the bottom\r\n            if (scrollTop + clientHeight >= scrollHeight - 150) {\r\n                loadMore();\r\n            }\r\n        };\r\n\r\n        listEl.addEventListener('scroll', handleScroll);\r\n        return () => listEl.removeEventListener('scroll', handleScroll);\r\n    }, [loadMore]);\r\n\r\n    // FIX: Add useEffect to turn off isLoadingMore after a fetch completes.\r\n    useEffect(() => {\r\n        if (isLoadingMore) {\r\n            // A change in gdata or hasMoreNotifications signals the fetch has completed.\r\n            const timer = setTimeout(() => {\r\n                setIsLoadingMore(false);\r\n            }, 100); \r\n\r\n            return () => clearTimeout(timer);\r\n        }\r\n    }, [gdata, hasMoreNotifications, isLoadingMore]);\r\n\r\n\r\n    const handleTabClick = (tabName) => {\r\n        setActiveTab(tabName);\r\n        setIsEditMode(false);\r\n        setSelectedNotifications([]);\r\n        if (isMobileMenuOpen) setIsMobileMenuOpen(false);\r\n    };\r\n\r\n    const handleEditClick = () => {\r\n        setIsEditMode(true);\r\n        setSelectedNotifications([]);\r\n    };\r\n\r\n    const handleCancelEdit = () => {\r\n        setIsEditMode(false);\r\n        setSelectedNotifications([]);\r\n    };\r\n    \r\n    const clearFilters = () => {\r\n        setFromDate(null);\r\n        setToDate(null);\r\n        setSearchQuery(\"\");\r\n        setActiveTab(\"All\");\r\n    };\r\n    \r\n    const getKindIcon = (kind) => {\r\n        const icons = {\r\n            alert: <FaTimesCircle size={18} className=\"text-red-500\" />,\r\n            warning: <FaExclamationTriangle size={18} className=\"text-yellow-500\" />,\r\n            update: <FaInfoCircle size={18} className=\"text-blue-500\" />,\r\n        };\r\n        return icons[kind] || <FaInfoCircle size={18} className=\"text-gray-400\" />;\r\n    };\r\n\r\n    const handleStar = async (id) => {\r\n        if (isEditMode) {\r\n            handleSelectNotification(id);\r\n            return;\r\n        }\r\n        const originalGdata = [...gdata];\r\n        const updatedGdata = gdata.map((msg) => msg.id === id ? { ...msg, stared: !msg.stared } : msg);\r\n        setGdata(updatedGdata);\r\n        try {\r\n            const notificationToUpdate = gdata.find((msg) => msg.id === id);\r\n            if (notificationToUpdate.stared) {\r\n                await notificationsApi.put(`/unStar/${id}`);\r\n            } else {\r\n                await notificationsApi.put(`/stared/${id}`);\r\n            }\r\n        } catch (error) {\r\n            setGdata(originalGdata);\r\n        }\r\n    };\r\n\r\n    const handleDeleteSingle = async (id) => {\r\n        if (isEditMode) {\r\n            handleSelectNotification(id);\r\n            return;\r\n        }\r\n        const originalGdata = [...gdata];\r\n        const notificationToDelete = gdata.find((msg) => msg.id === id);\r\n        setGdata(gdata.filter((msg) => msg.id !== id));\r\n        if (notificationToDelete && !notificationToDelete.read) {\r\n            decrementUnreadCount();\r\n        }\r\n        try {\r\n            await notificationsApi.delete(`/delete/${id}`);\r\n        } catch (error) {\r\n            setGdata(originalGdata); \r\n        }\r\n    };\r\n\r\n    const handleSelectNotification = (id) => {\r\n        setSelectedNotifications((prev) =>\r\n            prev.includes(id) ? prev.filter((selId) => selId !== id) : [...prev, id]\r\n        );\r\n    };\r\n\r\n    const handleNotificationClick = (message) => {\r\n        if (isEditMode) {\r\n            handleSelectNotification(message.id);\r\n        } else if (message.link) {\r\n            markAsRead(message.id);\r\n            navigate(message.link);\r\n        }\r\n    };\r\n\r\n    const handleDeleteSelected = async () => {\r\n        const originalGdata = [...gdata];\r\n        const idsToDelete = selectedNotifications;\r\n        const unreadDeletedCount = gdata.filter(msg => idsToDelete.includes(msg.id) && !msg.read).length;\r\n        setGdata(gdata.filter((msg) => !idsToDelete.includes(msg.id)));\r\n        setIsEditMode(false);\r\n        setSelectedNotifications([]);\r\n        for (let i = 0; i < unreadDeletedCount; i++) {\r\n            decrementUnreadCount();\r\n        }\r\n        try {\r\n            await Promise.all(idsToDelete.map(id => notificationsApi.delete(`/delete/${id}`)));\r\n        } catch (error) {\r\n            setGdata(originalGdata); \r\n        }\r\n    };\r\n\r\n    const getTimeAgo = (date) => {\r\n        try { return formatDistanceToNow(parseISO(date), { addSuffix: true }); } \r\n        catch (error) { return \"\"; }\r\n    };\r\n\r\n    const getTimestamp = (dateString) => {\r\n        try { return formatInTimeZone(dateString, \"Asia/Kolkata\", \"MMM d, h:mm a\"); } \r\n        catch (error) { return \"\"; }\r\n    };\r\n\r\n    const filteredNotifications = useMemo(() => {\r\n        let filtered = gdata || [];\r\n        const lowerCaseQuery = searchQuery.toLowerCase();\r\n\r\n        if (activeTab === \"Unread\") filtered = filtered.filter((msg) => !msg.read);\r\n        else if (activeTab === \"Starred\") filtered = filtered.filter((msg) => msg.stared);\r\n        \r\n        if (searchQuery) {\r\n            filtered = filtered.filter( (msg) =>\r\n                msg.message?.toLowerCase().includes(lowerCaseQuery) ||\r\n                msg.subject?.toLowerCase().includes(lowerCaseQuery) ||\r\n                msg.sender?.toLowerCase().includes(lowerCaseQuery)\r\n            );\r\n        }\r\n\r\n        if (fromDate) {\r\n            const fromDateObj = parseISO(fromDate);\r\n            filtered = filtered.filter((msg) => parseISO(msg.createdAt) >= fromDateObj);\r\n        }\r\n\r\n        if (toDate) {\r\n            const toDateObj = parseISO(toDate);\r\n            const adjustedToDateObj = new Date(toDateObj);\r\n            adjustedToDateObj.setDate(adjustedToDateObj.getDate() + 1);\r\n            filtered = filtered.filter((msg) => parseISO(msg.createdAt) < adjustedToDateObj);\r\n        }\r\n\r\n        return filtered;\r\n    }, [gdata, activeTab, searchQuery, fromDate, toDate]);\r\n\r\n    // NEW: Check if any filters are active\r\n    const hasActiveFilters = useMemo(() => {\r\n        return (\r\n            searchQuery !== \"\" || \r\n            activeTab !== \"All\" || \r\n            fromDate !== null || \r\n            toDate !== null\r\n        );\r\n    }, [searchQuery, activeTab, fromDate, toDate]);\r\n\r\n    const topBarVariants = {\r\n        hidden: { y: -50, opacity: 0 },\r\n        visible: { y: 0, opacity: 1, transition: { type: \"spring\", stiffness: 100, damping: 10 }},\r\n    };\r\n\r\n    const buttonVariants = { hover: { scale: 1.05 }, tap: { scale: 0.95 } };\r\n    \r\n    return (\r\n        <div className={`w-full h-[90vh] flex flex-col ${theme === 'dark' ? 'bg-gray-900' : 'bg-gray-50'}`}>\r\n            \r\n            <motion.div\r\n                className={`flex-shrink-0 shadow-sm border-b z-20 w-full ${\r\n                    theme === 'dark' ? 'bg-black border-gray-700' : 'bg-white border-gray-200'\r\n                }`}\r\n                initial=\"hidden\"\r\n                animate=\"visible\"\r\n                variants={topBarVariants}\r\n            >\r\n                <div className={`sm:hidden py-2 flex items-center justify-between px-3 h-[50px] ${theme === 'dark' ? 'bg-black' : 'bg-white'}`}>\r\n                    <motion.button onClick={toggleMobileMenu} className={`${theme === 'dark' ? 'text-white hover:text-gray-300' : 'text-gray-600 hover:text-gray-800'}`} whileHover={{ scale: 1.1 }} whileTap={{ scale: 0.95 }}>\r\n                        <FaBars size={18} />\r\n                    </motion.button>\r\n                    <div className=\"relative flex-1 mx-3\">\r\n                        <FaSearch className={`absolute left-3.5 top-1/2 transform -translate-y-1/2 ${theme === 'dark' ? 'text-gray-400' : 'text-gray-400'}`} size={14}/>\r\n                        <input type=\"text\" placeholder=\"Search...\" className={`w-full pl-10 pr-4 py-2 text-sm rounded-full border focus:ring-2 focus:ring-indigo-200 h-[40px] ${ theme === 'dark' ? 'border-gray-600 bg-gray-800 text-white placeholder-gray-400 focus:bg-gray-700 focus:border-indigo-500' : 'border-gray-200 bg-gray-50 text-black placeholder-gray-500 focus:bg-white focus:border-indigo-500'}`} value={searchQuery} onChange={(e) => setSearchQuery(e.target.value)}/>\r\n                    </div>\r\n                </div>\r\n                <div className=\"hidden sm:flex items-center space-x-4 py-2 px-4 h-[60px]\">\r\n                    <div className={`flex space-x-1 p-1 rounded-lg ${theme === 'dark' ? 'bg-gray-800' : 'bg-gray-100'}`}>\r\n                        {[\"All\", \"Unread\", \"Starred\"].map((tab) => (\r\n                            <motion.button key={tab} style={{ borderRadius: \"20px\" }} onClick={() => handleTabClick(tab)} className={`py-1 px-3 text-sm font-medium flex items-center transition-colors ${ activeTab === tab ? \"bg-blue-600 text-white rounded-md\" : theme === 'dark' ? \"text-gray-300 hover:text-white\" : \"text-gray-600 hover:text-gray-800\"}`} whileHover={{ scale: 1.03 }} whileTap={{ scale: 0.97 }}>\r\n                                {tab === \"All\" && <FaInbox className=\"mr-1.5\" size={14} />}\r\n                                {tab === \"Unread\" && <FaEnvelope className=\"mr-1.5\" size={14} />}\r\n                                {tab === \"Starred\" && <FaStar className=\"mr-1.5\" size={14} />}\r\n                                {tab}\r\n                            </motion.button>\r\n                        ))}\r\n                    </div>\r\n                    <div className=\"relative flex-1\">\r\n                        <FaSearch className={`absolute left-4 top-1/2 transform -translate-y-1/2 ${theme === 'dark' ? 'text-gray-400' : 'text-gray-400'}`} size={15}/>\r\n                        <input type=\"text\" placeholder=\"Search notifications...\" className={`w-full h-[36px] pl-10 pr-4 text-sm rounded-lg border focus:ring-1 focus:ring-indigo-200 ${theme === 'dark' ? 'border-gray-600 bg-gray-800 text-white placeholder-gray-400 focus:bg-gray-700 focus:border-indigo-500' : 'border-gray-200 bg-white text-black placeholder-gray-500 focus:bg-white focus:border-indigo-500'}`} value={searchQuery} onChange={(e) => setSearchQuery(e.target.value)}/>\r\n                    </div>\r\n                    <div className=\"flex items-center space-x-2\">\r\n                        <button onClick={() => fromDateRef.current?.showPicker()} className={`flex items-center space-x-2 h-[36px] px-3 text-sm rounded-lg border transition-colors ${theme === 'dark' ? 'border-gray-600 bg-gray-800 text-gray-300 hover:bg-gray-700' : 'border-gray-200 bg-white text-gray-600 hover:bg-gray-50'}`}>\r\n                            <span>From</span>\r\n                            <FaCalendar className={`${theme === 'dark' ? 'text-gray-400' : 'text-gray-400'}`} size={14} />\r\n                        </button>\r\n                        <input ref={fromDateRef} type=\"date\" className=\"sr-only\" value={fromDate || \"\"} onChange={(e) => setFromDate(e.target.value)}/>\r\n                        <button onClick={() => toDateRef.current?.showPicker()} className={`flex items-center space-x-2 h-[36px] px-3 text-sm rounded-lg border transition-colors ${theme === 'dark' ? 'border-gray-600 bg-gray-800 text-gray-300 hover:bg-gray-700' : 'border-gray-200 bg-white text-gray-600 hover:bg-gray-50'}`}>\r\n                            <span>To</span>\r\n                            <FaCalendar className={`${theme === 'dark' ? 'text-gray-400' : 'text-gray-400'}`} size={14} />\r\n                        </button>\r\n                        <input ref={toDateRef} type=\"date\" className=\"sr-only\" value={toDate || \"\"} onChange={(e) => setToDate(e.target.value)}/>\r\n                        <button onClick={clearFilters} className={`flex items-center justify-center h-[36px] w-[36px] text-sm rounded-lg border transition-colors ${theme === 'dark' ? 'border-gray-600 bg-gray-800 text-gray-400 hover:bg-gray-700 hover:text-red-400' : 'border-gray-200 bg-white text-gray-500 hover:bg-gray-50 hover:text-red-500'}`} title=\"Clear Filters\">\r\n                            <FaTimes size={14} />\r\n                        </button>\r\n                    </div>\r\n                    <div className=\"flex items-center\">\r\n                        <div className=\"flex items-center space-x-2\">\r\n                            {!isEditMode ? (\r\n                                <motion.button style={{ borderRadius: \"8px\" }} onClick={handleEditClick} className=\"py-1 px-2 text-xs font-medium text-red-700 bg-red-100 hover:bg-red-200 rounded-md flex items-center\" variants={buttonVariants} whileHover=\"hover\" whileTap=\"tap\">\r\n                                    <FaEraser className=\"mr-1\" size={12} />Edit\r\n                                </motion.button>\r\n                            ) : (\r\n                                <>\r\n                                    <motion.button onClick={handleCancelEdit} style={{ borderRadius: \"10px\" }} className={`py-1.5 px-3 text-sm font-medium rounded-lg flex items-center ${theme === 'dark' ? 'text-gray-300 bg-gray-700 hover:bg-gray-600' : 'text-gray-700 bg-gray-200 hover:bg-gray-300'}`} variants={buttonVariants} whileHover=\"hover\" whileTap=\"tap\">Cancel</motion.button>\r\n                                    <motion.button onClick={handleDeleteSelected} style={{ borderRadius: \"10px\" }} className=\"py-1.5 px-3 text-sm font-medium text-white bg-blue-600 hover:bg-red-700 rounded-lg flex items-center\" variants={buttonVariants} whileHover=\"hover\" whileTap=\"tap\">\r\n                                        <FaTrashAlt className=\"mr-1.5\" size={12} />Delete\r\n                                    </motion.button>\r\n                                </>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </motion.div>\r\n\r\n\r\n            <div\r\n                ref={listRef}\r\n                // FIX: Apply centering classes when the list is empty and not loading\r\n                className={`flex-1 overflow-y-auto ${!isLoadingMore && filteredNotifications?.length === 0 ? 'flex items-center justify-center' : ''}`}\r\n            >\r\n                {filteredNotifications?.length > 0 ? (\r\n                    <div className=\"p-2 notifications-list\"> \r\n                        {filteredNotifications.map((message) => (\r\n                            <motion.div\r\n                                key={message.id}\r\n                                className={`rounded-lg shadow-sm border mb-1.5 cursor-pointer overflow-hidden relative ${\r\n                                    selectedNotifications.includes(message.id) ? \"border-indigo-400 ring-2 ring-indigo-200\" : theme === 'dark' ? \"border-gray-700\" : \"border-gray-200\"\r\n                                } ${\r\n                                    !message.read ? (theme === 'dark' ? \"bg-gradient-to-r from-gray-800 to-gray-700\" : \"bg-gradient-to-r from-indigo-50 to-purple-50\") : (theme === 'dark' ? \"bg-gray-800\" : \"bg-white\")\r\n                                }`}\r\n                                onClick={() => handleNotificationClick(message)}\r\n                                whileHover={{ y: -2, boxShadow: \"0 4px 10px rgba(0,0,0,0.08)\" }}\r\n                                transition={{ duration: 0.15 }}\r\n                            >\r\n                                <div className=\"sm:hidden flex flex-col p-2.5\">\r\n                                    <div className=\"flex items-start\">\r\n                                        <div className=\"pr-3 pt-1\">{isEditMode ? (<FaCheckCircle size={18} className={ selectedNotifications.includes(message.id) ? \"text-indigo-600\" : \"text-gray-300\" }/>) : ( getKindIcon(message.kind) )}</div>\r\n                                        <div className=\"flex-1 overflow-hidden pr-8\">\r\n                                            <div className={`font-semibold text-sm truncate ${theme === 'dark' ? 'text-white' : 'text-gray-800'}`}>{message.subject}</div>\r\n                                            <div className={`text-xs mt-1 truncate ${theme === 'dark' ? 'text-gray-300' : 'text-gray-600'}`}>{message.message}</div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className={`flex justify-between items-center mt-2 pt-2 border-t ${theme === 'dark' ? 'border-gray-600' : 'border-gray-200/80'}`}>\r\n                                        <div className=\"flex flex-col items-start\">\r\n                                            <div className=\"text-xs font-medium text-indigo-600 bg-indigo-100 px-2 py-0.5 rounded-full\">{message.category}</div>\r\n                                            <div className={`font-bold text-xs mt-1 ${theme === 'dark' ? 'text-gray-200' : 'text-gray-700'}`}>{message.sender}</div>\r\n                                        </div>\r\n                                        <div className=\"flex flex-col items-end text-xs\">\r\n                                            <span className={`font-semibold ${theme === 'dark' ? 'text-gray-300' : 'text-gray-600'}`}>{getTimeAgo(message.createdAt)}</span>\r\n                                            <span className={`mt-0.5 ${theme === 'dark' ? 'text-gray-500' : 'text-gray-400'}`}>{getTimestamp(message.createdAt)}</span>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"absolute top-2.5 right-2.5 flex flex-col items-center justify-center space-y-3\">\r\n                                        <FaStar size={16} className={`cursor-pointer transition-colors ${message.stared ? \"text-yellow-400\" : \"text-gray-300 hover:text-yellow-400\"}`} onClick={(e) => { e.stopPropagation(); handleStar(message.id); }}/>\r\n                                        <FaTrashAlt size={15} className=\"cursor-pointer text-gray-300 hover:text-red-500 transition-colors\" onClick={(e) => { e.stopPropagation(); handleDeleteSingle(message.id); }}/>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"hidden sm:flex items-center w-full h-[90px] p-2\">\r\n                                    <div className=\"px-2\">{isEditMode ? (<FaCheckCircle size={18} className={ selectedNotifications.includes(message.id) ? \"text-indigo-600\" : \"text-gray-300\" }/>) : ( getKindIcon(message.kind) )}</div>\r\n                                    <div className=\"flex-1 flex flex-col justify-center overflow-hidden h-full pl-3\">\r\n                                        <div className={`font-semibold text-sm truncate ${theme === 'dark' ? 'text-white' : 'text-gray-800'}`}>{message.subject}</div>\r\n                                        <div className={`text-xs mt-1 truncate ${theme === 'dark' ? 'text-gray-300' : 'text-gray-600'}`}>{message.message}</div>\r\n                                    </div>\r\n                                    <div className=\"flex flex-col items-start justify-center px-4 w-48 h-full shrink-0\">\r\n                                        <div className={`font-bold text-sm truncate w-full ${theme === 'dark' ? 'text-white' : 'text-gray-800'}`}>{message.sender}</div>\r\n                                        <div className=\"text-xs font-medium text-indigo-600 mt-1\">{message.category}</div>\r\n                                    </div>\r\n                                    <div className=\"flex flex-col items-end justify-center px-4 w-40 text-right h-full shrink-0\">\r\n                                        <div className={`text-xs font-semibold ${theme === 'dark' ? 'text-gray-300' : 'text-gray-600'}`}>{getTimeAgo(message.createdAt)}</div>\r\n                                        <div className={`text-xs mt-1 ${theme === 'dark' ? 'text-gray-500' : 'text-gray-400'}`}>{getTimestamp(message.createdAt)}</div>\r\n                                    </div>\r\n                                    <div className=\"flex flex-col items-center justify-center space-y-3 px-4\">\r\n                                        <motion.div whileHover={{ scale: 1.2 }} whileTap={{ scale: 0.9 }}>\r\n                                            <FaStar size={16} className={`cursor-pointer transition-colors ${message.stared ? \"text-yellow-400\" : \"text-gray-300 hover:text-yellow-400\"}`} onClick={(e) => { e.stopPropagation(); handleStar(message.id); }}/>\r\n                                        </motion.div>\r\n                                        <motion.div whileHover={{ scale: 1.2 }} whileTap={{ scale: 0.9 }}>\r\n                                            <FaTrashAlt size={15} className=\"cursor-pointer text-gray-300 hover:text-red-500 transition-colors\" onClick={(e) => { e.stopPropagation(); handleDeleteSingle(message.id); }}/>\r\n                                        </motion.div>\r\n                                    </div>\r\n                                </div>\r\n                            </motion.div>\r\n                        ))}\r\n                        {/* UPDATED: Loading spinner */}\r\n                        {isLoadingMore && ( \r\n                            <div className={`text-center py-4 flex justify-center items-center space-x-2 ${ theme === 'dark' ? 'text-gray-400' : 'text-gray-600' }`}>\r\n                                <FaSync size={16} className=\"text-blue-500 animate-spin\" style={{ animation: 'spin 1s linear infinite' }}/>\r\n                                <span>Loading more...</span>\r\n                            </div> \r\n                        )}\r\n                        {!hasMoreNotifications && ( <div className={`text-center py-4 ${ theme === 'dark' ? 'text-gray-500' : 'text-gray-500' }`}>No more notifications.</div> )}\r\n                    </div>\r\n                ) : (\r\n                    // Empty state block\r\n                    !isLoadingMore && (\r\n                        // Removed justify-center h-full, as the parent listRef now handles centering.\r\n                        <div className=\"p-2 notifications-list w-full\"> \r\n                            <div className=\"flex flex-col items-center text-center p-4\">\r\n                                {hasActiveFilters ? (\r\n                                    // Case 1: Filters are active but no results found\r\n                                    <>\r\n                                        <FaSearch size={48} className={`mb-4 ${theme === 'dark' ? 'text-indigo-400' : 'text-indigo-600'}`} />\r\n                                        <h3 className={`text-xl font-semibold ${ theme === 'dark' ? 'text-gray-200' : 'text-gray-700'}`}>No Matches Found</h3>\r\n                                        <p className={`mt-1 text-sm ${ theme === 'dark' ? 'text-gray-400' : 'text-gray-500' }`}>Try adjusting your filters or clearing the search query.</p>\r\n                                    </>\r\n                                ) : (\r\n                                    // Case 2: No filters are active (default view) and list is empty\r\n                                    <>\r\n                                        <FaCheckCircle size={48} className=\"mb-4 text-green-500\" />\r\n                                        <h3 className={`text-xl font-semibold ${ theme === 'dark' ? 'text-gray-200' : 'text-gray-700'}`}>You're All Caught Up!</h3>\r\n                                        <p className={`mt-1 text-sm ${ theme === 'dark' ? 'text-gray-400' : 'text-gray-500' }`}>No notifications to show.</p>\r\n                                    </>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                    )\r\n                )}\r\n            </div>\r\n\r\n            <AnimatePresence>\r\n                {isMobileMenuOpen && (\r\n                    <>\r\n                        <motion.div key=\"overlay\" className=\"fixed inset-0 backdrop-blur-sm bg-opacity-50 z-30 sm:hidden\" initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }} onClick={() => setIsMobileMenuOpen(false)}/>\r\n                        <motion.div key=\"sidebar\" className={`fixed top-0 left-0 h-full w-3/4 max-w-sm z-40 sm:hidden flex flex-col ${theme === 'dark' ? 'bg-gray-800' : 'bg-white'}`} initial={{ x: \"-100%\" }} animate={{ x: 0 }} exit={{ x: \"-100%\" }} transition={{ type: \"tween\", ease: \"easeInOut\", duration: 0.3 }}>\r\n                            <div className={`flex items-center justify-between p-4 border-b ${theme === 'dark' ? 'border-gray-700' : 'border-gray-200'}`}>\r\n                                <h5 className={`font-bold text-lg ${theme === 'dark' ? 'text-white' : 'text-gray-800'}`}>Filters & Actions</h5>\r\n                                <motion.button onClick={() => setIsMobileMenuOpen(false)} whileHover={{ scale: 1.1, rotate: 90 }} whileTap={{ scale: 0.9 }}>\r\n                                    <FaTimes size={20} className={`${theme === 'dark' ? 'text-gray-300' : 'text-gray-600'}`} />\r\n                                </motion.button>\r\n                            </div>\r\n                            <div className=\"flex-1 overflow-y-auto\">\r\n                                <div className={`flex border-b h-12 ${theme === 'dark' ? 'border-gray-700' : 'border-gray-200'}`}>\r\n                                    {[\"All\", \"Unread\", \"Starred\"].map((tab) => (<button key={tab} onClick={() => handleTabClick(tab)} className={`flex-1 h-full py-3 text-sm font-medium transition-colors ${activeTab === tab ? \"bg-indigo-50 text-indigo-600\" : (theme === 'dark' ? \"text-gray-300 hover:bg-gray-700\" : \"text-gray-500 hover:bg-gray-50\")}`}>{tab}</button>))}\r\n                                </div>\r\n                                <div className=\"p-4 space-y-4\">\r\n                                    <div className=\"flex justify-between items-center\">\r\n                                        <h6 className={`text-sm font-semibold flex items-center ${theme === 'dark' ? 'text-gray-300' : 'text-gray-500'}`}><FaFilter className=\"inline-block mr-2\" size={12} />Filters</h6>\r\n                                        <button onClick={clearFilters} className={`py-1 px-3 text-xs font-medium rounded-md ${theme === 'dark' ? 'text-gray-300 bg-gray-700 hover:bg-gray-600' : 'text-gray-700 bg-gray-100 hover:bg-gray-200'}`}>Clear All</button>\r\n                                    </div>\r\n                                    <div className=\"grid grid-cols-2 gap-3 pt-2\">\r\n                                        <div className=\"flex items-center space-x-2\">\r\n                                            <button onClick={() => fromDateRef.current?.showPicker()} className={`p-2 text-sm rounded-md border ${theme === 'dark' ? 'border-gray-600 bg-gray-700' : 'border-gray-300 bg-white'}`}><FaCalendar className={`${theme === 'dark' ? 'text-gray-400' : 'text-gray-500'}`} size={14} /></button>\r\n                                            <span className={`text-xs w-20 ${theme === 'dark' ? 'text-gray-300' : 'text-gray-700'}`}>{fromDate ? format(parseISO(fromDate), \"MMM d, yyyy\") : \"From Date\"}</span>\r\n                                            <input ref={fromDateRef} type=\"date\" className=\"sr-only\" value={fromDate || \"\"} onChange={(e) => setFromDate(e.target.value)}/>\r\n                                        </div>\r\n                                        <div className=\"flex items-center space-x-2\">\r\n                                            <button onClick={() => toDateRef.current?.showPicker()} className={`p-2 text-sm rounded-md border ${theme === 'dark' ? 'border-gray-600 bg-gray-700' : 'border-gray-300 bg-white'}`}><FaCalendar className={`${theme === 'dark' ? 'text-gray-400' : 'text-gray-500'}`} size={14} /></button>\r\n                                            <span className={`text-xs w-20 ${theme === 'dark' ? 'text-gray-300' : 'text-gray-700'}`}>{toDate ? format(parseISO(toDate), \"MMM d, yyyy\") : \"To Date\"}</span>\r\n                                            <input ref={toDateRef} type=\"date\" className=\"sr-only\" value={toDate || \"\"} onChange={(e) => setToDate(e.target.value)}/>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"flex space-x-2 pt-4\">\r\n                                        {!isEditMode ? (<button onClick={handleEditClick} className={`flex-1 py-2 px-3 text-sm font-medium rounded-lg ${theme === 'dark' ? 'bg-gray-700 hover:bg-gray-600 text-gray-300' : 'bg-gray-100 hover:bg-gray-200 text-gray-800'}`}>Edit</button>) : (<>\r\n                                            <button onClick={handleCancelEdit} className={`flex-1 py-2 px-3 text-sm font-medium rounded-lg ${theme === 'dark' ? 'bg-gray-600 hover:bg-gray-500 text-gray-300' : 'bg-gray-200 hover:bg-gray-300 text-gray-800'}`}>Cancel</button>\r\n                                            <button onClick={handleDeleteSelected} className=\"flex-1 py-2 px-3 bg-red-600 hover:bg-red-700 text-white text-sm font-medium rounded-lg\">Delete</button>\r\n                                        </>)}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </motion.div>\r\n                    </>\r\n                )}\r\n            </AnimatePresence>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default NotificationSystem;"],"names":["NotificationSystem","isMobileMenuOpen","setIsMobileMenuOpen","useState","activeTab","setActiveTab","searchQuery","setSearchQuery","isEditMode","setIsEditMode","selectedNotifications","setSelectedNotifications","fromDate","setFromDate","toDate","setToDate","navigate","useNavigate","gdata","setGdata","markAsRead","decrementUnreadCount","theme","notificationPageNumber","setNotificationPageNumber","notificationPageSize","hasMoreNotifications","useContext","Context","isLoadingMore","setIsLoadingMore","listRef","useRef","fromDateRef","toDateRef","loadMore","useCallback","prevPage","useEffect","listEl","current","handleScroll","scrollTop","scrollHeight","clientHeight","addEventListener","removeEventListener","timer","setTimeout","clearTimeout","handleTabClick","tabName","handleEditClick","handleCancelEdit","clearFilters","getKindIcon","kind","alert","_jsx","FaTimesCircle","size","className","warning","FaExclamationTriangle","update","FaInfoCircle","handleStar","async","handleSelectNotification","id","originalGdata","updatedGdata","map","msg","_objectSpread","stared","find","notificationsApi","put","concat","error","handleDeleteSingle","notificationToDelete","filter","read","delete","prev","includes","selId","handleDeleteSelected","idsToDelete","unreadDeletedCount","length","i","Promise","all","getTimeAgo","date","formatDistanceToNow","parseISO","addSuffix","getTimestamp","dateString","formatInTimeZone","filteredNotifications","useMemo","filtered","lowerCaseQuery","toLowerCase","_msg$message","_msg$subject","_msg$sender","message","subject","sender","fromDateObj","createdAt","toDateObj","adjustedToDateObj","Date","setDate","getDate","hasActiveFilters","buttonVariants","hover","scale","tap","_jsxs","children","motion","div","initial","animate","variants","hidden","y","opacity","visible","transition","type","stiffness","damping","button","onClick","toggleMobileMenu","whileHover","whileTap","FaBars","FaSearch","placeholder","value","onChange","e","target","tab","style","borderRadius","FaInbox","FaEnvelope","FaStar","_fromDateRef$current","showPicker","FaCalendar","ref","_toDateRef$current","title","FaTimes","_Fragment","FaTrashAlt","FaEraser","link","handleNotificationClick","boxShadow","duration","FaCheckCircle","category","stopPropagation","FaSync","animation","AnimatePresence","exit","x","ease","rotate","FaFilter","_fromDateRef$current2","format","_toDateRef$current2"],"sourceRoot":""}