"use strict";(self.webpackChunktechlife=self.webpackChunktechlife||[]).push([[361],{6361:(e,t,r)=>{r.r(t),r.d(t,{default:()=>j});var a=r(9379),o=r(5043),n=r(7234),l=r(9722),s=r(6396),d=r(5239),c=r.n(d),i=r(5439),g=r(579);const x="http://localhost:8087/api/payroll",y=localStorage.getItem("accessToken"),b=async(e,t,r)=>(await l.A.get("".concat(x,"/employees/").concat(e,"/salary/").concat(t,"/").concat(r),{headers:{Authorization:"Bearer ".concat(y)}})).data.data,m=async(e,t)=>(await l.A.put("".concat(x,"/admin/payroll/").concat(e,"/update"),t,{headers:{Authorization:"Bearer ".concat(y)}})).data,p=async()=>{var e;const t=null===(e=(await l.A.get("".concat(x,"/employee"),{headers:{Authorization:"Bearer ".concat(y)}})).data)||void 0===e?void 0:e.data;return Array.isArray(t)?t:[]},u=e=>({January:1,February:2,March:3,April:4,May:5,June:6,July:7,August:8,September:9,October:10,November:11,December:12}[e]),h=e=>{var t,r,a,o,n;if(!e)return f();console.log("Transform function input:",e);const l=void 0!==e.payrollId?e:null,s=e.employee||e,d=s.annualSalary||0,c=d?1e5*d/12:0,i=(null===l||void 0===l?void 0:l.grossEarnings)||(c>0?c:0),g=(null===l||void 0===l?void 0:l.totalDeductions)||(c>0?Math.round(.12*c)+200:0),x=(null===l||void 0===l?void 0:l.netSalary)||i-g,y=(null===l||void 0===l?void 0:l.bonusAmount)||0,b=(null===l||void 0===l?void 0:l.hikePercentage)||0;return{id:s.id||s.employeeId,employeeId:s.employeeId,employeeName:s.empName||s.employeeName,email:s.email||"",phoneNumber:s.phoneNumber||"",annualSalary:d,accountNumber:s.accountNumber||"",ifsccode:s.IFSCcode||s.ifsccode||"",bankName:s.bankName||"",pfnum:s.PFnum||s.pfnum||"",panNumber:s.panNumber||"",aadharNumber:s.aadharNumber||"",uanNumber:s.uanNumber||"",department:s.department||"",designation:s.designation||"",bankAccountName:s.empName||s.employeeName,phoneNo:s.phoneNumber||"",panNo:s.panNumber||"",standardDays:Number(null===l||void 0===l?void 0:l.standardDays)||Number(null===l||void 0===l?void 0:l.totalWorkingDays)||Number(null===l||void 0===l?void 0:l.workingDays)||Number(null===l||void 0===l||null===(t=l.attendance)||void 0===t?void 0:t.standardDays)||26,payableDays:Number(null===l||void 0===l?void 0:l.payableDays)||Number(null===l||void 0===l?void 0:l.paidDays)||Number(null===l||void 0===l||null===(r=l.attendance)||void 0===r?void 0:r.payableDays)||26,lossOfPayDays:Number(null===l||void 0===l?void 0:l.lossOfPayDays)||Number(null===l||void 0===l?void 0:l.lopDays)||Number(null===l||void 0===l||null===(a=l.attendance)||void 0===a?void 0:a.lossOfPayDays)||0,lopReversalDays:Number(null===l||void 0===l?void 0:l.lopReversalDays)||Number(null===l||void 0===l||null===(o=l.attendance)||void 0===o?void 0:o.lopReversalDays)||0,arrearDays:Number(null===l||void 0===l?void 0:l.arrearDays)||Number(null===l||void 0===l||null===(n=l.attendance)||void 0===n?void 0:n.arrearDays)||0,bonus:y,hike:b,earnings:l?[{name:"BASIC",monthlyRate:l.basicSalary||0,currentMonth:l.basicSalary||0,arrear:0,total:l.basicSalary||0},{name:"HRA",monthlyRate:l.hraAmount||0,currentMonth:l.hraAmount||0,arrear:0,total:l.hraAmount||0},{name:"CONVEYANCE",monthlyRate:l.conveyanceAllowance||0,currentMonth:l.conveyanceAllowance||0,arrear:0,total:l.conveyanceAllowance||0},{name:"MEDICAL",monthlyRate:l.medicalAllowance||0,currentMonth:l.medicalAllowance||0,arrear:0,total:l.medicalAllowance||0},{name:"SPECIAL ALLOWANCE",monthlyRate:l.specialAllowance||0,currentMonth:l.specialAllowance||0,arrear:0,total:l.specialAllowance||0}]:c>0?[{name:"BASIC",monthlyRate:Math.round(.5*c),currentMonth:Math.round(.5*c),arrear:0,total:Math.round(.5*c)},{name:"HRA",monthlyRate:Math.round(.4*c),currentMonth:Math.round(.4*c),arrear:0,total:Math.round(.4*c)},{name:"SPECIAL ALLOWANCE",monthlyRate:Math.round(.1*c),currentMonth:Math.round(.1*c),arrear:0,total:Math.round(.1*c)}]:[],deductions:l?[{name:"PROVIDENT FUND",amount:l.providentFund||0},{name:"PROFESSIONAL TAX",amount:l.professionalTax||0},{name:"INCOME TAX",amount:l.incomeTax||0}]:c>0?[{name:"PROVIDENT FUND",amount:Math.round(.12*c)},{name:"PROFESSIONAL TAX",amount:200}]:[],grossEarnings:i,totalDeductions:g,netSalary:x,payrollId:null===l||void 0===l?void 0:l.payrollId}},f=()=>({id:"unknown",employeeId:"unknown",employeeName:"Unknown Employee",email:"",phoneNumber:"",annualSalary:0,accountNumber:"",ifsccode:"",bankName:"",pfnum:"",panNumber:"",aadharNumber:"",uanNumber:"",department:"",designation:"",bankAccountName:"Unknown Employee",phoneNo:"",panNo:"",pfNo:"",standardDays:26,payableDays:26,lossOfPayDays:0,lopReversalDays:0,arrearDays:0,bonus:0,hike:0,earnings:[],deductions:[],grossEarnings:0,totalDeductions:0,netSalary:0}),N=()=>{const{theme:e}=(0,o.useContext)(n.ob),t="dark"===e;return(0,g.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 flex items-center justify-center p-6 ".concat(t?"bg-gray-800":"bg-white"),children:(0,g.jsxs)("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8 text-center",children:[(0,g.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,g.jsx)("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,g.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Access Denied"}),(0,g.jsx)("p",{className:"text-gray-600 mb-6",children:"You don't have permission to access the payroll management system. This page is restricted to ADMIN users only."}),(0,g.jsx)("button",{onClick:()=>window.history.back(),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Go Back"})]})})},v=()=>(0,g.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 flex items-center justify-center",children:(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,g.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading payroll system..."})]})}),w=e=>{let{editingEmployee:t,onInputChange:r,onSaveEdit:a,onCancelEdit:l,loading:s}=e;const{theme:d}=(0,o.useContext)(n.ob),c="dark"===d;return t?(0,g.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:(0,g.jsxs)("div",{className:"rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto ".concat(c?"bg-gray-800":"bg-white"),children:[(0,g.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6",children:[(0,g.jsxs)("h2",{className:"text-2xl font-bold",children:["Edit Employee - ",t.employeeName]}),(0,g.jsx)("p",{className:"opacity-90",children:"Update employee details, bonus, and hike information"})]}),(0,g.jsxs)("div",{className:"p-6",children:[(0,g.jsxs)("div",{className:"mb-6",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold mb-4 ".concat(c?"text-white":"text-gray-800"),children:"Personal Information"}),(0,g.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(c?"text-gray-300":"text-gray-700"),children:"Employee Name"}),(0,g.jsx)("input",{type:"text",value:t.employeeName,onChange:e=>r("employeeName",e.target.value),className:"w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ".concat(c?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800")})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(c?"text-gray-300":"text-gray-700"),children:"Employee ID"}),(0,g.jsx)("input",{type:"text",value:t.employeeId,readOnly:!0,className:"w-full border rounded-lg px-4 py-2 ".concat(c?"bg-gray-600 border-gray-600 text-gray-400":"bg-gray-100 border-gray-300 text-gray-600")})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(c?"text-gray-300":"text-gray-700"),children:"Email"}),(0,g.jsx)("input",{type:"email",value:t.email,onChange:e=>r("email",e.target.value),className:"w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ".concat(c?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800")})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(c?"text-gray-300":"text-gray-700"),children:"Phone Number"}),(0,g.jsx)("input",{type:"tel",value:t.phoneNo,onChange:e=>r("phoneNo",e.target.value),className:"w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ".concat(c?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800")})]})]})]}),(0,g.jsxs)("div",{className:"mb-6",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold mb-4 ".concat(c?"text-white":"text-gray-800"),children:"Financial Information"}),(0,g.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(c?"text-gray-300":"text-gray-700"),children:"Annual Salary (LPA)"}),(0,g.jsx)("input",{type:"number",step:"0.1",value:t.annualSalary,onChange:e=>r("annualSalary",parseFloat(e.target.value)),className:"w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ".concat(c?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800")})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(c?"text-gray-300":"text-gray-700"),children:"Bonus Amount (\u20b9)"}),(0,g.jsx)("input",{type:"number",value:t.bonus||0,onChange:e=>r("bonus",Number(e.target.value)),className:"w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ".concat(c?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-800"),placeholder:"Enter bonus amount"})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(c?"text-gray-300":"text-gray-700"),children:"Hike Percentage (%)"}),(0,g.jsx)("input",{type:"number",step:"0.1",value:t.hike||0,onChange:e=>r("hike",Number(e.target.value)),className:"w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ".concat(c?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-800"),placeholder:"Enter hike percentage"})]})]})]}),(0,g.jsxs)("div",{className:"mb-6",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold mb-4 ".concat(c?"text-white":"text-gray-800"),children:"Bank Details"}),(0,g.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(c?"text-gray-300":"text-gray-700"),children:"Account Number"}),(0,g.jsx)("input",{type:"text",value:t.accountNumber,onChange:e=>r("accountNumber",e.target.value),className:"w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ".concat(c?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800")})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(c?"text-gray-300":"text-gray-700"),children:"IFSC Code"}),(0,g.jsx)("input",{type:"text",value:t.ifsccode,onChange:e=>r("ifsccode",e.target.value),className:"w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ".concat(c?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800")})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(c?"text-gray-300":"text-gray-700"),children:"Bank Name"}),(0,g.jsx)("input",{type:"text",value:t.bankName,onChange:e=>r("bankName",e.target.value),className:"w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ".concat(c?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800")})]})]})]}),(0,g.jsxs)("div",{className:"mb-6",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold mb-4 ".concat(c?"text-white":"text-gray-800"),children:"Government Identifiers"}),(0,g.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(c?"text-gray-300":"text-gray-700"),children:"PF Number"}),(0,g.jsx)("input",{type:"text",value:t.pfnum,onChange:e=>r("pfnum",e.target.value),className:"w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ".concat(c?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800")})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(c?"text-gray-300":"text-gray-700"),children:"PAN Number"}),(0,g.jsx)("input",{type:"text",value:t.panNumber,onChange:e=>r("panNumber",e.target.value),className:"w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ".concat(c?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800")})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(c?"text-gray-300":"text-gray-700"),children:"Aadhar Number"}),(0,g.jsx)("input",{type:"text",value:t.aadharNumber,onChange:e=>r("aadharNumber",e.target.value),className:"w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ".concat(c?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800")})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(c?"text-gray-300":"text-gray-700"),children:"UAN Number"}),(0,g.jsx)("input",{type:"text",value:t.uanNumber,onChange:e=>r("uanNumber",e.target.value),className:"w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ".concat(c?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800")})]})]})]}),(0,g.jsxs)("div",{className:"flex gap-4 justify-end pt-4 border-t ".concat(c?"border-gray-700":"border-gray-200"),children:[(0,g.jsx)("button",{onClick:l,className:"px-6 py-2 border rounded-lg transition-colors font-medium ".concat(c?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"),children:"Cancel"}),(0,g.jsx)("button",{onClick:a,disabled:s,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium disabled:opacity-50 flex items-center gap-2",children:s?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Saving..."]}):"Save Changes"})]})]})]})}):null},j=()=>{const[e,t]=(0,o.useState)("April"),[r,l]=(0,o.useState)("2025"),[d,x]=(0,o.useState)(null),[y,f]=(0,o.useState)(null),[j,A]=(0,o.useState)(!1),{userData:S}=(0,o.useContext)(n.ob),[D,k]=(0,o.useState)(!1),[I,E]=(0,o.useState)(!1),[C,L]=(0,o.useState)(!1),[P,T]=(0,o.useState)(""),[R,F]=(0,o.useState)([]),{theme:O}=((0,i.Zp)(),(0,o.useContext)(n.ob)),M="dark"===O,[B,U]=(0,o.useState)({employeeId:"",employeeName:"",email:"",phoneNumber:"",designation:"",department:"",annualSalary:0,accountNumber:"",ifsccode:"",bankName:"",pfnum:"",panNumber:"",aadharNumber:"",uanNumber:""}),[z,Y]=(0,o.useState)([]),G=(0,o.useRef)(null),H=((0,o.useCallback)((e,t)=>{U(r=>(0,a.A)((0,a.A)({},r),{},{[e]:t}))},[]),(0,o.useCallback)((e,t)=>{f(r=>(0,a.A)((0,a.A)({},r),{},{[e]:t}))},[]));(0,o.useEffect)(()=>{V()},[e,r]);const V=async()=>{try{L(!0);const t=await p();console.log("Raw employees from API:",t);const o=Array.isArray(t)?t:[],n=await Promise.all(o.map(async t=>{try{const o=u(e);console.log("Fetching payroll for ".concat(t.employeeId,", ").concat(o,", ").concat(r));const n=await b(t.employeeId,o,parseInt(r));if(console.log("Payroll API response for ".concat(t.employeeId,":"),n),n&&n.payrollId){console.log("Merging payroll data for ".concat(t.employeeId));const e=h(t),r=(0,a.A)((0,a.A)({},n),{},{employee:(0,a.A)((0,a.A)({},t),e)}),o=h(r);return console.log("Combined data for ".concat(t.employeeId,":"),o),o}return console.log("No payroll data for ".concat(t.employeeId,", using employee data only")),h(t)}catch(o){console.warn("No payroll data found for ".concat(t.employeeId,":"),o.message);const e=h(t);return console.log("Employee data without payroll for ".concat(t.employeeId,":"),e),e}}));console.log("Final employees data to set:",n),Y(n),L(!1)}catch(t){console.error("Error fetching employees:",t),Y([]),L(!1),alert("Failed to load employee data. Please try again.")}};if(!S)return(0,g.jsx)(v,{});if(!S||!(Array.isArray(S.roles)?S.roles.includes("ADMIN"):"ADMIN"===S.roles))return(0,g.jsx)(N,{});const W=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const r=Number(e);return isNaN(r)?"0.0":r.toFixed(t)},_=e=>{const t=Number(e);return isNaN(t)?"0.00":new Intl.NumberFormat("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}).format(t)},J=()=>{x(null),A(!1),f(null)},X=e=>{f((0,a.A)({},e)),A(!0)},K=(z||[]).map((e,t)=>{var r,o;const n=e.grossEarnings||(null===(r=e.earnings)||void 0===r?void 0:r.reduce((e,t)=>e+((null===t||void 0===t?void 0:t.total)||0),0))||0,l=e.totalDeductions||(null===(o=e.deductions)||void 0===o?void 0:o.reduce((e,t)=>e+((null===t||void 0===t?void 0:t.amount)||0),0))||0,s=e.bonus||0,d=e.netSalary||n-l+s;return(0,a.A)((0,a.A)({id:(null===e||void 0===e?void 0:e.id)||(null===e||void 0===e?void 0:e.employeeId)||"emp-".concat(t),employeeId:(null===e||void 0===e?void 0:e.employeeId)||"unknown-".concat(t),employeeName:(null===e||void 0===e?void 0:e.employeeName)||"Unknown Employee",designation:(null===e||void 0===e?void 0:e.designation)||"-",department:(null===e||void 0===e?void 0:e.department)||"-",email:(null===e||void 0===e?void 0:e.email)||"-",phoneNumber:(null===e||void 0===e?void 0:e.phoneNumber)||"-",annualSalary:(null===e||void 0===e?void 0:e.annualSalary)||0},e),{},{grossEarnings:n,totalDeductions:l,bonusAmount:s,netSalary:d,earnings:e.earnings||[],deductions:e.deductions||[]})}),q=K.filter(e=>{var t,r,a,o,n;if(!P.trim())return!0;const l=P.toLowerCase().trim();return(null===(t=e.employeeName)||void 0===t?void 0:t.toLowerCase().includes(l))||(null===(r=e.designation)||void 0===r?void 0:r.toLowerCase().includes(l))||(null===(a=e.employeeId)||void 0===a?void 0:a.toLowerCase().includes(l))||(null===(o=e.email)||void 0===o?void 0:o.toLowerCase().includes(l))||(null===(n=e.department)||void 0===n?void 0:n.toLowerCase().includes(l))||!1});if(d&&!j){const t=d,a=t.grossEarnings||0,o=t.totalDeductions||0,n=t.bonusAmount||0,l=t.netSalary||0;return(0,g.jsx)("div",{className:"min-h-screen p-6 ".concat(M?"bg-gray-900":"bg-gradient-to-br from-blue-50 to-purple-50"),children:(0,g.jsxs)("div",{className:"max-w-4xl mx-auto rounded-2xl shadow-2xl overflow-hidden border ".concat(M?"bg-gray-800 border-gray-700":"bg-white border-blue-100"),children:[(0,g.jsx)("div",{className:"bg-gradient-to-r from-blue-800 to-purple-800 text-white p-8",children:(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("h1",{className:"text-3xl font-bold",children:"ANASOL CONSULTANCY SERVICES PVT LTD"}),(0,g.jsx)("h2",{className:"text-xl mt-2 opacity-90",children:"SALARY SLIP"}),(0,g.jsxs)("div",{className:"mt-3 bg-white/20 px-4 py-1 rounded-full inline-block text-sm",children:[e," ",r]})]}),(0,g.jsx)("div",{className:"w-24 h-24 bg-white/20 rounded-xl flex items-center justify-center",children:(0,g.jsx)("img",{src:"/assets/anasol-logo.png",alt:"Anasol Logo",className:"w-20 h-20 object-contain"})})]})}),(0,g.jsxs)("div",{className:"p-4 border-b flex justify-between items-center ".concat(M?"bg-gray-700 border-gray-600":"bg-gray-50 border-gray-200"),children:[(0,g.jsx)("button",{onClick:J,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-medium",children:"\u2190 Back to Employee List"}),(0,g.jsx)("button",{onClick:()=>X(d),className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors font-medium",children:"Edit Salary"})]}),(0,g.jsxs)("div",{ref:G,className:"p-8",children:[(0,g.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[(0,g.jsxs)("div",{className:"p-6 rounded-xl shadow-sm border ".concat(M?"bg-gray-700 border-gray-600":"bg-white border-blue-100"),children:[(0,g.jsx)("h3",{className:"text-lg font-semibold mb-4 border-l-4 border-blue-500 pl-3 ".concat(M?"text-white":"text-gray-800"),children:"Personal Information"}),(0,g.jsxs)("div",{className:"space-y-3",children:[(0,g.jsxs)("div",{className:"flex justify-between items-center pb-2 border-b border-gray-100",children:[(0,g.jsx)("span",{className:"font-medium ".concat(M?"text-gray-300":"text-gray-600"),children:"Employee Name:"}),(0,g.jsx)("span",{className:"font-semibold ".concat(M?"text-white":"text-gray-800"),children:t.employeeName})]}),(0,g.jsxs)("div",{className:"flex justify-between items-center pb-2 border-b border-gray-100",children:[(0,g.jsx)("span",{className:"font-medium ".concat(M?"text-gray-300":"text-gray-600"),children:"Employee ID:"}),(0,g.jsx)("span",{className:"font-semibold ".concat(M?"text-white":"text-gray-800"),children:t.employeeId})]}),(0,g.jsxs)("div",{className:"flex justify-between items-center pb-2 border-b border-gray-100",children:[(0,g.jsx)("span",{className:"font-medium ".concat(M?"text-gray-300":"text-gray-600"),children:"Designation:"}),(0,g.jsx)("span",{className:"font-semibold ".concat(M?"text-white":"text-gray-800"),children:t.designation})]}),(0,g.jsxs)("div",{className:"flex justify-between items-center pb-2 border-b border-gray-100",children:[(0,g.jsx)("span",{className:"font-medium ".concat(M?"text-gray-300":"text-gray-600"),children:"Department:"}),(0,g.jsx)("span",{className:"font-semibold ".concat(M?"text-white":"text-gray-800"),children:t.department})]}),(0,g.jsxs)("div",{className:"flex justify-between items-center",children:[(0,g.jsx)("span",{className:"font-medium ".concat(M?"text-gray-300":"text-gray-600"),children:"Phone No:"}),(0,g.jsx)("span",{className:"font-semibold ".concat(M?"text-white":"text-gray-800"),children:t.phoneNo})]})]})]}),(0,g.jsxs)("div",{className:"p-6 rounded-xl shadow-sm border ".concat(M?"bg-gray-800 border-gray-700":"bg-white border-blue-100"),children:[(0,g.jsx)("h3",{className:"text-lg font-semibold mb-4 border-l-4 border-blue-500 pl-3 ".concat(M?"text-gray-200":"text-gray-800"),children:"Bank & Tax Information"}),(0,g.jsxs)("div",{className:"space-y-3",children:[(0,g.jsxs)("div",{className:"flex justify-between items-center pb-2 border-b border-gray-100",children:[(0,g.jsx)("span",{className:"font-medium ".concat(M?"text-gray-300":"text-gray-600"),children:"Bank A/C Name:"}),(0,g.jsx)("span",{className:"font-semibold ".concat(M?"text-white":"text-gray-800"),children:t.bankAccountName})]}),(0,g.jsxs)("div",{className:"flex justify-between items-center pb-2 border-b border-gray-100",children:[(0,g.jsx)("span",{className:"font-medium ".concat(M?"text-gray-300":"text-gray-600"),children:"PAN No:"}),(0,g.jsx)("span",{className:"font-semibold ".concat(M?"text-white":"text-gray-800"),children:t.panNo})]}),(0,g.jsxs)("div",{className:"flex justify-between items-center pb-2 border-b border-gray-100",children:[(0,g.jsx)("span",{className:"font-medium ".concat(M?"text-gray-300":"text-gray-600"),children:"PF No:"}),(0,g.jsx)("span",{className:"font-semibold ".concat(M?"text-white":"text-gray-800"),children:t.pfNo})]}),(0,g.jsxs)("div",{className:"flex justify-between items-center pb-2 border-b border-gray-100",children:[(0,g.jsx)("span",{className:"font-medium ".concat(M?"text-gray-300":"text-gray-600"),children:"IFSC Code:"}),(0,g.jsx)("span",{className:"font-semibold ".concat(M?"text-white":"text-gray-800"),children:t.ifsccode})]}),(0,g.jsxs)("div",{className:"flex justify-between items-center",children:[(0,g.jsx)("span",{className:"font-medium ".concat(M?"text-gray-300":"text-gray-600"),children:"Email:"}),(0,g.jsx)("span",{className:"font-semibold ".concat(M?"text-white":"text-gray-800"),children:t.email})]})]})]})]}),(0,g.jsxs)("div",{className:"mb-8",children:[(0,g.jsx)("h3",{className:"text-xl font-bold mb-4 border-l-4 border-blue-500 pl-3 ".concat(M?"text-gray-200":"text-gray-800"),children:"Attendance Information"}),(0,g.jsx)("div",{className:"overflow-x-auto rounded-xl shadow-sm border ".concat(M?"border-gray-600":"border-gray-200"),children:(0,g.jsxs)("table",{className:"min-w-full ".concat(M?"bg-gray-800":"bg-white"),children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{className:"".concat(M?"bg-gradient-to-r from-gray-700 to-gray-600":"bg-gradient-to-r from-gray-50 to-blue-50"),children:[(0,g.jsx)("th",{className:"border-b px-6 py-4 font-semibold ".concat(M?"border-gray-600 text-gray-300":"border-gray-200 text-gray-700"),children:"Standard Days"}),(0,g.jsx)("th",{className:"border-b px-6 py-4 font-semibold ".concat(M?"border-gray-600 text-gray-300":"border-gray-200 text-gray-700"),children:"Payable Days"}),(0,g.jsx)("th",{className:"border-b px-6 py-4 font-semibold ".concat(M?"border-gray-600 text-gray-300":"border-gray-200 text-gray-700"),children:"Loss of Pay Days"}),(0,g.jsx)("th",{className:"border-b px-6 py-4 font-semibold ".concat(M?"border-gray-600 text-gray-300":"border-gray-200 text-gray-700"),children:"LOP Reversal Days"}),(0,g.jsx)("th",{className:"border-b px-6 py-4 font-semibold ".concat(M?"border-gray-600 text-gray-300":"border-gray-200 text-gray-700"),children:"Arrear Days"})]})}),(0,g.jsx)("tbody",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{className:"border-b px-6 py-4 text-center font-medium ".concat(M?"border-gray-700 text-gray-200":"border-gray-100 text-gray-900"),children:W(t.standardDays)}),(0,g.jsx)("td",{className:"border-b px-6 py-4 text-center font-medium ".concat(M?"border-gray-700 text-gray-200":"border-gray-100 text-gray-900"),children:W(t.payableDays)}),(0,g.jsx)("td",{className:"border-b px-6 py-4 text-center font-medium ".concat(M?"border-gray-700 text-gray-200":"border-gray-100 text-gray-900"),children:W(t.lossOfPayDays)}),(0,g.jsx)("td",{className:"border-b px-6 py-4 text-center font-medium ".concat(M?"border-gray-700 text-gray-200":"border-gray-100 text-gray-900"),children:W(t.lopReversalDays)}),(0,g.jsx)("td",{className:"border-b px-6 py-4 text-center font-medium ".concat(M?"border-gray-700 text-gray-200":"border-gray-100 text-gray-900"),children:W(t.arrearDays)})]})})]})})]}),n>0&&(0,g.jsxs)("div",{className:"mb-8",children:[(0,g.jsx)("h3",{className:"text-xl font-bold mb-4 border-l-4 border-blue-500 pl-3 ".concat(M?"text-gray-200":"text-gray-800"),children:"Additional Compensation"}),(0,g.jsx)("div",{className:"overflow-x-auto rounded-xl shadow-sm border ".concat(M?"border-gray-600":"border-gray-200"),children:(0,g.jsxs)("table",{className:"min-w-full ".concat(M?"bg-gray-800":"bg-white"),children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{className:"".concat(M?"bg-gradient-to-r from-yellow-900 to-orange-900":"bg-gradient-to-r from-yellow-50 to-orange-50"),children:[(0,g.jsx)("th",{className:"border-b px-6 py-4 font-semibold ".concat(M?"border-gray-600 text-gray-300":"border-gray-200 text-gray-700"),children:"Bonus Amount"}),(0,g.jsx)("th",{className:"border-b px-6 py-4 font-semibold ".concat(M?"border-gray-600 text-gray-300":"border-gray-200 text-gray-700"),children:"Hike Percentage"})]})}),(0,g.jsx)("tbody",{children:(0,g.jsxs)("tr",{children:[(0,g.jsxs)("td",{className:"border-b px-6 py-4 text-center font-bold ".concat(M?"border-gray-700 text-yellow-400":"border-gray-100 text-yellow-700"),children:["\u20b9",n.toLocaleString()]}),(0,g.jsxs)("td",{className:"border-b px-6 py-4 text-center font-medium ".concat(M?"border-gray-700 text-gray-200":"border-gray-100 text-gray-900"),children:[t.hike||0,"%"]})]})})]})})]}),(0,g.jsxs)("div",{className:"mb-8",children:[(0,g.jsx)("h3",{className:"text-xl font-bold mb-4 border-l-4 border-blue-500 pl-3 ".concat(M?"text-gray-200":"text-gray-800"),children:"Salary Details"}),(0,g.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,g.jsxs)("div",{className:"lg:col-span-2",children:[(0,g.jsx)("h4",{className:"font-semibold mb-3 ".concat(M?"text-gray-300":"text-gray-700"),children:"EARNINGS"}),(0,g.jsx)("div",{className:"overflow-x-auto rounded-xl shadow-sm border ".concat(M?"border-gray-600":"border-gray-200"),children:(0,g.jsxs)("table",{className:"min-w-full ".concat(M?"bg-gray-800":"bg-white"),children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{className:"".concat(M?"bg-gradient-to-r from-gray-700 to-gray-600":"bg-gradient-to-r from-gray-50 to-blue-50"),children:[(0,g.jsx)("th",{className:"border-b px-4 py-3 font-semibold ".concat(M?"border-gray-600 text-gray-300":"border-gray-200 text-gray-700"),children:"Description"}),(0,g.jsx)("th",{className:"border-b px-4 py-3 font-semibold text-right ".concat(M?"border-gray-600 text-gray-300":"border-gray-200 text-gray-700"),children:"Monthly Rate"}),(0,g.jsx)("th",{className:"border-b px-4 py-3 font-semibold text-right ".concat(M?"border-gray-600 text-gray-300":"border-gray-200 text-gray-700"),children:"Current Month"}),(0,g.jsx)("th",{className:"border-b px-4 py-3 font-semibold text-right ".concat(M?"border-gray-600 text-gray-300":"border-gray-200 text-gray-700"),children:"Arrear (+/-)"}),(0,g.jsx)("th",{className:"border-b px-4 py-3 font-semibold text-right ".concat(M?"border-gray-600 text-gray-300":"border-gray-200 text-gray-700"),children:"Total"})]})}),(0,g.jsxs)("tbody",{children:[(t.earnings||[]).map((e,t)=>(0,g.jsxs)("tr",{className:M?"hover:bg-gray-700":"hover:bg-gray-50",children:[(0,g.jsx)("td",{className:"border-b px-4 py-3 ".concat(M?"border-gray-700 text-gray-300":"border-gray-100 text-gray-700"),children:e.name}),(0,g.jsxs)("td",{className:"border-b px-4 py-3 text-right font-medium ".concat(M?"border-gray-700 text-gray-200":"border-gray-100 text-gray-900"),children:["\u20b9",(e.monthlyRate||0).toLocaleString()]}),(0,g.jsxs)("td",{className:"border-b px-4 py-3 text-right font-medium ".concat(M?"border-gray-700 text-gray-200":"border-gray-100 text-gray-900"),children:["\u20b9",(e.currentMonth||0).toLocaleString()]}),(0,g.jsx)("td",{className:"border-b px-4 py-3 text-right font-medium ".concat(M?"border-gray-700 text-gray-200":"border-gray-100 text-gray-900"),children:e.arrear||0}),(0,g.jsxs)("td",{className:"border-b px-4 py-3 text-right font-medium ".concat(M?"border-gray-700 text-gray-200":"border-gray-100 text-gray-900"),children:["\u20b9",(e.total||0).toLocaleString()]})]},t)),n>0&&(0,g.jsxs)("tr",{className:M?"bg-yellow-900 hover:bg-yellow-800":"bg-yellow-50 hover:bg-yellow-100",children:[(0,g.jsx)("td",{className:"border-b px-4 py-3 font-semibold ".concat(M?"border-gray-600 text-yellow-300":"border-gray-100 text-yellow-800"),children:"BONUS"}),(0,g.jsx)("td",{className:"border-b px-4 py-3 text-right font-medium ".concat(M?"border-gray-600 text-yellow-300":"border-gray-100 text-yellow-800"),children:"-"}),(0,g.jsx)("td",{className:"border-b px-4 py-3 text-right font-medium ".concat(M?"border-gray-600 text-yellow-300":"border-gray-100 text-yellow-800"),children:"-"}),(0,g.jsx)("td",{className:"border-b px-4 py-3 text-right font-medium ".concat(M?"border-gray-600 text-yellow-300":"border-gray-100 text-yellow-800"),children:"-"}),(0,g.jsxs)("td",{className:"border-b px-4 py-3 text-right font-bold ".concat(M?"border-gray-600 text-yellow-300":"border-gray-100 text-yellow-800"),children:["\u20b9",n.toLocaleString()]})]}),(0,g.jsxs)("tr",{className:M?"bg-blue-900":"bg-blue-50",children:[(0,g.jsx)("td",{className:"border-b px-4 py-3 font-semibold ".concat(M?"border-gray-600 text-gray-200":"border-gray-200 text-gray-800"),colSpan:"4",children:"GROSS EARNINGS"}),(0,g.jsxs)("td",{className:"border-b px-4 py-3 text-right font-semibold ".concat(M?"border-gray-600 text-blue-300":"border-gray-200 text-blue-800"),children:["\u20b9",a.toLocaleString()]})]})]})]})})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("h4",{className:"font-semibold mb-3 ".concat(M?"text-gray-300":"text-gray-700"),children:"DEDUCTIONS"}),(0,g.jsx)("div",{className:"overflow-x-auto rounded-xl shadow-sm border ".concat(M?"border-gray-600":"border-gray-200"),children:(0,g.jsxs)("table",{className:"min-w-full ".concat(M?"bg-gray-800":"bg-white"),children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{className:"".concat(M?"bg-gradient-to-r from-gray-700 to-gray-600":"bg-gradient-to-r from-gray-50 to-blue-50"),children:[(0,g.jsx)("th",{className:"border-b px-4 py-3 font-semibold ".concat(M?"border-gray-600 text-gray-300":"border-gray-200 text-gray-700"),children:"Description"}),(0,g.jsx)("th",{className:"border-b px-4 py-3 font-semibold text-right ".concat(M?"border-gray-600 text-gray-300":"border-gray-200 text-gray-700"),children:"Amount"})]})}),(0,g.jsxs)("tbody",{children:[(t.deductions||[]).map((e,t)=>(0,g.jsxs)("tr",{className:M?"hover:bg-gray-700":"hover:bg-gray-50",children:[(0,g.jsx)("td",{className:"border-b px-4 py-3 ".concat(M?"border-gray-700 text-gray-300":"border-gray-100 text-gray-700"),children:e.name}),(0,g.jsxs)("td",{className:"border-b px-4 py-3 text-right font-medium ".concat(M?"border-gray-700 text-red-400":"border-gray-100 text-red-600"),children:["\u20b9",(e.amount||0).toLocaleString()]})]},t)),(0,g.jsxs)("tr",{className:M?"bg-blue-900":"bg-blue-50",children:[(0,g.jsx)("td",{className:"border-b px-4 py-3 font-semibold ".concat(M?"border-gray-600 text-gray-200":"border-gray-200 text-gray-800"),children:"TOTAL DEDUCTIONS"}),(0,g.jsxs)("td",{className:"border-b px-4 py-3 text-right font-semibold ".concat(M?"border-gray-600 text-red-400":"border-gray-200 text-red-700"),children:["\u20b9",o.toLocaleString()]})]}),n>0&&(0,g.jsxs)("tr",{className:M?"bg-yellow-900":"bg-yellow-50",children:[(0,g.jsx)("td",{className:"border-b px-4 py-3 font-semibold ".concat(M?"border-gray-600 text-yellow-300":"border-gray-200 text-yellow-800"),children:"BONUS ADDED"}),(0,g.jsxs)("td",{className:"border-b px-4 py-3 text-right font-semibold ".concat(M?"border-gray-600 text-yellow-300":"border-gray-200 text-yellow-800"),children:["+ \u20b9",n.toLocaleString()]})]}),(0,g.jsxs)("tr",{className:M?"bg-green-900":"bg-green-50",children:[(0,g.jsx)("td",{className:"border-b px-4 py-3 font-bold ".concat(M?"border-gray-600 text-green-300":"border-gray-200 text-green-800"),children:"NET SALARY"}),(0,g.jsxs)("td",{className:"border-b px-4 py-3 text-right font-bold ".concat(M?"border-gray-600 text-green-300":"border-gray-200 text-green-800"),children:["\u20b9",l.toLocaleString()]})]})]})]})})]})]})]}),(0,g.jsx)("div",{className:"mt-8 pt-6 border-t text-center text-sm ".concat(M?"border-gray-600 text-gray-400":"border-gray-300 text-gray-600"),children:(0,g.jsx)("p",{children:"#1016, 11th Floor, DSL Abacus IT Park, Uppal Hyderabad-500039 | Ph: 9632091726"})})]})]})})}return(0,g.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 p-6",children:[j&&(0,g.jsx)(w,{editingEmployee:y,onInputChange:H,onSaveEdit:async()=>{if(y)try{E(!0);const n=u(e),l=parseInt(r);let s;console.log("Fetching payroll for: ".concat(y.employeeId,", ").concat(n,", ").concat(l));try{s=await b(y.employeeId,n,l),console.log("Full payroll response:",s)}catch(a){return console.error("Error fetching payroll:",a),void alert("No payroll record found. Please generate payroll for this employee first.")}const d=s.payrollId;if(console.log("Extracted payroll ID:",d),!d)return console.error("No payroll ID found in response. Available keys:",Object.keys(s)),void alert("Could not find payroll ID. Please check the payroll data.");try{await m(d,{bonusAmount:y.bonus||0,hikePercentage:y.hike||0,basicSalary:y.basicSalary,hraAmount:y.hra,conveyanceAllowance:y.conveyanceAllowance,medicalAllowance:y.medicalAllowance,specialAllowance:y.specialAllowance,otherAllowances:y.otherAllowances,providentFund:y.providentFund,professionalTax:y.professionalTax,incomeTax:y.incomeTax,otherDeductions:y.otherDeductions}),setTimeout(async()=>{await V()},500),A(!1),f(null),alert("Employee payroll updated successfully!")}catch(o){var t;console.error("Error updating payroll:",o),console.error("Error response:",null===(t=o.response)||void 0===t?void 0:t.data),alert("Failed to update payroll. Please try again.")}}catch(a){console.error("Error in handleSaveEdit:",a),alert("Failed to update employee. Please try again.")}finally{E(!1)}},onCancelEdit:()=>{A(!1),f(null)},loading:I}),(0,g.jsxs)("div",{className:"max-w-7xl mx-auto rounded-2xl shadow-xl overflow-hidden border ".concat(M?"bg-gray-800 border-gray-700":"bg-white border-blue-100"),children:[(0,g.jsx)("div",{className:"container mx-auto px-4 pt-6",children:(0,g.jsxs)("button",{onClick:()=>window.history.back(),className:"flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors ".concat(M?"bg-gray-700 text-gray-200 hover:bg-gray-600":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-200"),children:[(0,g.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),(0,g.jsx)("span",{children:"Back"})]})}),(0,g.jsx)("div",{className:"p-6 border-b ".concat(M?"bg-gray-800 border-gray-700":"bg-white border-gray-200"),children:(0,g.jsxs)("div",{className:"flex flex-wrap gap-4 items-center justify-between",children:[(0,g.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(M?"text-gray-300":"text-gray-700"),children:"Month"}),(0,g.jsx)("select",{value:e,onChange:e=>t(e.target.value),className:"border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(M?"bg-gray-700 border-gray-600 text-white":"border-gray-300 text-gray-900"),children:["January","February","March","April","May","June","July","August","September","October","November","December"].map(e=>(0,g.jsx)("option",{value:e,children:e},e))})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(M?"text-gray-300":"text-gray-700"),children:"Year"}),(0,g.jsx)("select",{value:r,onChange:e=>l(e.target.value),className:"border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(M?"bg-gray-700 border-gray-600 text-white":"border-gray-300 text-gray-900"),children:["2023","2024","2025"].map(e=>(0,g.jsx)("option",{value:e,children:e},e))})]}),(0,g.jsxs)("div",{className:"flex-1",children:[(0,g.jsx)("label",{htmlFor:"search-input",className:"block text-sm font-medium mb-2 ".concat(M?"text-gray-300":"text-gray-700"),children:"Search Employees"}),(0,g.jsx)("input",{id:"search-input",type:"text",placeholder:"Search by name, role, or employee ID",value:P,onChange:e=>T(e.target.value),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ".concat(M?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"border-gray-300 text-gray-900")})]})]}),(0,g.jsx)("div",{className:"flex gap-4",children:(0,g.jsx)("button",{onClick:async()=>{try{const t=[["Employee ID","Employee Name","Designation","Department","Gross Earnings","Bonus","Total Deductions","Net Salary"].join(","),...K.map(e=>[e.employeeId,'"'.concat(e.employeeName,'"'),'"'.concat(e.designation,'"'),'"'.concat(e.department,'"'),e.grossEarnings,e.bonusAmount,e.totalDeductions,e.netSalary].join(","))].join("\n"),a=new Blob(["\ufeff"+t],{type:"text/csv;charset=utf-8;"}),o=URL.createObjectURL(a),n=document.createElement("a");n.href=o,n.download="Employee_Salary_Summary_".concat(e,"_").concat(r,".csv"),document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(o)}catch(t){console.error("Error downloading Excel:",t),alert("Failed to download Excel sheet. Please try again.")}},className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all shadow-lg font-medium",children:"Download Excel Sheet"})})]})}),(0,g.jsxs)("div",{className:"p-6 ".concat(M?"bg-gray-800":"bg-white"),children:[(0,g.jsxs)("h3",{className:"text-2xl font-bold mb-6 ".concat(M?"text-gray-200":"text-gray-800"),children:["Employee Salary Summary - ",e," ",r]}),C?(0,g.jsxs)("div",{className:"flex justify-center items-center py-12",children:[(0,g.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),(0,g.jsx)("span",{className:"ml-4 ".concat(M?"text-gray-400":"text-gray-600"),children:"Loading employee data..."})]}):(0,g.jsx)("div",{className:"overflow-x-auto rounded-xl shadow-sm border ".concat(M?"border-gray-600":"border-gray-200"),children:(0,g.jsxs)("table",{className:"min-w-full ".concat(M?"bg-gray-800":"bg-white"),children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{className:"".concat(M?"bg-gradient-to-r from-gray-700 to-gray-600":"bg-gradient-to-r from-gray-50 to-blue-50"),children:[(0,g.jsx)("th",{className:"border-b px-6 py-4 text-left font-semibold ".concat(M?"border-gray-600 text-gray-300":"border-gray-200 text-gray-700"),children:"Employee ID"}),(0,g.jsx)("th",{className:"border-b px-6 py-4 text-left font-semibold ".concat(M?"border-gray-600 text-gray-300":"border-gray-200 text-gray-700"),children:"Employee Name"}),(0,g.jsx)("th",{className:"border-b px-6 py-4 text-left font-semibold ".concat(M?"border-gray-600 text-gray-300":"border-gray-200 text-gray-700"),children:"Designation"}),(0,g.jsx)("th",{className:"border-b px-6 py-4 text-left font-semibold ".concat(M?"border-gray-600 text-gray-300":"border-gray-200 text-gray-700"),children:"Department"}),(0,g.jsx)("th",{className:"border-b px-6 py-4 text-right font-semibold ".concat(M?"border-gray-600 text-gray-300":"border-gray-200 text-gray-700"),children:"Gross Earnings"}),(0,g.jsx)("th",{className:"border-b px-6 py-4 text-right font-semibold ".concat(M?"border-gray-600 text-gray-300":"border-gray-200 text-gray-700"),children:"Bonus"}),(0,g.jsx)("th",{className:"border-b px-6 py-4 text-right font-semibold ".concat(M?"border-gray-600 text-gray-300":"border-gray-200 text-gray-700"),children:"Deductions"}),(0,g.jsx)("th",{className:"border-b px-6 py-4 text-right font-semibold ".concat(M?"border-gray-600 text-gray-300":"border-gray-200 text-gray-700"),children:"Net Salary"}),(0,g.jsx)("th",{className:"border-b px-6 py-4 text-center font-semibold ".concat(M?"border-gray-600 text-gray-300":"border-gray-200 text-gray-700"),children:"Actions"})]})}),(0,g.jsx)("tbody",{children:q.length>0?q.map(t=>(0,g.jsxs)("tr",{className:"transition-colors ".concat(M?"hover:bg-gray-700":"hover:bg-blue-50"),children:[(0,g.jsx)("td",{className:"border-b px-6 py-4 font-medium ".concat(M?"border-gray-700 text-gray-200":"border-gray-100 text-gray-900"),children:t.employeeId}),(0,g.jsx)("td",{className:"border-b px-6 py-4 font-semibold ".concat(M?"border-gray-700 text-gray-200":"border-gray-100 text-gray-800"),children:t.employeeName}),(0,g.jsx)("td",{className:"border-b px-6 py-4 ".concat(M?"border-gray-700 text-gray-300":"border-gray-100 text-gray-700"),children:t.designation}),(0,g.jsx)("td",{className:"border-b px-6 py-4 ".concat(M?"border-gray-700 text-gray-300":"border-gray-100 text-gray-700"),children:t.department}),(0,g.jsxs)("td",{className:"border-b px-6 py-4 text-right font-medium ".concat(M?"border-gray-700 text-gray-200":"border-gray-100 text-gray-900"),children:["\u20b9",t.grossEarnings.toLocaleString()]}),(0,g.jsx)("td",{className:"border-b px-6 py-4 text-right font-medium ".concat(M?"border-gray-700 text-yellow-400":"border-gray-100 text-yellow-600"),children:t.bonusAmount>0?"\u20b9".concat(t.bonusAmount.toLocaleString()):"-"}),(0,g.jsxs)("td",{className:"border-b px-6 py-4 text-right font-medium ".concat(M?"border-gray-700 text-red-400":"border-gray-100 text-red-600"),children:["\u20b9",t.totalDeductions.toLocaleString()]}),(0,g.jsxs)("td",{className:"border-b px-6 py-4 text-right font-bold ".concat(M?"border-gray-700 text-green-400":"border-gray-100 text-green-700"),children:["\u20b9",t.netSalary.toLocaleString()]}),(0,g.jsx)("td",{className:"border-b px-6 py-4 ".concat(M?"border-gray-700":"border-gray-100"),children:(0,g.jsxs)("div",{className:"flex gap-2 justify-center",children:[(0,g.jsx)("button",{onClick:()=>(async t=>{try{const n=u(e),l=parseInt(r);let s,d;try{s=await b(t.employeeId,n,l),console.log("Payroll data found:",s)}catch(o){console.warn("No payroll data found, using employee data only:",o.message),s=null}s&&s.payrollId?(d=(0,a.A)((0,a.A)({},t),h((0,a.A)((0,a.A)({},s),{},{employee:t}))),console.log("Merged data with payroll:",d)):(d=h(t),console.log("Using employee data with calculations:",d)),x(d)}catch(n){console.error("Error fetching employee details:",n);const e=h(t);x(e)}})(t),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium text-sm",children:"View"}),(0,g.jsx)("button",{onClick:()=>X(t),className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors font-medium text-sm",children:"Edit"}),(0,g.jsx)("button",{onClick:()=>async function(t){try{console.log("Starting payslip download for:",t.employeeId);const n=u(e);let l;try{l=await b(t.employeeId,n,parseInt(r)),console.log("Payroll API response:",l)}catch(o){console.warn("No payroll data found, using employee data only:",o.message),l=null}const d=l?(0,a.A)((0,a.A)({},t),l):t;console.log("Final data for payslip:",d);const i=d.basicSalary||0,g=d.hraAmount||d.hra||0,x=d.conveyanceAllowance||0,y=d.medicalAllowance||0,m=d.specialAllowance||0,p=d.providentFund||0,h=d.professionalTax||0,f=d.incomeTax||0,N=d.bonusAmount||d.bonus||0,v=d.hikePercentage||d.hike||0,w=d.totalWorkingDays||d.standardDays||23,j=d.daysPresent||d.payableDays||20,A=d.paidDays||d.payableDays||20,S=d.lossOfPayDays||d.lopDays||2,D=i+g+x+y+m+N,k=p+h+f,I=D-k;console.log("Calculated values for PDF:",{basicSalary:i,hraAmount:g,conveyanceAllowance:x,medicalAllowance:y,specialAllowance:m,providentFund:p,professionalTax:h,incomeTax:f,bonusAmount:N,grossEarnings:D,totalDeductions:k,netSalary:I});const E=()=>"".concat(e," ").concat(r),C=document.createElement("div");C.style.position="absolute",C.style.left="-9999px",C.style.width="800px",C.style.padding="20px",C.style.backgroundColor="white",C.style.fontFamily="Segoe UI, Tahoma, Geneva, Verdana, sans-serif",C.innerHTML='\n      <div style="font-family: \'Segoe UI\', Tahoma, Geneva, Verdana, sans-serif; max-width: 800px; margin: 0 auto; color: #333; line-height: 1.3; font-size: 20px;">\n        \x3c!-- Company Header --\x3e\n        <div style="border-bottom: 2px solid #2c5aa0; padding: 20px 0 10px 0; margin-bottom: 20px;">\n          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">\n            <div>\n              <div style="font-size: 20px; font-weight: 600; color: #2c5aa0; letter-spacing: 0.5px;">ANASOL CONSULTANCY SERVICES PVT LTD</div>\n              <div style="font-size: 12px; color: #666; margin-top: 3px;">\n                #1016, 11th Floor, DSL Abacus IT Park, Uppal Hyderabad-500039\n              </div>\n            </div>\n            <div style="text-align: right;">\n              <div style="font-size: 10px; font-weight: 600; color: #2c5aa0; margin-bottom: 3px;">SALARY SLIP</div>\n              <div style="font-size: 12px; color: #d9534f; font-weight: 500; background: #f8f9fa; padding: 3px 10px; border-radius: 3px; display: inline-block;">\n                '.concat(E(),'\n              </div>\n            </div>\n          </div>\n        </div>\n\n        \x3c!-- Employee Information --\x3e\n        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">\n          <div>\n            <div style="font-size: 14px; font-weight: 600; color: #2c5aa0; margin-bottom: 10px; padding-bottom: 5px; border-bottom: 1px solid #e0e0e0;">EMPLOYEE DETAILS</div>\n            <table style="width: 100%; border-collapse: collapse; font-size: 12px;">\n              <tr>\n                <td style="padding: 6px 0; font-weight: 500; color: #555; width: 40%;">Employee Name:</td>\n                <td style="padding: 6px 0; font-weight: 600;">').concat(d.employeeName||d.empName||"",'</td>\n              </tr>\n              <tr>\n                <td style="padding: 6px 0; font-weight: 500; color: #555;">Employee ID:</td>\n                <td style="padding: 6px 0;">').concat(d.employeeId||"",'</td>\n              </tr>\n              <tr>\n                <td style="padding: 6px 0; font-weight: 500; color: #555;">Designation:</td>\n                <td style="padding: 6px 0;">').concat(d.designation||"N/A",'</td>\n              </tr>\n              <tr>\n                <td style="padding: 6px 0; font-weight: 500; color: #555;">Department:</td>\n                <td style="padding: 6px 0;">').concat(d.department||"N/A",'</td>\n              </tr>\n            </table>\n          </div>\n\n          <div>\n            <div style="font-size: 14px; font-weight: 600; color: #2c5aa0; margin-bottom: 10px; padding-bottom: 5px; border-bottom: 1px solid #e0e0e0;">BANK & STATUTORY DETAILS</div>\n            <table style="width: 100%; border-collapse: collapse; font-size: 12px;">\n              <tr>\n                <td style="padding: 6px 0; font-weight: 500; color: #555; width: 40%;">Bank A/C Name:</td>\n                <td style="padding: 6px 0;">').concat(d.employeeName||d.empName||"",'</td>\n              </tr>\n              <tr>\n                <td style="padding: 6px 0; font-weight: 500; color: #555;">PAN No:</td>\n                <td style="padding: 6px 0;">').concat(d.panNumber||d.panNo||"N/A",'</td>\n              </tr>\n              <tr>\n                <td style="padding: 6px 0; font-weight: 500; color: #555;">PF No:</td>\n                <td style="padding: 6px 0;">').concat(d.pfnum||d.pfNo||"N/A",'</td>\n              </tr>\n              <tr>\n                <td style="padding: 6px 0; font-weight: 500; color: #555;">IFSC Code:</td>\n                <td style="padding: 6px 0;">').concat(d.ifsccode||"N/A",'</td>\n              </tr>\n            </table>\n          </div>\n        </div>\n\n        \x3c!-- Attendance Information --\x3e\n        <div style="margin: 20px 0;">\n          <div style="font-size: 14px; font-weight: 600; color: #2c5aa0; margin-bottom: 10px; padding-bottom: 5px; border-bottom: 1px solid #e0e0e0;">ATTENDANCE SUMMARY</div>\n          <table style="width: 100%; border-collapse: collapse; background: #f8f9fa; border-radius: 4px; overflow: hidden; font-size: 12px;">\n            <thead>\n              <tr style="background: #2c5aa0; color: white;">\n                <th style="padding: 10px; text-align: center; font-weight: 600;">Total Working Days</th>\n                <th style="padding: 10px; text-align: center; font-weight: 600;">Days Present</th>\n                <th style="padding: 10px; text-align: center; font-weight: 600;">Paid Days</th>\n                <th style="padding: 10px; text-align: center; font-weight: 600;">Loss of Pay Days</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr>\n                <td style="padding: 10px; text-align: center; background: white; border: 1px solid #e0e0e0;">').concat(W(w),'</td>\n                <td style="padding: 10px; text-align: center; background: white; border: 1px solid #e0e0e0;">').concat(W(j),'</td>\n                <td style="padding: 10px; text-align: center; background: white; border: 1px solid #e0e0e0;">').concat(W(A),'</td>\n                <td style="padding: 10px; text-align: center; background: white; border: 1px solid #e0e0e0;">').concat(W(S),"</td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n\n        \x3c!-- Bonus Information - Only show if bonus exists --\x3e\n        ").concat(N>0?'\n        <div style="margin: 12px 0;">\n          <div style="font-size: 14px; font-weight: 600; color: #2c5aa0; margin-bottom: 10px; padding-bottom: 5px; border-bottom: 1px solid #e0e0e0;">ADDITIONAL COMPENSATION</div>\n          <table style="width: 100%; border-collapse: collapse; background: #f8f9fa; border-radius: 4px; overflow: hidden; font-size: 12px;">\n            <thead>\n              <tr style="background: #28a745; color: white;">\n                <th style="padding: 10px; text-align: center; font-weight: 600;">Bonus Amount</th>\n                <th style="padding: 10px; text-align: center; font-weight: 600;">Hike Percentage</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr>\n                <td style="padding: 10px; text-align: center; background: white; border: 1px solid #e0e0e0; font-weight: 600; color: #28a745;">'.concat(_(N),'</td>\n                <td style="padding: 10px; text-align: center; background: white; border: 1px solid #e0e0e0; font-weight: 600; color: #28a745;">').concat(v,"%</td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n        "):"",'\n\n        \x3c!-- Salary Details --\x3e\n        <div style="margin: 20px 0;">\n          <div style="font-size: 14px; font-weight: 600; color: #2c5aa0; margin-bottom: 10px; padding-bottom: 5px; border-bottom: 1px solid #e0e0e0;">SALARY BREAKUP</div>\n          \n          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">\n            \x3c!-- Earnings --\x3e\n            <div>\n              <div style="font-size: 20px; font-weight: 600; color: #2c5aa0; margin-bottom: 10px; background: #f8f9fa; padding: 6px 10px; border-radius: 3px;">EARNINGS</div>\n              <table style="width: 100%; border-collapse: collapse; border: 1px solid #e0e0e0; font-size: 12px;">\n                <tbody>\n                  <tr>\n                    <td style="padding: 10px 10px; border-bottom: 1px solid #e0e0e0;">Basic Salary</td>\n                    <td style="padding: 10px 10px; text-align: right; border-bottom: 1px solid #e0e0e0;">').concat(_(i),'</td>\n                  </tr>\n                  <tr>\n                    <td style="padding: 10px 10px; border-bottom: 1px solid #e0e0e0;">HRA</td>\n                    <td style="padding: 10px 10px; text-align: right; border-bottom: 1px solid #e0e0e0;">').concat(_(g),'</td>\n                  </tr>\n                  <tr>\n                    <td style="padding: 10px 10px; border-bottom: 1px solid #e0e0e0;">Conveyance Allowance</td>\n                    <td style="padding: 10px 10px; text-align: right; border-bottom: 1px solid #e0e0e0;">').concat(_(x),'</td>\n                  </tr>\n                  <tr>\n                    <td style="padding: 10px 10px; border-bottom: 1px solid #e0e0e0;">Medical Allowance</td>\n                    <td style="padding: 10px 10px; text-align: right; border-bottom: 1px solid #e0e0e0;">').concat(_(y),'</td>\n                  </tr>\n                  <tr>\n                    <td style="padding: 10px 10px; border-bottom: 1px solid #e0e0e0;">Special Allowance</td>\n                    <td style="padding: 10px 10px; text-align: right; border-bottom: 1px solid #e0e0e0;">').concat(_(m),"</td>\n                  </tr>\n                  ").concat(N>0?'\n                  <tr>\n                    <td style="padding: 10px 10px; border-bottom: 1px solid #e0e0e0;">Bonus</td>\n                    <td style="padding: 10px 10px; text-align: right; border-bottom: 1px solid #e0e0e0;">'.concat(_(N),"</td>\n                  </tr>\n                  "):"",'\n                  <tr style="background: #e9ecef; font-weight: 600;">\n                    <td style="padding: 10px;">Gross Earnings</td>\n                    <td style="padding: 10px; text-align: right;">').concat(_(D),'</td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n\n            \x3c!-- Deductions --\x3e\n            <div>\n              <div style="font-size: 20px; font-weight: 600; color: #2c5aa0; margin-bottom: 10px; background: #f8f9fa; padding: 6px 10px; border-radius: 3px;">DEDUCTIONS</div>\n              <table style="width: 100%; border-collapse: collapse; border: 1px solid #e0e0e0; font-size: 12px;">\n                <tbody>\n                  <tr>\n                    <td style="padding: 10px 10px; border-bottom: 1px solid #e0e0e0;">Provident Fund</td>\n                    <td style="padding: 10px 10px; text-align: right; border-bottom: 1px solid #e0e0e0;">').concat(_(p),'</td>\n                  </tr>\n                  <tr>\n                    <td style="padding: 10px 10px; border-bottom: 1px solid #e0e0e0;">Professional Tax</td>\n                    <td style="padding: 10px 10px; text-align: right; border-bottom: 1px solid #e0e0e0;">').concat(_(h),'</td>\n                  </tr>\n                  <tr>\n                    <td style="padding: 10px 10px; border-bottom: 1px solid #e0e0e0;">Income Tax</td>\n                    <td style="padding: 10px 10px; text-align: right; border-bottom: 1px solid #e0e0e0;">').concat(_(f),'</td>\n                  </tr>\n                  <tr style="background: #e9ecef; font-weight: 600;">\n                    <td style="padding: 10px;">Total Deductions</td>\n                    <td style="padding: 10px; text-align: right;">').concat(_(k),'</td>\n                  </tr>\n                  <tr style="background: #d4edda; font-weight: 700; color: #155724; border: 2px solid #c3e6cb;">\n                    <td style="padding: 12px 10px; font-size: 20px;">NET SALARY PAYABLE</td>\n                    <td style="padding: 12px 10px; text-align: right; font-size: 20px;">').concat(_(I),'</td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n\n        \x3c!-- Footer --\x3e\n        <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid #e0e0e0; text-align: center; color: #666; font-size: 11px;">\n          <div style="margin-bottom: 5px;">\n            <strong>ANASOL CONSULTANCY SERVICES PVT LTD</strong> | \n            #1016, 11th Floor, DSL Abacus IT Park, Uppal Hyderabad-500039 |\n            Ph: 9632091726 | Email: hr@anasolconsultancy.com | www.anasol.com\n          </div>\n          <div style="color: #999; font-style: italic;">\n            This is a system generated document and does not require signature\n          </div>\n        </div>\n      </div>\n    '),document.body.appendChild(C);const L=await c()(C,{scale:2,useCORS:!0,logging:!1,width:C.offsetWidth,height:C.offsetHeight});document.body.removeChild(C);const P=L.toDataURL("image/png"),T=new s.Ay("p","mm","a4"),R=210,F=297,O=L.height*R/L.width;let M=O,B=0;for(T.addImage(P,"PNG",0,B,R,O),M-=F;M>=0;)B=M-O,T.addPage(),T.addImage(P,"PNG",0,B,R,O),M-=F;const U="Payslip_".concat(d.employeeName||d.empName,"_").concat(e,"_").concat(r,".pdf");T.save(U),console.log("PDF payslip downloaded successfully:",U)}catch(o){console.error("Error downloading payslip:",o),console.error("Error details:",o.message),alert("Failed to download payslip: "+o.message)}}(t),className:"px-4 py-2 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-colors font-medium text-sm",children:"Download"})]})})]},t.id)):(0,g.jsx)("tr",{children:(0,g.jsx)("td",{colSpan:"9",className:"px-6 py-8 text-center ".concat(M?"text-gray-400":"text-gray-500"),children:P?'No employees found matching "'.concat(P,'"'):"No employees found. Add some employees to get started."})})})]})})]})]})]})}}}]);
//# sourceMappingURL=361.c38807f0.chunk.js.map