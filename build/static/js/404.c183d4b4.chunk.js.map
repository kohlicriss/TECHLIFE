{"version":3,"file":"static/js/404.c183d4b4.chunk.js","mappings":"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","sources":["TechLife/HRMS/Components/EmployeeDashboards/AttendanceReports.jsx","TechLife/HRMS/Components/EmployeeDashboards/AttendancesDashboard.jsx"],"sourcesContent":["import { CalendarDaysIcon, ClockIcon, ArrowPathIcon } from \"@heroicons/react/24/outline\";\r\nimport { Menu, MenuButton, MenuItems, MenuItem, Transition } from '@headlessui/react';\r\nimport { ChevronDownIcon } from '@heroicons/react/20/solid';\r\nimport React, { useMemo, useState, Fragment, useContext, useEffect } from \"react\";\r\nimport { TrendingDownIcon, TrendingUpIcon } from \"lucide-react\";\r\nimport { MdEditCalendar } from \"react-icons/md\";\r\nimport { BiArchiveOut, BiCalendarStar, BiCodeBlock, BiError, BiLogIn, BiSolidCalendarEvent, BiSolidUser } from \"react-icons/bi\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport { AiOutlineGift } from \"react-icons/ai\";\r\nimport { Context } from \"../HrmsContext\";\r\nimport { PieChart, Pie, Cell, Tooltip } from \"recharts\";\r\nimport {BarChart,Bar,XAxis,YAxis,CartesianGrid,ResponsiveContainer,} from \"recharts\";\r\nimport axios from 'axios';\r\n\r\nconst ChartData = [\r\n    {\r\n        title: \"Total ClockIn\",\r\n        value: \"104\",\r\n    },\r\n    {\r\n        title: \"Not ClockIn \",\r\n        value: \"10\",\r\n    },\r\n    {\r\n        title: \"On leave\",\r\n        value: \"6\",\r\n    },\r\n    {\r\n        title: \"Weekly Off\",\r\n        value: \"5\",\r\n       \r\n    },\r\n    {\r\n        title: \"Holiday\",\r\n        value: \"10\", \r\n    },\r\n    {\r\n        title: \"ClockOut\",\r\n        value: \"104\",\r\n       \r\n    }\r\n];\r\n\r\n\r\nconst ChartCard = ({ title, icontextcolor, icon, value, color }) => {\r\n    \r\n    const {theme} = useContext(Context);\r\n    return (\r\n        <motion.div\r\n            className={` rounded-xl p-6 shadow-md border border-gray-200 hover:shadow-lg transition-shadow duration-300 h-full flex flex-col items-center justify-center text-center space-y-2 ${theme==='dark' ? 'bg-gray-600 ':'bg-stone-100 '}`}\r\n            initial={{ opacity: 0, y: 50 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            transition={{ duration: 0.5, ease: \"easeOut\" }}\r\n        >\r\n            \r\n            <div className={`w-16 h-16 flex items-center justify-center rounded-full mb-2 p-2 ${color} ${icontextcolor}`}>\r\n                {React.cloneElement(icon, { className: `w-10 h-10 rounded-full ` })}\r\n            </div>\r\n            <div>\r\n                <p className={`text-3xl font-bold mt-2 ${theme==='dark' ? 'bg-gradient-to-br from-blue-100 to-blue-500 bg-clip-text text-transparent' :'text-gray-800 '}`}>\r\n                    {value}</p>\r\n                <h3 className={`text-sm  ${theme==='dark' ? 'text-white ':'text-gray-800'} `}>{title}</h3>\r\n            </div>\r\n            \r\n        </motion.div>\r\n    );\r\n};\r\nconst DashboardGrid = () => {\r\n    const {theme}= useContext(Context)\r\n    return (\r\n        <div className=\"p-2 h-full flex flex-col justify-between\">\r\n            \r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-7 gap-6 h-full\">\r\n                <EmployeePieChart/>\r\n                {ChartData.map((chart, index) => {\r\n                    let icon, icontextcolor, colorHandler;\r\n\r\n                    switch (chart.title) {\r\n                        case \"Total ClockIn\": icon = <BiArchiveOut className=\"w-8 h-8 text-white\" />; colorHandler = \"bg-orange-100\"; icontextcolor = \"text-orange-400\";  break;\r\n                        case \"Not ClockIn \": icon = < BiError  className=\"w-8 h-8 text-white\" />; colorHandler = \"bg-red-100\"; icontextcolor = \"text-red-400\";  break;\r\n                        case \"On leave\": icon = <BiCodeBlock className=\"w-8 h-8 text-white\" />; colorHandler = \"bg-green-100\"; icontextcolor = \"text-green-400\";  break;\r\n                        case \"Weekly Off\": icon = <BiSolidCalendarEvent className=\"w-8 h-8 text-white\" />; colorHandler = \"bg-blue-100\"; icontextcolor = \"text-blue-400\";  break;\r\n                        case \"Holiday\": icon = <AiOutlineGift  className=\"w-8 h-8 text-white\" />; colorHandler = \"bg-indigo-100\"; icontextcolor = \"text-indigo-400\";  break;\r\n                        case \"ClockOut\": icon = <BiLogIn className=\"w-8 h-8 text-white\" />; colorHandler = \"bg-yellow-100\"; icontextcolor = \"text-yellow-400\";  break;\r\n                        default:  icon = <ArrowPathIcon className=\"w-10 h-10 text-white\" />; colorHandler = \"#D3D3D3\"; icontextcolor = \"text-gray-100\";\r\n                    }\r\n                    return (\r\n                        <ChartCard key={index} icon={icon} color={colorHandler} value={chart.value} title={chart.title} icontextcolor={icontextcolor}/>\r\n                    );\r\n                })}\r\n            </div>\r\n            </div>\r\n        \r\n    );\r\n};\r\n\r\n\r\nconst piechartData = [\r\n  { title: \"Total ClockIn\", value: 104 },\r\n  { title: \"Not ClockIn \", value: 10 },\r\n  { title: \"On leave\", value: 6 },\r\n  { title: \"Weekly Off\", value: 5 },\r\n  { title: \"Holiday\", value: 10 },\r\n  { title: \"ClockOut\", value: 104 },\r\n];\r\n\r\nconst COLORS = [\"#3B82F6\", \"#F59E0B\", \"#EF4444\", \"#84CC16\", \"#6B7280\", \"#22C55E\"];\r\n\r\nconst EmployeePieChart = () => {\r\n    const {theme}=useContext(Context)\r\n  const totalEmployees = piechartData.reduce(\r\n    (sum, entry) => sum + entry.value,\r\n    0\r\n  );\r\n  const textColor = theme==='dark' ? \"white\" : \"black\";\r\n\r\n  return (\r\n    <div className=\"flex justify-center items-center\">\r\n      {/* Chart container */}\r\n      <PieChart width={160} height={160}>\r\n        <Pie\r\n          data={piechartData}\r\n          dataKey=\"value\"\r\n          nameKey=\"title\"\r\n          cx=\"50%\"\r\n          cy=\"50%\"\r\n          innerRadius={55} // Donut chart shape kosam inner radius set cheyyandi\r\n          outerRadius={80}\r\n         \r\n        >\r\n          {piechartData.map((entry, index) => (\r\n            <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\r\n          ))}\r\n        </Pie>\r\n        <text\r\n            x=\"50%\"\r\n            y=\"50%\"\r\n            textAnchor=\"middle\"\r\n            dominantBaseline=\"middle\"\r\n            stroke={textColor}\r\n            className={`text-sm font-small `}\r\n        >\r\n           Total Employees\r\n          <span className={` ${theme==='dark'?'text-gray-200':'text-gray-800'} text-xl font-bold `}>\r\n          {totalEmployees}\r\n        </span>\r\n        </text>\r\n        <Tooltip />\r\n      </PieChart>\r\n    </div>\r\n  );\r\n};\r\n//const employees = [\r\n//    {\r\n//        name: 'John Doe',\r\n//        title: 'UI/UX Designer',\r\n//        department: 'UI/UX',\r\n//        status: 'Clocked In',\r\n//        time: '09:15',\r\n//        Arrival:\"On-Time\"\r\n//    },\r\n//    {\r\n//        name: 'Raju',\r\n//        title: 'Project Manager',\r\n//        department: 'Management',\r\n//        status: 'Clocked In',\r\n//        time: '09:36',\r\n//        Arrival:\"On-Time\"\r\n//    },\r\n//    {\r\n//        name: 'Srilekha',\r\n//        title: 'PHP Developer',\r\n//        department: 'Development',\r\n//        status: 'Clocked In',\r\n//        time: '09:15',\r\n//        Arrival:\"On-Time\",\r\n//        details: {\r\n//            clockIn: '10:30 AM',\r\n//            clockOut: '09:45 AM',\r\n//            production: '09:21 Hrs',\r\n//        },\r\n//    },\r\n//    {\r\n//        name: 'Anita',\r\n//        title: 'Marketing Head',\r\n//        department: 'Marketing',\r\n//        Arrival: 'Late',\r\n//        lateTime: '30 Min',\r\n//        time: '10:35',\r\n//    }\r\n//\r\n//];\r\n\r\n\r\n\r\n\r\nfunction classNames(...classes) {\r\n    return classes.filter(Boolean).join(' ');\r\n}\r\nconst TopOnTime = () => {\r\n    const { theme } = useContext(Context);\r\n    const todayISO = new Date().toISOString().slice(0, 10);\r\n    const sevenDaysAgo = new Date(Date.now() - 6 * 24 * 60 * 60 * 1000).toISOString().slice(0, 10);\r\n\r\n    const [stDate, setStDate] = useState(sevenDaysAgo);\r\n    const [enDate, setEnDate] = useState(todayISO);\r\n    const [items, setItems] = useState([]); // [{ id, count }] or [{ id, raw, durationReadable }]\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState(null);\r\n    const [mode, setMode] = useState('ontime'); // 'ontime' | 'overtime'\r\n\r\n    const parseISODuration = (iso) => {\r\n        if (!iso || typeof iso !== 'string') return 'N/A';\r\n        // match PT{hours}H{minutes}M{seconds}S  hours/minutes/seconds optional\r\n        const m = iso.match(/PT(?:(\\d+)H)?(?:(\\d+)M)?(?:(\\d+)S)?/);\r\n        if (!m) return iso;\r\n        const hours = parseInt(m[1] || '0', 10);\r\n        const minutes = parseInt(m[2] || '0', 10);\r\n        const seconds = parseInt(m[3] || '0', 10);\r\n        const remHours = hours % 24;\r\n        const parts = [];\r\n        if (remHours) parts.push(`${remHours}h`);\r\n        if (minutes) parts.push(`${minutes}m`);\r\n        if (seconds) parts.push(`${seconds}s`);\r\n        return parts.length ? parts.join(' ') : '0m';\r\n    };\r\n\r\n     const fetchTopOnTime = async (start = stDate, end = enDate, limit = 5) => {\r\n        setLoading(true);\r\n        setError(null);\r\n        try {\r\n            const url = \"https://hrms.anasolconsultancyservices.com/api/attendance/top-ontime\";\r\n            const resp = await axios.get(url, { params: { start, end, limit } });\r\n            const payload = resp?.data ?? {};\r\n            if (payload && typeof payload === \"object\" && !Array.isArray(payload)) {\r\n                const entries = Object.entries(payload).map(([id, count]) => ({ id, count: Number(count) || 0 }));\r\n                entries.sort((a, b) => b.count - a.count);\r\n                setItems(entries);\r\n            } else {\r\n                setItems([]);\r\n            }\r\n        } catch (err) {\r\n            // verbose logging\r\n            console.error(\"fetchTopOnTime error:\", err);\r\n            console.error(\"axios response:\", err?.response);\r\n            // readable message for UI\r\n            const serverBody = err?.response?.data;\r\n            const message = err?.response?.data?.message\r\n                || (serverBody ? JSON.stringify(serverBody) : null)\r\n                || err?.message\r\n                || \"Failed to load top on-time\";\r\n            setError(message);\r\n            setItems([]);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const fetchTopOvertime = async (start = stDate, end = enDate, limit = 5) => {\r\n        setLoading(true);\r\n        setError(null);\r\n        try {\r\n            const url = \"https://hrms.anasolconsultancyservices.com/api/attendance/top-overtime\";\r\n            const resp = await axios.get(url, { params: { start, end, limit } });\r\n            const payload = resp?.data ?? {};\r\n            if (payload && typeof payload === \"object\" && !Array.isArray(payload)) {\r\n                const entries = Object.entries(payload).map(([id, raw]) => ({\r\n                    id,\r\n                    raw: String(raw),\r\n                    durationReadable: parseISODuration(String(raw)),\r\n                }));\r\n                entries.sort((a, b) => {\r\n                    const ah = parseInt((a.raw.match(/PT(\\d+)H/) || [0,0])[1], 10) || 0;\r\n                    const bh = parseInt((b.raw.match(/PT(\\d+)H/) || [0,0])[1], 10) || 0;\r\n                    return bh - ah;\r\n                });\r\n                setItems(entries);\r\n            } else {\r\n                setItems([]);\r\n            }\r\n        } catch (err) {\r\n            // verbose logging\r\n            console.error(\"fetchTopOvertime error:\", err);\r\n            console.error(\"axios response:\", err?.response);\r\n            // readable message for UI\r\n            const serverBody = err?.response?.data;\r\n            const message = err?.response?.data?.message\r\n                || (serverBody ? JSON.stringify(serverBody) : null)\r\n                || err?.message\r\n                || \"Failed to load top overtime\";\r\n            setError(message);\r\n            setItems([]);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        // fetch based on current mode when dates or mode change\r\n        if (mode === 'ontime') fetchTopOnTime(stDate, enDate, 5);\r\n        else fetchTopOvertime(stDate, enDate, 5);\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [stDate, enDate, mode]);\r\n\r\n    return (\r\n        <motion.div\r\n            className={` rounded-xl shadow-md p-2 w-full h-96 font-sans border border-gray-200  flex flex-col ${theme === 'dark' ? 'bg-gray-600 text-gray-100' : 'bg-stone-100 text-gray-900'}`}\r\n            initial={{ opacity: 0, y: 50 }}\r\n            animate={{ opacity: 1, y: 0.5, scale: 1 }}\r\n            transition={{ duration: 0.5, delay: 0.2 }}\r\n        >\r\n            <div className=\"flex items-center justify-between mb-2\">\r\n                <h2 className={`text-lg font-bold ${theme === 'dark' ? 'text-white' : 'text-gray-800'}`}>\r\n                    <ClockIcon className=\"w-6 h-6 text-blue-500 inline-block mr-2\" />\r\n                    {mode === 'ontime' ? 'Top On-Time' : 'Top OverTime'}\r\n                </h2>\r\n\r\n                <div className=\"flex items-center space-x-2\">\r\n                    <button\r\n                        onClick={() => setMode('ontime')}\r\n                        className={`px-3 py-1 rounded text-sm ${mode === 'ontime' ? 'bg-blue-500 text-white' : 'bg-gray-200 text-gray-800'}`}\r\n                    >\r\n                        Top On-Time\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setMode('overtime')}\r\n                        className={`px-3 py-1 rounded text-sm ${mode === 'overtime' ? 'bg-blue-500 text-white' : 'bg-gray-200 text-gray-800'}`}\r\n                    >\r\n                        Top OverTime\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"flex flex-col sm:flex-row items-start sm:items-center space-y-2 sm:space-y-0 sm:space-x-2 mt-2 mb-2\">\r\n                <input\r\n                    type=\"date\"\r\n                    value={stDate}\r\n                    onChange={(e) => setStDate(e.target.value)}\r\n                    className=\"p-1 border rounded\"\r\n                />\r\n                <input\r\n                    type=\"date\"\r\n                    value={enDate}\r\n                    onChange={(e) => setEnDate(e.target.value)}\r\n                    className=\"p-1 border rounded\"\r\n                />\r\n                <button\r\n                    onClick={() => {\r\n                        if (mode === 'ontime') fetchTopOnTime(stDate, enDate, 5);\r\n                        else fetchTopOvertime(stDate, enDate, 5);\r\n                    }}\r\n                    className=\"px-3 py-1 bg-blue-500 text-white rounded text-sm\"\r\n                    disabled={loading}\r\n                >\r\n                    Apply\r\n                </button>\r\n            </div>\r\n\r\n            <div className=\"space-y-3 overflow-y-auto pr-2 flex-1\">\r\n                {loading ? (\r\n                    <div className=\"text-center py-6\">Loading</div>\r\n                ) : error ? (\r\n                    <div className=\"text-red-600 text-center py-4\">Error: {String(error)}</div>\r\n                ) : items.length === 0 ? (\r\n                    <div className=\"text-gray-500 text-center py-6\">No data for selected range.</div>\r\n                ) : (\r\n                    <AnimatePresence>\r\n                        {items.map((it, idx) => (\r\n                            <motion.div\r\n                                key={it.id}\r\n                                initial={{ opacity: 0, y: 8 }}\r\n                                animate={{ opacity: 1, y: 0 }}\r\n                                exit={{ opacity: 0, y: -8 }}\r\n                                transition={{ duration: 0.2, delay: idx * 0.03 }}\r\n                                className={`flex items-center justify-between rounded-lg p-2 border ${theme === 'dark' ? 'bg-gray-700 border-gray-600' : 'bg-white border-gray-200'}`}\r\n                            >\r\n                                <div className=\"flex items-center\">\r\n                                    <motion.img\r\n                                        src={`https://ui-avatars.com/api/?name=${encodeURIComponent(it.id)}&background=DDD&color=333`}\r\n                                        alt={it.id}\r\n                                        className=\"w-10 h-10 rounded-full mr-3 object-cover\"\r\n                                    />\r\n                                    <div>\r\n                                        <p className={`font-semibold ${theme === 'dark' ? 'text-white' : 'text-gray-800'}`}>{it.id}</p>\r\n                                        <p className={`text-sm ${theme === 'dark' ? 'text-gray-300' : 'text-gray-600'}`}>\r\n                                            {mode === 'ontime' ? 'On-time count' : `Overtime: ${it.durationReadable || it.raw}`}\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className=\"flex items-center space-x-2\">\r\n                                    <div className={`px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800`}>\r\n                                        {mode === 'ontime' ? it.count : (it.durationReadable || 'N/A')}\r\n                                    </div>\r\n                                </div>\r\n                            </motion.div>\r\n                        ))}\r\n                    </AnimatePresence>\r\n                )}\r\n            </div>\r\n        </motion.div>\r\n    );\r\n};\r\n\r\n//const onTimeDate = [\r\n//  { Date: \"11\", Month: \"Aug\", Year: \"2025\", NoofEmployee: 100 },\r\n//  { Date: \"12\", Month: \"Aug\", Year: \"2025\", NoofEmployee: 120 },\r\n//  { Date: \"13\", Month: \"Aug\", Year: \"2025\", NoofEmployee: 80 },\r\n//  { Date: \"14\", Month: \"Aug\", Year: \"2025\", NoofEmployee: 150 },\r\n//  { Date: \"15\", Month: \"Aug\", Year: \"2025\", NoofEmployee: 7 },\r\n//];\r\n\r\nconst EmployeeBarChart = () => {\r\n  const { theme } = useContext(Context);\r\n  const todayISO = new Date().toISOString().slice(0, 10);\r\n  const sevenDaysAgo = new Date(Date.now() - 6 * 24 * 60 * 60 * 1000).toISOString().slice(0, 10);\r\n\r\n  const [stDate, setStDate] = useState(sevenDaysAgo);\r\n  const [enDate, setEnDate] = useState(todayISO);\r\n\r\n  const [dataPoints, setDataPoints] = useState([]); // [{ date: '2025-10-14', employees: 6 }, ...]\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  const textColor = theme === 'dark' ? \"#FFFFFF\" : \"#000000\";\r\n  const barColor = \"#ADD8E6\";\r\n\r\n  const fetchOnTimeCounts = async (start = stDate, end = enDate) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const url = \"https://hrms.anasolconsultancyservices.com/api/attendance/numberOfOnTime\";\r\n      const resp = await axios.get(url, { params: { stDate: start, enDate: end } });\r\n      const payload = resp?.data ?? {};\r\n\r\n      let entries = [];\r\n      if (payload && typeof payload === \"object\" && !Array.isArray(payload)) {\r\n        entries = Object.entries(payload).map(([dateStr, count]) => {\r\n          const d = new Date(dateStr);\r\n          const display = !isNaN(d.getTime())\r\n            ? d.toLocaleString(\"en-US\", { day: \"2-digit\", month: \"short\" }) // \"14 Oct\"\r\n            : dateStr;\r\n          return { date: dateStr, label: display, employees: Number(count) || 0 };\r\n        });\r\n      } else if (Array.isArray(payload)) {\r\n        // fallback array shape\r\n        entries = payload.map(it => ({\r\n          date: it.date || it.Date || \"\",\r\n          label: it.date || it.Date || \"\",\r\n          employees: Number(it.count ?? it.NoofEmployee ?? it.noOfEmployee ?? it.value) || 0,\r\n        }));\r\n      }\r\n\r\n      // sort ascending by date\r\n      entries.sort((a, b) => new Date(a.date) - new Date(b.date));\r\n      setDataPoints(entries);\r\n    } catch (err) {\r\n      console.error(\"Failed to fetch on-time counts:\", err?.response ?? err);\r\n      setError(err?.response?.data ?? err?.message ?? \"Failed to load data\");\r\n      setDataPoints([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchOnTimeCounts(stDate, enDate);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  return (\r\n    <motion.div\r\n      className={` rounded-xl shadow-md p-2 w-full h-96 font-sans border border-gray-200  flex flex-col ${theme === 'dark' ? 'bg-gray-700 text-gray-200 ' : 'bg-stone-100 text-gray-800'}`}\r\n      initial={{ opacity: 0, y: 50 }}\r\n      animate={{ opacity: 1, y: 0.5, scale: 1 }}\r\n      transition={{ duration: 0.5, delay: 0.2 }}\r\n    >\r\n      <div className=\"mb-1\">\r\n        <h2 className=\"text-xl font-semibold\">On-Time Employees</h2>\r\n      </div>\r\n\r\n      <div className=\"flex flex-col sm:flex-row items-start sm:items-center space-y-2 sm:space-y-0 sm:space-x-2 mt-2 mb-2\">\r\n        <input\r\n          type=\"date\"\r\n          value={stDate}\r\n          onChange={(e) => setStDate(e.target.value)}\r\n          className=\"p-1 border rounded\"\r\n        />\r\n        <input\r\n          type=\"date\"\r\n          value={enDate}\r\n          onChange={(e) => setEnDate(e.target.value)}\r\n          className=\"p-1 border rounded\"\r\n        />\r\n        <button\r\n          onClick={() => fetchOnTimeCounts(stDate, enDate)}\r\n          className=\"px-3 py-1 bg-blue-500 text-white rounded text-sm\"\r\n          disabled={loading}\r\n        >\r\n          Apply\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"flex-1\">\r\n        {loading ? (\r\n          <div className=\"flex-1 flex items-center justify-center\">Loading</div>\r\n        ) : error ? (\r\n          <div className=\"flex-1 flex items-center justify-center text-red-600\">Error: {String(error)}</div>\r\n        ) : dataPoints.length === 0 ? (\r\n          <div className=\"flex-1 flex items-center justify-center text-gray-500\">No data for selected range.</div>\r\n        ) : (\r\n          <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n            <BarChart\r\n              data={dataPoints.map((d) => ({ name: d.label, employees: d.employees }))}\r\n              margin={{ top: 20, right: 20, left: 20, bottom: 5 }}\r\n            >\r\n              <XAxis dataKey=\"name\" stroke={textColor} tick={{ fill: textColor }} />\r\n              <YAxis label={{ value: \"No. of Employees\", angle: -90, position: \"insideLeft\" }} stroke={textColor} tick={{ fill: textColor }} hide />\r\n              <Tooltip contentStyle={{ backgroundColor: theme === 'dark' ? \"#63676cff\" : \"#fff\", border: theme ? \"1px solid #4B5563\" : \"1px solid #ccc\" }} />\r\n              <Bar dataKey=\"employees\" fill={barColor} barSize={40} />\r\n            </BarChart>\r\n          </ResponsiveContainer>\r\n        )}\r\n      </div>\r\n    </motion.div>\r\n  );\r\n};\r\n\r\n//const overTimeworkDate = [\r\n//  { Date: \"11\", Month: \"Aug\", Year: \"2025\", NoofEmployee: 50, Hour: 3 },\r\n//  { Date: \"12\", Month: \"Aug\", Year: \"2025\", NoofEmployee: 60, Hour: 5 },\r\n//  { Date: \"13\", Month: \"Aug\", Year: \"2025\", NoofEmployee: 10, Hour: 10 },\r\n//  { Date: \"14\", Month: \"Aug\", Year: \"2025\", NoofEmployee: 8, Hour: 15 },\r\n//  { Date: \"15\", Month: \"Aug\", Year: \"2025\", NoofEmployee: 40, Hour: 20 },\r\n//];\r\n\r\nconst EmployeeOvertimeChart = () => {\r\n  const { theme } = useContext(Context);\r\n  const todayISO = new Date().toISOString().slice(0, 10);\r\n  const sevenDaysAgo = new Date(Date.now() - 6 * 24 * 60 * 60 * 1000).toISOString().slice(0, 10);\r\n\r\n  const [stDate, setStDate] = useState(sevenDaysAgo);\r\n  const [enDate, setEnDate] = useState(todayISO);\r\n\r\n  const [dataPoints, setDataPoints] = useState([]); // [{ date: '2025-10-14', employees: 8 }, ...]\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  const textColor = theme === \"dark\" ? \"#FFFFFF\" : \"#000000\";\r\n  const barColor = \"#B19CD9\";\r\n\r\n  const fetchOvertimeCounts = async (start = stDate, end = enDate) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const url = \"https://hrms.anasolconsultancyservices.com/api/attendance/numberOfOvertime\";\r\n      const resp = await axios.get(url, { params: { stDate: start, enDate: end } });\r\n      // expected response: object mapping date -> count, e.g. { \"2025-10-14\": 8, \"2025-10-13\": 7, ... }\r\n      const payload = resp?.data ?? {};\r\n      let entries = [];\r\n      if (payload && typeof payload === \"object\" && !Array.isArray(payload)) {\r\n        entries = Object.entries(payload).map(([dateStr, count]) => {\r\n          // safe parse to Date for sorting; keep original key for label if parse fails\r\n          const d = new Date(dateStr);\r\n          const display = !isNaN(d.getTime())\r\n            ? d.toLocaleString(\"en-US\", { day: \"2-digit\", month: \"short\" }) // e.g. \"14 Oct\"\r\n            : dateStr;\r\n          return { date: dateStr, label: display, employees: Number(count) || 0 };\r\n        });\r\n      } else if (Array.isArray(payload)) {\r\n        // fallback: array of items { date: \"...\", count: N }\r\n        entries = payload.map((it) => ({\r\n          date: it.date || it.Date || \"\",\r\n          label: it.date || it.Date || \"\",\r\n          employees: Number(it.count ?? it.NoofEmployee ?? it.noOfEmployee ?? it.value) || 0,\r\n        }));\r\n      }\r\n\r\n      // sort ascending by date\r\n      entries.sort((a, b) => new Date(a.date) - new Date(b.date));\r\n      setDataPoints(entries);\r\n    } catch (err) {\r\n      console.error(\"Failed to fetch overtime counts:\", err?.response ?? err);\r\n      setError(err?.response?.data ?? err?.message ?? \"Failed to load data\");\r\n      setDataPoints([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchOvertimeCounts(stDate, enDate);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  return (\r\n    <motion.div\r\n      className={` rounded-xl shadow-md p-2 w-full h-96 font-sans border border-gray-200  flex flex-col ${theme === 'dark' ? 'bg-gray-700 text-gray-200 ' : 'bg-stone-100 text-gray-800'}`}\r\n      initial={{ opacity: 0, y: 50 }}\r\n      animate={{ opacity: 1, y: 0.5, scale: 1 }}\r\n      transition={{ duration: 0.5, delay: 0.2 }}\r\n    >\r\n       <div className=\"mb-1\">\r\n        <h2 className=\"text-xl font-semibold\">OverTime (No. of Employees)</h2>\r\n      </div>\r\n\r\n      <div className=\"flex flex-col sm:flex-row items-start sm:items-center space-y-2 sm:space-y-0 sm:space-x-2 mt-2\">\r\n        <input\r\n          type=\"date\"\r\n          value={stDate}\r\n          onChange={(e) => setStDate(e.target.value)}\r\n          className=\"p-1 border rounded\"\r\n        />\r\n        <input\r\n          type=\"date\"\r\n          value={enDate}\r\n          onChange={(e) => setEnDate(e.target.value)}\r\n          className=\"p-1 border rounded\"\r\n        />\r\n        <button\r\n          onClick={() => fetchOvertimeCounts(stDate, enDate)}\r\n          className=\"px-3 py-1 bg-blue-500 text-white rounded text-sm\"\r\n          disabled={loading}\r\n        >\r\n          Apply\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"flex-1\">\r\n        {loading ? (\r\n          <div className=\"flex-1 flex items-center justify-center\">Loading</div>\r\n        ) : error ? (\r\n          <div className=\"flex-1 flex items-center justify-center text-red-600\">Error: {String(error)}</div>\r\n        ) : dataPoints.length === 0 ? (\r\n          <div className=\"flex-1 flex items-center justify-center text-gray-500\">No data for selected range.</div>\r\n        ) : (\r\n          <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n            <BarChart\r\n              data={dataPoints.map((d) => ({ name: d.label, employees: d.employees }))}\r\n              margin={{ top: 20, right: 20, left: 20, bottom: 5 }}\r\n            >\r\n              <XAxis dataKey=\"name\" stroke={textColor} tick={{ fill: textColor }} />\r\n              <YAxis label={{ value: \"No. of Employees\", angle: -90, position: \"insideLeft\" }} stroke={textColor} tick={{ fill: textColor }} hide />\r\n              <Tooltip contentStyle={{ backgroundColor: theme === 'dark' ? \"#63676cff\" : \"#fff\", border: theme ? \"1px solid #4B5563\" : \"1px solid #ccc\" }} />\r\n              <Bar dataKey=\"employees\" fill={barColor} barSize={40} />\r\n            </BarChart>\r\n          </ResponsiveContainer>\r\n        )}\r\n      </div>\r\n    </motion.div>\r\n  );\r\n};\r\n// ...existing helpers...\r\nconst parseEffectiveHours = (effectiveHours) => {\r\n  if (!effectiveHours) return 0;\r\n  const match = ('' + effectiveHours).match(/PT(?:(\\d+)H)?(?:(\\d+)M)?/);\r\n  if (match) {\r\n    const hours = match[1] ? parseInt(match[1], 10) : 0;\r\n    const minutes = match[2] ? parseInt(match[2], 10) : 0;\r\n    return hours * 60 + minutes;\r\n  }\r\n  if (!isNaN(Number(effectiveHours))) {\r\n    return Math.round(Number(effectiveHours) * 60);\r\n  }\r\n  const hhmm = ('' + effectiveHours).match(/^(\\d{1,2}):(\\d{2})$/);\r\n  if (hhmm) return parseInt(hhmm[1], 10) * 60 + parseInt(hhmm[2], 10);\r\n  return 0;\r\n};\r\nconst formatMinutesToHHMM = (totalMinutes) => {\r\n  const hours = Math.floor(totalMinutes / 60);\r\n  const minutes = totalMinutes % 60;\r\n  return `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}`;\r\n};\r\n\r\nconst IST_OFFSET_MINUTES = 5 * 60 + 30;\r\n\r\n// convert/shift time string to IST display (adds 5:30 to UTC)\r\nconst toISTTimeDisplay = (timeStr, dateRef = null) => {\r\n  if (!timeStr) return 'N/A';\r\n  const raw = String(timeStr).trim();\r\n  if (raw === 'N/A') return 'N/A';\r\n  try {\r\n    let d;\r\n    if (/\\d{4}-\\d{2}-\\d{2}T/.test(raw) || raw.includes('Z')) {\r\n      d = new Date(raw);\r\n    } else if (/^\\d{4}-\\d{2}-\\d{2}$/.test(raw) && dateRef === null) {\r\n      d = new Date(raw);\r\n    } else if (/^\\d{2}:\\d{2}(:\\d{2})?$/.test(raw)) {\r\n      const datePart = dateRef || new Date().toISOString().slice(0,10);\r\n      d = new Date(`${datePart}T${raw}${raw.includes('Z') ? '' : 'Z'}`);\r\n    } else {\r\n      d = new Date(raw);\r\n    }\r\n    if (isNaN(d.getTime())) return raw;\r\n    const shifted = new Date(d.getTime() + IST_OFFSET_MINUTES * 60 * 1000);\r\n    return shifted.toLocaleTimeString('en-IN', { hour: '2-digit', minute: '2-digit', hour12: true });\r\n  } catch (e) {\r\n    return raw;\r\n  }\r\n};\r\n\r\n// parse time into Date (shifted to IST) for duration calc\r\nconst parseToISTDate = (timeStr, dateRef = null) => {\r\n  if (!timeStr) return null;\r\n  const raw = String(timeStr).trim();\r\n  try {\r\n    let d;\r\n    if (/\\d{4}-\\d{2}-\\d{2}T/.test(raw) || raw.includes('Z')) {\r\n      d = new Date(raw);\r\n    } else if (/^\\d{4}-\\d{2}-\\d{2}$/.test(raw) && dateRef === null) {\r\n      d = new Date(raw);\r\n    } else if (/^\\d{2}:\\d{2}(:\\d{2})?$/.test(raw)) {\r\n      const datePart = dateRef || new Date().toISOString().slice(0,10);\r\n      d = new Date(`${datePart}T${raw}${raw.includes('Z') ? '' : 'Z'}`);\r\n    } else {\r\n      d = new Date(raw);\r\n    }\r\n    if (isNaN(d.getTime())) return null;\r\n    return new Date(d.getTime() + IST_OFFSET_MINUTES * 60 * 1000);\r\n  } catch {\r\n    return null;\r\n  }\r\n};\r\n\r\nconst toHHMMDisplay = (value) => {\r\n  const minutes = parseEffectiveHours(value || '');\r\n  return minutes > 0 ? formatMinutesToHHMM(minutes) : 'N/A';\r\n};\r\n\r\n// GraphQL endpoint & query\r\nconst GRAPHQL_URL = \"https://hrms.anasolconsultancyservices.com/api/attendance/graphql\";\r\nconst ALL_EMPLOYEES_QUERY = `\r\n  query GetAllEmployeeDetailsOnDates($date: Date!) {\r\n    getAllEmployeeDetailsOnDates(date: $date) {\r\n      date\r\n      event\r\n      employeeId\r\n      isPresent\r\n      login\r\n      logout\r\n      effectiveHours\r\n      grossHours\r\n      holiday\r\n      mode\r\n    }\r\n  }\r\n`;\r\n\r\n// Component\r\nconst AttendanceTable = ({onBack}) => {\r\n  // removed leaveType state per request\r\n  const [sortBy, setSortBy] = useState('Recantly Added');\r\n  const [selectedMonth, setSelectedMonth] = useState('');\r\n  const [selectedDate, setSelectedDate] = useState('');\r\n  const {theme, userData}=useContext(Context);\r\n\r\n  // fetched attendance records\r\n  const [attendanceRecords, setAttendanceRecords] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  // pagination\r\n  const [page, setPage] = useState(1);\r\n  const [pageSize, setPageSize] = useState(12);\r\n\r\n  // build start/end date for fetch based on selectedMonth or current month\r\n  const buildRange = () => {\r\n    const today = new Date();\r\n    let year = today.getFullYear();\r\n    let monthIndex = today.getMonth(); // 0-based\r\n    if (selectedMonth) {\r\n      const m = new Date(`${selectedMonth} 1, ${year}`);\r\n      if (!isNaN(m)) monthIndex = m.getMonth();\r\n    }\r\n    const start = new Date(year, monthIndex, 1);\r\n    const end = new Date(year, monthIndex + 1, 0);\r\n    const toISO = d => d.toISOString().slice(0,10);\r\n    return { startISO: toISO(start), endISO: toISO(end) };\r\n  };\r\n\r\n  useEffect(() => {\r\n    let cancelled = false;\r\n    const fetchData = async () => {\r\n      setLoading(true);\r\n      setError(null);\r\n      try {\r\n        const fetchDate = selectedDate || new Date().toISOString().slice(0,10);\r\n        const variables = { date: fetchDate };\r\n\r\n        const resp = await axios.post(GRAPHQL_URL, { query: ALL_EMPLOYEES_QUERY, variables }, {\r\n          headers: { \"Content-Type\": \"application/json\" }\r\n        });\r\n        if (cancelled) return;\r\n        if (resp?.data?.errors && resp.data.errors.length) {\r\n          throw new Error(resp.data.errors.map(e => e.message).join('; '));\r\n        }\r\n        const data = resp?.data?.data?.getAllEmployeeDetailsOnDates || [];\r\n\r\n        const normalized = data.map(item => {\r\n          const dateForTime = /^\\d{4}-\\d{2}-\\d{2}$/.test(item.date) ? item.date : (() => {\r\n            const parts = (item.date || '').split('-');\r\n            if (parts.length === 3) return `${parts[2]}-${parts[1]}-${parts[0]}`;\r\n            return new Date().toISOString().slice(0,10);\r\n          })();\r\n\r\n          // compute login/logout IST dates for duration\r\n         const loginIST = parseToISTDate(item.login, dateForTime);\r\n          const logoutIST = parseToISTDate(item.logout, dateForTime);\r\n\r\n          // total duration (base)\r\n          let totalDurationMinutes = 0;\r\n          if (loginIST && logoutIST && !isNaN(loginIST.getTime()) && !isNaN(logoutIST.getTime())) {\r\n            totalDurationMinutes = Math.max(0, Math.floor((logoutIST - loginIST) / (1000 * 60)));\r\n          } else {\r\n            // fallback: try effectiveHours if available (in minutes)\r\n            totalDurationMinutes = parseEffectiveHours(item.effectiveHours || '') || 0;\r\n          }\r\n\r\n          // Add IST offset minutes to durations and to effective/gross hours as requested\r\n          totalDurationMinutes = Math.max(0, totalDurationMinutes + IST_OFFSET_MINUTES);\r\n\r\n          const effectiveBase = parseEffectiveHours(item.effectiveHours || '');\r\n          const effectiveMinutes = effectiveBase ? Math.max(0, effectiveBase + IST_OFFSET_MINUTES) : 0;\r\n\r\n          const grossBase = parseEffectiveHours(item.grossHours || '');\r\n          const grossMinutes = grossBase ? Math.max(0, grossBase + IST_OFFSET_MINUTES) : 0;\r\n\r\n          return {\r\n            ...item,\r\n            date: item.date,\r\n            loginDisplay: (loginIST && !isNaN(loginIST.getTime()))\r\n              ? loginIST.toLocaleTimeString('en-IN', { hour: '2-digit', minute: '2-digit', hour12: true })\r\n              : toISTTimeDisplay(item.login, dateForTime),\r\n            logoutDisplay: (logoutIST && !isNaN(logoutIST.getTime()))\r\n              ? logoutIST.toLocaleTimeString('en-IN', { hour: '2-digit', minute: '2-digit', hour12: true })\r\n              : toISTTimeDisplay(item.logout, dateForTime),\r\n            effectiveHoursDisplay: effectiveMinutes > 0 ? formatMinutesToHHMM(effectiveMinutes) : 'N/A',\r\n            grossHoursDisplay: grossMinutes > 0 ? formatMinutesToHHMM(grossMinutes) : 'N/A',\r\n            totalDurationMinutes,\r\n            totalDurationHHMM: totalDurationMinutes > 0 ? formatMinutesToHHMM(totalDurationMinutes) : 'N/A',\r\n            attended: (() => {\r\n              const v = item.isPresent;\r\n              if (v == null) return false;\r\n              const s = String(v).toLowerCase();\r\n              return ['present','p','yes','true','1'].includes(s);\r\n            })()\r\n          };\r\n        });\r\n\r\n        setAttendanceRecords(normalized);\r\n        setPage(1);\r\n      } catch (err) {\r\n        console.error(err);\r\n        setError(err.message || 'Failed to load attendance');\r\n        setAttendanceRecords([]);\r\n      } finally {\r\n        if (!cancelled) setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n    return () => { cancelled = true; };\r\n  }, [selectedDate, userData]);\r\n\r\n  // Filtering / sorting / pagination uses attendanceRecords state\r\n  const filteredSorted = useMemo(() => {\r\n    let result = [...attendanceRecords];\r\n\r\n    // removed leaveType filtering per request\r\n\r\n    switch (sortBy) {\r\n      case 'Ascending':\r\n        result.sort((a,b) => (a.employeeId||'').localeCompare(b.employeeId||''));\r\n        break;\r\n      case 'Descending':\r\n        result.sort((a,b) => (b.employeeId||'').localeCompare(a.employeeId||''));\r\n        break;\r\n      case 'Last Month':\r\n        break;\r\n      case 'Last 7 days':\r\n        result.sort((a,b) => new Date(b.date) - new Date(a.date));\r\n        break;\r\n      case 'This Month':\r\n        break;\r\n      case 'Recantly Added':\r\n      default:\r\n        result.sort((a,b) => new Date(b.date) - new Date(a.date));\r\n        break;\r\n    }\r\n\r\n    return result;\r\n  }, [attendanceRecords, sortBy]);\r\n\r\n  const totalPages = Math.max(1, Math.ceil(filteredSorted.length / pageSize));\r\n  const pageItems = filteredSorted.slice((page-1)*pageSize, page*pageSize);\r\n\r\n  const totalEmployees = useMemo(() => {\r\n    const uniqueIds = new Set(attendanceRecords.map(item => item.employeeId));\r\n    return uniqueIds.size;\r\n  }, [attendanceRecords]);\r\n\r\n  const months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\r\n\r\n  return (\r\n    <div className={`p-4 sm:p-8 ${theme==='dark'?'bg-gray-800':'bg-gray-50'} min-h-screen`}>\r\n      <h1 className=\"text-3xl font-extrabold text-indigo-800 mb-6 border-b pb-2\">\r\n        <span role=\"img\" aria-label=\"clock\"></span> Employee Attendance Tracker\r\n      </h1>\r\n      <div className={`flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 p-4 ${theme==='dark'?'bg-gray-700':'bg-white'} rounded-xl shadow-lg border-l-4 border-indigo-500`}>\r\n        <div className={`text-lg font-semibold ${theme==='dark'?'text-gray-100':'text-gray-700'} mb-4 sm:mb-0`}>\r\n          Total Employees: <span className=\"text-indigo-600 text-2xl\">{totalEmployees}</span>\r\n        </div>\r\n\r\n        <div className=\"flex flex-wrap gap-4 items-center\">\r\n         {/* Single-date fetch control */}\r\n         <div className=\"flex items-center space-x-2\">\r\n           <input type=\"date\" value={selectedDate} onChange={(e)=>{ setSelectedDate(e.target.value); }} className=\"p-2 border border-gray-300 rounded-lg\" />\r\n           <button onClick={()=>setSelectedDate('')} className=\"px-3 py-2 bg-gray-200 rounded\">Clear</button>\r\n         </div>\r\n\r\n          <select value={selectedMonth} onChange={(e)=>setSelectedMonth(e.target.value)} className={`p-2 border border-gray-300 rounded-lg text-sm ${theme==='dark'?'bg-gray-700 text-gray-50':'bg-white'}`}>\r\n            <option value=\"\">Select Month: All</option>\r\n            {months.map(m => <option key={m} value={m}>{m}</option>)}\r\n          </select>\r\n\r\n          <select value={sortBy} onChange={(e)=>setSortBy(e.target.value)} className={`p-2 border border-gray-300 rounded-lg text-sm ${theme==='dark'?'bg-gray-700 text-gray-50':'bg-white'}`}>\r\n            <option value=\"Recantly Added\">Sorted By: Recently Added</option>\r\n            <option value=\"Ascending\">EmployeeId: Ascending</option>\r\n            <option value=\"Descending\">EmployeeId: Descending</option>\r\n            <option value=\"This Month\">Date: This Month</option>\r\n            <option value=\"Last Month\">Date: Last Month</option>\r\n            <option value=\"Last 7 days\">Date: Last 7 days</option>\r\n          </select>\r\n\r\n          <select value={pageSize} onChange={(e)=>{setPageSize(Number(e.target.value)); setPage(1);}} className=\"p-2 border border-gray-300 rounded-lg text-sm bg-white\">\r\n            <option value={6}>6 / page</option>\r\n            <option value={12}>12 / page</option>\r\n            <option value={24}>24 / page</option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"overflow-x-auto shadow-2xl rounded-xl\">\r\n        <table className=\"min-w-full bg-white border-collapse\">\r\n          <thead className=\"bg-indigo-600 text-white sticky top-0\">\r\n            <tr>\r\n              <th className=\"py-3 px-4 text-left text-sm font-semibold uppercase tracking-wider border-b border-indigo-500 hidden sm:table-cell\">EmployeeId</th>\r\n              <th className=\"py-3 px-4 text-left text-sm font-semibold uppercase tracking-wider border-b border-indigo-500 hidden sm:table-cell\">Date</th>\r\n              <th className=\"py-3 px-4 text-left text-sm font-semibold uppercase tracking-wider border-indigo-500 hidden sm:table-cell\">Mode</th>\r\n              <th className=\"py-3 px-4 text-left text-sm font-semibold uppercase tracking-wider border-indigo-500 hidden sm:table-cell\">Login</th>\r\n              <th className=\"py-3 px-4 text-left text-sm font-semibold uppercase tracking-wider border-indigo-500 hidden sm:table-cell\">Logout</th>\r\n              <th className=\"py-3 px-4 text-left text-sm font-semibold uppercase tracking-wider border-indigo-500 hidden sm:table-cell\">Total Duration</th>\r\n              <th className=\"py-3 px-4 text-left text-sm font-semibold uppercase tracking-wider border-indigo-500 hidden sm:table-cell\">Gross Hours</th>\r\n              <th className=\"py-3 px-4 text-left text-sm font-semibold uppercase tracking-wider border-indigo-500 hidden sm:table-cell\">Effective Hours</th>\r\n              <th className=\"py-3 px-4 text-left text-sm font-semibold uppercase tracking-wider border-indigo-500 hidden sm:table-cell\">Status</th>\r\n              <th className=\"py-3 px-4 text-left text-sm font-semibold uppercase tracking-wider border-indigo-500 sm:hidden\">Employee Details</th>\r\n            </tr>\r\n          </thead>\r\n\r\n          <tbody>\r\n            {loading ? (\r\n              <tr><td colSpan={10} className=\"text-center py-8\">Loading</td></tr>\r\n            ) : error ? (\r\n              <tr><td colSpan={10} className=\"text-center py-8 text-red-600\">{error}</td></tr>\r\n            ) : pageItems.length === 0 ? (\r\n              <tr><td colSpan={10} className=\"text-center py-6 text-gray-500\">No attendance records found for the selected filters.</td></tr>\r\n            ) : pageItems.map(record => {\r\n                const totalDurationHHMM = record.totalDurationHHMM || 'N/A';\r\n                const effectiveHoursHHMM = record.effectiveHoursDisplay || 'N/A';\r\n                const grossHoursHHMM = record.grossHoursDisplay || 'N/A';\r\n                const statusColor = record.attended ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800';\r\n\r\n                return (\r\n                  <tr key={`${record.employeeId}-${record.date}`} className={`border-b transition-colors duration-200 ${theme==='dark'?'bg-gray-700 hover:bg-gray-600':'hover:bg-gray-200'}`}>\r\n                    <td className={`py-4 px-4 ${theme==='dark'?' text-gray-50':'text-gray-700'} font-medium hidden sm:table-cell`}>{record.employeeId}</td>\r\n                    <td className={`py-4 px-4 text-sm ${theme==='dark'?' text-gray-50':'text-gray-700'} hidden sm:table-cell`}>{record.date}</td>\r\n                    <td className=\"py-4 px-4 text-sm text-gray-600 hidden sm:table-cell\"><span className={`px-3 py-1 text-xs font-semibold rounded-full ${record.mode === 'Office' ? 'bg-blue-100 text-blue-800' : 'bg-yellow-100 text-yellow-800'}`}>{record.mode}</span></td>\r\n                    <td className={`py-4 px-4 text-sm ${theme==='dark'?' text-gray-50':'text-gray-700'} hidden sm:table-cell`}>{record.loginDisplay}</td>\r\n                    <td className={`py-4 px-4 text-sm ${theme==='dark'?' text-gray-50':'text-gray-700'} hidden sm:table-cell`}>{record.logoutDisplay}</td>\r\n                    <td className={`py-4 px-4 text-sm font-semibold ${theme==='dark'?' text-indigo-500':'text-indigo-700'} hidden sm:table-cell`}>{totalDurationHHMM}</td>\r\n                    <td className={`py-4 px-4 text-sm ${theme==='dark'?' text-purple-300':'text-purple-700'} hidden sm:table-cell`}>{grossHoursHHMM}</td>\r\n                    <td className={`py-4 px-4 text-sm font-bold ${theme==='dark'?' text-green-300':'text-green-700'} hidden sm:table-cell`}>{effectiveHoursHHMM}</td>\r\n                    <td className=\"py-4 px-4 text-sm hidden sm:table-cell\"><span className={`px-3 py-1 text-xs font-semibold rounded-full ${statusColor}`}>{record.attended ? 'Present' : 'Absent'}</span></td>\r\n\r\n                    <td className=\"py-4 px-4 sm:hidden\">\r\n                      <div className=\"flex flex-col space-y-1\">\r\n                        <span className={`text-base font-bold ${theme==='dark'?' text-indigo-300':'text-indigo-700'}`}>{record.employeeId}</span>\r\n                        <span className={`text-sm ${theme==='dark'?' text-gray-100':'text-gray-600'}`}>Date: {record.date} ({record.mode})</span>\r\n                        <span className={`text-sm ${theme==='dark'?' text-gray-100':'text-gray-600'}`}>{record.loginDisplay} - {record.logoutDisplay}</span>\r\n                        <div className=\"text-xs font-medium mt-1\"><span className={`${theme==='dark'?' text-green-400':'text-green-700'}`}>Effective: {effectiveHoursHHMM}</span></div>\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                );\r\n            })}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      {/* pagination controls */}\r\n      <div className=\"flex items-center justify-between mt-4\">\r\n        <div className=\"text-sm text-gray-600\">Showing {pageItems.length} of {filteredSorted.length} records</div>\r\n        <div className=\"flex items-center space-x-2\">\r\n          <button onClick={()=>setPage(p=>Math.max(1,p-1))} disabled={page<=1} className=\"px-3 py-1 bg-gray-200 rounded disabled:opacity-50\">Prev</button>\r\n          <span className=\"px-3 py-1\">Page {page} / {totalPages}</span>\r\n          <button onClick={()=>setPage(p=>Math.min(totalPages,p+1))} disabled={page>=totalPages} className=\"px-3 py-1 bg-gray-200 rounded disabled:opacity-50\">Next</button>\r\n        </div>\r\n      </div>\r\n\r\n      <p className={`text-sm ${theme==='dark'?' text-gray-50':'text-gray-700'} mt-6 text-center`}>\r\n        Data is displayed for <strong>{filteredSorted.length}</strong> attendance record(s) based on current filters.\r\n      </p>\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\n\r\n\r\nfunction AttendanceReports({ onBack }) {\r\n    return (\r\n        <div className=\"p-2 sm:p-4 min-h-screen font-sans\">\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n            <button\r\n                onClick={onBack}\r\n                className=\"mb-4 px-4 py-2 bg-indigo-100 text-blue-600 rounded-lg font-semibold shadow hover:bg-indigo-200 transition\"\r\n            >\r\n                 Back to Dashboard\r\n            </button>\r\n            </div>\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-1 gap-6 mb-2\">\r\n                <DashboardGrid />\r\n                \r\n                \r\n            </div>\r\n             <div className=\"grid grid-cols-1 lg:grid-cols-3  gap-6 mb-8\">\r\n                <TopOnTime />\r\n                <EmployeeBarChart/>\r\n                <EmployeeOvertimeChart/>\r\n            </div>\r\n\r\n            <div className=\"w-full\">\r\n                <AttendanceTable  />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\nexport default AttendanceReports;","import React, { useState, useEffect, useMemo, useContext, useCallback, useRef } from \"react\";\r\nimport { Context } from \"../HrmsContext\";\r\nimport { CalendarDaysIcon, ClockIcon, ArrowLeftIcon, BriefcaseIcon, ChartBarIcon, ChartPieIcon, XCircleIcon, } from \"@heroicons/react/24/outline\";\r\nimport { PieChart, Pie, Cell, Tooltip, ResponsiveContainer, Legend, BarChart, Bar, XAxis, YAxis, } from \"recharts\";\r\nimport { LineChart, Line, } from 'recharts';\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport useMediaQuery from \"@mui/material/useMediaQuery\";\r\nimport axios from 'axios';\r\nimport { useParams } from \"react-router-dom\";\r\nimport { SidebarOpen } from \"lucide-react\";\r\nimport { FaBuilding, FaHome } from \"react-icons/fa\"\r\nimport AttendanceReports from \"./AttendanceReports\";\r\nimport { authApi, dashboardApi, publicinfoApi } from \"../../../../axiosInstance\";\r\nimport { IoPersonOutline } from \"react-icons/io5\";\r\nimport AttendanceTable from \"./TotalEmployeeAttendance\";\r\nimport { LiaFileAlt } from \"react-icons/lia\";\r\nimport { Calendar, Clock, CheckCircle, AlertTriangle, ChevronLeft, ChevronRight, Edit, X } from \"lucide-react\";\r\n\r\n\r\n\r\nconst PIE_COLORS = [\"#4F46E5\", \"#F97316\"];\r\nconst BAR_COLORS = { work: \"#4F46E5\", break: \"#F97316\" };\r\nconst STANDARD_WORKDAY_HOURS = 8;\r\nconst IST_OFFSET_MINUTES = 5 * 60 + 30;\r\n\r\nconst pad2 = (n) => String(n).padStart(2, '0');\r\n\r\nconst tryNormalizeTo24 = (timeStr) => {\r\n  if (!timeStr || typeof timeStr !== 'string') return null;\r\n  // If contains AM/PM, let Date parse it (works with \"hh:mm AM/PM\" or \"hh:mm:ss AM/PM\")\r\n  if (/[AP]M$/i.test(timeStr.trim())) {\r\n    const d = new Date(`2000-01-01 ${timeStr}`);\r\n    if (isNaN(d)) return null;\r\n    return `${pad2(d.getHours())}:${pad2(d.getMinutes())}`;\r\n  }\r\n  // Matches \"HH:MM\" or \"H:MM\" or \"HH:MM:SS\"\r\n  const hhmmMatch = timeStr.match(/^(\\d{1,2}):(\\d{2})(?::\\d{2})?$/);\r\n  if (hhmmMatch) {\r\n    return `${pad2(Number(hhmmMatch[1]))}:${pad2(Number(hhmmMatch[2]))}`;\r\n  }\r\n  // Try ISO datetime parse -> extract hours/minutes\r\n  const maybeDate = new Date(timeStr);\r\n  if (!isNaN(maybeDate)) {\r\n    return `${pad2(maybeDate.getHours())}:${pad2(maybeDate.getMinutes())}`;\r\n  }\r\n  return null;\r\n};\r\nconst formatHHMMTo12h = (hhmm) => {\r\n  if (!hhmm) return 'N/A';\r\n  const [hStr, mStr] = hhmm.split(':');\r\n  const hh = Number(hStr);\r\n  const mm = Number(mStr || '0');\r\n  if (Number.isNaN(hh) || Number.isNaN(mm)) return hhmm;\r\n  const period = hh >= 12 ? 'PM' : 'AM';\r\n  const h12 = hh % 12 === 0 ? 12 : hh % 12;\r\n  return `${h12}:${String(mm).padStart(2, '0')} ${period}`;\r\n};\r\n\r\nconst addMinutesToTimeString = (timeStr, minutesToAdd = IST_OFFSET_MINUTES) => {\r\n  const normalized = tryNormalizeTo24(timeStr);\r\n  if (!normalized) return timeStr;\r\n  const [hh, mm] = normalized.split(':').map(Number);\r\n  const totalMin = (hh * 60 + mm + minutesToAdd + 24 * 60) % (24 * 60);\r\n  const nh = Math.floor(totalMin / 60);\r\n  const nm = totalMin % 60;\r\n  return `${pad2(nh)}:${pad2(nm)}`;\r\n};\r\n\r\n// Apply offset for \"13:00 - 14:00\" style ranges\r\nconst shiftRange = (rangeStr) => {\r\n  if (!rangeStr || typeof rangeStr !== 'string') return rangeStr;\r\n  const parts = rangeStr.split(' - ').map(p => p.trim());\r\n  if (parts.length !== 2) return rangeStr;\r\n  const s = addMinutesToTimeString(parts[0]);\r\n  const e = addMinutesToTimeString(parts[1]);\r\n  return `${s} - ${e}`;\r\n};\r\n\r\n// Apply offset to schedule object (Start_time, End_time, Break_hour)\r\nconst applyOffsetToSchedule = (schedule) => {\r\n  if (!schedule) return schedule;\r\n  const res = { ...schedule };\r\n  if (res.Start_time) res.Start_time = addMinutesToTimeString(res.Start_time);\r\n  if (res.End_time) res.End_time = addMinutesToTimeString(res.End_time);\r\n  if (Array.isArray(res.Break_hour)) {\r\n    res.Break_hour = res.Break_hour.map(b => {\r\n      if (!b) return b;\r\n      const newB = { ...b };\r\n      if (newB.Time) newB.Time = shiftRange(newB.Time);\r\n      return newB;\r\n    });\r\n  } else if (res.Break_hour && typeof res.Break_hour === 'string') {\r\n    res.Break_hour = shiftRange(res.Break_hour);\r\n  }\r\n  return res;\r\n};\r\nconst parseEffectiveHours = (effectiveHours) => {\r\n  if (!effectiveHours) return 0;\r\n  const s = String(effectiveHours).trim();\r\n  // ISO duration like PT8H30M\r\n  const match = s.match(/PT(?:(\\d+)H)?(?:(\\d+)M)?/);\r\n  if (match) {\r\n    const hours = match[1] ? parseInt(match[1], 10) : 0;\r\n    const minutes = match[2] ? parseInt(match[2], 10) : 0;\r\n    return hours * 60 + minutes;\r\n  }\r\n  // decimal hours like \"8.5\"\r\n  if (!isNaN(Number(s))) {\r\n    return Math.round(Number(s) * 60);\r\n  }\r\n  // hh:mm format\r\n  const hhmm = s.match(/^(\\d{1,2}):(\\d{2})$/);\r\n  if (hhmm) return parseInt(hhmm[1], 10) * 60 + parseInt(hhmm[2], 10);\r\n  return 0;\r\n};\r\nconst formatMinutesToHHMM = (totalMinutes) => {\r\n  const hours = Math.floor(totalMinutes / 60);\r\n  const minutes = totalMinutes % 60;\r\n  return `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}`;\r\n};\r\n\r\n\r\n\r\n// Parse time string into Date and shift to IST (dateRef = 'YYYY-MM-DD' used when timeStr is 'HH:mm')\r\n\r\n\r\n\r\nconst toHHMMDisplay = (value) => {\r\n  const minutes = parseEffectiveHours(value || '');\r\n  return minutes > 0 ? formatMinutesToHHMM(minutes) : 'N/A';\r\n};\r\nconst DETAILS_QUERY = `\r\n  query getDetailsBetweenDates($employeeId: String!, $startDate: Date!, $endDate: Date!) {\r\n    getDetailsBetweenDates(employeeId: $employeeId, startDate: $startDate, endDate: $endDate) {\r\n      date\r\n      employeeId\r\n      isPresent\r\n      login\r\n      logout\r\n      effectiveHours\r\n      grossHours\r\n      mode\r\n    }\r\n  }\r\n`;\r\n\r\n\r\nconst getDaysInMonth = (year, month) => new Date(year, month + 1, 0).getDate();\r\nconst getFirstDayOfMonth = (year, month) => new Date(year, month, 1).getDay();\r\nconst MONTHS = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\r\nconst DAYS_OF_WEEK = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\r\n\r\n\r\nconst toIsoDate = (dateString) => {\r\n  if (!dateString) return '';\r\n  const parts = dateString.split('-');\r\n  // Converts DD-MM-YYYY to YYYY-MM-DD for date input\r\n  if (parts.length === 3) {\r\n    return `${parts[2]}-${parts[1]}-${parts[0]}`;\r\n  }\r\n  return dateString;\r\n};\r\n\r\nconst toStandardDate = (isoDateString) => {\r\n  if (!isoDateString) return '';\r\n  const parts = isoDateString.split('-');\r\n  // Converts YYYY-MM-DD to DD-MM-YYYY for display/storage\r\n  if (parts.length === 3) {\r\n    return `${parts[2]}-${parts[1]}-${parts[0]}`;\r\n  }\r\n  return isoDateString;\r\n};\r\n\r\n/**\r\n * @param {string} query\r\n * @param {object} variables \r\n * @returns {Promise<object>}\r\n */\r\nconst executeGraphQL = async (query, variables = {}) => {\r\n  try {\r\n    // use dashboardApi so baseURL and auth headers are applied consistently\r\n    const resp = await dashboardApi.post(\"/attendance/graphql\", { query, variables }, {\r\n      headers: { \"Content-Type\": \"application/json\" }\r\n    });\r\n    // axios response shape: resp.data => { data, errors }\r\n    if (resp?.data?.errors && resp.data.errors.length) {\r\n      const msg = resp.data.errors.map(e => e.message).join(\"; \");\r\n      const err = new Error(msg);\r\n      err.graphql = resp.data.errors;\r\n      throw err;\r\n    }\r\n    return resp?.data?.data ?? null;\r\n  } catch (err) {\r\n    // surface helpful debug info\r\n    console.error(\"executeGraphQL error:\", err?.message || err, err?.response?.data || err);\r\n    throw err;\r\n  }\r\n};\r\nconst GRAPHQL_URL = process.env.REACT_APP_HRMS_GRAPHQL_URL || \"https://hrms.anasolconsultancyservices.com/api/attendance/graphql\";\r\nconst graphqlRequest = async (query, variables = {}) => {\r\n  const url = GRAPHQL_URL;\r\n  try {\r\n    const client = (dashboardApi && typeof dashboardApi.post === \"function\") ? dashboardApi : axios;\r\n    const token = (() => {\r\n      try { return localStorage.getItem('accessToken'); } catch { return null; }\r\n    })();\r\n    const headers = { \"Content-Type\": \"application/json\" };\r\n    if (token) headers.Authorization = `Bearer ${token}`;\r\n\r\n    const resp = await client.post(url, { query, variables }, { headers });\r\n    if (resp?.data?.errors && resp.data.errors.length) {\r\n      const msg = resp.data.errors.map(e => e.message).join(\"; \");\r\n      const err = new Error(msg);\r\n      err.graphql = resp.data.errors;\r\n      console.error(\"GraphQL response errors:\", resp.data.errors);\r\n      throw err;\r\n    }\r\n    return resp?.data?.data ?? null;\r\n  } catch (err) {\r\n    console.error(\"Error executing GraphQL operation:\", err?.message || err, {\r\n      url,\r\n      query: typeof query === \"string\" ? query.replace(/\\s+/g, \" \").slice(0, 200) + \"...\" : query,\r\n      variables,\r\n      responseData: err?.response?.data\r\n    });\r\n    throw err;\r\n  }\r\n};\r\nconst DayDetailsModal = ({ dayData, eventsOnThisDay: propEvents = [], onClose }) => {\r\n  const { userData } = useContext(Context);\r\n  const employeeId = userData?.employeeId;\r\n  const [attendanceData, setAttendanceData] = useState(null);\r\n  const [eventsOnThisDay, setEventsOnThisDay] = useState(propEvents);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  const dateString = dayData?.dateString || '';\r\n\r\n  // helper: add IST offset (5:30) to an effectiveHours value and return HH:MM string\r\n  const addIstToEffective = (effValue) => {\r\n    try {\r\n      const baseMinutes = parseEffectiveHours(effValue || '');\r\n      if (!baseMinutes) return 'N/A';\r\n\r\n      const adjusted = baseMinutes;\r\n\r\n      return formatMinutesToHHMM(adjusted);\r\n    } catch {\r\n      return 'N/A';\r\n    }\r\n  };\r\n\r\n  // NEW helper: shift given time by IST_OFFSET_MINUTES and return localized 12-hour string\r\n  // *** REPLACED WITH CORRECTED LOGIC ***\r\n  const shiftTimeToISTDisplay = (timeStr, dateIso = null) => {\r\n    if (!timeStr || timeStr === 'N/A') return 'N/A';\r\n\r\n\r\n\r\n    const baseDateString = dateIso || new Date().toISOString().slice(0, 10);\r\n\r\n    let d = new Date(`${baseDateString}T${timeStr}`);\r\n\r\n\r\n\r\n    if (isNaN(d.getTime())) {\r\n      try {\r\n        const parts = timeStr.split(':');\r\n        let h = parseInt(parts[0], 10) || 0;\r\n        let m = parseInt(parts[1], 10) || 0;\r\n\r\n\r\n\r\n        d = new Date(baseDateString);\r\n        d.setHours(h, m, 0, 0);\r\n      } catch {\r\n        return timeStr;\r\n      }\r\n    }\r\n\r\n    // Explicitly add 330 minutes (5 hours 30 minutes) as requested\r\n\r\n    d.setMinutes(d.getMinutes() + IST_OFFSET_MINUTES);\r\n\r\n\r\n\r\n    // Format to 12-hour IST display\r\n    return d.toLocaleTimeString('en-IN', { hour: '2-digit', minute: '2-digit', hour12: true });\r\n  };\r\n  // *** END OF REPLACEMENT ***\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    if (!dateString || !employeeId) {\r\n      // when using passed-in attendance, also convert times to IST and adjust effective hour\r\n      const src = dayData?.attendance ?? null;\r\n      if (src) {\r\n        const dateIso = toIsoDate(dateString) || undefined;\r\n        // USE shiftTimeToISTDisplay so times are explicitly +5:30\r\n        const loginIst = shiftTimeToISTDisplay(src.login ?? src.loginTime ?? 'N/A', dateIso);\r\n        const logoutIst = shiftTimeToISTDisplay(src.logout ?? src.logoutTime ?? 'N/A', dateIso);\r\n        const effAdj = addIstToEffective(src.effectiveHour ?? src.effectiveHours ?? src.effectiveHour);\r\n        setAttendanceData({\r\n          ...src,\r\n          login: loginIst,\r\n          logout: logoutIst,\r\n          effectiveHour: effAdj\r\n        });\r\n      } else {\r\n        setAttendanceData(null);\r\n      }\r\n      setEventsOnThisDay(propEvents || []);\r\n      setLoading(false);\r\n      return;\r\n    }\r\n    const QUERY = `\r\n     query getDetailsBetweenDates($employeeId: String!, $startDate: Date!, $endDate: Date!) {\r\n        getDetailsBetweenDates(employeeId: $employeeId, startDate: $startDate, endDate: $endDate) {\r\n          date\r\n          event\r\n          description\r\n          employeeId\r\n          isPresent\r\n          login\r\n          logout\r\n          effectiveHours\r\n          grossHours\r\n          holiday\r\n          mode\r\n        }\r\n      }\r\n    `;\r\n    const load = async () => {\r\n      setLoading(true);\r\n      try {\r\n        const iso = toIsoDate(dateString);\r\n        const variables = { employeeId, startDate: iso, endDate: iso };\r\n        const data = await graphqlRequest(QUERY, variables);\r\n        if (!mounted) return;\r\n        const items = data?.getDetailsBetweenDates || [];\r\n        const dayItem = items.find(i => i.date === dateString || i.date === iso) || null;\r\n\r\n        if (dayItem) {\r\n\r\n          const loginIst = shiftTimeToISTDisplay(dayItem.login ?? 'N/A', iso);\r\n          const logoutIst = shiftTimeToISTDisplay(dayItem.logout ?? 'N/A', iso);\r\n          const effAdj = addIstToEffective(dayItem.effectiveHours ?? dayItem.effectiveHour);\r\n          setAttendanceData({\r\n            employeeId: dayItem.employeeId || employeeId,\r\n            date: dayItem.date || dateString,\r\n            effectiveHour: effAdj,\r\n            isPresent: dayItem.isPresent ?? 'N/A',\r\n            login: loginIst,\r\n            logout: logoutIst,\r\n            holiday: dayItem.holiday ?? false,\r\n            mode: dayItem.mode ?? null\r\n          });\r\n        } else {\r\n          const src = dayData?.attendance ?? { isPresent: 'N/A', login: 'N/A', logout: 'N/A', date: dateString };\r\n          const srcIso = toIsoDate(src.date || dateString);\r\n          setAttendanceData({\r\n            ...src,\r\n            login: shiftTimeToISTDisplay(src.login ?? 'N/A', srcIso),\r\n            logout: shiftTimeToISTDisplay(src.logout ?? 'N/A', srcIso),\r\n            effectiveHour: addIstToEffective(src.effectiveHour ?? src.effectiveHours),\r\n            holiday: src.holiday ?? false\r\n          });\r\n        }\r\n        const mappedEvents = items\r\n          .filter(it => it.event || it.description || (typeof it.holiday !== 'undefined'))\r\n          .map(it => ({\r\n            event: it.event || 'Event',\r\n            description: it.description || '',\r\n            startDate: it.startDate || it.date,\r\n            endDate: it.endDate || it.date,\r\n            holiday: Boolean(it.holiday)\r\n          }));\r\n        const propEventsList = propEvents || [];\r\n        const anyHolidayFromMapped = mappedEvents.some(ev => ev.holiday)\r\n        const anyHolidayFromProp = propEventsList.some(ev => ev && (ev.holiday === true || String(ev.holiday).toLowerCase() === 'true'));\r\n        const anyHoliday = anyHolidayFromMapped || anyHolidayFromProp;\r\n        if (anyHoliday) {\r\n          setEventsOnThisDay(mappedEvents.length ? mappedEvents : propEventsList);\r\n          setAttendanceData(prev => ({\r\n            ...(prev || {}),\r\n            holiday: true,\r\n            isPresent: prev && prev.isPresent ? prev.isPresent : 'Holiday'\r\n          }));\r\n        } else {\r\n          setEventsOnThisDay(mappedEvents.length ? mappedEvents : propEventsList);\r\n        }\r\n\r\n\r\n\r\n\r\n\r\n        setError(null);\r\n\r\n      } catch (err) {\r\n        console.error(\"DayDetailsModal fetch failed:\", err);\r\n        setError(err.message || \"Failed to load details\");\r\n        const src = dayData?.attendance ?? null;\r\n        if (src) {\r\n          const srcIso = toIsoDate(src.date || dateString);\r\n          setAttendanceData({\r\n            ...src,\r\n            login: shiftTimeToISTDisplay(src.login ?? 'N/A', srcIso),\r\n            logout: shiftTimeToISTDisplay(src.logout ?? 'N/A', srcIso),\r\n            effectiveHour: addIstToEffective(src.effectiveHour ?? src.effectiveHours)\r\n          });\r\n        } else {\r\n          setAttendanceData(null);\r\n        }\r\n        setEventsOnThisDay(propEvents || []);\r\n      } finally {\r\n        if (mounted) setLoading(false);\r\n      }\r\n    };\r\n    load();\r\n    return () => { mounted = false; };\r\n  }, [dateString, userData?.employeeId]);\r\n  if (!dayData || dayData.type === 'blank') return null;\r\n  if (loading) {\r\n    return (\r\n      <div className=\"absolute inset-0 flex justify-center items-center z-50 p-4 bg-white/50 bg-opacity-40 backdrop-blur-sm\">\r\n        <div className=\"bg-white/90 px-6 py-4 rounded-lg shadow-lg text-indigo-700 font-semibold\">Loading Day Details</div>\r\n      </div>\r\n    );\r\n  }\r\n  const displayAttendance = attendanceData || (dayData?.attendance ?? { isPresent: 'N/A', login: 'N/A', logout: 'N/A', date: dateString });\r\n  return (\r\n    <div\r\n      role=\"dialog\"\r\n      aria-modal=\"true\"\r\n      aria-label={`Details for ${displayAttendance?.date || dateString}`}\r\n      className=\"absolute inset-0 flex justify-center items-center z-50 p-4 bg-white/50 bg-opacity-40 backdrop-blur-sm\"\r\n    >\r\n      <div className=\"absolute inset-0 bg-black/30 backdrop-blur-sm\" onClick={onClose} />\r\n      <div className=\"relative w-full max-w-4xl mx-auto bg-white rounded-xl shadow-2xl overflow-hidden grid grid-cols-1 md:grid-cols-2 gap-0\">\r\n        <div className=\"md:col-span-2 flex items-center justify-between px-5 py-4 border-b\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <Calendar className=\"w-6 h-6 text-indigo-600\" />\r\n            <div>\r\n              <h3 className=\"text-lg font-bold text-indigo-700\">Details  {MONTHS ? MONTHS[new Date().getMonth()] : ''} <span className=\"text-base font-medium text-gray-600\"> {displayAttendance?.date || dateString}</span></h3>\r\n              <p className=\"text-xs text-gray-500\">Employee: <span className=\"font-medium text-gray-700\">{displayAttendance?.employeeId || employeeId || \"N/A\"}</span></p>\r\n            </div>\r\n          </div>\r\n          <button onClick={onClose} aria-label=\"Close details\" className=\"p-2 rounded-full hover:bg-gray-100\">\r\n            <X className=\"w-5 h-5 text-gray-600\" />\r\n          </button>\r\n        </div>\r\n        {/* Left: Attendance summary */}\r\n        <section className=\"p-5 border-r md:border-r md:border-gray-100 bg-white\">\r\n          <h4 className=\"text-sm font-semibold text-indigo-600 mb-3\">Attendance</h4>\r\n          <div className=\"space-y-3 text-sm text-gray-700\">\r\n\r\n            <div className=\"flex justify-between items-center\">\r\n\r\n              <span className=\"text-gray-500\">Status</span>\r\n              {(() => {\r\n                const raw = displayAttendance?.isPresent;\r\n                const holidayFlag = displayAttendance?.holiday === true || String(raw || '').toLowerCase().includes('holiday');\r\n                const s = String(raw || '').trim().toLowerCase();\r\n                const isPresent = ['present', 'p', 'yes', 'true', '1'].includes(s);\r\n                const isAbsent = ['absent', 'a', 'no', 'false', '0'].includes(s);\r\n                const badgeClass = holidayFlag\r\n                  ? 'bg-yellow-100 text-yellow-800'\r\n                  : isPresent\r\n                    ? 'bg-green-100 text-green-800'\r\n                    : isAbsent\r\n                      ? 'bg-red-100 text-red-800'\r\n                      : 'bg-gray-100 text-gray-800';\r\n                const label = holidayFlag ? 'Holiday' : (isPresent ? 'Present' : (isAbsent ? 'Absent' : (displayAttendance?.isPresent || 'N/A')));\r\n                return <span className={`ml-2 font-semibold px-2 py-0.5 rounded-full text-xs ${badgeClass}`}>{label}</span>;\r\n              })()}\r\n            </div>\r\n            <div className=\"flex justify-between\">\r\n              <span className=\"text-gray-500\">Login</span>\r\n              <span className=\"font-medium\">{displayAttendance?.login || 'N/A'}</span>\r\n            </div>\r\n            <div className=\"flex justify-between\">\r\n              <span className=\"text-gray-500\">Logout</span>\r\n              <span className=\"font-medium\">{displayAttendance?.logout || 'N/A'}</span>\r\n            </div>\r\n            <div className=\"flex justify-between\">\r\n              <span className=\"text-gray-500\">Effective Hours</span>\r\n              <span className=\"font-medium\">{displayAttendance?.effectiveHour || 'N/A'}</span>\r\n            </div>\r\n            <div className=\"flex justify-between\">\r\n              <span className=\"text-gray-500\">Mode</span>\r\n              <span className=\"font-medium\">{displayAttendance?.mode || '-'}</span>\r\n            </div>\r\n            <div className=\"mt-2\">\r\n              <p className=\"text-xs text-gray-500\">Notes</p>\r\n              {error ? (\r\n                <p className=\"text-xs text-red-600 mt-1\">{error}</p>\r\n              ) : (\r\n                <p className=\"text-xs text-gray-600 mt-1\">This view shows converted IST times and any event notes for the selected day.</p>\r\n              )}\r\n            </div>\r\n          </div>\r\n          <div className=\"mt-6\">\r\n            <button onClick={onClose} className=\"w-full inline-flex items-center justify-center gap-2 px-3 py-2 bg-indigo-600 text-white rounded-lg text-sm hover:bg-indigo-700\">\r\n              Got it\r\n            </button>\r\n          </div>\r\n        </section>\r\n        <aside className=\"p-5 bg-gray-50\">\r\n          <div className=\"flex items-center justify-between mb-3\">\r\n            <h4 className=\"text-sm font-semibold text-teal-700\">Events ({eventsOnThisDay.length})</h4>\r\n            <span className=\"text-xs text-gray-500\">{eventsOnThisDay.length > 0 ? `${Math.min(eventsOnThisDay.length, 99)}` : ''}</span>\r\n          </div>\r\n          {eventsOnThisDay.length === 0 ? (\r\n            <div className=\"flex flex-col items-center justify-center h-full text-center py-6\">\r\n              <p className=\"text-sm text-gray-500 italic\">No events scheduled for this day.</p>\r\n              <p className=\"text-xs text-gray-400 mt-2\">You can add events from the calendar.</p>\r\n            </div>\r\n          ) : (\r\n            <ul className=\"space-y-3 max-h-[260px] overflow-y-auto pr-2\">\r\n              {eventsOnThisDay.map((event, idx) => (\r\n                <li key={idx} className=\"bg-white p-3 rounded-lg border border-gray-100 shadow-sm\">\r\n                  <div className=\"flex items-start justify-between gap-3\">\r\n                    <div className=\"flex-1\">\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <span className=\"text-sm font-semibold text-gray-800\">{event.event}</span>\r\n                        {event.holiday && <span className=\"text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full\">Holiday</span>}\r\n                      </div>\r\n                      <p className=\"text-xs text-gray-500 mt-1 truncate\">{event.description || 'No description'}</p>\r\n                      {event.startDate !== event.endDate && (\r\n                        <p className=\"text-xs text-teal-600 mt-2\">Multi-day: {event.startDate}  {event.endDate}</p>\r\n                      )}\r\n                    </div>\r\n                    <div className=\"flex-shrink-0 text-xs text-gray-400 ml-3\">\r\n                      <span>{event.startDate}</span>\r\n                    </div>\r\n                  </div>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          )}\r\n        </aside>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nconst EventFormModal = ({ onSubmit, selectedDate, onClose }) => {\r\n  const { userData } = useContext(Context);\r\n  const employeeId = userData?.employeeId;\r\n  const [eventTitle, setEventTitle] = useState('');\r\n  const [description, setDescription] = useState('');\r\n  const [startDate, setStartDate] = useState(toIsoDate(selectedDate.start) || '');\r\n  const [endDate, setEndDate] = useState(toIsoDate(selectedDate.end) || '');\r\n  const [isHalfDay, setIsHalfDay] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n\r\n\r\n  const MUTATION = `\r\n\r\n    mutation AddCalendarEntries($input: CalendarInput!) {\r\n\r\n      addCalendarEntries(input: $input) {\r\n\r\n        date\r\n\r\n        description\r\n\r\n        holiday\r\n\r\n      }\r\n\r\n    }\r\n\r\n  `;\r\n\r\n\r\n\r\n  const handleSubmit = async (e) => {\r\n\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    try {\r\n      const input = {\r\n        startDate: startDate, // YYYY-MM-DD\r\n        endDate: endDate,\r\n        event: eventTitle,\r\n        description,\r\n        holiday: !!isHalfDay\r\n      };\r\n      const variables = { input };\r\n      const data = await graphqlRequest(MUTATION, variables);\r\n      const added = data?.addCalendarEntries || [];\r\n      const newEvents = added.map(a => ({\r\n        event: eventTitle,\r\n        description: a.description || description,\r\n        startDate: toStandardDate(a.date || startDate),\r\n        endDate: toStandardDate(a.date || endDate),\r\n        holiday: a.holiday ?? isHalfDay\r\n      }));\r\n      onSubmit(newEvents.length ? newEvents[0] : {\r\n        event: eventTitle,\r\n        description,\r\n        startDate: toStandardDate(startDate),\r\n        endDate: toStandardDate(endDate),\r\n        holiday: isHalfDay\r\n      });\r\n      onClose();\r\n    } catch (err) {\r\n      console.error(\"EventFormModal mutation failed:\", err);\r\n      const graphqlMessage = err?.graphql?.length ? err.graphql.map(g => g.message).join(\"; \") : null;\r\n      const serverMessage = err?.response?.data?.message || err?.message;\r\n      alert(\"Failed to save event: \" + (graphqlMessage || serverMessage || \"Unknown error\"));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"absolute inset-0 flex justify-center items-center z-50 p-4 bg-white/50 bg-opacity-40 backdrop-blur-sm\">\r\n      <form onSubmit={handleSubmit} className=\"bg-white p-4 rounded-lg shadow-2xl w-full max-w-md transform transition-all duration-300 scale-100\">\r\n        <h2 className=\"text-2xl font-bold text-indigo-700 mb-3 border-b pb-2 flex items-center\">\r\n          <Calendar className=\"mr-2\" /> {loading ? 'Saving...' : 'Add/Edit Event'}\r\n        </h2>\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-6\">\r\n          <div className=\"mb-2\">\r\n            <label className=\"block text-gray-700 font-medium mb-2\" htmlFor=\"startDate\">Start Date</label>\r\n            <input id=\"startDate\" name=\"startDate\" type=\"date\" required value={startDate} onChange={e => setStartDate(e.target.value)} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg\" />\r\n          </div>\r\n          <div className=\"mb-2\">\r\n            <label className=\"block text-gray-700 font-medium mb-2\" htmlFor=\"endDate\">End Date</label>\r\n            <input id=\"endDate\" name=\"endDate\" type=\"date\" required value={endDate} onChange={e => setEndDate(e.target.value)} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg\" />\r\n          </div>\r\n        </div>\r\n        <div className=\"mb-2\">\r\n          <label className=\"block text-gray-700 font-medium mb-2\" htmlFor=\"eventTitle\">Event Title</label>\r\n          <input id=\"eventTitle\" name=\"event\" type=\"text\" placeholder=\"e.g., Team Meeting\" value={eventTitle} onChange={e => setEventTitle(e.target.value)} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg\" />\r\n        </div>\r\n        <div className=\"flex items-center pt-6 mb-2\">\r\n          <input id=\"holiday\" type=\"checkbox\" checked={isHalfDay} onChange={e => setIsHalfDay(e.target.checked)} className=\"h-5 w-5 rounded border-gray-300 text-blue-600\" />\r\n          <label htmlFor=\"holiday\" className=\"ml-2 block text-sm font-medium cursor-pointer\">Is Holiday?</label>\r\n        </div>\r\n        <div className=\"mb-3\">\r\n          <label className=\"block text-gray-700 font-medium mb-2\" htmlFor=\"description\">Description</label>\r\n          <textarea id=\"description\" name=\"description\" rows=\"3\" placeholder=\"Details about the event...\" value={description} onChange={e => setDescription(e.target.value)} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg\"></textarea>\r\n        </div>\r\n        <div className=\"flex justify-end space-x-4\">\r\n          <button type=\"button\" onClick={onClose} className=\"px-4 py-2 bg-gray-300 text-gray-800 rounded-lg\">Cancel</button>\r\n          <button type=\"submit\" className=\"px-6 py-2 bg-indigo-600 text-white font-semibold rounded-lg\">{loading ? 'Submitting...' : 'Submit'}</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\nconst EventListModal = ({ currentYear, currentMonth, onClose }) => {\r\n  const { userData } = useContext(Context);\r\n  const employeeId = userData?.employeeId;\r\n  const [eventsList, setEventsList] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const QUERY = ` query getDetailsBetweenDates($employeeId: String!, $startDate: Date!, $endDate: Date!) { getDetailsBetweenDates(employeeId: $employeeId, startDate: $startDate, endDate: $endDate) { date description holiday event } }`;\r\n  const ROWS_PER_PAGE = 3;\r\n  const [page, setPage] = useState(1);\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    const fetchMonthlyEvents = async () => {\r\n      setLoading(true);\r\n      try {\r\n        const start = new Date(currentYear, currentMonth, 1);\r\n        const end = new Date(currentYear, currentMonth + 1, 0);\r\n        const startISO = start.toISOString().slice(0, 10);\r\n        const endISO = end.toISOString().slice(0, 10);\r\n        const variables = { employeeId, startDate: startISO, endDate: endISO };\r\n        const data = await graphqlRequest(QUERY, variables);\r\n        if (!mounted) return;\r\n        const fetched = data?.getDetailsBetweenDates || [];\r\n        const mapped = fetched.map(f => ({\r\n          event: f.event || 'Event',\r\n          description: f.description || '',\r\n          startDate: f.startDate || f.date,\r\n          endDate: f.endDate || f.date,\r\n          holiday: f.holiday ?? false\r\n        }));\r\n        setEventsList(mapped);\r\n        setError(null);\r\n        setPage(1); \r\n       } catch (err) {\r\n        console.error(\"EventListModal fetch failed:\", err);\r\n        setError(err.message || \"Failed to fetch event list\");\r\n        setEventsList([]);\r\n      } finally {\r\n        if (mounted) setLoading(false);\r\n      }\r\n    };\r\n    fetchMonthlyEvents();\r\n    return () => { mounted = false; };\r\n  }, [currentYear, currentMonth, userData?.employeeId]);\r\n  const totalPages = Math.max(1, Math.ceil(eventsList.length / ROWS_PER_PAGE));\r\n  const startIndex = (page - 1) * ROWS_PER_PAGE;\r\n  const pageItems = eventsList.slice(startIndex, startIndex + ROWS_PER_PAGE);\r\n  if (loading) {\r\n    return (\r\n      <div className=\"p-4 absolute inset-0 flex justify-center items-center z-50 bg-white/50 bg-opacity-40 backdrop-blur-sm\">\r\n        <div className=\"text-center py-6\">\r\n          <div className=\"animate-spin rounded-full h-10 w-10 border-4 border-teal-400 border-t-transparent mx-auto mb-3\"></div>\r\n          <div className=\"text-lg font-semibold text-teal-700\">Loading Events...</div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  return (\r\n    // Non-overlay modal: render inline so it stays inside App layout\r\n    <div className=\" absolute inset-0 flex justify-center items-center z-50 bg-white/50 bg-opacity-40 backdrop-blur-sm\">\r\n\r\n      <div className=\"bg-white max-h-[60vh] overflow-y-auto w-full max-w-4xl mx-auto bg-white shadow-2xl rounded-xl p-2 sm:p-6 relative \">\r\n\r\n        <div className=\"flex justify-between items-center border-b-4 border-teal-300 pb-3 mb-4\">\r\n          <h2 className=\"text-2xl font-extrabold text-teal-600 flex items-center\">\r\n            <Calendar className=\"mr-3 w-6 h-6\" /> Events for {MONTHS[currentMonth]} {currentYear}\r\n          </h2>\r\n          <button onClick={onClose} className=\"p-1 rounded-full text-gray-500 hover:bg-gray-200 transition\">\r\n            <X className=\"w-6 h-6\" />\r\n          </button>\r\n        </div>\r\n        {error ? (\r\n          <p className=\"text-red-600 text-center py-6\">{error}</p>\r\n        ) : eventsList.length === 0 ? (\r\n          <p className=\"text-gray-500 text-lg text-center py-10\">No events added for this month yet. </p>\r\n        ) : (\r\n          <div className=\"space-y-4\">\r\n            {pageItems.map((event, index) => (\r\n              <div key={`${event.startDate}-${startIndex + index}`} className=\"border border-teal-200 rounded-xl p-4 shadow-sm transition duration-200 bg-teal-50\">\r\n                <p className=\"text-lg font-bold text-teal-700 mb-1 border-b border-teal-100 pb-1\">\r\n                  <Clock className=\"inline w-4 h-4 mr-2\" />\r\n                  Date: {event.startDate} {event.startDate !== event.endDate && (`- ${event.endDate}`)}\r\n                </p>\r\n                <p className=\"text-xl font-semibold text-gray-800 mb-2\">{event.event}</p>\r\n                <p className=\"text-gray-600 italic border-l-4 border-teal-400 pl-3\">{event.description}</p>\r\n              </div>\r\n            ))}\r\n            {/* pagination controls */}\r\n            <div className=\"flex items-center justify-between mt-4\">\r\n              <div className=\"text-sm text-gray-600\">\r\n                Showing {startIndex + 1} - {Math.min(startIndex + ROWS_PER_PAGE, eventsList.length)} of {eventsList.length}\r\n              </div>\r\n              <div className=\"flex items-center gap-2\">\r\n                <button\r\n                  onClick={() => setPage(p => Math.max(1, p - 1))}\r\n                  disabled={page <= 1}\r\n                  className=\"px-3 py-1 bg-gray-200 rounded disabled:opacity-50\"\r\n                >\r\n                  Prev\r\n                </button>\r\n                <span className=\"text-sm\">Page {page} / {totalPages}</span>\r\n                <button\r\n                  onClick={() => setPage(p => Math.min(totalPages, p + 1))}\r\n                  disabled={page >= totalPages}\r\n                  className=\"px-3 py-1 bg-gray-200 rounded disabled:opacity-50\"\r\n                >\r\n                  Next\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n        <div className=\"flex justify-end mt-6\">\r\n          <button onClick={onClose} className=\"px-6 py-2 bg-teal-600 text-white font-semibold rounded-lg hover:bg-teal-700 transition duration-150\">\r\n            Close\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nfunction App({ attendanceRecords: externalAttendanceRecords = [] }) {\r\n\r\n  const [currentDate, setCurrentDate] = useState(new Date());\r\n\r\n  const [events, setEvents] = useState([]);\r\n\r\n  const [selectedDateForForm, setSelectedDateForForm] = useState({ start: null, end: null });\r\n\r\n  const [showEventForm, setShowEventForm] = useState(false);\r\n\r\n  const [showEventsList, setShowEventsList] = useState(false);\r\n\r\n  const [showDayDetails, setShowDayDetails] = useState(null);\r\n\r\n  const [isEditing, setIsEditing] = useState(false);\r\n\r\n\r\n\r\n  const currentYear = currentDate.getFullYear();\r\n\r\n  const currentMonth = currentDate.getMonth();\r\n\r\n\r\n\r\n  const getEventsForDate = useCallback((dateString) => {\r\n\r\n    const targetDate = new Date(dateString.split('-').reverse().join('-'));\r\n\r\n    targetDate.setHours(0, 0, 0, 0);\r\n\r\n\r\n\r\n    return events.filter(event => {\r\n\r\n      const eventStart = new Date(event.startDate.split('-').reverse().join('-'));\r\n\r\n      const eventEnd = new Date(event.endDate.split('-').reverse().join('-'));\r\n\r\n\r\n\r\n      eventStart.setHours(0, 0, 0, 0);\r\n\r\n      eventEnd.setHours(0, 0, 0, 0);\r\n\r\n\r\n\r\n      return targetDate >= eventStart && targetDate <= eventEnd;\r\n\r\n    });\r\n\r\n  }, [events]);\r\n\r\n\r\n\r\n  const calendarDays = useMemo(() => {\r\n\r\n    const totalDays = getDaysInMonth(currentYear, currentMonth);\r\n\r\n    const firstDay = getFirstDayOfMonth(currentYear, currentMonth);\r\n\r\n    const days = [];\r\n\r\n\r\n\r\n    for (let i = 0; i < firstDay; i++) {\r\n\r\n      days.push({ key: `blank-${i}`, type: 'blank' });\r\n\r\n    }\r\n\r\n\r\n\r\n    for (let day = 1; day <= totalDays; day++) {\r\n\r\n      const dateString = `${String(day).padStart(2, '0')}-${String(currentMonth + 1).padStart(2, '0')}-${currentYear}`;\r\n\r\n      const matchedRecord = (externalAttendanceRecords || []).find(r => {\r\n\r\n        if (!r || !r.date) return false;\r\n\r\n\r\n\r\n        if (/^\\d{2}-\\d{2}-\\d{4}$/.test(r.date) && r.date === dateString) return true;\r\n\r\n\r\n\r\n        if (/^\\d{4}-\\d{2}-\\d{2}$/.test(r.date)) {\r\n\r\n          const asDisplay = toStandardDate(r.date);\r\n\r\n          return asDisplay === dateString;\r\n\r\n        }\r\n\r\n\r\n\r\n        return String(r.date) === dateString;\r\n\r\n      });\r\n\r\n\r\n\r\n      // build attendance object expected by DayBox / DayDetailsModal\r\n\r\n      let attendance = { isPresent: 'N/A', login: 'N/A', logout: 'N/A', effectiveHour: 'N/A', date: dateString };\r\n\r\n\r\n\r\n      if (matchedRecord) {\r\n\r\n        attendance = {\r\n\r\n          date: dateString,\r\n\r\n          employeeId: matchedRecord.employeeId ?? matchedRecord.employee_id ?? matchedRecord.employeeId,\r\n\r\n          // prefer normalized display fields if present (loginDisplay/logoutDisplay), otherwise try raw fields\r\n\r\n          login: matchedRecord.loginDisplay ?? matchedRecord.login ?? matchedRecord.login_time ?? 'N/A',\r\n\r\n          logout: matchedRecord.logoutDisplay ?? matchedRecord.logout ?? matchedRecord.logout_time ?? 'N/A',\r\n\r\n          // effective/gross; prefer already formatted HH:MM displays\r\n\r\n          effectiveHour: matchedRecord.effectiveHoursDisplay ?? matchedRecord.effectiveHour ?? (matchedRecord.effectiveMinutes ? formatMinutesToHHMM(matchedRecord.effectiveMinutes) : 'N/A'),\r\n\r\n          isPresent: matchedRecord.isPresent ?? (matchedRecord.attended ? 'Present' : (matchedRecord.holiday ? 'Holiday' : 'Absent')),\r\n\r\n          holiday: matchedRecord.holiday ?? false,\r\n\r\n          mode: matchedRecord.mode ?? null\r\n\r\n        };\r\n\r\n      }\r\n\r\n\r\n\r\n      days.push({\r\n\r\n        date: dateString,\r\n\r\n        type: 'day',\r\n\r\n        day: day,\r\n\r\n        dateString,\r\n\r\n        attendance\r\n\r\n      });\r\n\r\n    }\r\n\r\n    return days;\r\n\r\n  }, [currentYear, currentMonth, externalAttendanceRecords]);\r\n\r\n  const changeMonth = useCallback((amount) => {\r\n\r\n    setCurrentDate(prevDate => new Date(prevDate.getFullYear(), prevDate.getMonth() + amount, 1));\r\n\r\n    setShowDayDetails(null);\r\n\r\n    setShowEventForm(false);\r\n\r\n    setShowEventsList(false);\r\n\r\n  }, []);\r\n\r\n\r\n\r\n  const handleDayClick = (dayData) => {\r\n\r\n    if (dayData.type === 'blank') return;\r\n\r\n\r\n\r\n    if (isEditing) {\r\n\r\n      setSelectedDateForForm({ start: dayData.dateString, end: dayData.dateString });\r\n\r\n      setShowEventForm(true);\r\n\r\n      setIsEditing(false);\r\n\r\n    } else {\r\n\r\n      const eventsOnThisDay = getEventsForDate(dayData.dateString);\r\n\r\n      setShowDayDetails({ ...dayData, eventsOnThisDay });\r\n\r\n    }\r\n\r\n  };\r\n\r\n\r\n\r\n  const handleFormSubmit = (newEvent) => {\r\n\r\n    // Add event to local state and close the form\r\n\r\n    setEvents(prevEvents => [...prevEvents, newEvent]);\r\n\r\n    setShowEventForm(false);\r\n\r\n  };\r\n\r\n\r\n\r\n  // Calendar Day Box Component (Unchanged logic)\r\n\r\n  const DayBox = ({ dayData }) => {\r\n\r\n    if (dayData.type === 'blank') {\r\n\r\n      return <div className=\"p-2 border border-gray-100 bg-gray-50 min-h-[20px] sm:min-h-[40px]\"></div>;\r\n\r\n    }\r\n    const { day, dateString, attendance } = dayData;\r\n    // Normalize status so DayBox colors match DayDetailsModal behaviour\r\n    const normalizeStatus = (att) => {\r\n\r\n      if (!att) return 'unknown';\r\n\r\n      // holiday flag takes precedence\r\n\r\n      if (att.holiday === true || String(att.holiday).toLowerCase() === 'true') return 'holiday';\r\n\r\n\r\n\r\n      const candidates = [att.isPresent, att.status, att.present, att.attended];\r\n\r\n      let v = candidates.find(c => typeof c !== 'undefined' && c !== null);\r\n\r\n      if (typeof v === 'boolean') return v ? 'present' : 'absent';\r\n\r\n      if (v == null) {\r\n\r\n        // try effectiveHour/gross heuristics\r\n\r\n        const eff = parseEffectiveHours(att.effectiveHour ?? att.effectiveHours ?? '');\r\n\r\n        if (eff && eff > 0) return 'present';\r\n\r\n        return 'unknown';\r\n\r\n      }\r\n\r\n      const s = String(v).trim().toLowerCase();\r\n\r\n      if (!s) return 'unknown';\r\n\r\n      if (['present', 'p', 'yes', 'true', '1'].includes(s)) return 'present';\r\n\r\n      if (['absent', 'a', 'no', 'false', '0'].includes(s)) return 'absent';\r\n\r\n      if (s.includes('holiday') || s === 'h') return 'holiday';\r\n\r\n      return 'unknown';\r\n\r\n    };\r\n    const eventsOnThisDay = getEventsForDate(dateString);\r\n    const hasEvents = eventsOnThisDay.length > 0;\r\n    // If any event on this day is marked as holiday, treat the day as holiday\r\n    const hasHolidayEvent = eventsOnThisDay.some(ev => ev && (ev.holiday === true || String(ev.holiday).toLowerCase() === 'true'));\r\n    // Determine effective status giving precedence to holiday event\r\n    const status = hasHolidayEvent ? 'holiday' : normalizeStatus(attendance);\r\n    const isToday = dateString === new Date().toLocaleDateString('en-GB').replace(/\\//g, '-');\r\n    // map status to Tailwind classes + icon\r\n    let bgClass = 'bg-white';\r\n    let borderClass = 'border-gray-300';\r\n    let icon = null;\r\n    let textClass = 'text-gray-900';\r\n    if (status === 'present') {\r\n\r\n      bgClass = 'bg-green-50 hover:bg-green-200';\r\n\r\n      borderClass = 'border-green-500 border-2';\r\n\r\n      icon = <CheckCircle className=\"w-2 h-2 text-green-700\" />;\r\n\r\n      textClass = 'text-green-800';\r\n\r\n    } else if (status === 'absent') {\r\n\r\n      bgClass = 'bg-red-50 hover:bg-red-200';\r\n\r\n      borderClass = 'border-red-500 border-2';\r\n\r\n      icon = <AlertTriangle className=\"w-2 h-2 text-red-700\" />;\r\n\r\n      textClass = 'text-red-800';\r\n\r\n    } else if (status === 'holiday') {\r\n\r\n      bgClass = 'bg-yellow-50 hover:bg-yellow-200';\r\n\r\n      borderClass = 'border-yellow-500 border-2';\r\n\r\n      icon = <Calendar className=\"w-2 h-2 text-yellow-700\" />;\r\n\r\n      textClass = 'text-yellow-800';\r\n\r\n    } else {\r\n\r\n      bgClass = 'bg-gray-50 hover:bg-gray-100';\r\n\r\n      borderClass = hasEvents ? 'border-indigo-500 border-2' : 'border-gray-300';\r\n\r\n    }\r\n    const todayRingClass = isToday ? 'ring-4 ring-indigo-400 font-bold' : '';\r\n    const editingClass = isEditing ? 'cursor-crosshair ring-2 ring-pink-500' : '';\r\n    return (\r\n\r\n      <div\r\n\r\n        className={`relative group p-2 sm:p-3 border transition-all duration-200 cursor-pointer ${bgClass} ${borderClass} ${todayRingClass} ${editingClass} shadow-sm min-h-[50px] sm:min-h-[70px] flex flex-col justify-start`}\r\n\r\n        onClick={() => handleDayClick(dayData)}\r\n\r\n      >\r\n\r\n        <div className=\"flex justify-between items-start mb-1\">\r\n\r\n          <span className={`text-lg sm:text-xl ${isToday ? 'text-indigo-700' : textClass}`}>{day}</span>\r\n\r\n          <div className='flex-shrink-0'>{icon}</div>\r\n\r\n        </div>\r\n\r\n\r\n\r\n        {hasEvents && (\r\n\r\n          <div className='mt-auto'>\r\n\r\n            <p className={`text-xs text-indigo-700 font-semibold truncate ${eventsOnThisDay.length > 1 ? 'border-t border-indigo-300 pt-1' : ''}`}>\r\n\r\n              {eventsOnThisDay.length} {eventsOnThisDay.length > 1 ? 'Events' : 'Event'}\r\n\r\n            </p>\r\n\r\n          </div>\r\n\r\n        )}\r\n\r\n      </div>\r\n\r\n    );\r\n\r\n  };\r\n\r\n\r\n\r\n  return (\r\n\r\n    <div className=\"p-4 sm:p-8\">\r\n\r\n      <div className=\"w-full max-w-4xl mx-auto bg-white shadow-2xl rounded-xl p-4 sm:p-6 relative\">\r\n\r\n\r\n\r\n        {/* Modals are now calling the standalone components */}\r\n\r\n        {showEventForm && (\r\n\r\n          <EventFormModal\r\n\r\n            onSubmit={handleFormSubmit}\r\n\r\n            selectedDate={selectedDateForForm}\r\n\r\n            onClose={() => setShowEventForm(false)}\r\n\r\n          />\r\n\r\n        )}\r\n\r\n        {showEventsList && (\r\n\r\n          <EventListModal\r\n\r\n            onClose={() => setShowEventsList(false)}\r\n\r\n            currentYear={currentYear}\r\n\r\n            currentMonth={currentMonth}\r\n\r\n            setEvents={setEvents} // Pass setEvents to update App state with fresh data\r\n\r\n          />\r\n\r\n        )}\r\n\r\n        {showDayDetails && (\r\n\r\n          <DayDetailsModal\r\n\r\n            dayData={showDayDetails}\r\n\r\n            eventsOnThisDay={showDayDetails.eventsOnThisDay}\r\n\r\n            onClose={() => setShowDayDetails(null)}\r\n\r\n          />\r\n\r\n        )}\r\n\r\n\r\n\r\n        {/* Main Content (Blurred when modal is open) */}\r\n\r\n        <div className={`${(showEventForm || showEventsList || showDayDetails) ? 'pointer-events-none opacity-50' : ''}`}>\r\n\r\n          <div className=\"flex flex-col sm:flex-row justify-between items-center mb-6 border-b pb-4\">\r\n\r\n            <h1 className=\"text-2xl sm:text-3xl font-extrabold text-gray-800 mb-4 sm:mb-0\">\r\n\r\n              {MONTHS[currentMonth]} <span className=\"text-indigo-600\">{currentYear}</span>\r\n\r\n            </h1>\r\n\r\n\r\n\r\n            <div className=\"flex space-x-2 sm:space-x-4\">\r\n\r\n              {/* New Edit Button */}\r\n\r\n              <button\r\n\r\n                onClick={() => setIsEditing(prev => !prev)}\r\n\r\n                className={`flex items-center px-3 py-2 sm:px-4 sm:py-2 text-white font-semibold text-sm rounded-lg shadow-md transition duration-150 transform hover:scale-105 ${isEditing ? 'bg-indigo-700 hover:bg-indigo-800 ring-2 ring-pink-300' : 'bg-indigo-500 hover:bg-indigo-600'}`}\r\n\r\n              >\r\n\r\n                <Edit className=\"w-4 h-4 mr-1 sm:mr-2\" /> {isEditing ? 'Cancel Edit' : 'Edit '}\r\n\r\n              </button>\r\n\r\n\r\n\r\n              <button\r\n\r\n                onClick={() => setShowEventsList(true)}\r\n\r\n                className=\"flex items-center px-3 py-2 sm:px-4 sm:py-2 bg-pink-500 text-white font-semibold text-sm rounded-lg shadow-md hover:bg-pink-600 transition duration-150 transform hover:scale-105\"\r\n\r\n              >\r\n\r\n                <Calendar className=\"w-4 h-4 mr-1 sm:mr-2\" /> Events\r\n\r\n              </button>\r\n\r\n\r\n\r\n              <button\r\n\r\n                onClick={() => changeMonth(-1)}\r\n\r\n                className=\"p-2 bg-gray-200 text-gray-600 rounded-full hover:bg-gray-300 transition duration-150\"\r\n\r\n              >\r\n\r\n                <ChevronLeft className=\"w-5 h-5\" />\r\n\r\n              </button>\r\n\r\n              <button\r\n\r\n                onClick={() => changeMonth(1)}\r\n\r\n                className=\"p-2 bg-gray-200 text-gray-600 rounded-full hover:bg-gray-300 transition duration-150\"\r\n\r\n              >\r\n\r\n                <ChevronRight className=\"w-5 h-5\" />\r\n\r\n              </button>\r\n\r\n            </div>\r\n\r\n          </div>\r\n\r\n\r\n\r\n          {/* Days of Week Header */}\r\n\r\n          <div className=\"grid grid-cols-7 gap-1 mb-1\">\r\n\r\n            {DAYS_OF_WEEK.map(day => (\r\n\r\n              <div key={day} className=\"text-center font-semibold text-xs sm:text-sm text-indigo-700 p-2 bg-indigo-100 rounded\">\r\n\r\n                {day}\r\n\r\n              </div>\r\n\r\n            ))}\r\n\r\n          </div>\r\n\r\n\r\n\r\n          {/* Calendar Grid */}\r\n\r\n          <div className=\"grid grid-cols-7 gap-1\">\r\n\r\n            {calendarDays.map((day, index) => (\r\n\r\n              <DayBox key={day.key || day.dateString || `day-${index}`} dayData={day} />\r\n\r\n            ))}\r\n\r\n          </div>\r\n\r\n        </div>\r\n\r\n      </div>\r\n\r\n    </div>\r\n\r\n  );\r\n\r\n}\r\n\r\nconst calculateHours = (login, logout) => {\r\n  // If either missing, return 0\r\n  if (!login || !logout) return 0;\r\n\r\n  // Shift both times by IST offset\r\n  const shiftedLogin = tryNormalizeTo24(login) ? addMinutesToTimeString(login) : null;\r\n  const shiftedLogout = tryNormalizeTo24(logout) ? addMinutesToTimeString(logout) : null;\r\n  if (!shiftedLogin || !shiftedLogout) return 0;\r\n\r\n  const loginDate = new Date(`2000-01-01T${shiftedLogin}:00`);\r\n  const logoutDate = new Date(`2000-01-01T${shiftedLogout}:00`);\r\n  let diffHours = (logoutDate - loginDate) / (1000 * 60 * 60);\r\n  if (diffHours < 0) diffHours += 24; // cross-midnight\r\n  return diffHours > 0 ? diffHours : 0;\r\n};\r\n\r\nconst formatClockTime = (date) => {\r\n  const hours = String(date.getHours()).padStart(2, \"0\");\r\n  const minutes = String(date.getMinutes()).padStart(2, \"0\");\r\n  const seconds = String(date.getSeconds()).padStart(2, \"0\");\r\n  return `${hours}:${minutes}:${seconds}`;\r\n};\r\n\r\nconst FilterButtonGroup = ({ options, selectedOption, onSelect, className = \"\" }) => {\r\n  const { theme } = useContext(Context);\r\n  return (\r\n    <div className={`flex gap-2 sm:gap-3 flex-wrap ${className}`}>\r\n      {options.map((option) => (\r\n        <motion.button\r\n          key={option}\r\n          onClick={() => onSelect(option)}\r\n          className={`px-3 py-2  rounded-lg border text-sm sm:text-base font-semibold     \r\n                ${selectedOption === option ? \"bg-indigo-600 text-white shadow-md\" : \"bg-white text-gray-700 border-gray-300\"}\r\n                ${theme === 'dark' ? (selectedOption === option ? 'bg-indigo-500 text-white shadow-md' : 'bg-gray-800 text-gray-300 border-gray-600') : ''}\r\n                hover:bg-indigo-500 hover:text-white transition-colors duration-200 ease-in-out`}\r\n          aria-pressed={selectedOption === option}\r\n          whileHover={{ scale: 1.05 }}\r\n          whileTap={{ scale: 0.95 }}\r\n        >\r\n          {option}\r\n        </motion.button>\r\n      ))}\r\n    </div>\r\n  )\r\n};\r\n//const dates = [\"All\", \"11\", \"12\", \"13\", \"14\", \"15\"];\r\n//const rawTableData = [\r\n//    { employee_id: \"E_01\", date: \"2025-06-30\", login_time: \"10:00 AM\", logout_time: \"08:00 PM\" },\r\n//    { employee_id: \"E_01\", date: \"2025-06-29\", login_time: null, logout_time: null },\r\n//    { employee_id: \"E_01\", date: \"2025-06-28\", login_time: \"10:00 AM\", logout_time: \"08:00 PM\" },\r\n//    { employee_id: \"E_01\", date: \"2025-06-27\", login_time: \"10:00 AM\", logout_time: \"08:00 PM\" },\r\n//    { employee_id: \"E_01\", date: \"2025-06-26\", login_time: null, logout_time: null },\r\n//    { employee_id: \"E_01\", date: \"2025-06-25\", login_time: \"10:00 AM\", logout_time: \"08:00 PM\" },\r\n//    { employee_id: \"E_01\", date: \"2025-06-24\", login_time: \"10:00 AM\", logout_time: \"08:00 PM\" },\r\n//    { employee_id: \"E_01\", date: \"2025-06-23\", login_time: \"10:00 AM\", logout_time: \"07:00 PM\" },\r\n//];\r\n//const rawPieData = [\r\n//    { EmployeeId: \"ACS000001\", Date: \"11\", Month: \"Aug\", Year: \"2025\", Working_hour: 8.3, Break_hour: 1.7 },\r\n//    { EmployeeId: \"ACS000001\", Date: \"12\", Month: \"Aug\", Year: \"2025\", Working_hour: 8.4, Break_hour: 1.6 },\r\n//    { EmployeeId: \"ACS000001\", Date: \"13\", Month: \"Aug\", Year: \"2025\", Working_hour: 8.2, Break_hour: 1.8 },\r\n//    { EmployeeId: \"ACS000001\", Date: \"14\", Month: \"Aug\", Year: \"2025\", Working_hour: 9.0, Break_hour: 1.0 },\r\n//    { EmployeeId: \"ACS000001\", Date: \"15\", Month: \"Aug\", Year: \"2025\", Working_hour: 8.0, Break_hour: 2.0 },\r\n//];\r\n//const barChartData = [\r\n//    { EmployeeId: \"ACS000001\", Date: \"11\", Month: \"Aug\", Year: \"2025\", Working_hour: 8.3, Break_hour: 1.7 },\r\n//    { EmployeeId: \"ACS000001\", Date: \"12\", Month: \"Aug\", Year: \"2025\", Working_hour: 8.4, Break_hour: 1.6 },\r\n//    { EmployeeId: \"ACS000001\", Date: \"13\", Month: \"Aug\", Year: \"2025\", Working_hour: 8.2, Break_hour: 1.8 },\r\n//    { EmployeeId: \"ACS000001\", Date: \"14\", Month: \"Aug\", Year: \"2025\", Working_hour: 9.0, Break_hour: 1.0 },\r\n//    { EmployeeId: \"ACS000001\", Date: \"15\", Month: \"Aug\", Year: \"2025\", Working_hour: 8.0, Break_hour: 2.0 },\r\n//];\r\n//const Data = [\r\n//    { EmployeeId: \"ACS000001\", Date: \"11\", Month: \"Aug\", Year: \"2025\", Start_time: \"10:00\", End_time: \"20:00\", Break_hour: [{ Time: \"13:00 - 14:00\", hour: 1.0 }, { Time: \"16:30 - 17:00\", hours: 0.5 }, { Time: \"18:40 - 19:00\", hours: 0.2 }] },\r\n//    { EmployeeId: \"ACS000001\", Date: \"12\", Month: \"Aug\", Year: \"2025\", Start_time: \"10:00\", End_time: \"20:00\", Break_hour: [{ Time: \"13:00 - 14:00\", hour: 1.0 }, { Time: \"16:40 - 17:10\", hours: 0.5 }, { Time: \"19:20 - 19:40\", hours: 0.2 }] },\r\n//    { EmployeeId: \"ACS000001\", Date: \"13\", Month: \"Aug\", Year: \"2025\", Start_time: \"10:00\", End_time: \"20:00\", Break_hour: [{ Time: \"13:00 - 14:00\", hour: 1.0 }, { Time: \"16:30 - 17:00\", hours: 0.5 }, { Time: \"19:00 - 19:20\", hours: 0.2 }] },\r\n//    { EmployeeId: \"ACS000001\", Date: \"14\", Month: \"Aug\", Year: \"2025\", Start_time: \"10:00\", End_time: \"20:00\", Break_hour: [{ Time: \"13:00 - 14:00\", hour: 1.0 }, { Time: \"16:30 - 17:00\", hours: 0.5 }, { Time: \"18:40 - 18:50\", hours: 0.1 }] },\r\n//    { EmployeeId: \"ACS000001\", Date: \"15\", Month: \"Aug\", Year: \"2025\", Start_time: \"10:00\", End_time: \"20:00\", Break_hour: [{ Time: \"13:00 - 14:00\", hour: 1.0 }, { Time: \"16:30 - 17:00\", hours: 0.5 }, { Time: \"17:40 - 18:00\", hours: 0.2 }] },\r\n//];\r\n\r\n// --- Sub-Component for Hours and Schedule Bar ---\r\nconst MyComponent = ({ Data, selectedMetricDate }) => { // <--- PROP NAME CHANGED\r\n  const [hoveredHour, setHoveredHour] = useState(null);\r\n  const { theme } = useContext(Context);\r\n\r\n  // Helper to get start/end hour from time string\r\n  const getHourValue = useCallback((timeString) => {\r\n    const [start, end] = timeString.split(' - ');\r\n    const [startHour, startMinute] = start.split(':').map(Number);\r\n    const [endHour, endMinute] = end.split(':').map(Number);\r\n    return {\r\n      start: startHour + startMinute / 60,\r\n      end: endHour + endMinute / 60\r\n    };\r\n  }, []);\r\n\r\n  // Format seconds to hh mm ss\r\n  const formatDuration = (totalSeconds) => {\r\n    const hours = Math.floor(totalSeconds / 3600);\r\n    const minutes = Math.floor((totalSeconds % 3600) / 60);\r\n    const seconds = Math.floor(totalSeconds % 60);\r\n    let result = \"\";\r\n    if (hours > 0) result += `${String(hours).padStart(2, '0')}h `;\r\n    if (minutes > 0) result += `${String(minutes).padStart(2, '0')}m `;\r\n    if (seconds > 0) result += `${String(seconds).padStart(2, '0')}s`;\r\n    return result.trim() || '0s';\r\n  };\r\n\r\n  // Calculate metrics for selected date\r\n  const calculateMetrics = useMemo(() => {\r\n    if (!Data || selectedMetricDate === \"All\") return null; // <--- USE selectedMetricDate\r\n    const dayData = Data.find(d => `${d.Date}-${d.Month}-${d.Year}` === selectedMetricDate); // <--- USE selectedMetricDate\r\n    if (!dayData || !dayData.End_time || !dayData.Start_time) return null;\r\n\r\n    const totalWorkingSeconds =\r\n      (new Date(`2000/01/01 ${dayData.End_time}`) - new Date(`2000/01/01 ${dayData.Start_time}`)) / 1000;\r\n    let breakSeconds = 0;\r\n    if (dayData.Break_hour) {\r\n      dayData.Break_hour.forEach(b => {\r\n        const [start, end] = b.Time.split(' - ');\r\n        breakSeconds += (new Date(`2000/01/01 ${end}`) - new Date(`2000/01/01 ${start}`)) / 1000;\r\n      });\r\n    }\r\n    const productiveSeconds = totalWorkingSeconds - breakSeconds;\r\n    const standardDaySeconds = 8 * 3600;\r\n    const overtimeSeconds = Math.max(0, productiveSeconds - standardDaySeconds);\r\n\r\n    return {\r\n      totalWorkingHours: formatDuration(totalWorkingSeconds),\r\n      productiveHours: formatDuration(productiveSeconds),\r\n      breakHours: formatDuration(breakSeconds),\r\n      overtime: formatDuration(overtimeSeconds)\r\n    };\r\n  }, [selectedMetricDate, Data]); // <--- USE selectedMetricDate\r\n  const scaleHour = useCallback((hour) => ((hour - 10) / 10) * 100, []);\r\n  const renderScheduleBar = useCallback(() => {\r\n    if (!Data || selectedMetricDate === \"All\")\r\n      return <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} transition={{ duration: 0.5 }} className={`text-center py-4 italic ${theme === 'dark' ? 'text-white' : 'text-gray-600'}`}>Select a specific day to view the timeline.</motion.div>;\r\n\r\n    const rawDay = Data.find(d => `${d.Date}-${d.Month}-${d.Year}` === selectedMetricDate);\r\n    if (!rawDay)\r\n      return <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} transition={{ duration: 0.5 }} className={`text-gray-500 text-center py-4 italic ${theme === 'dark' ? 'text-white' : 'text-gray-600'}`}>No schedule available for {selectedMetricDate}.</motion.div>;\r\n\r\n    // Apply IST offset to schedule times\r\n    const dayData = applyOffsetToSchedule(rawDay);\r\n    const timePoints = new Set();\r\n    if (dayData.Start_time) timePoints.add(dayData.Start_time);\r\n    if (dayData.End_time) timePoints.add(dayData.End_time);\r\n    if (dayData.Break_hour)\r\n      dayData.Break_hour.forEach(b => {\r\n        if (b.Time) {\r\n          const [start, end] = b.Time.split(' - ');\r\n          if (start) timePoints.add(start);\r\n          if (end) timePoints.add(end);\r\n        }\r\n      });\r\n    const sortedTimes = Array.from(timePoints).sort(\r\n      (a, b) => new Date(`2000/01/01 ${a}`) - new Date(`2000/01/01 ${b}`)\r\n    );\r\n    const formatTimelineTime = (timeStr) => {\r\n      if (!timeStr) {\r\n        console.error(\"formatTimelineTime received a null or empty time string.\");\r\n        return 'Invalid Time';\r\n      }\r\n      const [hours, minutes] = timeStr.split(':').map(Number);\r\n      const period = hours >= 12 ? 'PM' : 'AM';\r\n      const formattedHours = hours % 12 === 0 ? 12 : hours % 12;\r\n      return `${formattedHours}${minutes > 0 ? `:${minutes}` : ''} ${period}`;\r\n    };\r\n    const calculateDuration = (startTime, endTime) =>\r\n      (new Date(`2000/01/01 ${endTime}`) - new Date(`2000/01/01 ${startTime}`)) / (1000 * 60 * 60);\r\n    const workingHoursSegment = {\r\n      type: 'working',\r\n      time: `${dayData.Start_time} - ${dayData.End_time}`,\r\n      duration: calculateDuration(dayData.Start_time, dayData.End_time)\r\n    };\r\n    const breakHours = (dayData.Break_hour || []).map(h => ({\r\n      type: 'break',\r\n      time: h.Time,\r\n      duration: h.hour\r\n    }));\r\n    const allHours = [workingHoursSegment, ...breakHours].sort(\r\n      (a, b) => getHourValue(a.time).start - getHourValue(b.time).start\r\n    );\r\n    return (\r\n      <div>\r\n        <motion.div\r\n          className=\"w-full  h-10 bg-gray-200 relative rounded-xl overflow-hidden border border-gray-300\"\r\n          initial={{ opacity: 0, scaleX: 0 }}\r\n          animate={{ opacity: 1, scaleX: 1 }}\r\n          transition={{ duration: 0.8, ease: \"easeOut\" }}\r\n          style={{ transformOrigin: \"left\" }}\r\n        >\r\n          {allHours.map((hour, index) => {\r\n            const { start, end } = getHourValue(hour.time);\r\n            const leftPosition = scaleHour(start);\r\n            const widthPercentage = scaleHour(end) - scaleHour(start);\r\n            const colorClass = hour.type === 'working' ? 'bg-green-300' : 'bg-yellow-300';\r\n            return (\r\n              <motion.div\r\n                key={index}\r\n                className={`absolute h-full cursor-pointer transition-all duration-300 ${colorClass}`}\r\n                style={{ left: `${leftPosition}%`, width: `${widthPercentage}%` }}\r\n                onMouseEnter={() => setHoveredHour(hour)}\r\n                onMouseLeave={() => setHoveredHour(null)}\r\n                initial={{ opacity: 0, scaleY: 0 }}\r\n                animate={{ opacity: 1, scaleY: 1 }}\r\n                transition={{ delay: 0.3 + index * 0.1, duration: 0.5 }}\r\n              >\r\n                {hoveredHour === hour && (\r\n                  <div\r\n                    className=\"absolute bottom-full mb-2 p-2 rounded-md shadow-lg bg-gray-800 text-white text-xs whitespace-nowrap\"\r\n                    style={{ left: '50%', transform: 'translateX(-50%)' }}\r\n                  >\r\n                    <p>{hour.type === 'working' ? 'Working' : 'Break'}</p>\r\n                    <p>Time: {hour.time}</p>\r\n                    <p>Duration: {hour.duration.toFixed(2)} hours</p>\r\n                  </div>\r\n                )}\r\n              </motion.div>\r\n            );\r\n          })}\r\n        </motion.div>\r\n        <div className={`flex justify-between text-xs sm:text-sm  mt-2  ${theme === 'dark' ? 'text-white' : 'text-gray-600'}`}>\r\n          {sortedTimes.map((time, index) => (\r\n            <motion.span\r\n              key={index}\r\n              initial={{ opacity: 0, y: 10 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              transition={{ delay: 0.8 + index * 0.1, duration: 0.3 }}\r\n            >\r\n              {formatTimelineTime(time)}\r\n            </motion.span>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    );\r\n  }, [selectedMetricDate, Data, hoveredHour, getHourValue, scaleHour]); // <--- USE selectedMetricDate\r\n\r\n  return (\r\n    <motion.div\r\n      className=\"p-4\"\r\n      initial={{ opacity: 0 }}\r\n      animate={{ opacity: 1 }}\r\n      transition={{ duration: 0.5 }}\r\n    >\r\n      <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6\">\r\n        <motion.div\r\n          className=\"flex flex-col items-center p-2 rounded-lg bg-gray-50 border border-gray-200 shadow-sm\"\r\n          whileHover={{ scale: 1.05 }}\r\n          transition={{ type: \"spring\", stiffness: 300 }}\r\n        >\r\n          <div className=\"flex items-center text-gray-500 mb-2\">\r\n            <span className=\"w-3 h-3 bg-gray-500 rounded-full mr-2\"></span>\r\n            <span className=\"text-sm font-medium\">Total</span>\r\n          </div>\r\n          <span className=\"text-lg sm:text-xl font-bold text-gray-800\">\r\n            {calculateMetrics?.totalWorkingHours || 'N/A'}\r\n          </span>\r\n        </motion.div>\r\n        <motion.div\r\n          className=\"flex flex-col items-center p-2 rounded-lg bg-green-50 border border-green-200 shadow-sm\"\r\n          whileHover={{ scale: 1.05 }}\r\n          transition={{ type: \"spring\", stiffness: 300 }}\r\n        >\r\n          <div className=\"flex items-center text-green-700 mb-2\">\r\n            <span className=\"w-3 h-3 bg-green-500 rounded-full mr-2\"></span>\r\n            <span className=\"text-sm font-medium\">Productive</span>\r\n          </div>\r\n          <span className=\"text-lg sm:text-xl font-bold text-green-800\">\r\n            {calculateMetrics?.productiveHours || 'N/A'}\r\n          </span>\r\n        </motion.div>\r\n        <motion.div\r\n          className=\"flex flex-col items-center p-2 rounded-lg bg-yellow-50 border border-yellow-200 shadow-sm\"\r\n          whileHover={{ scale: 1.05 }}\r\n          transition={{ type: \"spring\", stiffness: 300 }}\r\n        >\r\n          <div className=\"flex items-center text-yellow-700 mb-2\">\r\n            <span className=\"w-3 h-3 bg-yellow-500 rounded-full mr-2\"></span>\r\n            <span className=\"text-sm font-medium\">Break</span>\r\n          </div>\r\n          <span className=\"text-lg sm:text-xl font-bold text-yellow-800\">\r\n            {calculateMetrics?.breakHours || 'N/A'}\r\n          </span>\r\n        </motion.div>\r\n        <motion.div\r\n          className=\"flex flex-col items-center p-2 rounded-lg bg-blue-50 border border-blue-200 shadow-sm\"\r\n          whileHover={{ scale: 1.05 }}\r\n          transition={{ type: \"spring\", stiffness: 300 }}\r\n        >\r\n          <div className=\"flex items-center text-blue-700 mb-2\">\r\n            <span className=\"w-3 h-3 bg-blue-500 rounded-full mr-2\"></span>\r\n            <span className=\"text-sm font-medium\">Overtime</span>\r\n          </div>\r\n          <span className=\"text-lg sm:text-xl font-bold text-blue-800\">\r\n            {calculateMetrics?.overtime || 'N/A'}\r\n          </span>\r\n        </motion.div>\r\n      </div>\r\n      {renderScheduleBar()}\r\n    </motion.div>\r\n  );\r\n};\r\n\r\nconst ProfileAttendance = ({ theme, todayAttendance, isLoggedIn, loading }) => {\r\n  const isDark = theme === \"dark\";\r\n  const todayIso = new Date().toISOString().slice(0, 10);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"text-center p-3\">\r\n        <p className=\"text-sm text-indigo-400 animate-pulse\">\r\n          Loading attendance data...\r\n        </p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!todayAttendance) {\r\n    return (\r\n      <div className=\"text-center p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg\">\r\n        <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n          No attendance record found for today ({todayIso}).\r\n        </p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const { login, logout, isPresent, mode, effectiveHours, grossHours } = todayAttendance;\r\n\r\n  const statusClasses = (isPresent) => {\r\n    const status = String(isPresent || \"\").toUpperCase();\r\n    if (status === \"TRUE\" || status === \"PRESENT\")\r\n      return \"bg-green-100 text-green-700\";\r\n    if (status === \"FALSE\" || status === \"ABSENT\")\r\n      return \"bg-red-100 text-red-700\";\r\n    return \"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/40 dark:text-yellow-300\";\r\n  };\r\n\r\n  const containerClasses = isDark\r\n    ? \"bg-gray-800 text-white border-gray-700\"\r\n    : \"bg-white border-gray-200\";\r\n  const infoCardClasses = `p-4 rounded-xl shadow-md ${isDark ? \"bg-gray-700\" : \"bg-gray-50\"\r\n    }`;\r\n\r\n  return (\r\n    <div className={`p-4 rounded-2xl shadow-xl ${containerClasses}`}>\r\n      {/* Header Section */}\r\n      <div className=\"flex items-center justify-between mb-4\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <span\r\n            className={`px-3 py-1 text-xs font-semibold rounded-full ${statusClasses(\r\n              isPresent\r\n            )}`}\r\n          >\r\n            {String(isPresent || \"N/A\").toUpperCase()}\r\n          </span>\r\n          <span className=\"text-xs font-medium text-gray-500 dark:text-gray-400\">\r\n            Mode: {mode || \"Office\"}\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Metrics Section */}\r\n      <div className=\"grid grid-cols-2 gap-2\">\r\n        <div className={infoCardClasses}>\r\n          <div className=\"text-lg font-bold text-indigo-500\">{login ? login.split(\".\")[0] : \"N/A\"}</div>\r\n          <div className=\"text-xs font-medium text-gray-500 dark:text-gray-400 mt-1\">\r\n            First Login\r\n          </div>\r\n        </div>\r\n        <div className={infoCardClasses}>\r\n          <div className=\"text-lg font-bold text-indigo-500\">{logout ? logout.split(\".\")[0] : \"N/A\"}</div>\r\n          <div className=\"text-xs font-medium text-gray-500 dark:text-gray-400 mt-1\">\r\n            Last Logout\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n// --- Main Attendance Dashboard Component ---\r\nconst AttendancesDashboard = ({ onBack, currentUser, employeeId, startDate = null, endDate = null }) => {\r\n  const { empID } = useParams();\r\n  const { userData, theme } = useContext(Context);\r\n  const id = employeeId || userData?.employeeId || \"ACS00000001\";\r\n  const role = (userData?.roles?.[0] || \"\").toUpperCase();\r\n  const [isSidebarOpen, setIsSidebarOpen] = useState(false);\r\n  const [sidebarView, setSidebarView] = useState(null);\r\n  const [showAttendanceReports, setShowAttendanceReports] = useState(false);\r\n  const showSidebar = [\"TEAM_LEAD\", \"HR\", \"MANAGER\", \"ADMIN\"].includes(role);\r\n  const [selectedMonth, setSelectedMonth] = useState(\"All\");\r\n  const [selectedDate, setSelectedDate] = useState(\"All\");\r\n  const [selectedMetricDate, setSelectedMetricDate] = useState(\"All\");\r\n  const [startDateFilter, setStartDateFilter] = useState('');\r\n  const [endDateFilter, setEndDateFilter] = useState('');\r\n  const isMobile = useMediaQuery('(max-width:768px)');\r\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\r\n  const [startTime, setStartTime] = useState(null);\r\n  const [endTime, setEndTime] = useState(null);\r\n  const [mode, setMode] = useState(\"office\");\r\n  const [currentTime, setCurrentTime] = useState(new Date());\r\n  const [grossHours, setGrossHours] = useState(0);\r\n  const [effectiveHours, setEffectiveHours] = useState(0);\r\n  const [todayAttendance, setTodayAttendance] = useState(null);\r\n  const [loadingTodayAttendance, setLoadingTodayAttendance] = useState(false);\r\n  const [lastFetchedAt, setLastFetchedAt] = useState(() => Date.now());\r\n  const [showModeConfirm, setShowModeConfirm] = useState(false);\r\n  const [isLogoutConfirmed, setIsLogoutConfirmed] = useState(false);\r\n  const [currentAttendanceId, setCurrentAttendanceId] = useState(() => {\r\n    try {\r\n      return localStorage.getItem('currentAttendanceId') || null;\r\n    } catch (e) {\r\n      return null;\r\n    }\r\n  });\r\n  const [sortBy, setSortBy] = useState('Recantly Added');\r\n  const [attendanceRecords, setAttendanceRecords] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [page, setPage] = useState(1);\r\n  const [pageSize, setPageSize] = useState(12);\r\n  const toIso = (d) => d?.toISOString?.().slice(0, 10) || d;\r\n  const todayISO = new Date().toISOString().slice(0, 10);\r\n  const todayIso = new Date().toISOString().slice(0, 10);\r\n  const adjustTimeString = (timeString, dateRef, minutesToAdd) => {\r\n    if (timeString === \"N/A\" || !timeString) return timeString;\r\n    return timeString;\r\n  };\r\n  const QUERY_TODAY_ATTENDANCE = `\r\n  query getDetailsBetweenDates($employeeId: String!, $startDate: Date!, $endDate: Date!) {\r\n    getDetailsBetweenDates(employeeId: $employeeId, startDate: $startDate, endDate: $endDate) {\r\n      date\r\n      employeeId\r\n      isPresent\r\n      login\r\n      logout\r\n      effectiveHours\r\n      grossHours\r\n      mode\r\n    }\r\n  }\r\n    `;\r\nconst fetchTodayAttendance = useCallback(async () => {\r\n  setLoadingTodayAttendance(true);\r\n  try {\r\n    const s = todayIso;\r\n    const e = todayIso;\r\n    const variables = { employeeId: id, startDate: s, endDate: e };\r\n    const data = await graphqlRequest(QUERY_TODAY_ATTENDANCE, variables);\r\n    const items = data?.getDetailsBetweenDates || [];\r\n    const item = items[0] || null;\r\n\r\n    setTodayAttendance(item);\r\n    setLastFetchedAt(Date.now());\r\n\r\n    // Clear any existing intervals\r\n    if (intervalRef.current) {\r\n      clearInterval(intervalRef.current);\r\n      intervalRef.current = null;\r\n    }\r\n    if (clockTimerRef.current) {\r\n      clearInterval(clockTimerRef.current);\r\n      clockTimerRef.current = null;\r\n    }\r\n\r\n    if (item) {\r\n      const isLoggedIn = !!(item.login && !item.logout);\r\n      setIsLoggedIn(isLoggedIn);\r\n\r\n      const effMin = parseEffectiveHours(item.effectiveHours ?? item.effectiveHour) || 0;\r\n\r\n      // Maintain one clock for current time\r\n      clockTimerRef.current = setInterval(() => setCurrentTime(new Date()), 1000);\r\n\r\n      if (isLoggedIn) {\r\n        // Only this timer updates gross hours\r\n        const [loginHours, loginMinutes, loginSeconds] = item.login.split(\":\");\r\n        const loginDate = new Date();\r\n        loginDate.setHours(loginHours, loginMinutes, parseFloat(loginSeconds), 0);\r\n        clearInterval(clockTimerRef.current);\r\n        clockTimerRef.current = null;\r\n        intervalRef.current = setInterval(() => {\r\n          // const now = new Date();\r\n          const diffInSeconds = (lastFetchedAt - loginDate) / 1000;\r\n\r\n          if (!isNaN(diffInSeconds) && diffInSeconds >= 0) {\r\n            setGrossHours(diffInSeconds);\r\n            setEffectiveHours(effMin * 60);\r\n          }\r\n          setCurrentTime(new Date());\r\n        }, 1000);\r\n      } else if (item.logout) {\r\n        // Static calculation for logged-out sessions\r\n        const [loginHours, loginMinutes, loginSeconds] = item.login.split(\":\");\r\n        const [logoutHours, logoutMinutes, logoutSeconds] = item.logout.split(\":\");\r\n        const loginDate = new Date();\r\n        const logoutDate = new Date();\r\n\r\n        loginDate.setHours(loginHours, loginMinutes, parseFloat(loginSeconds), 0);\r\n        logoutDate.setHours(logoutHours, logoutMinutes, parseFloat(logoutSeconds), 0);\r\n\r\n        const diffInSeconds = (logoutDate - loginDate) / 1000;\r\n        if (!isNaN(diffInSeconds) && diffInSeconds >= 0) {\r\n          setGrossHours(diffInSeconds);\r\n          setEffectiveHours(effMin * 60);\r\n        }\r\n      }\r\n    }\r\n  } catch (err) {\r\n    console.error(\"Error fetching attendance:\", err);\r\n  } finally {\r\n    setLoadingTodayAttendance(false);\r\n  }\r\n}, [id, todayIso]);\r\n\r\n\r\n  async function getDynamicDeviceData(mode = \"\") {\r\n    try {\r\n      const timeZone = Intl.DateTimeFormat().resolvedOptions().timeZone;\r\n      const device = navigator.userAgent;\r\n      const position = await new Promise((resolve, reject) => {\r\n        navigator.geolocation.getCurrentPosition(resolve, reject);\r\n      });\r\n\r\n      const latitude = position.coords.latitude;\r\n      const longitude = position.coords.longitude;\r\n      return {\r\n        timeZone,\r\n        mode,\r\n        latitude,\r\n        longitude,\r\n        device\r\n      };\r\n\r\n    } catch (error) {\r\n      console.error(\"Error fetching location or device info:\", error);\r\n      return {\r\n        timeZone: Intl.DateTimeFormat().resolvedOptions().timeZone,\r\n        mode,\r\n        latitude: null,\r\n        longitude: null,\r\n        device: navigator.userAgent\r\n      };\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    const userPayload = JSON.parse(localStorage.getItem(\"emppayload\"));\r\n    const userImage = localStorage.getItem(\"loggedInUserImage\");\r\n    \r\n    const initials = (userPayload?.displayName || \"  \")\r\n      .split(\" \")\r\n      .map((word) => word[0])\r\n      .join(\"\")\r\n      .substring(0, 2);\r\n\r\n    setLoggedInUserProfile({\r\n      image: userImage,\r\n      initials: initials,\r\n    });\r\n  }, [userData]);\r\n\r\n  useEffect(() => {\r\n    fetchTodayAttendance();\r\n    console.log([\"TEAM_LEAD\", \"HR\", \"MANAGER\", \"ADMIN\"].includes(role));\r\n    // --- CLOCK TIMER ---\r\n\r\n    const employeeId = userData?.employeeId;\r\n    const attendanceId = currentAttendanceId;\r\n\r\n    // === Helper Functions ===\r\n    const handleDisconnect = async (useBeacon = false) => {\r\n      if (!isLoggedIn || !employeeId || !attendanceId) return;\r\n      const data = await getDynamicDeviceData(mode);\r\n      const apiUrl = `https://hrms.anasolconsultancyservices.com/api/attendance/employee/${employeeId}/${attendanceId}/disconnected`;\r\n\r\n      try {\r\n        const payload = JSON.stringify({ timestamp: new Date().toISOString() });\r\n\r\n        if (useBeacon && navigator.sendBeacon) {\r\n          const blob = new Blob([payload], { type: \"application/json\" });\r\n          navigator.sendBeacon(apiUrl, blob);\r\n          console.log(\"Disconnected (beacon) sent:\", apiUrl);\r\n        } else {\r\n          await fetch(apiUrl, {\r\n            method: \"PUT\",\r\n            headers: { \"Content-Type\": \"application/json\" },\r\n            body: data,\r\n            keepalive: true,\r\n          });\r\n          console.log(\"Disconnected (fetch) done:\", apiUrl);\r\n        }\r\n      } catch (err) {\r\n        console.error(\"Disconnected API call failed:\", err);\r\n      }\r\n    };\r\n    const handleConnect = async () => {\r\n      if (!isLoggedIn || !employeeId || !attendanceId) return;\r\n\r\n      const data = await getDynamicDeviceData(mode);\r\n      const apiUrl = `https://hrms.anasolconsultancyservices.com/api/attendance/employee/${employeeId}/${attendanceId}/connected`;\r\n\r\n      try {\r\n        const resp = await fetch(apiUrl, {\r\n          method: \"PUT\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          body: JSON.stringify(data),\r\n        });\r\n\r\n        if (!resp.ok) {\r\n          console.warn(\"Connected endpoint returned non-OK:\", resp.status);\r\n        } else {\r\n          console.log(\"Connected endpoint hit successfully:\", apiUrl);\r\n        }\r\n      } catch (err) {\r\n        console.error(\"Connected API call failed:\", err);\r\n      }\r\n    };\r\n\r\n    // === Manual Disconnect ( Click) ===\r\n    const handleManualDisconnect = async () => {\r\n      if (!isLoggedIn) return;\r\n      const confirmDisconnect = window.confirm(\"You are being disconnected. Are you sure?\");\r\n      if (confirmDisconnect) {\r\n        await handleDisconnect(false);\r\n        alert(\"You have been disconnected.\");\r\n      }\r\n    };\r\n\r\n    // === Only handle unload/shutdown ===\r\n    const onBeforeUnload = (e) => {\r\n      if (isLoggedIn) handleDisconnect(true);\r\n    };\r\n\r\n    // === When user comes back (window regains focus) ===\r\n    const handleFocus = () => {\r\n      if (isLoggedIn) handleConnect();\r\n    };\r\n\r\n    // --- Event listeners ---\r\n    window.addEventListener(\"beforeunload\", onBeforeUnload);\r\n    window.addEventListener(\"focus\", handleFocus); //  connect on window focus\r\n\r\n    // Expose manual disconnect handler\r\n    window.triggerManualDisconnect = handleManualDisconnect;\r\n\r\n    return () => {\r\n      clearInterval(clockTimerRef.current);\r\n      clockTimerRef.current = null;\r\n      window.removeEventListener(\"beforeunload\", onBeforeUnload);\r\n      window.removeEventListener(\"focus\", handleFocus);\r\n    };\r\n  }, [isLoggedIn, startTime, currentAttendanceId]);\r\n\r\n\r\n  // Depend on currentAttendanceId\r\n  const updateProfileField = async (field, value) => {\r\n    try {\r\n      if (!userData?.employeeId) return null;\r\n      const today = new Date();\r\n      const day = today.getDate();\r\n      const month = today.getMonth() + 1;\r\n      const year = today.getFullYear();\r\n      const url = `https://hrms.anasolconsultancyservices.com/api/attendance/employee/${userData?.employeeId}/profile/${day}/${month}/${year}`;\r\n      const resp = await dashboardApi.put(url, { [field]: value }, { headers: { 'Content-Type': 'application/json' } });\r\n      return resp?.data ?? null;\r\n    } catch (err) {\r\n      console.error(`Error updating profile field \"${field}\":`, err);\r\n      return null;\r\n    }\r\n  };\r\n  const handleModeChange = async (newMode) => {\r\n    try {\r\n      setShowModeConfirm(false);\r\n      const data = await getDynamicDeviceData(newMode);\r\n      const apiUrl = `https://hrms.anasolconsultancyservices.com/api/attendance/employee/${userData?.employeeId}/clock-in`;\r\n\r\n      await dashboardApi.put(apiUrl, data, {\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Accept: \"*/*\",\r\n        },\r\n      });\r\n\r\n      await updateProfileField(\"mode\", newMode);\r\n      setMode(newMode);\r\n    } catch (err) {\r\n      console.error(\"Failed to change mode:\", err);\r\n      alert(\"Unable to change mode. Please try again.\");\r\n    }\r\n  };\r\n\r\n  const handleRefresh = async () => {\r\n    await fetchTodayAttendance();\r\n  };\r\n  const handleLogin = async () => {\r\n    try {\r\n      const clock = await getDynamicDeviceData(mode);\r\n      const apiUrl = `https://hrms.anasolconsultancyservices.com/api/attendance/employee/${id}/clock-in`;\r\n\r\n      // Retrieve token safely\r\n      const token = (() => {\r\n        try {\r\n          return localStorage.getItem('accessToken');\r\n        } catch {\r\n          return null;\r\n        }\r\n      })();\r\n\r\n      // Prepare headers\r\n      const headers = {\r\n        \"Accept\": \"*/*\",\r\n        \"Content-Type\": \"application/json\",\r\n      };\r\n      if (token) headers.Authorization = `Bearer ${token}`;\r\n\r\n      // Send request\r\n      const response = await fetch(apiUrl, {\r\n        method: \"PUT\",\r\n        headers,\r\n        body: JSON.stringify(clock),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errText = await response.text();\r\n        console.error(\"Clock-in API error:\", errText);\r\n        alert(`Error: ${response.status} - ${errText}`);\r\n        throw new Error(`${response.status}`);\r\n      }\r\n\r\n      const data = await response.json().catch(() => null);\r\n      console.log(\"Clock-in successful:\", data);\r\n\r\n      //  Store attendance ID if present\r\n      const attendanceIdFromResponse =\r\n        data?.attendanceId || data?.id || data?.attendance_id;\r\n      if (attendanceIdFromResponse) {\r\n        setCurrentAttendanceId(attendanceIdFromResponse);\r\n      } else {\r\n        console.warn(\"Attendance ID not received in clock-in response.\");\r\n      }\r\n\r\n      //  Store returned token if present\r\n      const returnedToken = data?.accessToken || data?.token || data?.jwt;\r\n      if (returnedToken) {\r\n        try {\r\n          localStorage.setItem(\"accessToken\", returnedToken);\r\n          console.log(\"Stored accessToken from server\");\r\n        } catch (e) {\r\n          console.warn(\"Failed to store accessToken:\", e);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Clock-in failed:\", error);\r\n      setIsLoggedIn(false);\r\n      setStartTime(null);\r\n    }\r\n\r\n    await fetchTodayAttendance();\r\n  };\r\n\r\n  const handleShowAttendances = () => {\r\n    setSidebarView('attendances');\r\n    setIsSidebarOpen(false);\r\n  };\r\n  const handleShowAttendance = () => {\r\n    setSidebarView('attendance');\r\n    setIsSidebarOpen(false);\r\n  };\r\n  const handleShowAttendanceReport = () => {\r\n    setSidebarView('attendanceReport');\r\n    setIsSidebarOpen(false);\r\n  };\r\n  const handleLogout = () => { setIsLogoutConfirmed(true); };\r\n  const handleConfirmLogout = async () => {\r\n    const now = new Date();\r\n    const clockOutData = await getDynamicDeviceData(mode);\r\n\r\n    try {\r\n      const apiUrl = `https://hrms.anasolconsultancyservices.com/api/attendance/employee/${userData?.employeeId}/clock-out`;\r\n\r\n      //  Retrieve token safely\r\n      const token = (() => {\r\n        try {\r\n          return localStorage.getItem(\"accessToken\");\r\n        } catch {\r\n          return null;\r\n        }\r\n      })();\r\n\r\n      //  Build headers\r\n      const headers = {\r\n        \"Content-Type\": \"application/json\",\r\n        Accept: \"*/*\",\r\n      };\r\n      if (token) headers.Authorization = `Bearer ${token}`;\r\n\r\n      //  Send clock-out data\r\n      const response = await fetch(apiUrl, {\r\n        method: \"PUT\",\r\n        headers,\r\n        body: JSON.stringify(clockOutData),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorText = await response.text();\r\n        console.error(\"Clock-out API call failed:\", response.status, errorText);\r\n        alert(\r\n          \"Failed to record clock-out time on the server. Please try again or contact support.\"\r\n        );\r\n      } else {\r\n        console.log(\"Clock-out recorded successfully on server\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error during clock-out API call:\", error);\r\n      alert(\r\n        \"A network error occurred while clocking out. You have been logged out locally, but the server record might be missing.\"\r\n      );\r\n    } finally {\r\n      //  Clear attendance session data\r\n      setCurrentAttendanceId(null);\r\n      localStorage.removeItem(attendanceStorageKey);\r\n\r\n      setIsLoggedIn(false);\r\n      setIsLogoutConfirmed(false);\r\n      setEndTime(now);\r\n\r\n      //  Update frontend table data\r\n      setRawTableData((prev) => {\r\n        if (prev.length === 0) return prev;\r\n\r\n        const lastIndex = prev.length - 1;\r\n        const lastRecord = prev[lastIndex];\r\n\r\n        if (\r\n          lastRecord.date === now.toLocaleDateString() &&\r\n          !lastRecord.logout_time\r\n        ) {\r\n          const shiftedLoginStr = addMinutesToTimeString(lastRecord.login_time);\r\n          const loginDate = new Date(`2000-01-01T${shiftedLoginStr}:00`);\r\n          const logoutDate = now;\r\n          const loginHours = (logoutDate - loginDate) / (1000 * 60 * 60);\r\n\r\n          const updatedRecord = {\r\n            ...lastRecord,\r\n            logout_time: formatClockTime(now),\r\n            login_hours: loginHours > 0 ? loginHours : 0,\r\n            barWidth: `${(loginHours / STANDARD_WORKDAY_HOURS) * 100}%`,\r\n          };\r\n\r\n          return [...prev.slice(0, lastIndex), updatedRecord];\r\n        }\r\n\r\n        return prev;\r\n      });\r\n\r\n      //  Refresh todays data\r\n      fetchTodayAttendance();\r\n    }\r\n  };\r\n\r\n\r\n  const handleCancel = () => { setIsLogoutConfirmed(false); };\r\n\r\n  const [barChartData, setBarChartData] = useState([]);\r\n  const [rawPieData, setRawPieData] = useState([]);\r\n  const [dates, setDates] = useState([]);\r\n  const [Data, setData] = useState([])\r\n  const [cardData, setCardData] = useState([]);\r\n  const [startIndex, setStartIndex] = useState(0)\r\n  //const ATTENDANCE_ID_STORAGE_KEY = 'currentAttendanceId';\r\n  const attendanceStorageKey = `attendanceId_${id}`;\r\n  //const CLOCKIN_TIME_STORAGE_KEY = `attendanceClockInTime_${userData?.employeeId}`;\r\n  useEffect(() => {\r\n    if (!dates || dates.length <= 1) return;\r\n    if (selectedMetricDate && selectedMetricDate !== \"All\") return;\r\n\r\n    const firstDate = dates.find(d => d !== \"All\");\r\n    if (!firstDate) return;\r\n\r\n    const pieItem = rawPieData.find(item => item.Date === firstDate);\r\n    const barItem = barChartData.find(item => item.Date === firstDate);\r\n    const dateToSet = pieItem || barItem ? `${(pieItem || barItem).Date}-${(pieItem || barItem).Month}-${(pieItem || barItem).Year}` : firstDate;\r\n    setSelectedMetricDate(dateToSet);\r\n    const idx = dates.indexOf(firstDate);\r\n    if (idx >= 0) {\r\n      const pageStart = Math.floor(idx / datesPerPage) * datesPerPage;\r\n      setStartIndex(pageStart);\r\n    }\r\n  }, [dates, rawPieData, barChartData]);\r\n  // 1. Bar Chart Data\r\n  useEffect(() => {\r\n    const url = `https://hrms.anasolconsultancyservices.com/api/attendance/employee/${userData?.employeeId}/bar-chart?page=0&size=5`;\r\n    dashboardApi.get(url).then(response => {\r\n      const formatted = response.data.map(item => ({ Date: item.date, Month: item.month, Year: item.year, Work_Hours: item.working_hour, Break_Hours: item.break_hour }));\r\n      setBarChartData(formatted);\r\n      const dates = [\"All\", ...formatted.map(item => item.Date)];\r\n      setDates(dates);\r\n    }).catch(error => console.error('Error fetching bar chart data:', error));\r\n  }, [empID]);\r\n\r\n  // 2. Attendance Table Data\r\n  useEffect(() => {\r\n    const url = `https://hrms.anasolconsultancyservices.com/api/attendance/employee/${userData?.employeeId}/attendance?page=0&size=${rowsPerPageOptions[rowsPerPageOptions.length - 1]}`;\r\n    dashboardApi.get(url).then(response => {\r\n      setRawTableData(response.data);\r\n      const dates = [\"All\", ...response.map(item => item.Date)];\r\n      setDates(dates);\r\n    }).catch(error => console.error('Error fetching attendance data:', error));\r\n  }, [empID]);\r\n\r\n  // 3. Pie Chart Data\r\n  useEffect(() => {\r\n    const url = `https://hrms.anasolconsultancyservices.com/api/attendance/employee/${userData?.employeeId}/pie-chart`;\r\n    dashboardApi.get(url).then(response => {\r\n      const formatted = response.data.map(item => ({ Date: item.date, Month: item.month, Year: item.year, Working_hour: item.working_hour, Break_hour: item.break_hour, EmployeeId: item.employeeId }));\r\n      setRawPieData(formatted);\r\n      const dates = [\"All\", ...formatted.map(item => item.Date)];\r\n      setDates(dates);\r\n    }).catch(error => console.error('Error fetching pie chart data:', error));\r\n  }, [empID]);\r\n\r\n  // 4. Line Graph/Schedule Bar Data (Data)\r\n  useEffect(() => {\r\n    const url = `https://hrms.anasolconsultancyservices.com/api/attendance/employee/${userData?.employeeId}/line-graph?page=0&size=5`;\r\n    dashboardApi.get(url).then(response => {\r\n      const formatted = response.data.map(item => ({ EmployeeId: item.employeeId, Date: item.date, Month: item.month, Year: item.year, Start_time: item.start_time, End_time: item.end_time, Break_hour: item.breaks.map(b => ({ Time: b.time, hour: b.hour })) }));\r\n      setData(formatted);\r\n      const dates = [\"All\", ...formatted.map(item => item.Date)];\r\n      setDates(dates);\r\n    }).catch(error => console.error('Error fetching line graph data:', error));\r\n  }, [empID]);\r\n\r\n  const formatSecondsToHHMMSS = (secs) => {\r\n    const s = Math.max(0, Math.floor(Number(secs) || 0));\r\n    const hh = Math.floor(s / 3600);\r\n    const mm = Math.floor((s % 3600) / 60);\r\n    const ss = s % 60;\r\n    return `${String(hh).padStart(2, \"0\")}:${String(mm).padStart(2, \"0\")}:${String(ss).padStart(2, \"0\")}`;\r\n  };\r\n  const elapsedTimeSeconds = isLoggedIn\r\n    ? Math.floor(((currentTime.getTime() - lastFetchedAt) / 1000))\r\n    : 0;\r\n  const displayedEffectiveSeconds = isLoggedIn\r\n    ? (Number(effectiveHours) || 0) + elapsedTimeSeconds\r\n    : (Number(effectiveHours) || 0);\r\n\r\n  const displayedGrossSeconds = isLoggedIn\r\n    ? (Number(grossHours) || 0) + elapsedTimeSeconds\r\n    : (Number(grossHours) || 0);\r\n\r\n  const grossHoursFormatted = formatSecondsToHHMMSS(displayedGrossSeconds);\r\n  const effectiveHoursFormatted = formatSecondsToHHMMSS(displayedEffectiveSeconds);\r\n  const buildRange = () => {\r\n    const today = new Date();\r\n    let year = today.getFullYear();\r\n    let monthIndex = today.getMonth();\r\n    let startISO = startDateFilter || \"\";\r\n    let endISO = endDateFilter || \"\";\r\n    const clampToToday = (iso) => {\r\n      if (!iso) return \"\";\r\n      try {\r\n        if (iso > todayISO) return todayISO;\r\n        return iso;\r\n      } catch {\r\n        return \"\";\r\n      }\r\n    };\r\n\r\n    startISO = clampToToday(startISO);\r\n    endISO = clampToToday(endISO);\r\n\r\n    if (startISO && !endISO) {\r\n      endISO = todayISO;\r\n    }\r\n    if (!startISO && endISO) {\r\n      const parts = endISO.split('-');\r\n      const startOfMonth = new Date(parts[0], Number(parts[1]) - 1, 1);\r\n      startISO = startOfMonth.toISOString().slice(0, 10);\r\n    }\r\n    if (!startISO && !endISO) {\r\n      if (selectedMonth) {\r\n        const m = new Date(`${selectedMonth} 1, ${year}`);\r\n        if (!isNaN(m)) monthIndex = m.getMonth();\r\n      }\r\n      const start = new Date(year, monthIndex, 1);\r\n      const end = new Date(year, monthIndex + 1, 0);\r\n      startISO = start.toISOString().slice(0, 10);\r\n      endISO = end.toISOString().slice(0, 10);\r\n    }\r\n    if (!startISO) startISO = endISO || todayISO;\r\n    if (!endISO) endISO = startISO || todayISO;\r\n    if (startISO > endISO) {\r\n      const tmp = startISO; startISO = endISO; endISO = tmp;\r\n    }\r\n    if (endISO > todayISO) endISO = todayISO;\r\n    if (startISO > todayISO) startISO = todayISO;\r\n\r\n    return { startISO, endISO };\r\n  };\r\n  const datesPerPage = 5;\r\n  const [loggedInUserProfile, setLoggedInUserProfile] = useState({\r\n    image: null,\r\n    initials: \"  \"\r\n  });\r\n  const intervalRef = useRef(null);\r\n  const clockTimerRef = useRef(null);\r\n\r\n  const [rawTableData, setRawTableData] = useState([]);\r\n\r\n  const sortOptions = [\"Recently added\", \"Ascending\", \"Descending\", \"Last Month\", \"Last 7 Days\"];\r\n  const rowsPerPageOptions = [10, 25, 50, 100];\r\n  const MONTHS = [\"All\", \"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sept\", \"Oct\", \"Nov\", \"Dec\"];\r\n  const textColor = theme === 'dark' ? \"#FFFFFF\" : \"#000000\";\r\n  const [loggedPermissiondata, setLoggedPermissionData] = useState([]);\r\n  const [matchedArray, setMatchedArray] = useState(null);\r\n  const LoggedUserRole = userData?.roles[0] ? `ROLE_${userData?.roles[0]}` : null\r\n  useEffect(() => {\r\n    let fetchedData = async () => {\r\n      let response = await authApi.get(`role-access/${LoggedUserRole}`);\r\n      console.log(\"from Projects :\", response.data);\r\n      setLoggedPermissionData(response.data);\r\n    }\r\n    fetchedData();\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (loggedPermissiondata) {\r\n      setMatchedArray(loggedPermissiondata?.permissions)\r\n    }\r\n  }, [loggedPermissiondata]);\r\n  //console.log(matchedArray);\r\n\r\n  const [hasAccess, setHasAccess] = useState([])\r\n  useEffect(() => {\r\n    setHasAccess(userData?.permissions)\r\n  }, [userData])\r\n\r\n  useEffect(() => {\r\n    let cancelled = false;\r\n    const fetchData = async () => {\r\n      setLoading(true);\r\n      setError(null);\r\n      try {\r\n        const employeeId = userData?.employeeId || \"ACS00000001\";\r\n        const { startISO, endISO } = buildRange();\r\n        const variables = { employeeId, startDate: startISO, endDate: endISO };\r\n        const payload = await graphqlRequest(DETAILS_QUERY, variables);\r\n        if (cancelled) return;\r\n        const data = payload?.getDetailsBetweenDates || [];\r\n        const normalized = data.map((item) => {\r\n          const dateForTime = /^\\d{4}-\\d{2}-\\d{2}$/.test(item.date)\r\n            ? item.date\r\n            : (() => {\r\n              const parts = (item.date || '').split('-');\r\n              if (parts.length === 3) return `${parts[2]}-${parts[1]}-${parts[0]}`;\r\n              return new Date().toISOString().slice(0, 10);\r\n            })();\r\n\r\n          // more robust UTC parsing with fallbacks\r\n          const toUtcDate = (raw) => {\r\n            if (!raw) return null;\r\n            const s = String(raw).trim();\r\n            if (!s || /^(-|n\\/a|null)$/i.test(s)) return null;\r\n            if (/\\d{4}-\\d{2}-\\d{2}T/.test(s) || /[Zz]|[+\\-]\\d{2}:\\d{2}$/.test(s)) {\r\n              const pd = new Date(s);\r\n              return isNaN(pd.getTime()) ? null : pd;\r\n            }\r\n            const parsedByJS = new Date(s);\r\n            if (!isNaN(parsedByJS.getTime())) return parsedByJS;\r\n            const hhmm = tryNormalizeTo24(s);\r\n            if (hhmm) {\r\n              const pd = new Date(`${dateForTime}T${hhmm}:00Z`);\r\n              return isNaN(pd.getTime()) ? null : pd;\r\n            }\r\n            const spaceSep = s.replace(' ', 'T');\r\n            if (/\\d{4}-\\d{2}-\\d{2}T/.test(spaceSep)) {\r\n              const maybe = spaceSep.endsWith('Z') || /[+\\-]\\d{2}:\\d{2}$/.test(spaceSep) ? new Date(spaceSep) : new Date(`${spaceSep}Z`);\r\n              if (!isNaN(maybe.getTime())) return maybe;\r\n            }\r\n            return null;\r\n          }\r\n          const formatDateToIST = (dateObj) => {\r\n            if (!dateObj || isNaN(dateObj.getTime())) return 'N/A';\r\n            return new Intl.DateTimeFormat('en-IN', {\r\n              hour: '2-digit',\r\n              minute: '2-digit',\r\n              hour12: true,\r\n              timeZone: 'Asia/Kolkata'\r\n            }).format(dateObj);\r\n          };\r\n\r\n          const loginRaw = item.login ?? item.loginTime ?? null;\r\n          const logoutRaw = item.logout ?? item.logoutTime ?? null;\r\n\r\n          const loginUtc = loginRaw ? toUtcDate(loginRaw) : null;\r\n          const logoutUtc = logoutRaw ? toUtcDate(logoutRaw) : null;\r\n\r\n          // --- CHANGED: explicitly add IST offset (+5:30) to parsed UTC dates and format ---\r\n          const shiftAndFormat = (utcDate, rawValue) => {\r\n            if (!rawValue) return 'N/A';\r\n            try {\r\n              // try using already-parsed UTC date if available\r\n              let base = (utcDate && !isNaN(utcDate.getTime())) ? utcDate : null;\r\n\r\n              // fallback: if raw is HH:mm build a UTC instant for dateForTime\r\n              if (!base) {\r\n                const hh = tryNormalizeTo24(String(rawValue));\r\n                if (hh) {\r\n                  base = new Date(`${dateForTime}T${hh}:00Z`);\r\n                }\r\n              }\r\n\r\n              // final parse fallback\r\n              if (!base) {\r\n                const maybe = new Date(String(rawValue));\r\n                if (!isNaN(maybe.getTime())) base = maybe;\r\n              }\r\n\r\n              if (!base || isNaN(base.getTime())) return String(rawValue);\r\n\r\n              // add IST offset (+5:30) explicitly\r\n              const istMs = base.getTime() + IST_OFFSET_MINUTES * 60 * 1000;\r\n              const istDate = new Date(istMs);\r\n\r\n              // Format the shifted instant as a 12-hour India-style time\r\n              return new Intl.DateTimeFormat('en-IN', {\r\n                hour: '2-digit',\r\n                minute: '2-digit',\r\n                hour12: true,\r\n                timeZone: 'UTC' // we've already shifted, present as UTC to avoid double TZ conversion\r\n              }).format(istDate);\r\n            } catch {\r\n              return String(rawValue);\r\n            }\r\n          };\r\n\r\n\r\n          const loginDisplay = shiftAndFormat(loginUtc, loginRaw);\r\n          const logoutDisplay = shiftAndFormat(logoutUtc, logoutRaw);\r\n\r\n          // compute duration using the parsed UTC Date objects (difference is timezone-safe)\r\n          let totalDurationMinutes = 0;\r\n          if (loginUtc && logoutUtc && !isNaN(loginUtc.getTime()) && !isNaN(logoutUtc.getTime())) {\r\n            totalDurationMinutes = Math.max(0, Math.floor((logoutUtc.getTime() - loginUtc.getTime()) / (1000 * 60)));\r\n          } else {\r\n            const eff = parseEffectiveHours(item.effectiveHours || '');\r\n            const gross = parseEffectiveHours(item.grossHours || '');\r\n            totalDurationMinutes = eff || gross || 0;\r\n          }\r\n          const effectiveMinutes = parseEffectiveHours(item.effectiveHours || '');\r\n          const grossMinutes = parseEffectiveHours(item.grossHours || '');\r\n\r\n          return {\r\n            ...item,\r\n            date: item.date,\r\n            loginDisplay,\r\n            logoutDisplay,\r\n            effectiveHoursDisplay: toHHMMDisplay(item.effectiveHours),\r\n            grossHoursDisplay: toHHMMDisplay(item.grossHours),\r\n            totalDurationMinutes,\r\n            totalDurationHHMM: totalDurationMinutes > 0 ? formatMinutesToHHMM(totalDurationMinutes) : 'N/A',\r\n            effectiveMinutes,\r\n            grossMinutes,\r\n            attended: (() => {\r\n              const v = item.isPresent;\r\n              if (v == null) return false;\r\n              const s = String(v).toLowerCase();\r\n              return ['present', 'p', 'yes', 'true', '1'].includes(s);\r\n            })()\r\n          };\r\n        });\r\n\r\n        setAttendanceRecords(normalized);\r\n        setPage(1);\r\n      } catch (err) {\r\n        console.error(\"Attendance fetch failed:\", err);\r\n        // Prefer GraphQL-level messages if present\r\n        const graphqlMessage = err?.graphql?.length ? err.graphql.map(g => g.message).join('; ') : null;\r\n        const serverMessage = err?.response?.data?.message || err?.message;\r\n        if (err?.response?.status === 401) {\r\n          setError('Unauthorized (401). Please login to continue.');\r\n        } else {\r\n          setError(graphqlMessage || serverMessage || 'Failed to load attendance');\r\n        }\r\n        setAttendanceRecords([]);\r\n      } finally {\r\n        if (!cancelled) setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n    return () => { cancelled = true; };\r\n  }, [selectedMonth, userData, startDateFilter, endDateFilter]);\r\n\r\n  const maxHoursInSeconds = 8 * 3600;\r\n  const progress = (grossHours / maxHoursInSeconds) * 100;\r\n  const filteredSorted = useMemo(() => {\r\n    let result = [...attendanceRecords];\r\n\r\n    switch (sortBy) {\r\n      case 'Ascending':\r\n        result.sort((a, b) => (a.employeeId || '').localeCompare(b.employeeId || ''));\r\n        break;\r\n      case 'Descending':\r\n        result.sort((a, b) => (b.employeeId || '').localeCompare(a.employeeId || ''));\r\n        break;\r\n      case 'Last 7 days':\r\n        result.sort((a, b) => new Date(b.date) - new Date(a.date));\r\n        break;\r\n      case 'Recantly Added':\r\n      default:\r\n        result.sort((a, b) => new Date(b.date) - new Date(a.date));\r\n        break;\r\n    }\r\n\r\n    return result;\r\n  }, [attendanceRecords, sortBy]);\r\n\r\n  const totalPages = Math.max(1, Math.ceil(filteredSorted.length / pageSize));\r\n  const pageItems = filteredSorted.slice((page - 1) * pageSize, page * pageSize);\r\n\r\n\r\n  // totals for filtered set (sum of totalDuration and gross)\r\n  const totals = useMemo(() => {\r\n    const sumDur = filteredSorted.reduce((acc, r) => acc + (r.totalDurationMinutes || 0), 0);\r\n    const sumGross = filteredSorted.reduce((acc, r) => acc + (r.grossMinutes || 0), 0);\r\n    return {\r\n      totalDurationMinutes: sumDur,\r\n      totalDurationHHMM: sumDur > 0 ? formatMinutesToHHMM(sumDur) : '00:00',\r\n      totalGrossMinutes: sumGross,\r\n      totalGrossHHMM: sumGross > 0 ? formatMinutesToHHMM(sumGross) : '00:00'\r\n    };\r\n  }, [filteredSorted]);\r\n\r\n  // months array for select\r\n  const months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\r\n  const filteredPieData = useMemo(() => {\r\n    const dataToProcess = selectedDate === \"All\" ? rawPieData : rawPieData.filter((d) => `${d.Date}-${d.Month}-${d.Year}` === selectedDate);\r\n    const totalWorking = dataToProcess.reduce((sum, row) => sum + row.Working_hour, 0);\r\n    const totalBreak = dataToProcess.reduce((sum, row) => sum + row.Break_hour, 0);\r\n    return [{ name: \"Working Hours\", value: totalWorking }, { name: \"Break Hours\", value: totalBreak }];\r\n  }, [selectedDate, rawPieData]);\r\n\r\n  const filteredBarChartData = useMemo(() => {\r\n    return selectedDate === \"All\" ? barChartData : barChartData.filter((d) => `${d.Date}-${d.Month}-${d.Year}` === selectedDate);\r\n  }, [selectedDate, barChartData]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className={`min-h-screen ${theme === 'dark' ? 'bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900' : 'bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100'}`}>\r\n        <div className=\"min-h-screen flex items-center justify-center px-4\">\r\n          <div className=\"text-center\">\r\n            <div className=\"relative\">\r\n              <div className=\"animate-spin rounded-full h-12 w-12 sm:h-16 sm:w-16 border-4 border-blue-500 border-t-transparent mx-auto mb-4\"></div>\r\n              <div className=\"absolute inset-0 flex items-center justify-center\">\r\n                <IoPersonOutline className=\"w-5 h-5 sm:w-6 sm:h-6 text-blue-500\" />\r\n              </div>\r\n            </div>\r\n            <h2 className={`text-lg sm:text-xl font-bold mb-2 ${theme === 'dark' ? 'text-white' : 'text-gray-800'}`}>Loading Employee Attendance</h2>\r\n            <p className={`text-sm ${theme === 'dark' ? 'text-gray-300' : 'text-gray-600'}`}>Discovering your colleagues...</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n\r\n  }\r\n  return (\r\n    <div className={`min-h-screen ${theme === 'dark' ? 'bg-gray-900' : 'bg-gray-50'} font-sans text-gray-800 relative`}>\r\n      {/* Sidebar */}\r\n      <AnimatePresence>\r\n        {(matchedArray || []).includes(\"VIEW_ATTENDANCE_REPORTS\") && !isSidebarOpen && (\r\n          <motion.button onClick={() => setIsSidebarOpen(true)} className=\"fixed right-0 top-1/2 transform -translate-y-1/2 bg-indigo-600 text-white p-2 rounded-l-lg shadow-lg z-50 hover:bg-indigo-700 transition-colors\"\r\n            aria-label=\"Open Sidebar\"\r\n          >\r\n            <ChevronLeft />\r\n          </motion.button>\r\n        )}\r\n        {showSidebar && isSidebarOpen && (\r\n          <motion.div\r\n            key=\"sidebar\"\r\n            className={`fixed inset-y-0 right-0 w-80 ${theme === 'dark' ? 'bg-gray-900' : 'bg-stone-100'} shadow-xl z-40 p-4 flex flex-col`}\r\n          >\r\n            <motion.h3\r\n              className={`text-lg font-bold mt-20  cursor-pointer mb-1 p-2 rounded-md  hover:bg-blue-100 transition-colors duration-200 ${theme === 'dark' ? 'text-white hover:bg-gray-900' : 'text-gray-800'}`}\r\n              onClick={handleShowAttendance}\r\n              whileHover={{ scale: 1.05 }}\r\n              whileTap={{ scale: 0.95 }}\r\n            >\r\n              <LiaFileAlt className=\"w-5 h-5 inline-block mr-2\" />Total Employee Attendance\r\n            </motion.h3>\r\n            <motion.h3\r\n              className={`text-lg font-bold   cursor-pointer mb-4 p-2 rounded-md  hover:bg-blue-100 transition-colors duration-200 ${theme === 'dark' ? 'text-white hover:bg-gray-900' : 'text-gray-800'}`}\r\n              onClick={handleShowAttendanceReport}\r\n              whileHover={{ scale: 1.05 }}\r\n              whileTap={{ scale: 0.95 }}\r\n            >\r\n              <ChartBarIcon className=\"w-5 h-5 inline-block mr-2\" /> Attendance Reports\r\n            </motion.h3>\r\n\r\n            <button onClick={() => setIsSidebarOpen(false)} className=\"absolute left-0 top-1/2 -translate-x-1/2 -translate-y-1/2 p-2 rounded-full bg-indigo-600 text-white shadow-lg hover:bg-indigo-700 transition-colors z-50\"\r\n              aria-label=\"Close Sidebar\">\r\n              <ChevronRight />\r\n            </button>\r\n          </motion.div>\r\n\r\n        )}\r\n      </AnimatePresence>\r\n      {/* Main Content Wrapper */}\r\n      <div className={`flex-1 transition-all duration-300 p-4 sm:p-6 lg:p-8`}>\r\n\r\n        {isSidebarOpen && <div className=\"md:hidden fixed inset-0 bg-black opacity-50 z-30\" onClick={() => setIsSidebarOpen(false)}></div>}\r\n        <main className={`p-2 sm:p-2 lg:p-4 ${isSidebarOpen && showSidebar ? 'filter blur-sm' : ''}`}>\r\n          <header className=\"flex items-center justify-between mb-1\">\r\n            <motion.h1\r\n              className={`text-2xl sm:text-4xl font-extrabold ${theme === 'dark' ? 'text-white' : 'text-gray-900'}`}\r\n              initial={{ opacity: 0, x: -20 }}\r\n              animate={{ opacity: 1, x: 0 }}\r\n              transition={{ duration: 0.5 }}\r\n            >\r\n              {showAttendanceReports ? \"Attendance Reports\" : \"\"}\r\n\r\n            </motion.h1>\r\n\r\n          </header>\r\n          {/* Conditional Rendering of Main Content */}\r\n          <AnimatePresence mode=\"wait\">\r\n            {sidebarView === 'attendance' && (\r\n              <motion.div\r\n                key=\"attendance\"\r\n                initial={{ opacity: 0, y: 20 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                exit={{ opacity: 0, y: -20 }}\r\n                transition={{ duration: 0.3 }}\r\n              >\r\n                <AttendanceTable onBack={() => setSidebarView(null)} />\r\n              </motion.div>\r\n            )}\r\n            {sidebarView === 'attendanceReport' && (\r\n              <motion.div\r\n                key=\"reports\"\r\n                initial={{ opacity: 0, y: 20 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                exit={{ opacity: 0, y: -20 }}\r\n                transition={{ duration: 0.3 }}\r\n                className=\"\"\r\n              >\r\n                <AttendanceReports rawTableData={rawTableData} role={role.toLowerCase()} onBack={() => setSidebarView(null)} />\r\n\r\n              </motion.div>\r\n            )}\r\n            {sidebarView === null && (\r\n              <motion.div\r\n                key=\"dashboard\"\r\n              >\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-1 xl:grid-cols-2 gap-3 mb-2\">\r\n                  <motion.div\r\n                    className=\"p-2 flex items-center justify-center w-full\"\r\n                    animate={{ opacity: 1, scale: 1 }}\r\n                  >\r\n                    <div className={`rounded-3xl shadow-2xl p-4 w-full max-w-lg md:max-w-3xl transition-all hover:shadow-3xl duration-300 relative overflow-hidden \r\n                ${theme === 'dark' ? 'bg-gray-800 border border-indigo-500/50' : 'bg-white border border-gray-200'}`}>\r\n\r\n                      <div className=\"absolute -top-12 -right-12 w-50 h-50 rounded-full bg-gradient-to-tr from-purple-100 via-pink-200 to-red-300 opacity-30 z-0 animate-pulse-slow\"></div>\r\n                      <div className=\"absolute -bottom-10 -left-10 w-24 h-24 rounded-full bg-gradient-to-tr from-green-100 via-blue-200 to-purple-300 opacity-30 z-0 animate-pulse-slow-reverse\"></div>\r\n                      <div className=\"flex flex-row items-start justify-between mb-2 relative z-10\">\r\n                        <div className=\"flex items-start space-x-3 md:space-x-4\">\r\n                          <div className=\"relative mt-1\"> {/* Adjusted margin top */}\r\n                            <motion.div\r\n                              className={`w-14 h-14 md:w-16 md:h-16 rounded-full overflow-hidden border-4 flex items-center justify-center shadow-xl cursor-pointer \r\n                                ${theme === 'dark' ? 'border-gray-700 bg-gray-600' : 'border-white bg-indigo-500'}`}\r\n                              transition={{ type: \"spring\", stiffness: 400, damping: 10 }}\r\n                            >\r\n                              {loggedInUserProfile.image ? (\r\n                                <img\r\n                                  src={loggedInUserProfile.image}\r\n                                  alt=\"Profile\"\r\n                                  className=\"w-full h-full object-cover\"\r\n                                />\r\n                              ) : (\r\n                                <span\r\n                                  className={`text-lg md:text-xl font-bold ${theme === \"dark\" ? \"text-white\" : \"text-white\" // White text for contrast\r\n                                    } flex items-center justify-center w-full h-full`}\r\n                                >\r\n                                  {loggedInUserProfile.initials}\r\n                                </span>\r\n                              )}\r\n                            </motion.div>\r\n                            <motion.div\r\n                              className={`absolute bottom-0 right-0 w-4 h-4 md:w-5 md:h-5 rounded-full flex items-center justify-center border-2 \r\n                                ${theme === 'dark' ? 'border-gray-800' : 'border-white'} transition-colors \r\n                                ${mode === \"office\" ? \"bg-blue-500\" : \"bg-green-500\"}`}\r\n                              initial={{ scale: 0 }}\r\n                              animate={{ scale: 1 }}\r\n                              transition={{ type: \"spring\", stiffness: 500, damping: 20 }}\r\n                            >\r\n                              {mode === \"office\" ? (\r\n                                <FaBuilding className=\"text-white text-xs\" />\r\n                              ) : (\r\n                                <FaHome className=\"text-white text-xs\" />\r\n                              )}\r\n                            </motion.div>\r\n                          </div>\r\n\r\n                          {/* Welcome Text */}\r\n                          <motion.div\r\n                            className=\"text-start mt-2\"\r\n                            initial={{ opacity: 0, x: -20 }}\r\n                            animate={{ opacity: 1, x: 0 }}\r\n                            transition={{ delay: 0.1, duration: 0.5 }}\r\n                          >\r\n                            <p className={`text-xs md:text-sm font-semibold mb-0 ${theme === 'dark' ? 'text-gray-400' : 'text-gray-500'}`}>\r\n                              Welcome Back!\r\n                            </p>\r\n                            <h2 className={`text-lg md:text-xl font-bold ${theme === 'dark' ? 'text-white' : 'text-gray-900'}`}>\r\n                              {`${userData?.fullName || 'Employee'}`} \r\n                            </h2>\r\n                          </motion.div>\r\n                        </div>\r\n                        <div className=\"flex space-x-1 md:space-x-2 mt-1\">\r\n                          {/* Refresh Button - Smaller icon/padding on mobile */}\r\n                          <motion.button\r\n                            onClick={handleRefresh}\r\n                            className={`p-2 rounded-full hover:shadow-lg flex items-center justify-center text-sm font-medium transition-transform duration-300 \r\n                            ${theme === 'dark' ? 'bg-gray-700 text-indigo-400 border border-gray-600' : 'bg-gray-100 text-indigo-600 border border-gray-300'}`}\r\n                            whileTap={{ scale: 0.9 }}\r\n                            aria-label=\"Refresh Timer\"\r\n                          >\r\n                            <motion.svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4 md:h-5 md:w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2} initial={{ rotate: 0 }}\r\n                              animate={{ rotate: showModeConfirm ? 180 : 0 }}>\r\n                              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.001 8.001 0 01-15.357-2m15.357 2H15\" />\r\n                            </motion.svg>\r\n                            <span className=\"hidden sm:inline ml-1 text-xs\">Refresh</span> {/* Smaller text on desktop */}\r\n                          </motion.button>\r\n\r\n                          {/* Mode Toggle Button - Smaller text/padding on mobile */}\r\n                          <div className=\"relative\">\r\n                            <motion.button\r\n                              onClick={() => setShowModeConfirm(!showModeConfirm)}\r\n                              className={`px-2 py-1.5 md:px-4 md:py-2 rounded-full flex items-center justify-center gap-1 md:gap-2 text-sm font-medium shadow-md transition-transform duration-300 \r\n                                ${theme === 'dark' ? 'bg-indigo-600 text-white' : 'bg-gradient-to-br from-indigo-100 to-indigo-200 text-indigo-700 border border-indigo-300'}`}\r\n                              whileTap={{ scale: 0.9 }}\r\n                            >\r\n                              {/* Mode icon */}\r\n                              {mode === \"office\" ? (\r\n                                <motion.div className=\"w-4 h-4 md:w-5 md:h-5 rounded-full bg-blue-500 flex items-center justify-center\" whileHover={{ rotate: 360 }}>\r\n                                  <FaBuilding className=\"text-white text-xs\" />\r\n                                </motion.div>\r\n                              ) : (\r\n                                <motion.div className=\"w-4 h-4 md:w-5 md:h-5 rounded-full bg-green-500 flex items-center justify-center\" whileHover={{ rotate: 360 }}>\r\n                                  <FaHome className=\"text-white text-xs\" />\r\n                                </motion.div>\r\n                              )}\r\n                              <span className=\"capitalize hidden sm:inline text-sm\">{mode}</span> {/* Kept hidden on mobile, smaller on desktop */}\r\n                              <motion.svg\r\n                                xmlns=\"http://www.w3.org/2000/svg\"\r\n                                className=\"h-3 w-3 md:h-4 md:w-4 ml-0.5 transition-transform duration-200 hidden sm:block\"\r\n                                fill=\"none\"\r\n                                viewBox=\"0 0 24 24\"\r\n                                stroke=\"currentColor\"\r\n                                initial={{ rotate: 0 }}\r\n                                animate={{ rotate: showModeConfirm ? 180 : 0 }}\r\n                              >\r\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\r\n                              </motion.svg>\r\n                            </motion.button>\r\n                            <AnimatePresence>\r\n                              {showModeConfirm && (\r\n                                <motion.div\r\n                                  className={`absolute top-full right-0 mt-2 w-48 p-3 border rounded-xl shadow-xl z-30 \r\n                                        ${theme === 'dark' ? 'bg-gray-700 text-white border-gray-600' : 'bg-white text-gray-800 border-gray-300'}`}\r\n                                  initial={{ opacity: 0, y: -20, scale: 0.9 }}\r\n                                  animate={{ opacity: 1, y: 0, scale: 1 }}\r\n                                  exit={{ opacity: 0, y: -20, scale: 0.9 }}\r\n                                  transition={{ type: \"spring\", stiffness: 300, damping: 20 }}\r\n                                >\r\n                                  <p className={`${theme === 'dark' ? 'text-gray-200' : 'text-gray-700'} font-medium text-xs mb-3 text-center`}>\r\n                                    Switch to {mode === \"office\" ? \"Remote\" : \"Office\"} mode?\r\n                                  </p>\r\n                                  <div className=\"flex space-x-2\">\r\n                                    <motion.button\r\n                                      onClick={() => handleModeChange(mode === \"office\" ? \"home\" : \"office\")}\r\n                                      className=\"flex-1 px-3 py-1.5 bg-gradient-to-r from-indigo-600 to-indigo-700 text-white rounded-lg hover:from-indigo-700 hover:to-indigo-800 transition-colors font-semibold text-sm\"\r\n                                      whileTap={{ scale: 0.95 }}\r\n                                    >\r\n                                      Confirm\r\n                                    </motion.button>\r\n                                    <motion.button\r\n                                      onClick={() => setShowModeConfirm(false)}\r\n                                      className=\"flex-1 px-3 py-1.5 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors font-medium text-sm\"\r\n                                      whileTap={{ scale: 0.95 }}\r\n                                    >\r\n                                      Cancel\r\n                                    </motion.button>\r\n                                  </div>\r\n                                </motion.div>\r\n                              )}\r\n                            </AnimatePresence>\r\n                          </div>\r\n                        </div>\r\n\r\n                      </div>\r\n                      <div className={`grid grid-cols-1 md:grid-cols-1`}>\r\n                        <ProfileAttendance\r\n                          theme={theme}\r\n                          todayAttendance={todayAttendance}\r\n                          isLoggedIn={isLoggedIn}\r\n                          loading={loadingTodayAttendance}\r\n                        />\r\n\r\n\r\n                      </div>\r\n\r\n                      <div className=\"relative my-2 w-full flex justify-center\">\r\n                        <div className=\"absolute inset-0 flex items-center\" aria-hidden=\"true\">\r\n                          <motion.div\r\n                            className={`w-full border-t ${theme === 'dark' ? 'border-gray-600' : 'border-gray-300'}`}\r\n                            initial={{ scaleX: 0 }}\r\n                            animate={{ scaleX: 1 }}\r\n                            transition={{ delay: 0.6, duration: 0.8 }}\r\n                            style={{ transformOrigin: \"left\" }}\r\n                          />\r\n                        </div>\r\n                        <span className={`px-2 text-xs font-semibold z-10 ${theme === 'dark' ? 'bg-gray-800 text-indigo-400' : 'bg-white text-indigo-600'}`}>\r\n                          CURRENT CLOCK\r\n                        </span>\r\n                      </div>\r\n\r\n                      {/* Time display section: Increased font size for clock, better centered */}\r\n                      <div className=\"w-full flex flex-col items-center text-center mb-4 relative z-10\">\r\n\r\n                        <div className=\"mb-4\">\r\n                          <motion.div\r\n                            className=\"flex items-center justify-center gap-2 text-indigo-600 font-medium mb-1\"\r\n                            initial={{ opacity: 0, y: 10 }}\r\n                            animate={{ opacity: 1, y: 0 }}\r\n                            transition={{ delay: 0.8, duration: 0.5 }}\r\n                          >\r\n                            <ClockIcon className=\"w-5 h-5 text-indigo-500\" /> {/* Slightly smaller icon */}\r\n                            <span className='text-sm'>Current Time</span>\r\n                          </motion.div>\r\n                          <motion.p\r\n                            // Central clock is now larger for focus, scales down well on mobile\r\n                            className={`text-3xl md:text-3xl lg:text-3xl font-extrabold tracking-tight mb-1 ${theme === 'dark' ? 'text-white' : 'text-gray-900'}`}\r\n                            initial={{ opacity: 0 }}\r\n                            animate={{ opacity: 1 }}\r\n                            transition={{ delay: 1, duration: 0.5 }}\r\n                          >\r\n                            {formatClockTime(currentTime)}\r\n                          </motion.p>\r\n                          <motion.p\r\n                            className={`text-sm md:text-base font-medium ${theme === 'dark' ? 'text-gray-400' : 'text-gray-600'}`}\r\n                            initial={{ opacity: 0, y: 10 }}\r\n                            animate={{ opacity: 1, y: 0 }}\r\n                            transition={{ delay: 1.2, duration: 0.5 }}\r\n                          >\r\n                            {currentTime.toLocaleDateString(undefined, { weekday: \"long\", month: \"long\", day: \"numeric\", year: \"numeric\" })}\r\n                          </motion.p>\r\n                        </div>\r\n                        {/*<div className=\"text-sm font-medium text-gray-500 dark:text-gray-400 mb-3\">\r\n                Today's Metrics: {todayIso}\r\n            </div>*/}\r\n\r\n                        {loadingTodayAttendance ? (\r\n                          <p className=\"text-sm text-indigo-400 animate-pulse\">Fetching today's hours...</p>\r\n                        ) : (\r\n                          <div className=\"grid grid-cols-2 gap-3 w-full max-w-xs md:max-w-md\">\r\n                            {/* EFFECTIVE HOURS */}\r\n                            <motion.div\r\n                              className={`rounded-xl p-2 shadow-sm text-center flex flex-col items-center justify-center ${theme === 'dark' ? 'bg-gray-700 text-white border border-indigo-500/50' : 'bg-indigo-50 border border-indigo-200'}`}\r\n                              transition={{ type: \"spring\", stiffness: 300 }}\r\n                            >\r\n                              <div className=\"text-xl font-bold text-indigo-500\">\r\n                                {effectiveHoursFormatted}\r\n                              </div>\r\n                              <div className=\"text-xs font-semibold mt-1 text-gray-500\">\r\n                                Effective Hours\r\n                              </div>\r\n                            </motion.div>\r\n\r\n                            {/* GROSS HOURS */}\r\n                            <motion.div\r\n                              className={`rounded-xl p-2 shadow-sm text-center flex flex-col items-center justify-center ${theme === 'dark' ? 'bg-gray-700 text-white border border-pink-500/50' : 'bg-pink-50 border border-pink-200'}`}\r\n                              transition={{ type: \"spring\", stiffness: 300 }}\r\n                            >\r\n                              <div className=\"text-xl font-bold text-pink-500\">\r\n                                {grossHoursFormatted}\r\n                              </div>\r\n                              <div className=\"text-xs font-semibold mt-1 text-gray-500\">\r\n                                Gross Hours\r\n                              </div>\r\n                            </motion.div>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n\r\n                      {/* Action Buttons - Reduced size and centered for mobile */}\r\n                      <div className=\"w-full flex justify-center mt-4 relative z-10\">\r\n                        {!isLoggedIn ? (\r\n                          <motion.button\r\n                            onClick={handleLogin}\r\n                            // Reduced size and font\r\n                            className=\"flex items-center justify-center w-36 py-1.5 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:from-green-600 hover:to-green-700 font-bold text-lg\"\r\n                            whileTap={{ scale: 0.95 }}\r\n                            initial={{ opacity: 0, y: 20 }}\r\n                            animate={{ opacity: 1, y: 0 }}\r\n                          >\r\n                            <ClockIcon className=\"w-5 h-5 mr-1.5\" />\r\n                            Clock In\r\n                          </motion.button>\r\n                        ) : (\r\n                          <div className=\"flex flex-col sm:flex-row gap-3 justify-center w-full max-w-sm\">\r\n                            <AnimatePresence mode=\"wait\">\r\n                              {isLogoutConfirmed ? (\r\n                                <>\r\n                                  <motion.button\r\n                                    key=\"confirm\"\r\n                                    onClick={handleConfirmLogout}\r\n                                    // Reduced size and font\r\n                                    className=\"flex-1 items-center justify-center py-1 bg-gradient-to-r from-red-600 to-red-700 text-white rounded-xl shadow-md hover:shadow-lg transition-all duration-300 font-semibold text-sm\"\r\n                                    initial={{ opacity: 0, x: -20 }}\r\n                                    animate={{ opacity: 1, x: 0 }}\r\n                                    exit={{ opacity: 0, x: -20 }}\r\n                                    whileTap={{ scale: 0.95 }}\r\n                                  >\r\n                                    Confirm Logout\r\n                                  </motion.button>\r\n                                  <motion.button\r\n                                    key=\"cancel\"\r\n                                    onClick={handleCancel}\r\n                                    className={`flex-1 items-center justify-center py-1 rounded-xl shadow-sm transition-all duration-200 font-medium text-sm \r\n                                            ${theme === 'dark' ? 'bg-gray-600 text-gray-300 hover:bg-gray-500' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'}`}\r\n                                    initial={{ opacity: 0, x: 20 }}\r\n                                    animate={{ opacity: 1, x: 0 }}\r\n                                    exit={{ opacity: 0, x: 20 }}\r\n                                    whileTap={{ scale: 0.95 }}\r\n                                  >\r\n                                    Cancel\r\n                                  </motion.button>\r\n                                </>\r\n                              ) : (\r\n                                <motion.button\r\n                                  key=\"logout\"\r\n                                  onClick={handleLogout}\r\n                                  // Reduced size and font\r\n                                  className=\"flex items-center justify-center w-36 py-1.5 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:from-red-600 hover:to-red-700 font-bold text-lg\"\r\n                                  initial={{ opacity: 0, scale: 0.8 }}\r\n                                  animate={{ opacity: 1, scale: 1 }}\r\n                                  exit={{ opacity: 0, scale: 0.8 }}\r\n                                  whileTap={{ scale: 0.95 }}\r\n                                >\r\n                                  <ClockIcon className=\"w-5 h-5 mr-1.5\" />\r\n                                  Clock Out\r\n                                </motion.button>\r\n                              )}\r\n                            </AnimatePresence>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </motion.div>\r\n                  <App attendanceRecords={attendanceRecords} />\r\n                </div>\r\n\r\n\r\n                {/* Charts Grid */}\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8\">\r\n                  <motion.section\r\n                    className={`rounded-xl shadow-lg p-6 border border-gray-200 flex flex-col justify-between min-h-[450px] ${theme === 'dark' ? 'bg-gray-700 text-white' : 'bg-stone-100 text-gray-800'}`}\r\n                    initial={{ opacity: 0, x: -50 }}\r\n                    animate={{ opacity: 1, x: 0 }}\r\n                    transition={{ duration: 0.5, delay: 0.6 }}\r\n                  >\r\n                    <h2 className={`text-xl sm:text-2xl font-bold  mb-4 text-center ${theme === 'dark' ? 'bg-gradient-to-br from-blue-200 to-blue-600 bg-clip-text text-transparent' : 'text-gray-800'}`}>\r\n                      <ChartPieIcon className=\"w-6 h-6 inline-block mr-2 text-indigo-600\" /> Daily Activity Breakdown\r\n                    </h2>\r\n                    <div className=\"mb-6 flex justify-center gap-2 flex-wrap\">\r\n                      <div className=\"mb-6 flex justify-center gap-2 flex-wrap\">\r\n                        {/* Previous Button */}\r\n                        {startIndex > 0 && (\r\n                          <motion.button\r\n                            onClick={() => setStartIndex(prev => Math.max(0, prev - datesPerPage))}\r\n                            className={`w-10 h-10 sm:w-12 sm:h-12 rounded-full text-base sm:text-sm font-small flex items-center justify-center bg-gray-200 text-gray-700 ${theme === 'dark' ? \"bg-gray-400 text-gray-300\" : \"\"} cursor-pointer hover:bg-indigo-500 hover:text-white transition-colors duration-200 ease-in-out`}\r\n                            whileHover={{ scale: 1.1 }}\r\n                            whileTap={{ scale: 0.9 }}\r\n                            aria-label=\"Previous dates\"\r\n                          >\r\n                            <ChevronLeft className=\"w-5 h-5\" />\r\n                          </motion.button>\r\n                        )}\r\n                        {dates.filter(date => date !== \"All\").slice(startIndex, startIndex + datesPerPage).map((date) => {\r\n                          const pieItem = rawPieData.find((item) => item.Date === date);\r\n                          const barItem = barChartData.find((item) => item.Date === date);\r\n                          const dataItem = pieItem || barItem;\r\n                          const dateToSet = dataItem ? `${dataItem.Date}-${dataItem.Month}-${dataItem.Year}` : date;\r\n                          return (\r\n                            <motion.button\r\n                              key={date}\r\n                              onClick={() => setSelectedMetricDate(dateToSet)}\r\n                              className={`w-10 h-10 sm:w-12 sm:h-12 rounded-full text-base sm:text-sm font-small flex items-center justify-center bg-gray-200 text-gray-700 ${theme === 'dark' ? \"bg-gray-400 text-gray-300\" : \"\"} cursor-pointer hover:bg-indigo-500 hover:text-white transition-colors duration-200 ease-in-out`}\r\n                              whileHover={{ scale: 1.1 }}\r\n                              whileTap={{ scale: 0.9 }}\r\n                            >\r\n                              {date}\r\n                            </motion.button>\r\n                          );\r\n                        })}\r\n\r\n                        {/* Next Button */}\r\n                        {startIndex + datesPerPage < dates.length && (\r\n                          <motion.button\r\n                            onClick={() => setStartIndex(prev => prev + datesPerPage)}\r\n                            className={`w-10 h-10 sm:w-12 sm:h-12 rounded-full text-base sm:text-sm font-small flex items-center justify-center bg-gray-200 text-gray-700 ${theme === 'dark' ? \"bg-gray-400 text-gray-300\" : \"\"} cursor-pointer hover:bg-indigo-500 hover:text-white transition-colors duration-200 ease-in-out`}\r\n                            whileHover={{ scale: 1.1 }}\r\n                            whileTap={{ scale: 0.9 }}\r\n                            aria-label=\"Next dates\"\r\n                          >\r\n                            <ChevronRight className=\"w-5 h-5\" />\r\n                          </motion.button>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n\r\n                    <MyComponent Data={Data} selectedMetricDate={selectedMetricDate} />\r\n                    <div className=\"flex-grow flex items-center justify-center\">\r\n                      <ResponsiveContainer width=\"100%\" height={isMobile ? 180 : 200}>\r\n                        <PieChart>\r\n                          <Pie data={filteredPieData} dataKey=\"value\" nameKey=\"name\" outerRadius={isMobile ? 60 : 80} label={({ percent }) => `${(percent * 100).toFixed(0)}%`} paddingAngle={2}>\r\n                            {filteredPieData.map((entry, index) => (\r\n                              <Cell key={`cell-${index}`} fill={PIE_COLORS[index % PIE_COLORS.length]} />\r\n                            ))}\r\n                          </Pie>\r\n                          <Tooltip formatter={(value) => `${value.toFixed(1)} hours`} />\r\n                          <Legend iconType=\"circle\" wrapperStyle={{ paddingTop: \"10px\" }} />\r\n                        </PieChart>\r\n                      </ResponsiveContainer>\r\n                    </div>\r\n                  </motion.section>\r\n                  <motion.section\r\n                    className={`rounded-xl shadow-lg p-6 border border-gray-200 flex flex-col justify-between min-h-[450px] ${theme === 'dark' ? 'bg-gray-700 text-white' : 'bg-stone-100 text-gray-800'}`}\r\n                    initial={{ opacity: 0, x: 50 }}\r\n                    animate={{ opacity: 1, x: 0 }}\r\n                    transition={{ duration: 0.5, delay: 0.8 }}\r\n                  >\r\n                    <h2 className={`text-xl sm:text-2xl font-bold  mb-4 text-center ${theme === 'dark' ? 'bg-gradient-to-br from-pink-200 to-pink-600 bg-clip-text text-transparent' : 'text-gray-800'}`}>\r\n                      <ChartBarIcon className=\"w-6 h-6 inline-block mr-2 text-indigo-600\" /> Weekly Login & Break Hours\r\n                    </h2>\r\n                    <div className=\"flex-grow flex items-center justify-center\">\r\n                      <ResponsiveContainer width=\"100%\" height={isMobile ? 300 : 400}>\r\n                        <BarChart data={filteredBarChartData} margin={{ top: 20, right: 10, left: 5, bottom: 5 }}>\r\n                          <XAxis\r\n                            dataKey=\"Date\"\r\n                            stroke={textColor}\r\n                            axisLine={false}\r\n                            tickLine={false}\r\n                            padding={{ left: 10, right: 10 }}\r\n                            tickFormatter={(tick, index) =>\r\n                              filteredBarChartData[index]\r\n                                ? `${filteredBarChartData[index].Date}-${filteredBarChartData[index].Month}`\r\n                                : tick\r\n                            }\r\n                            className={`text-sm ${theme === 'dark' ? 'text-white' : 'text-gray-500'}`}\r\n                          />\r\n                          <YAxis allowDecimals={false} hide />\r\n                          <Tooltip cursor={{ fill: 'rgba(0,0,0,0.05)' }} />\r\n                          <Legend wrapperStyle={{ paddingTop: \"10px\" }} />\r\n                          <Bar dataKey=\"Work_Hours\" stackId=\"a\" fill={BAR_COLORS.work} name=\"Work Hours\" />\r\n                          <Bar dataKey=\"Break_Hours\" stackId=\"a\" fill={BAR_COLORS.break} name=\"Break Hours\" />\r\n                        </BarChart>\r\n                      </ResponsiveContainer>\r\n                    </div>\r\n                  </motion.section>\r\n                </div>\r\n                {/* Attendance Records Table */}\r\n                <div className={`p-4 sm:p-8 ${theme === 'dark' ? 'bg-gray-900' : 'bg-gray-50'} min-h-screen`}>\r\n                  <div className=\"max-w-7xl mx-auto\">\r\n                    {/* Header Section */}\r\n                    <div className=\"mb-8\">\r\n                      <h1 className=\"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white mb-2\">\r\n                        Employee Attendance Tracker\r\n                      </h1>\r\n                      <p className=\"text-gray-600 dark:text-gray-300 text-sm\">\r\n                        Monitor and manage employee attendance records\r\n                      </p>\r\n                    </div>\r\n\r\n                    {/* Filters Section */}\r\n                    <div className={`mb-6 p-4 ${theme === 'dark' ? 'bg-gray-800' : 'bg-white'} rounded-xl border border-gray-200 dark:border-gray-700`}>\r\n                      <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4\">\r\n\r\n                        {/* Filter Section */}\r\n                        <div className=\"flex flex-col sm:flex-row gap-3 flex-wrap\">\r\n                          {/* Month Select */}\r\n                          <select\r\n                            value={selectedMonth}\r\n                            onChange={(e) => setSelectedMonth(e.target.value)}\r\n                            className={`px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm min-w-[140px] ${theme === 'dark'\r\n                              ? 'bg-gray-700 text-gray-100'\r\n                              : 'bg-white text-gray-900'\r\n                              }`}\r\n                          >\r\n                            <option value=\"\">All Months</option>\r\n                            {months.map(m => <option key={m} value={m}>{m}</option>)}\r\n                          </select>\r\n\r\n                          {/* Date Range */}\r\n                          <div className=\"flex items-center gap-3 flex-wrap\">\r\n                            <div className=\"flex items-center gap-2\">\r\n                              <label className=\"text-sm text-gray-600 dark:text-gray-400 whitespace-nowrap\">From</label>\r\n                              <input\r\n                                type=\"date\"\r\n                                value={startDateFilter}\r\n                                max={todayISO}\r\n                                onChange={e => setStartDateFilter(e.target.value)}\r\n                                className=\"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100\"\r\n                              />\r\n                            </div>\r\n                            <div className=\"flex items-center gap-2\">\r\n                              <label className=\"text-sm text-gray-600 dark:text-gray-400 whitespace-nowrap\">To</label>\r\n                              <input\r\n                                type=\"date\"\r\n                                value={endDateFilter}\r\n                                max={todayISO}\r\n                                onChange={e => setEndDateFilter(e.target.value)}\r\n                                className=\"px-3 py-2 border border-gray-300 rounded-lg text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100\"\r\n                              />\r\n                            </div>\r\n                          </div>\r\n\r\n                          {/* Action Buttons */}\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <button\r\n                              onClick={() => { setPage(1); }}\r\n                              className=\"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors\"\r\n                            >\r\n                              Apply\r\n                            </button>\r\n                            <button\r\n                              onClick={() => { setStartDateFilter(''); setEndDateFilter(''); setPage(1); }}\r\n                              className=\"px-4 py-2 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200 rounded-lg text-sm font-medium transition-colors\"\r\n                            >\r\n                              Clear\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n\r\n                        {/* Sort & Display Section */}\r\n                        <div className=\"flex flex-col sm:flex-row gap-3\">\r\n                          <select\r\n                            value={sortBy}\r\n                            onChange={(e) => setSortBy(e.target.value)}\r\n                            className={`px-3 py-2 border border-gray-300 rounded-lg text-sm min-w-[160px] ${theme === 'dark'\r\n                              ? 'bg-gray-700 text-gray-100'\r\n                              : 'bg-white text-gray-900'\r\n                              }`}\r\n                          >\r\n                            <option value=\"Recantly Added\">Recently Added</option>\r\n                            <option value=\"Ascending\">Employee ID: Ascending</option>\r\n                            <option value=\"Descending\">Employee ID: Descending</option>\r\n                            <option value=\"This Month\">This Month</option>\r\n                            <option value=\"Last Month\">Last Month</option>\r\n                            <option value=\"Last 7 days\">Last 7 Days</option>\r\n                          </select>\r\n\r\n                          <select\r\n                            value={pageSize}\r\n                            onChange={(e) => { setPageSize(Number(e.target.value)); setPage(1); }}\r\n                            className={`px-3 py-2 border border-gray-300 rounded-lg text-sm ${theme === 'dark'\r\n                              ? 'bg-gray-700 text-gray-100'\r\n                              : 'bg-white text-gray-900'\r\n                              }`}\r\n                          >\r\n                            <option value={6}>6 per page</option>\r\n                            <option value={12}>12 per page</option>\r\n                            <option value={24}>24 per page</option>\r\n                          </select>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Table Section */}\r\n                    <div className={`rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden ${theme === 'dark' ? 'bg-gray-800 text-gray-100' : 'bg-white text-gray-900'}`}>\r\n                      <div className=\"overflow-x-auto\">\r\n                        <table className=\"w-full\">\r\n                          <thead className=\"bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600\">\r\n                            <tr>\r\n                              <th className=\"py-3 px-4 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider hidden sm:table-cell\">\r\n                                Date\r\n                              </th>\r\n                              <th className=\"py-3 px-4 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider hidden sm:table-cell\">\r\n                                Mode\r\n                              </th>\r\n                              <th className=\"py-3 px-4 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider hidden sm:table-cell\">\r\n                                Login\r\n                              </th>\r\n                              <th className=\"py-3 px-4 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider hidden sm:table-cell\">\r\n                                Logout\r\n                              </th>\r\n                              <th className=\"py-3 px-4 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider hidden sm:table-cell\">\r\n                                Total Duration\r\n                              </th>\r\n                              <th className=\"py-3 px-4 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider hidden sm:table-cell\">\r\n                                Effective Hours\r\n                              </th>\r\n                              <th className=\"py-3 px-4 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider hidden sm:table-cell\">\r\n                                Status\r\n                              </th>\r\n                              <th className=\"py-3 px-4 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider sm:hidden\">\r\n                                Attendance Details\r\n                              </th>\r\n                            </tr>\r\n                          </thead>\r\n\r\n                          <tbody className=\"divide-y divide-gray-200 dark:divide-gray-600\">\r\n                            {loading ? (\r\n                              <tr>\r\n                                <td colSpan={8} className=\"py-8 px-4 text-center\">\r\n                                  <div className=\"flex justify-center items-center\">\r\n                                    <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600\"></div>\r\n                                    <span className=\"ml-2 text-gray-600 dark:text-gray-300\">Loading attendance data...</span>\r\n                                  </div>\r\n                                </td>\r\n                              </tr>\r\n                            ) : error ? (\r\n                              <tr>\r\n                                <td colSpan={8} className=\"py-8 px-4 text-center\">\r\n                                  <div className=\"text-red-600 dark:text-red-400 font-medium\">\r\n                                    Error loading attendance records\r\n                                  </div>\r\n                                  <div className=\"text-sm text-gray-600 dark:text-gray-400 mt-1\">{error}</div>\r\n                                </td>\r\n                              </tr>\r\n                            ) : pageItems.length === 0 ? (\r\n                              <tr>\r\n                                <td colSpan={8} className=\"py-8 px-4 text-center\">\r\n                                  <div className=\"text-gray-500 dark:text-gray-400\">\r\n                                    No attendance records found for the selected filters\r\n                                  </div>\r\n                                </td>\r\n                              </tr>\r\n                            ) : pageItems.map(record => {\r\n                              const totalDurationHHMM = record.totalDurationHHMM || 'N/A';\r\n                              const effectiveHoursHHMM = record.effectiveHoursDisplay || 'N/A';\r\n                              const statusColor = record.attended\r\n                                ? 'bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100'\r\n                                : 'bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100';\r\n\r\n                              return (\r\n                                <tr\r\n                                  key={`${record.employeeId}-${record.date}`}\r\n                                  className=\"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors\"\r\n                                >\r\n                                  {/* Desktop View */}\r\n                                  <td className={`py-4 px-4 text-sm hidden sm:table-cell ${theme === 'dark' ? 'text-gray-200' : 'text-gray-900'\r\n                                    }`}>\r\n                                    {record.date}\r\n                                  </td>\r\n                                  <td className=\"py-4 px-4 hidden sm:table-cell\">\r\n                                    <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${record.mode === 'Office'\r\n                                      ? 'bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100'\r\n                                      : 'bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100'\r\n                                      }`}>\r\n                                      {record.mode}\r\n                                    </span>\r\n                                  </td>\r\n                                  <td className={`py-4 px-4 text-sm hidden sm:table-cell ${theme === 'dark' ? 'text-gray-200' : 'text-gray-900'\r\n                                    }`}>\r\n                                    {record.loginDisplay}\r\n                                  </td>\r\n                                  <td className={`py-4 px-4 text-sm hidden sm:table-cell ${theme === 'dark' ? 'text-gray-200' : 'text-gray-900'\r\n                                    }`}>\r\n                                    {record.logoutDisplay}\r\n                                  </td>\r\n                                  <td className={`py-4 px-4 text-sm font-medium hidden sm:table-cell ${theme === 'dark' ? 'text-blue-300' : 'text-blue-700'\r\n                                    }`}>\r\n                                    {totalDurationHHMM}\r\n                                  </td>\r\n                                  <td className={`py-4 px-4 text-sm font-semibold hidden sm:table-cell ${theme === 'dark' ? 'text-green-300' : 'text-green-700'\r\n                                    }`}>\r\n                                    {effectiveHoursHHMM}\r\n                                  </td>\r\n                                  <td className=\"py-4 px-4 hidden sm:table-cell\">\r\n                                    <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${statusColor}`}>\r\n                                      {record.attended ? 'Present' : 'Absent'}\r\n                                    </span>\r\n                                  </td>\r\n\r\n                                  {/* Mobile View */}\r\n                                  <td className=\"py-4 px-4 sm:hidden\">\r\n                                    <div className=\"space-y-2\">\r\n                                      <div className=\"flex justify-between items-start\">\r\n                                        <span className={`font-semibold ${theme === 'dark' ? 'text-blue-300' : 'text-blue-700'\r\n                                          }`}>\r\n                                          {record.employeeId}\r\n                                        </span>\r\n                                        <span className={`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${statusColor}`}>\r\n                                          {record.attended ? 'Present' : 'Absent'}\r\n                                        </span>\r\n                                      </div>\r\n\r\n                                      <div className=\"text-sm space-y-1\">\r\n                                        <div className=\"flex justify-between\">\r\n                                          <span className=\"text-gray-500 dark:text-gray-400\">Date:</span>\r\n                                          <span className={theme === 'dark' ? 'text-gray-200' : 'text-gray-900'}>\r\n                                            {record.date}\r\n                                          </span>\r\n                                        </div>\r\n                                        <div className=\"flex justify-between\">\r\n                                          <span className=\"text-gray-500 dark:text-gray-400\">Mode:</span>\r\n                                          <span className={`inline-flex items-center px-2 py-0.5 rounded-full text-xs ${record.mode === 'Office'\r\n                                            ? 'bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100'\r\n                                            : 'bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100'\r\n                                            }`}>\r\n                                            {record.mode}\r\n                                          </span>\r\n                                        </div>\r\n                                        <div className=\"flex justify-between\">\r\n                                          <span className=\"text-gray-500 dark:text-gray-400\">Time:</span>\r\n                                          <span className={theme === 'dark' ? 'text-gray-200' : 'text-gray-900'}>\r\n                                            {record.loginDisplay} - {record.logoutDisplay}\r\n                                          </span>\r\n                                        </div>\r\n                                        <div className=\"flex justify-between\">\r\n                                          <span className=\"text-gray-500 dark:text-gray-400\">Total Hours:</span>\r\n                                          <span className={theme === 'dark' ? 'text-blue-300' : 'text-blue-700'}>\r\n                                            {totalDurationHHMM}\r\n                                          </span>\r\n                                        </div>\r\n                                        <div className=\"flex justify-between\">\r\n                                          <span className=\"text-gray-500 dark:text-gray-400\">Effective:</span>\r\n                                          <span className={theme === 'dark' ? 'text-green-300' : 'text-green-700'}>\r\n                                            {effectiveHoursHHMM}\r\n                                          </span>\r\n                                        </div>\r\n                                      </div>\r\n                                    </div>\r\n                                  </td>\r\n                                </tr>\r\n                              );\r\n                            })}\r\n                          </tbody>\r\n                        </table>\r\n                      </div>\r\n\r\n                      {/* Pagination Section */}\r\n                      <div className=\"px-4 py-3 bg-gray-50 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-600\">\r\n                        <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3\">\r\n                          <div className=\"text-sm text-gray-700 dark:text-gray-300\">\r\n                            Showing <span className=\"font-medium\">{pageItems.length}</span> of{' '}\r\n                            <span className=\"font-medium\">{filteredSorted.length}</span> records\r\n                          </div>\r\n\r\n                          <div className=\"flex items-center space-x-2\">\r\n                            <button\r\n                              onClick={() => setPage(p => Math.max(1, p - 1))}\r\n                              disabled={page <= 1}\r\n                              className=\"px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-600 text-gray-700 dark:text-gray-200 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-gray-500 transition-colors\"\r\n                            >\r\n                              Previous\r\n                            </button>\r\n\r\n                            <span className=\"px-3 py-1 text-sm text-gray-700 dark:text-gray-300\">\r\n                              Page <span className=\"font-medium\">{page}</span> of{' '}\r\n                              <span className=\"font-medium\">{totalPages}</span>\r\n                            </span>\r\n\r\n                            <button\r\n                              onClick={() => setPage(p => Math.min(totalPages, p + 1))}\r\n                              disabled={page >= totalPages}\r\n                              className=\"px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-600 text-gray-700 dark:text-gray-200 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-gray-500 transition-colors\"\r\n                            >\r\n                              Next\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Summary Section */}\r\n                    <div className=\"mt-4 text-center\">\r\n                      <p className={`text-sm ${theme === 'dark' ? 'text-gray-400' : 'text-gray-600'}`}>\r\n                        Displaying <strong>{filteredSorted.length}</strong> attendance record(s) based on current filters\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </motion.div>\r\n            )}\r\n          </AnimatePresence>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AttendancesDashboard;"],"names":["ChartData","title","value","ChartCard","_ref","icontextcolor","icon","color","theme","useContext","Context","_jsxs","motion","div","className","concat","initial","opacity","y","animate","transition","duration","ease","children","_jsx","React","DashboardGrid","EmployeePieChart","map","chart","index","colorHandler","BiArchiveOut","BiError","BiCodeBlock","BiSolidCalendarEvent","AiOutlineGift","BiLogIn","ArrowPathIcon","piechartData","COLORS","totalEmployees","reduce","sum","entry","textColor","PieChart","width","height","Pie","data","dataKey","nameKey","cx","cy","innerRadius","outerRadius","Cell","fill","length","x","textAnchor","dominantBaseline","stroke","Tooltip","TopOnTime","todayISO","Date","toISOString","slice","sevenDaysAgo","now","stDate","setStDate","useState","enDate","setEnDate","items","setItems","loading","setLoading","error","setError","mode","setMode","parseISODuration","iso","m","match","hours","parseInt","minutes","seconds","remHours","parts","push","join","fetchTopOnTime","async","start","arguments","undefined","end","limit","_resp$data","url","resp","axios","get","params","payload","Array","isArray","entries","Object","_ref2","id","count","Number","sort","a","b","err","_err$response","_err$response2","_err$response2$data","console","response","serverBody","message","JSON","stringify","fetchTopOvertime","_resp$data2","_ref3","raw","String","durationReadable","ah","_err$response3","_err$response4","_err$response4$data","useEffect","scale","delay","ClockIcon","onClick","type","onChange","e","target","disabled","AnimatePresence","it","idx","exit","img","src","encodeURIComponent","alt","EmployeeBarChart","dataPoints","setDataPoints","fetchOnTimeCounts","_resp$data3","_ref4","dateStr","d","date","label","isNaN","getTime","toLocaleString","day","month","employees","_ref5","_ref6","_it$count","NoofEmployee","noOfEmployee","_err$response5","_ref7","_err$response$data","_err$response6","ResponsiveContainer","BarChart","name","margin","top","right","left","bottom","XAxis","tick","YAxis","angle","position","hide","contentStyle","backgroundColor","border","Bar","barSize","EmployeeOvertimeChart","fetchOvertimeCounts","_resp$data4","_ref8","_ref9","_ref0","_it$count2","_err$response7","_ref1","_err$response$data2","_err$response8","parseEffectiveHours","effectiveHours","Math","round","hhmm","formatMinutesToHHMM","totalMinutes","floor","padStart","IST_OFFSET_MINUTES","toISTTimeDisplay","timeStr","dateRef","trim","test","includes","datePart","toLocaleTimeString","hour","minute","hour12","parseToISTDate","_unused","AttendanceTable","_ref10","onBack","sortBy","setSortBy","selectedMonth","setSelectedMonth","selectedDate","setSelectedDate","userData","attendanceRecords","setAttendanceRecords","page","setPage","pageSize","setPageSize","cancelled","_resp$data5","_resp$data6","_resp$data6$data","variables","post","query","headers","errors","Error","normalized","getAllEmployeeDetailsOnDates","item","dateForTime","split","loginIST","login","logoutIST","logout","totalDurationMinutes","max","effectiveBase","effectiveMinutes","grossBase","grossHours","grossMinutes","_objectSpread","loginDisplay","logoutDisplay","effectiveHoursDisplay","grossHoursDisplay","totalDurationHHMM","attended","v","isPresent","s","toLowerCase","fetchData","filteredSorted","useMemo","result","employeeId","localeCompare","totalPages","ceil","pageItems","Set","size","role","colSpan","record","effectiveHoursHHMM","grossHoursHHMM","statusColor","p","min","_ref11","PIE_COLORS","BAR_COLORS","pad2","n","tryNormalizeTo24","getHours","getMinutes","hhmmMatch","maybeDate","addMinutesToTimeString","minutesToAdd","hh","mm","totalMin","nh","nm","shiftRange","rangeStr","toHHMMDisplay","MONTHS","DAYS_OF_WEEK","toIsoDate","dateString","toStandardDate","isoDateString","GRAPHQL_URL","process","REACT_APP_HRMS_GRAPHQL_URL","graphqlRequest","_resp$data$data2","client","dashboardApi","token","localStorage","getItem","Authorization","msg","graphql","replace","responseData","DayDetailsModal","_dayData$attendance4","dayData","eventsOnThisDay","propEvents","onClose","attendanceData","setAttendanceData","setEventsOnThisDay","addIstToEffective","effValue","baseMinutes","_unused2","shiftTimeToISTDisplay","baseDateString","h","setHours","_unused3","setMinutes","mounted","_dayData$attendance","attendance","_src$login","_src$logout","_src$effectiveHour","dateIso","loginIst","loginTime","logoutIst","logoutTime","effAdj","effectiveHour","startDate","endDate","getDetailsBetweenDates","dayItem","find","i","_dayItem$login","_dayItem$logout","_dayItem$effectiveHou","_dayItem$isPresent","_dayItem$holiday","_dayItem$mode","holiday","_dayData$attendance2","_src$login2","_src$logout2","_src$effectiveHour2","_src$holiday","srcIso","mappedEvents","filter","event","description","Boolean","propEventsList","anyHolidayFromMapped","some","ev","anyHolidayFromProp","prev","_dayData$attendance3","_src$login3","_src$logout3","_src$effectiveHour3","load","displayAttendance","Calendar","getMonth","X","holidayFlag","isAbsent","badgeClass","EventFormModal","onSubmit","eventTitle","setEventTitle","setDescription","setStartDate","setEndDate","isHalfDay","setIsHalfDay","preventDefault","input","newEvents","addCalendarEntries","_a$holiday","_err$graphql","_err$response3$data","graphqlMessage","g","serverMessage","alert","htmlFor","required","placeholder","checked","rows","EventListModal","currentYear","currentMonth","eventsList","setEventsList","startISO","endISO","mapped","f","_f$holiday","fetchMonthlyEvents","startIndex","Clock","App","externalAttendanceRecords","currentDate","setCurrentDate","events","setEvents","selectedDateForForm","setSelectedDateForForm","showEventForm","setShowEventForm","showEventsList","setShowEventsList","showDayDetails","setShowDayDetails","isEditing","setIsEditing","getFullYear","getEventsForDate","useCallback","targetDate","reverse","eventStart","eventEnd","calendarDays","totalDays","getDate","firstDay","getFirstDayOfMonth","year","getDay","days","key","matchedRecord","r","_matchedRecord$employ","_matchedRecord$loginD","_matchedRecord$logout","_matchedRecord$effect","_matchedRecord$isPres","_matchedRecord$holida","_matchedRecord$mode","employee_id","login_time","logout_time","changeMonth","amount","prevDate","DayBox","_ref12","hasEvents","status","att","present","c","_ref13","_att$effectiveHour","eff","normalizeStatus","isToday","toLocaleDateString","bgClass","borderClass","textClass","CheckCircle","AlertTriangle","todayRingClass","editingClass","handleDayClick","newEvent","prevEvents","Edit","ChevronLeft","ChevronRight","formatClockTime","getSeconds","MyComponent","_ref15","Data","selectedMetricDate","hoveredHour","setHoveredHour","getHourValue","timeString","startHour","startMinute","endHour","endMinute","formatDuration","totalSeconds","calculateMetrics","Month","Year","End_time","Start_time","totalWorkingSeconds","breakSeconds","Break_hour","forEach","Time","productiveSeconds","overtimeSeconds","totalWorkingHours","productiveHours","breakHours","overtime","scaleHour","renderScheduleBar","rawDay","schedule","res","newB","applyOffsetToSchedule","timePoints","add","sortedTimes","from","formatTimelineTime","period","calculateDuration","startTime","endTime","allHours","time","scaleX","style","transformOrigin","leftPosition","widthPercentage","colorClass","onMouseEnter","onMouseLeave","scaleY","transform","toFixed","span","whileHover","stiffness","ProfileAttendance","_ref16","todayAttendance","isLoggedIn","isDark","todayIso","containerClasses","infoCardClasses","toUpperCase","statusClasses","_ref17","_userData$roles","currentUser","empID","useParams","roles","isSidebarOpen","setIsSidebarOpen","sidebarView","setSidebarView","showAttendanceReports","setShowAttendanceReports","showSidebar","setSelectedMetricDate","startDateFilter","setStartDateFilter","endDateFilter","setEndDateFilter","isMobile","useMediaQuery","setIsLoggedIn","setStartTime","setEndTime","currentTime","setCurrentTime","setGrossHours","setEffectiveHours","setTodayAttendance","loadingTodayAttendance","setLoadingTodayAttendance","lastFetchedAt","setLastFetchedAt","showModeConfirm","setShowModeConfirm","isLogoutConfirmed","setIsLogoutConfirmed","currentAttendanceId","setCurrentAttendanceId","fetchTodayAttendance","intervalRef","current","clearInterval","clockTimerRef","_item$effectiveHours","effMin","setInterval","loginHours","loginMinutes","loginSeconds","loginDate","parseFloat","diffInSeconds","logoutHours","logoutMinutes","logoutSeconds","logoutDate","getDynamicDeviceData","timeZone","Intl","DateTimeFormat","resolvedOptions","device","navigator","userAgent","Promise","resolve","reject","geolocation","getCurrentPosition","latitude","coords","longitude","userPayload","parse","userImage","initials","displayName","word","substring","setLoggedInUserProfile","image","log","attendanceId","handleDisconnect","useBeacon","apiUrl","timestamp","sendBeacon","blob","Blob","fetch","method","body","keepalive","onBeforeUnload","handleFocus","ok","warn","handleConnect","window","addEventListener","triggerManualDisconnect","confirm","removeEventListener","handleModeChange","newMode","put","Accept","field","today","updateProfileField","barChartData","setBarChartData","rawPieData","setRawPieData","dates","setDates","setData","cardData","setCardData","setStartIndex","attendanceStorageKey","firstDate","pieItem","barItem","dateToSet","indexOf","pageStart","datesPerPage","then","formatted","Work_Hours","working_hour","Break_Hours","break_hour","catch","rowsPerPageOptions","setRawTableData","Working_hour","EmployeeId","start_time","end_time","breaks","formatSecondsToHHMMSS","secs","ss","elapsedTimeSeconds","displayedEffectiveSeconds","grossHoursFormatted","effectiveHoursFormatted","loggedInUserProfile","useRef","rawTableData","loggedPermissiondata","setLoggedPermissionData","matchedArray","setMatchedArray","LoggedUserRole","authApi","fetchedData","permissions","hasAccess","setHasAccess","buildRange","monthIndex","clampToToday","_unused6","tmp","_ref18","_item$login","_ref19","_item$logout","toUtcDate","pd","parsedByJS","spaceSep","maybe","endsWith","loginRaw","logoutRaw","loginUtc","logoutUtc","shiftAndFormat","utcDate","rawValue","base","istMs","istDate","format","_unused7","gross","_err$graphql2","filteredPieData","sumDur","acc","sumGross","totalGrossMinutes","totalGrossHHMM","dataToProcess","row","filteredBarChartData","IoPersonOutline","button","h3","handleShowAttendance","whileTap","LiaFileAlt","handleShowAttendanceReport","ChartBarIcon","h1","AttendanceReports","damping","FaBuilding","FaHome","fullName","svg","xmlns","viewBox","strokeWidth","rotate","strokeLinecap","strokeLinejoin","weekday","_Fragment","clockOutData","_unused5","errorText","text","removeItem","lastIndex","lastRecord","shiftedLoginStr","updatedRecord","login_hours","barWidth","handleCancel","handleLogout","clock","_unused4","errText","json","attendanceIdFromResponse","attendance_id","returnedToken","accessToken","jwt","setItem","section","ChartPieIcon","dataItem","_ref20","percent","paddingAngle","formatter","Legend","iconType","wrapperStyle","paddingTop","axisLine","tickLine","padding","tickFormatter","allowDecimals","cursor","stackId"],"sourceRoot":""}