/*! For license information please see 708.d7600498.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunktechlife=self.webpackChunktechlife||[]).push([[708],{5244:(e,t,r)=>{r.d(t,{A:()=>s});const s=(0,r(7784).A)("ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]])},5708:(e,t,r)=>{r.r(t),r.d(t,{default:()=>p});var s=r(9379),o=r(5043),a=r(5244);const n=(0,r(7784).A)("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var l=r(6833),c=r(7719),i=r(184),d=r(6446),u=r(5439),g=r(9910),h=r(579);function x(e){let{onSubmit:t}=e;const{theme:r}=(0,o.useContext)(g.ob),a="dark"===r,[n,l]=(0,o.useState)([]),[c,i]=(0,o.useState)({employeeId:"",ticketId:"",title:"",priority:"Low",description:"",roles:""}),[d,u]=(0,o.useState)(!1);(0,o.useEffect)(()=>{const e=localStorage.getItem("employeeId");if(e){const t=JSON.parse(e);i(e=>(0,s.A)((0,s.A)({},e),{},{employeeId:t.employeeId||""}))}},[]);const x=e=>i(t=>(0,s.A)((0,s.A)({},t),{},{[e.target.name]:e.target.value}));return(0,h.jsxs)("div",{className:"relative",children:[(0,h.jsxs)("form",{onSubmit:e=>{e.preventDefault(),console.log("Form Submitted:",c),u(!0),setTimeout(()=>u(!1),3e3),t(c),i(e=>(0,s.A)((0,s.A)({},e),{},{ticketId:"",title:"",priority:"Low",description:"",roles:""}))},className:"p-8 rounded-2xl shadow-lg space-y-6 border transition ".concat(a?"bg-gray-900 border-gray-700 text-white":"bg-white border-gray-500 text-black"),children:[(0,h.jsx)("h2",{className:"text-3xl font-bold text-center ".concat(a?"text-blue-300":"text-blue-700"),children:"Fill the form"}),(0,h.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-1 gap-4",children:(0,h.jsx)("input",{name:"title",placeholder:"Issue Title",value:c.title,onChange:x,required:!0,className:"w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 ".concat(a?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-black")})}),(0,h.jsxs)("select",{name:"priority",value:c.priority,onChange:x,required:!0,className:"w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 ".concat(a?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-black"),children:[(0,h.jsx)("option",{value:"Low",children:"Low"}),(0,h.jsx)("option",{value:"Medium",children:"Medium"}),(0,h.jsx)("option",{value:"High",children:"High"})]}),(0,h.jsxs)("select",{name:"roles",value:c.roles,onChange:x,required:!0,className:"w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 ".concat(a?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-black"),children:[(0,h.jsx)("option",{value:"",children:"Select Role"}),(0,h.jsx)("option",{value:"ROLE_ADMIN",children:"Admin"}),(0,h.jsx)("option",{value:"ROLE_HR",children:"HR"}),(0,h.jsx)("option",{value:"ROLE_MANAGER",children:"Manager"})]}),(0,h.jsx)("textarea",{name:"description",placeholder:"Describe your issue in detail",value:c.description,onChange:x,required:!0,rows:"5",className:"w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 ".concat(a?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-black")}),(0,h.jsx)("div",{className:"flex justify-center",children:(0,h.jsx)("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg shadow-md transition",children:"Submit Ticket"})})]}),d&&(0,h.jsx)("div",{className:"absolute top-4 right-4 z-50 bg-green-500 text-white px-5 py-3 rounded-lg shadow-md",children:"\u2705 Ticket submitted successfully!"})]})}function b(e){let{userRole:t="employee",ticketId:r,ticketStatus:s}=e;const[a,n]=(0,o.useState)([]),[l,c]=(0,o.useState)(""),i=(0,o.useRef)(null),d=(0,o.useRef)(null),u=(0,o.useRef)(null),x=(0,o.useRef)(null),[b,y]=(0,o.useState)(0),[m,p]=(0,o.useState)(!0),[f,w]=(0,o.useState)(!1),{userData:v,theme:j}=(0,o.useContext)(g.ob),k=(null===v||void 0===v?void 0:v.permissions)||[],N="resolved"===(null===s||void 0===s?void 0:s.toLowerCase()),A=e=>{const t=new Map;return e.forEach(e=>{const r=e.id?String(e.id):"".concat(e.repliedAt,"-").concat(e.replyText);t.set(r,e)}),Array.from(t.values()).sort((e,t)=>new Date(e.repliedAt)-new Date(t.repliedAt))},S="dark"===j,T=a.reduce((e,t)=>{const r=(e=>{const t=new Date(e),r=new Date,s=new Date;return s.setDate(r.getDate()-1),t.toDateString()===r.toDateString()?"Today":t.toDateString()===s.toDateString()?"Yesterday":t.toLocaleDateString([],{day:"numeric",month:"short",year:"numeric"})})(t.repliedAt);return e[r]||(e[r]=[]),e[r].push(t),e},{}),E=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const t=localStorage.getItem("accessToken");if(r&&t&&k.includes("VIEW_TICKET_REPLIES")&&!f&&m)try{w(!0);const s=await fetch("https://hrms.anasolconsultancyservices.com/api/ticket/employee/tickets/".concat(r,"/messages?page=").concat(e,"&size=20"),{headers:{Authorization:"Bearer ".concat(t)}});if(403===s.status)return console.error("\ud83d\udeab Forbidden: VIEW_TICKET_REPLIES missing on backend"),n([]),void p(!1);if(!s.ok)throw new Error("HTTP Error: ".concat(s.status));const o=await s.json(),a=Array.isArray(null===o||void 0===o?void 0:o.content)?o.content:[];0===a.length?p(!1):(n(e=>A([...e,...a])),y(e+1))}catch(s){console.error("\u274c Error fetching messages:",s)}finally{w(!1)}},C=e=>{if(!e)return"";return new Date(e.endsWith("Z")?e:e+"Z").toLocaleTimeString("en-IN",{timeZone:"Asia/Kolkata",hour:"2-digit",minute:"2-digit",hour12:!0})},I=()=>{if(!r)return void console.error("\u274c Missing ticketId, cannot open WebSocket");const e=localStorage.getItem("accessToken"),t=new WebSocket("wss://hrms.anasolconsultancyservices.com/api/ticket/ws?ticketId=".concat(r,"?token=").concat(e));t.onopen=()=>console.log("\u2705 WebSocket connected"),t.onmessage=e=>{try{const t=JSON.parse(e.data);console.log("\ud83d\udce9 Incoming WS message:",t),t&&t.replyText&&n(e=>A([...e,t]))}catch(t){console.error("\u274c WS parse error:",t,e.data)}},t.onclose=()=>{console.warn("WebSocket closed, reconnecting in 5s..."),setTimeout(I,5e3)},t.onerror=e=>console.error("\u274c WebSocket error:",e),i.current=t},D=async()=>{if(!l.trim()||N)return;const e=localStorage.getItem("accessToken"),s={ticketId:r,replyText:l,repliedBy:t,repliedAt:(new Date).toISOString()};try{await fetch("https://hrms.anasolconsultancyservices.com/api/ticket/employee/tickets/".concat(r,"/messages"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(s)}),n(e=>A([...e,s]))}catch(o){console.error("\u274c Send failed:",o)}finally{c("")}};(0,o.useEffect)(()=>{const e=x.current;if(!e)return;var t;e.scrollHeight-e.scrollTop-e.clientHeight<100&&(null===(t=d.current)||void 0===t||t.scrollIntoView({behavior:"smooth"}))},[a]),(0,o.useEffect)(()=>{var e;null===(e=d.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[a]),(0,o.useEffect)(()=>(y(0),n([]),p(!0),E(0),I(),()=>{i.current&&i.current.close(),clearTimeout(u.current)}),[r]),(0,o.useEffect)(()=>{const e=x.current;if(!e)return;const t=()=>{if(0===e.scrollTop&&m&&!f){const e=b+1;y(e),E(e)}};return e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)},[b,m,f]);const L=(0,o.useRef)(0);return(0,o.useEffect)(()=>{const e=x.current;if(e)if(f)L.current=e.scrollHeight;else{const t=e.scrollHeight-L.current;t>0&&(e.scrollTop=t)}},[a,f]),(0,h.jsxs)("div",{className:"flex flex-col h-[500px] rounded-xl border shadow transition-colors duration-300 ".concat(S?"bg-gray-900 border-gray-700 text-white":"bg-white border-gray-200 text-black"),children:[(0,h.jsxs)("div",{ref:x,className:"flex-1 overflow-y-auto p-4 space-y-4 transition-colors duration-300 ".concat(S?"bg-gray-800":"bg-gray-50"),children:[Object.entries(T).map(e=>{let[r,s]=e;return(0,h.jsxs)("div",{children:[(0,h.jsx)("div",{className:"text-center text-xs my-2 ".concat(S?"text-gray-400":"text-gray-500"),children:r}),s.map((e,r)=>(0,h.jsx)("div",{className:"flex ".concat(e.repliedBy===t?"justify-end":"justify-start"," mb-2"),children:(0,h.jsxs)("div",{className:"px-4 py-2 rounded-lg shadow text-sm break-words ".concat(e.repliedBy===t?"bg-blue-600 text-white rounded-br-none":S?"bg-gray-700 text-white rounded-bl-none":"bg-gray-200 text-gray-900 rounded-bl-none"),style:{maxWidth:"80%",width:"fit-content"},children:[(0,h.jsx)("p",{className:"whitespace-pre-wrap",children:e.replyText}),(0,h.jsx)("div",{className:"text-right text-xs mt-1 opacity-60",children:e.repliedAt||e.clientTime?C(e.repliedAt||e.clientTime):""})]})},"".concat(e.id||e.repliedAt,"-").concat(r)))]},r)}),(0,h.jsx)("div",{ref:d})]}),(0,h.jsxs)("div",{className:"flex items-center gap-2 p-2 border-t ".concat(S?"border-gray-700":"border-gray-200"),children:[(0,h.jsx)("input",{type:"text",value:l,onChange:e=>c(e.target.value),onKeyDown:e=>"Enter"===e.key&&D(),placeholder:N?"This ticket is resolved. You cannot send messages.":"Type your message",disabled:N,className:"flex-1 border rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 transition-colors duration-300 ".concat(N?"bg-gray-200 cursor-not-allowed text-red-500":S?"bg-gray-800 border-gray-600 text-white placeholder-gray-400 focus:ring-blue-400":"bg-white border-gray-300 text-black placeholder-gray-500 focus:ring-blue-400")}),(0,h.jsx)("button",{onClick:D,disabled:N||!(null!==k&&void 0!==k&&k.includes("SEND_TICKET_REPLIES")),className:"px-4 py-2 rounded text-white transition ".concat(N?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"),children:"Send"})]})]})}function y(e){let{tickets:t,onTicketClick:r,lastTicketRef:s}=e;const{theme:a}=(0,o.useContext)(g.ob),n="dark"===a,l=e=>{if(!e)return"N/A";return new Date(e.endsWith("Z")?e:e+"Z").toLocaleString("en-IN",{timeZone:"Asia/Kolkata",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0})};return t&&0!==t.length?(0,h.jsx)("div",{className:"space-y-4",children:t.map((e,o)=>{const a=o===t.length-1;return(0,h.jsxs)("div",{ref:a?s:null,onClick:()=>r(e),className:"cursor-pointer border rounded-lg p-4 shadow-md hover:shadow-lg transition-all ".concat(n?"bg-gray-800 border-gray-700 hover:border-blue-400 text-gray-200":"bg-white border-gray-300 hover:border-blue-400 text-gray-900"),children:[(0,h.jsxs)("h3",{className:"text-lg font-semibold mb-2 ".concat(n?"text-blue-300":"text-blue-700"),children:["Ticket ID: ",e.ticketId]}),(0,h.jsxs)("p",{children:[(0,h.jsx)("strong",{children:"Employee ID:"})," ",e.employeeId]}),(0,h.jsxs)("p",{children:[(0,h.jsx)("strong",{children:"Title:"})," ",e.title]}),(0,h.jsxs)("p",{children:[(0,h.jsx)("strong",{children:"Submitted:"})," ",l(e.createdAt||e.sentAt)]}),(0,h.jsxs)("p",{children:[(0,h.jsx)("strong",{children:"Status:"})," ",e.status]}),(0,h.jsxs)("p",{children:[(0,h.jsx)("strong",{children:"Description:"})," ",e.description]}),(0,h.jsxs)("p",{children:[(0,h.jsx)("strong",{children:"Assigned to:"})," ",e.roles]})]},e.ticketId)})}):(0,h.jsx)("div",{className:"text-center py-6 ".concat(n?"text-gray-400":"text-gray-500"),children:"No tickets submitted yet."})}var m=r(9722);function p(){const[e,t]=(0,o.useState)("history"),[r,p]=(0,o.useState)([]),[f,w]=(0,o.useState)(null),[v,j]=(0,o.useState)("All"),[k,N]=(0,o.useState)(""),[A,S]=(0,o.useState)(""),[T,E]=(0,o.useState)(""),[C,I]=(0,o.useState)("all"),[D,L]=(0,o.useState)(!1),[R,O]=(0,o.useState)(!1),[z,_]=(0,o.useState)("My Tickets"),[H,M]=(0,o.useState)(!1),W=(0,o.useRef)(0),[P,F]=(0,o.useState)(0),[B,Z]=(0,o.useState)(!0),[K,V]=(0,o.useState)(!1),[U,q]=(0,o.useState)(0),[Y,J]=(0,o.useState)([]),G=(0,u.Zp)(),{empID:Q}=(0,u.g)(),{userData:X,theme:$}=(0,o.useContext)(g.ob),ee=Array.isArray(null===X||void 0===X?void 0:X.roles)?X.roles[0]:(null===X||void 0===X?void 0:X.roles)||"",te=ee.toUpperCase().startsWith("ROLE_")?ee.toUpperCase():"ROLE_"+ee.toUpperCase(),re=localStorage.getItem("accessToken"),se="dark"===$,oe=[...null!==Y&&void 0!==Y&&Y.includes("VIEW_MY_TICKETS")?[{tab:"My Tickets",icon:a.A}]:[],...null!==Y&&void 0!==Y&&Y.includes("VIEW_ASSIGNED")?[{tab:"Assigned Tickets",icon:a.A}]:[]],ae={all:"All",resolved:"Resolved"},ne={all:(0,h.jsx)(n,{size:20}),resolved:(0,h.jsx)(l.A,{size:20})},le=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(re&&Q&&X&&!K&&B){V(!0);try{const t="https://hrms.anasolconsultancyservices.com/api/ticket/admin/tickets/employee/".concat(Q,"?page=").concat(e,"&size=10&sort=createdAt,desc"),r=await m.A.get(t,{headers:{Authorization:"Bearer ".concat(re)}}),{content:s,totalElements:o}=r.data;p(0===e?s:e=>[...e,...s]),q(o),Z(s.length>0),F(e+1)}catch(t){console.error("Error fetching tickets:",t),Z(!1)}finally{V(!1)}}};(0,o.useEffect)(()=>{p([]),F(0),Z(!0),le(0)},[z,Q]),(0,o.useEffect)(()=>{window.scrollTo({top:0,behavior:"smooth"})},[z]);const ce=(0,o.useRef)(),ie=(0,o.useCallback)(e=>{K||(ce.current&&ce.current.disconnect(),ce.current=new IntersectionObserver(e=>{e[0].isIntersecting&&B&&le(P)}),e&&ce.current.observe(e))},[K,B,P]),de=e=>{Q?(_(e),p([]),W.current=0,Z(!0),w(null),t("history"),G("Assigned Tickets"===e?"/tickets/role/".concat(te,"/").concat(Q):"/tickets/employee/".concat(Q))):console.error(" empID is undefined, cannot navigate")};(0,o.useEffect)(()=>{null!==X&&void 0!==X&&X.permissions&&J(X.permissions)},[X]);const ue=(()=>{let e=[...r];if(""!==T.trim()){const t=T.toLowerCase();e=e.filter(e=>(e.title||"").toLowerCase().includes(t)||(e.status||"").toLowerCase().includes(t)||(e.priority||"").toLowerCase().includes(t))}"all"!==C&&(e=e.filter(e=>(e.status||"").toLowerCase()===C));const t=new Date;if("Today"===v&&(e=e.filter(e=>new Date(e.sentAt||e.createdAt).toDateString()===t.toDateString())),"Last 7 days"===v){const r=new Date;r.setDate(t.getDate()-7),e=e.filter(e=>{const s=new Date(e.sentAt||e.createdAt);return s>=r&&s<=t})}if("Last 30 days"===v){const r=new Date;r.setDate(t.getDate()-30),e=e.filter(e=>{const s=new Date(e.sentAt||e.createdAt);return s>=r&&s<=t})}if(k){const t=new Date(k);e=e.filter(e=>new Date(e.sentAt||e.createdAt)>=t)}if(A){const t=new Date(A);t.setHours(23,59,59,999),e=e.filter(e=>new Date(e.sentAt||e.createdAt)<=t)}return e.sort((e,t)=>new Date(e.sentAt||e.createdAt)-new Date(t.sentAt||t.createdAt)),e})(),ge=U,he=ue.filter(e=>"resolved"===(e.status||"").trim().toLowerCase()).length,xe=ge-he;return(0,h.jsx)("div",{className:"min-h-screen transition-colors duration-300 ".concat(se?"bg-gray-900 text-white":"bg-gradient-to-br from-blue-50 via-white to-purple-100 text-gray-900"),children:(0,h.jsxs)("div",{className:"flex flex-row-reverse max-w-7xl mx-auto px-4 py-8 gap-4",children:["ROLE_EMPLOYEE"!==te&&(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("aside",{className:"sm:flex flex-col border-l transition-all duration-200 hidden sm:flex sm:sticky sm:top-0 h-full ".concat(se?"bg-gray-800 border-gray-700 text-gray-200":"bg-white border-gray-200 text-gray-900"," ").concat(D?"w-[60px]":"w-[250px]"),children:[(0,h.jsx)("div",{className:"flex justify-start p-1.5 items-center",children:(0,h.jsx)(d.P.button,{onClick:()=>L(!D),className:"text-gray-500 hover:text-gray-700 focus:outline-none p-1.5 rounded-full hover:bg-gray-100",transition:{duration:.3},children:D?(0,h.jsx)(i.QVr,{size:14}):(0,h.jsx)(i.Z0P,{size:14})})}),(0,h.jsx)("nav",{className:"flex-1 space-y-1.5 px-1.5",children:oe.map(e=>{let{tab:t,icon:r}=e;return(0,h.jsxs)(d.P.button,{className:"w-full text-left py-2 px-2 rounded-md font-medium flex items-center transition-colors\n                ".concat(z===t?"bg-blue-600 text-white":"".concat(se?"text-white hover:bg-gray-700":"text-black hover:bg-gray-200"),"\n                ").concat(D?"justify-center":""),onClick:()=>de(t),whileHover:{x:D?0:-3},children:[(0,h.jsx)(r,{size:14,className:D?"":"mr-2"}),!D&&t]},t)})})]})}),(0,h.jsxs)("main",{className:"flex-1 space-y-8",children:[(0,h.jsx)("div",{className:"rounded-xl shadow p-6 border flex flex-col lg:flex-row items-center justify-between gap-6 ".concat(se?"bg-gray-800 border-gray-700  text-white":"bg-white border-gray-200 text-gray-900"),children:(0,h.jsxs)("div",{className:"flex flex-col lg:flex-row items-center gap-4 w-full flex-wrap",children:[(0,h.jsx)("label",{className:"text-sm font-medium text-gray-700\n                 ".concat(se?"bg-gray-800 border-gray-700  text-white":"bg-white border-gray-200 text-gray-900"),htmlFor:"search",children:"Search"}),(0,h.jsx)("input",{id:"search",type:"text",value:T,onChange:e=>E(e.target.value),placeholder:"Title, status, priority...",className:"border border-gray-300 text-sm rounded-lg p-2.5 w-64 focus:outline-none focus:ring-2 focus:ring-blue-400"}),(0,h.jsx)("label",{className:"text-sm font-medium   ".concat(se?"bg-gray-800 border-gray-700  text-white":"bg-white border-gray-200 text-gray-900"," "),htmlFor:"date-filter",children:"Filter by Date"}),(0,h.jsxs)("select",{id:"date-filter",className:"border border-gray-300 text-sm rounded-lg p-2.5 w-42 focus:outline-none focus:ring-2 focus:ring-blue-400\n                \n                 ".concat(se?"bg-gray-800 border-gray-700  text-white":"bg-white border-gray-200 text-gray-900","\n                "),value:v,onChange:e=>j(e.target.value),children:[(0,h.jsx)("option",{children:"All"}),(0,h.jsx)("option",{children:"Last 30 days"}),(0,h.jsx)("option",{children:"Last 7 days"}),(0,h.jsx)("option",{children:"Today"})]}),(0,h.jsx)("label",{className:"text-sm font-medium text-gray-700 \n                 ".concat(se?"bg-gray-800 border-gray-700  text-white":"bg-white border-gray-200 text-gray-900"),htmlFor:"from-date",children:"From"}),(0,h.jsx)("input",{type:"date",id:"from-date",value:k,onChange:e=>N(e.target.value),className:"border text-sm rounded-lg p-2.5 w-44 focus:outline-none focus:ring-2 focus:ring-blue-400\n    ".concat(se?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-black")}),(0,h.jsx)("label",{className:"text-sm font-medium text-gray-700\n                 ".concat(se?"bg-gray-800 border-gray-700  text-white":"bg-white border-gray-200 text-gray-900"),htmlFor:"to-date",children:"To"}),(0,h.jsx)("input",{type:"date",id:"to-date",value:A,onChange:e=>S(e.target.value),className:"border border-gray-300 text-sm rounded-lg p-2.5 w-44 focus:outline-none focus:ring-2 focus:ring-blue-400"}),(0,h.jsx)("div",{className:"flex gap-2 ml-4",children:Object.keys(ne).map(e=>(0,h.jsxs)(d.P.button,{className:"flex items-center gap-1 px-3 py-2 rounded-lg text-sm font-medium transition-colors\n                      ".concat(C===e?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),onClick:()=>I(e),whileHover:{scale:1.05},children:[ne[e],(0,h.jsx)("span",{children:ae[e]})]},e))})]})}),(0,h.jsx)("div",{className:"sm:hidden flex gap-2 overflow-x-auto py-2 px-1",children:oe.map(e=>{let{tab:t,icon:r}=e;return(0,h.jsxs)(d.P.button,{onClick:()=>de(t),className:"flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap\n          ".concat(z===t?"bg-blue-600 text-white":"".concat(se?"bg-gray-800 text-white hover:bg-gray-700":"bg-gray-100 text-black hover:bg-gray-200")),whileHover:{scale:1.02},children:[(0,h.jsx)(r,{size:16}),t]},t)})}),(0,h.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6 ",children:[(0,h.jsxs)("div",{className:"flex items-center gap-4 p-6 rounded-2xl shadow-lg border border-blue-200 \n               ".concat(se?"bg-gray-800 border-gray-700  text-white":"bg-white border-gray-200 text-gray-900"),children:[(0,h.jsx)("div",{className:"bg-blue-100 text-blue-600 p-4 rounded-full\n                   ".concat(se?"bg-gray-800 border-gray-700  text-white":"bg-white border-gray-200 text-gray-900"),children:(0,h.jsx)(a.A,{size:32})}),(0,h.jsxs)("div",{children:[(0,h.jsx)("p",{className:"text-sm text-gray-500\n                   ".concat(se?"bg-gray-800 border-gray-700  text-white":"bg-white border-gray-200 text-gray-900"),children:"Your Tickets"}),(0,h.jsx)("h3",{className:"text-4xl font-bold text-blue-700",children:ge})]})]}),(0,h.jsxs)("div",{className:"flex items-center gap-4 p-6 rounded-2xl shadow-lg border border-emerald-200  ".concat(se?"bg-gray-800 border-gray-700  text-white":"bg-white border-gray-200 text-gray-900"),children:[(0,h.jsx)("div",{className:"bg-emerald-100 text-emerald-600 p-4 rounded-full",children:(0,h.jsx)(l.A,{size:32})}),(0,h.jsxs)("div",{children:[(0,h.jsx)("p",{className:"text-sm text-gray-500",children:"Resolved"}),(0,h.jsx)("h3",{className:"text-4xl font-bold text-emerald-600",children:he})]})]}),(0,h.jsxs)("div",{className:"flex items-center gap-4 p-6 rounded-2xl shadow-lg border border-red-200 \n               ".concat(se?"bg-gray-800 border-gray-700  text-white":"bg-white border-gray-200 text-gray-900"," "),children:[(0,h.jsx)("div",{className:"bg-red-100 text-red-600 p-4 rounded-full",children:(0,h.jsx)(c.A,{size:32})}),(0,h.jsxs)("div",{children:[(0,h.jsx)("p",{className:"text-sm text-gray-500",children:"Unresolved"}),(0,h.jsx)("h3",{className:"text-4xl font-bold text-red-600",children:xe})]})]})]}),"history"===e&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"flex justify-between items-center",children:[(0,h.jsx)("h2",{className:"text-2xl font-bold ".concat(se?"text-blue-300":"text-blue-700"),children:"Ticket History"}),Y.includes("CREATE_TICKET")&&(0,h.jsx)("button",{onClick:()=>t("form"),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-full text-xl shadow hover:scale-105 transition",children:"+"})]}),(0,h.jsx)("div",{className:"".concat(se?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-200 text-gray-900"," p-6 rounded-2xl shadow-lg"),children:(0,h.jsx)(y,{tickets:[...ue].reverse(),onTicketClick:e=>{w(e),t("chat")},lastTicketRef:ie})})]}),"form"===e&&(0,h.jsxs)("div",{className:"space-y-4",children:[(0,h.jsxs)("div",{className:"flex justify-between items-center",children:[(0,h.jsx)("h2",{className:"text-2xl font-bold text-blue-700",children:"Raise a Ticket"}),(0,h.jsx)("button",{onClick:()=>t("history"),className:"text-blue-600 hover:text-blue-800 border border-blue-600 hover:border-blue-800 px-4 py-1 rounded-full text-sm shadow",children:"\u2190 Back to History"})]}),(0,h.jsx)("div",{className:" p-6 rounded-2xl shadow-lg border border-gray-200",children:(0,h.jsx)(x,{onSubmit:async e=>{try{let r=Array.isArray(e.roles)?e.roles[0]:e.roles||"";if(!r)return;r=r.toUpperCase().startsWith("ROLE_")?r.toUpperCase():"ROLE_"+r.toUpperCase();const o=(0,s.A)((0,s.A)({},e),{},{status:"OPEN",employeeId:Q,roles:r}),a=await fetch("https://hrms.anasolconsultancyservices.com/api/ticket/employee/create",{method:"POST",headers:{Authorization:"Bearer ".concat(re),"Content-Type":"application/json"},body:JSON.stringify(o)});if(!a.ok)throw new Error("Failed to create ticket: ".concat(a.status));const n=await a.json();p(e=>[n,...e]),q(e=>e+1),t("history")}catch(r){console.error(r),alert("Ticket creation failed.")}}})})]}),"chat"===e&&f&&(0,h.jsxs)("div",{className:"space-y-4",children:[(0,h.jsxs)("div",{className:"flex justify-between items-center",children:[(0,h.jsxs)("h2",{className:"text-2xl font-bold text-blue-700",children:["Chat with Admin (Ticket #",f.employeeId,")"]}),(0,h.jsx)("button",{onClick:()=>t("history"),className:"text-blue-600 hover:text-blue-800 border border-blue-600 hover:border-blue-800 px-4 py-1 rounded-full text-sm shadow",children:"\u2190 Back to History"})]}),(0,h.jsx)("div",{className:" p-6 rounded-2xl shadow-lg border border-gray-200",children:(0,h.jsx)(b,{userRole:"employee",ticketId:f.ticketId,ticketStatus:f.status})})]})]})]})})}},6833:(e,t,r)=>{r.d(t,{A:()=>s});const s=(0,r(7784).A)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},7719:(e,t,r)=>{r.d(t,{A:()=>s});const s=(0,r(7784).A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])}}]);
//# sourceMappingURL=708.d7600498.chunk.js.map