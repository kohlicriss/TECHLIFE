/*! For license information please see 945.b649ddd3.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunktechlife=self.webpackChunktechlife||[]).push([[945],{945:(e,t,a)=>{a.r(t),a.d(t,{default:()=>K});var r=a(5043),s=a(9379),l=a(1357),n=a(2054),o=a(7784);const d=(0,o.A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var c=a(614);const i=(0,o.A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),x=(0,o.A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),g=(0,o.A)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);var m=a(6533);const h=(0,o.A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var u=a(9855);const y=(0,o.A)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var p=a(9463),b=a(8326),f=a(7234),j=a(2397),v=a(579);const k=e=>{let{theme:t}=e;return(0,v.jsx)("svg",{xmlns:"http://www.w.org/2000/svg",className:"h-4 w-4 mr-1.5 ".concat("text-gray-400"),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,v.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2-2z"})})},N=e=>{let{children:t,onClose:a,title:r,type:s,theme:l}=e,o="",i=null;return"success"===s?(o="text-green-600",i=(0,v.jsx)(n.A,{className:"h-6 w-6 text-green-500"})):"error"===s?(o="text-red-600",i=(0,v.jsx)(d,{className:"h-6 w-6 text-red-500"})):"confirm"===s&&(o="text-yellow-600",i=(0,v.jsx)(d,{className:"h-6 w-6 text-yellow-500"})),(0,v.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex justify-center items-center z-[200] animate-fadeIn",children:(0,v.jsxs)("div",{className:"p-6 rounded-3xl shadow-2xl w-full max-w-md m-4 border animate-slideUp ".concat("dark"===l?"bg-gray-800 border-gray-700":"bg-white border-gray-200"),children:[(0,v.jsxs)("div",{className:"flex items-center mb-4",children:[i&&(0,v.jsx)("span",{className:"mr-3",children:i}),(0,v.jsx)("h3",{className:"text-xl font-bold ".concat(o),children:r}),"success"!==s&&"error"!==s&&(0,v.jsx)("button",{onClick:a,className:"ml-auto p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:(0,v.jsx)(c.A,{size:20})})]}),t]})})},w=e=>{let{message:t,onClose:a,theme:r}=e;return(0,v.jsxs)(N,{onClose:a,title:"Success",type:"success",theme:r,children:[(0,v.jsx)("p",{className:"mb-6 ".concat("dark"===r?"text-gray-300":"text-gray-700"),children:t}),(0,v.jsx)("div",{className:"flex justify-end",children:(0,v.jsx)("button",{onClick:a,className:"bg-green-600 text-white font-semibold py-3 px-8 rounded-xl hover:bg-green-700 transition-all duration-200 focus:ring-4 focus:ring-green-500/20",children:"OK"})})]})},A=e=>{let{message:t,onClose:a,theme:r}=e;return(0,v.jsxs)(N,{onClose:a,title:"Error",type:"error",theme:r,children:[(0,v.jsx)("p",{className:"mb-6 ".concat("dark"===r?"text-gray-300":"text-gray-700"),children:t}),(0,v.jsx)("div",{className:"flex justify-end",children:(0,v.jsx)("button",{onClick:a,className:"bg-red-600 text-white font-semibold py-3 px-8 rounded-xl hover:bg-red-700 transition-all duration-200 focus:ring-4 focus:ring-red-500/20",children:"OK"})})]})},D=e=>{let{onConfirm:t,onCancel:a,theme:r}=e;return(0,v.jsxs)(N,{onClose:a,title:"Confirm Deletion",type:"confirm",theme:r,children:[(0,v.jsx)("p",{className:"mb-6 ".concat("dark"===r?"text-gray-300":"text-gray-700"),children:"Are you sure you want to delete this task? This action cannot be undone."}),(0,v.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,v.jsx)("button",{onClick:a,className:"px-6 py-3 rounded-xl border-2 font-semibold transition-all duration-200 focus:ring-4 focus:ring-gray-400/20 ".concat("dark"===r?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"),children:"Cancel"}),(0,v.jsx)("button",{onClick:t,className:"bg-red-600 text-white font-semibold py-3 px-8 rounded-xl hover:bg-red-700 transition-all duration-200 focus:ring-4 focus:ring-red-500/20",children:"Delete"})]})]})},C=e=>{let{value:t,onChange:a,theme:s,error:l,disabled:o}=e;const[d,c]=(0,r.useState)(!1),[g,m]=(0,r.useState)(""),[h,u]=(0,r.useState)([]),[y,p]=(0,r.useState)(!1),[b,k]=(0,r.useState)(!0),[N,w]=(0,r.useState)(0),[A,D]=(0,r.useState)(!1),{userData:C}=(0,r.useContext)(f.ob);(0,r.useEffect)(()=>{d&&0===h.length&&S(0,!0)},[d]);const S=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(y||A&&!t&&0!==e||0!==e&&!b)){p(!0);try{const a=(await j.yE.get("employee/".concat(e,"/").concat(10,"/employeeId/asc/employees"))).data.content||[],r=a.filter(e=>e.employeeId!==(null===C||void 0===C?void 0:C.employeeId));t||0===e?(u(r),w(0)):u(e=>[...e,...r]),w(e),k(10===a.length),a.length<10&&D(!0)}catch(l){console.error("Error fetching employees:",l)}finally{p(!1)}}},I=()=>{y||!b||A||S(N+1,!1)},L=h.filter(e=>{var t,a;return(null===(t=e.displayName||e.fullName)||void 0===t?void 0:t.toLowerCase().includes(g.toLowerCase()))||(null===(a=e.employeeId)||void 0===a?void 0:a.toLowerCase().includes(g.toLowerCase()))}),T=h.find(e=>e.employeeId===t);return(0,v.jsxs)("div",{className:"relative",children:[(0,v.jsxs)("div",{onClick:()=>{o||(d||(u([]),w(0),D(!1),k(!0),m("")),c(!d))},className:"w-full px-5 py-4 border-2 rounded-xl transition-all duration-300 cursor-pointer flex items-center justify-between focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 focus:outline-none ".concat(l?"border-red-300 bg-red-50 focus:border-red-500 focus:ring-red-500/20":"dark"===s?"border-gray-600 bg-gray-700 text-white hover:border-gray-500":"border-gray-200 bg-white hover:border-gray-300"," ").concat(o?"dark"===s?"bg-gray-800 cursor-not-allowed opacity-60":"bg-gray-50 cursor-not-allowed opacity-60":""),children:[(0,v.jsx)("div",{className:"flex-1",children:T?(0,v.jsx)("div",{className:"flex items-center space-x-3",children:(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{className:"font-medium ".concat("dark"===s?"text-white":"text-gray-900"),children:T.displayName||T.fullName}),(0,v.jsx)("div",{className:"text-sm ".concat("dark"===s?"text-gray-400":"text-gray-500"),children:T.employeeId})]})}):(0,v.jsx)("span",{className:"dark"===s?"text-gray-400":"text-gray-500",children:"Choose employee to assign task"})}),(0,v.jsx)(i,{className:"w-5 h-5 transition-transform duration-200 ".concat(d?"rotate-180":""," ").concat("text-gray-400")})]}),d&&!o&&(0,v.jsxs)("div",{className:"absolute top-full left-0 right-0 mt-2 border rounded-xl shadow-lg z-50 ".concat("dark"===s?"bg-gray-700 border-gray-600":"bg-white border-gray-200"),children:[(0,v.jsx)("div",{className:"p-3 border-b border-gray-200 dark:border-gray-600",children:(0,v.jsxs)("div",{className:"relative",children:[(0,v.jsx)(x,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,v.jsx)("input",{type:"text",placeholder:"Search employees...",value:g,onChange:e=>m(e.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500/30 ".concat("dark"===s?"bg-gray-800 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500")})]})}),(0,v.jsx)("div",{className:"max-h-64 overflow-y-auto",onScroll:e=>{const{scrollTop:t,scrollHeight:a,clientHeight:r}=e.target;a-t<=r+50&&I()},children:L.length>0?(0,v.jsxs)(v.Fragment,{children:[L.map(e=>(0,v.jsxs)("div",{onClick:()=>{return t=e.employeeId,a(t),c(!1),void m("");var t},className:"p-3 cursor-pointer transition-colors duration-150 flex items-center space-x-3 hover:".concat("dark"===s?"bg-gray-600":"bg-gray-50"," ").concat(t===e.employeeId?"dark"===s?"bg-blue-900/50":"bg-blue-50":""),children:[(0,v.jsxs)("div",{className:"flex-1",children:[(0,v.jsx)("div",{className:"font-medium ".concat("dark"===s?"text-white":"text-gray-900"),children:e.displayName||e.fullName}),(0,v.jsx)("div",{className:"text-sm ".concat("dark"===s?"text-gray-400":"text-gray-500"),children:e.employeeId})]}),t===e.employeeId&&(0,v.jsx)(n.A,{className:"w-5 h-5 text-blue-500"})]},e.employeeId)),y&&(0,v.jsx)("div",{className:"p-4 text-center ".concat("dark"===s?"text-gray-400":"text-gray-500"),children:(0,v.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,v.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"}),(0,v.jsx)("span",{children:"Loading more employees..."})]})}),!y&&b&&!A&&L.length>=10&&(0,v.jsx)("div",{className:"p-3 border-t border-gray-200 dark:border-gray-600",children:(0,v.jsx)("button",{onClick:I,className:"w-full py-2 px-4 rounded-lg transition-colors duration-200 ".concat("dark"===s?"bg-gray-600 hover:bg-gray-500 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700"),children:"Load More Employees"})}),A&&L.length>0&&(0,v.jsx)("div",{className:"p-3 text-center text-sm ".concat("dark"===s?"text-gray-400":"text-gray-500"),children:"All employees loaded"})]}):g?(0,v.jsxs)("div",{className:"p-4 text-center ".concat("dark"===s?"text-gray-400":"text-gray-500"),children:['No employees found matching "',g,'"']}):y?(0,v.jsx)("div",{className:"p-4 text-center ".concat("dark"===s?"text-gray-400":"text-gray-500"),children:(0,v.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,v.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"}),(0,v.jsx)("span",{children:"Loading employees..."})]})}):(0,v.jsx)("div",{className:"p-4 text-center ".concat("dark"===s?"text-gray-400":"text-gray-500"),children:"No employees found"})})]})]})},S=e=>{let{value:t,onChange:a,theme:s,error:l,disabled:o}=e;const[d,c]=(0,r.useState)(!1),[g,m]=(0,r.useState)(""),[h,u]=(0,r.useState)([]),[y,p]=(0,r.useState)(!1),[b,f]=(0,r.useState)(!0),[k,N]=(0,r.useState)(0),[w,A]=(0,r.useState)(!1);(0,r.useEffect)(()=>{d&&0===h.length&&D(0,!0)},[d]);const D=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(y||w&&!t&&0!==e||0!==e&&!b)){p(!0);try{const a=(await j.yE.get("employee/".concat(e,"/").concat(5,"/projectId/asc/projects"))).data.content||[];t||0===e?(u(a),N(0)):u(e=>[...e,...a]),N(e),f(5===a.length),a.length<5&&A(!0)}catch(l){console.error("Error fetching projects:",l)}finally{p(!1)}}},C=()=>{y||!b||w||D(k+1,!1)},S=h.filter(e=>{var t,a;return(null===(t=e.title)||void 0===t?void 0:t.toLowerCase().includes(g.toLowerCase()))||(null===(a=e.projectId)||void 0===a?void 0:a.toLowerCase().includes(g.toLowerCase()))}),I=h.find(e=>e.projectId===t);return(0,v.jsxs)("div",{className:"relative",children:[(0,v.jsxs)("div",{onClick:()=>{o||(d||(u([]),N(0),A(!1),f(!0),m("")),c(!d))},className:"w-full px-5 py-4 border-2 rounded-xl transition-all duration-300 cursor-pointer flex items-center justify-between focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 focus:outline-none ".concat(l?"border-red-300 bg-red-50 focus:border-red-500 focus:ring-red-500/20":"dark"===s?"border-gray-600 bg-gray-700 text-white hover:border-gray-500":"border-gray-200 bg-white hover:border-gray-300"," ").concat(o?"dark"===s?"bg-gray-800 cursor-not-allowed opacity-60":"bg-gray-50 cursor-not-allowed opacity-60":""),children:[(0,v.jsx)("div",{className:"flex-1",children:I?(0,v.jsx)("div",{className:"flex items-center space-x-3",children:(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{className:"font-medium ".concat("dark"===s?"text-white":"text-gray-900"),children:I.title}),(0,v.jsx)("div",{className:"text-sm ".concat("dark"===s?"text-gray-400":"text-gray-500"),children:I.projectId})]})}):(0,v.jsx)("span",{className:"dark"===s?"text-gray-400":"text-gray-500",children:"Choose Project"})}),(0,v.jsx)(i,{className:"w-5 h-5 transition-transform duration-200 ".concat(d?"rotate-180":""," ").concat("text-gray-400")})]}),d&&!o&&(0,v.jsxs)("div",{className:"absolute top-full left-0 right-0 mt-2 border rounded-xl shadow-lg z-50 ".concat("dark"===s?"bg-gray-700 border-gray-600":"bg-white border-gray-200"),children:[(0,v.jsx)("div",{className:"p-3 border-b border-gray-200 dark:border-gray-600",children:(0,v.jsxs)("div",{className:"relative",children:[(0,v.jsx)(x,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,v.jsx)("input",{type:"text",placeholder:"Search projects...",value:g,onChange:e=>m(e.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500/30 ".concat("dark"===s?"bg-gray-800 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500")})]})}),(0,v.jsx)("div",{className:"max-h-64 overflow-y-auto",onScroll:e=>{const{scrollTop:t,scrollHeight:a,clientHeight:r}=e.target;a-t<=r+50&&C()},children:S.length>0?(0,v.jsxs)(v.Fragment,{children:[S.map(e=>(0,v.jsxs)("div",{onClick:()=>{return t=e.projectId,a(t),c(!1),void m("");var t},className:"p-3 cursor-pointer transition-colors duration-150 flex items-center space-x-3 hover:".concat("dark"===s?"bg-gray-600":"bg-gray-50"," ").concat(t===e.projectId?"dark"===s?"bg-blue-900/50":"bg-blue-50":""),children:[(0,v.jsxs)("div",{className:"flex-1",children:[(0,v.jsx)("div",{className:"font-medium ".concat("dark"===s?"text-white":"text-gray-900"),children:e.title}),(0,v.jsx)("div",{className:"text-sm ".concat("dark"===s?"text-gray-400":"text-gray-500"),children:e.projectId})]}),t===e.projectId&&(0,v.jsx)(n.A,{className:"w-5 h-5 text-blue-500"})]},e.projectId)),y&&(0,v.jsx)("div",{className:"p-4 text-center ".concat("dark"===s?"text-gray-400":"text-gray-500"),children:(0,v.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,v.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"}),(0,v.jsx)("span",{children:"Loading more projects..."})]})}),!y&&b&&!w&&S.length>=5&&(0,v.jsx)("div",{className:"p-3 border-t border-gray-200 dark:border-gray-600",children:(0,v.jsx)("button",{onClick:C,className:"w-full py-2 px-4 rounded-lg transition-colors duration-200 ".concat("dark"===s?"bg-gray-600 hover:bg-gray-500 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700"),children:"Load More Projects"})}),w&&S.length>0&&(0,v.jsx)("div",{className:"p-3 text-center text-sm ".concat("dark"===s?"text-gray-400":"text-gray-500"),children:"All projects loaded"})]}):g?(0,v.jsxs)("div",{className:"p-4 text-center ".concat("dark"===s?"text-gray-400":"text-gray-500"),children:['No projects found matching "',g,'"']}):y?(0,v.jsx)("div",{className:"p-4 text-center ".concat("dark"===s?"text-gray-400":"text-gray-500"),children:(0,v.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,v.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"}),(0,v.jsx)("span",{children:"Loading projects..."})]})}):(0,v.jsx)("div",{className:"p-4 text-center ".concat("dark"===s?"text-gray-400":"text-gray-500"),children:"No projects found"})})]})]})},I=()=>{const e=(0,l.Zp)(),{employeeId:t}=(0,l.g)(),{userData:a,theme:o}=(0,r.useContext)(f.ob),[i,x]=(0,r.useState)([]);(0,r.useEffect)(()=>{x(null===a||void 0===a?void 0:a.permissions)},[a]);const[N,I]=(0,r.useState)([]),[L,T]=(0,r.useState)([]),[E,M]=(0,r.useState)(!0),[F,_]=(0,r.useState)(null),[U,O]=(0,r.useState)("ALL"),[R,P]=(0,r.useState)("none"),[B,H]=(0,r.useState)(!1),[z,Y]=(0,r.useState)("MY_TASKS"),[q,K]=(0,r.useState)(null),[G,V]=(0,r.useState)(!1),[W,X]=(0,r.useState)("create"),[Z,J]=(0,r.useState)([]),[Q,$]=(0,r.useState)({}),[ee,te]=(0,r.useState)(""),[ae,re]=(0,r.useState)(!1),[se,le]=(0,r.useState)(0),[ne,oe]=(0,r.useState)(1),[de,ce]=(0,r.useState)(5),[ie,xe]=(0,r.useState)({show:!1,message:""}),[ge,me]=(0,r.useState)({show:!1,message:""}),[he,ue]=(0,r.useState)({show:!1,projectId:null,taskId:null}),[ye,pe]=(0,r.useState)({id:"",title:"",description:"",createdBy:"",assignedTo:"",status:"Not Started",priority:"Medium",createdDate:(new Date).toISOString().split("T")[0],completedDate:"",dueDate:"",rating:"",remark:"",completionNote:"",relatedLinks:[""],attachedFileLinks:[],projectId:""});(0,r.useEffect)(()=>{a&&!q&&(async()=>{try{var e,t;const r=null!==a&&void 0!==a&&null!==(e=a.roles)&&void 0!==e&&e[0]?"ROLE_".concat(a.roles[0]):null;if(!r)return;let s=await j.ZQ.get("role-access/".concat(r));K(null===s||void 0===s||null===(t=s.data)||void 0===t?void 0:t.permissions)}catch(F){console.error("error from Fetching Error matching Objects:",F)}})()},[a,q]);const be=(0,r.useCallback)(async()=>{if(!a)return void M(!1);const e=null===q||void 0===q?void 0:q.includes("MY_TASKS_MY_TASK_DASHBOARD_TEAM_LEAD_SIDEBAR");try{M(!0);const r=a.employeeId,s=e&&t?"/".concat(se,"/").concat(de,"/id/asc/all/tasks/").concat(t):"/".concat(se,"/").concat(de,"/id/asc/all/tasks/").concat(r),l=await j.bI.get(s);I(l.data.content||l.data.tasks||[]),oe(l.data.totalPages||1),_(null)}catch(l){var r,s;console.error("Error in fetchTasks:",l),403===(null===(r=l.response)||void 0===r?void 0:r.status)?_("Authorization failed. You do not have permission to view these tasks. Please check your login status."):404===(null===(s=l.response)||void 0===s?void 0:s.status)?(I([]),oe(1)):_("Failed to fetch tasks. Please make sure the server is running and you are logged in.")}finally{M(!1)}},[a,t,se,de,q]),fe=(0,r.useCallback)(async()=>{if(null!==a&&void 0!==a&&a.employeeId&&null!==q&&void 0!==q&&q.includes("MY_TASKS_MY_TASK_DASHBOARD_TEAM_LEAD_SIDEBAR"))try{const e=a.employeeId,t="/".concat(se,"/").concat(de,"/id/asc/").concat(e),r=await j.bI.get(t);T(r.data.content||r.data.tasks||[]),oe(r.data.totalPages||1)}catch(r){var e,t;console.error("Error in fetchTasksAssignedByMe:",r),403===(null===(e=r.response)||void 0===e?void 0:e.status)?_("Authorization failed. You do not have permission to view tasks assigned by you."):404!==(null===(t=r.response)||void 0===t?void 0:t.status)?_("Failed to fetch tasks assigned by Team Lead: ".concat(r.message)):(T([]),oe(1))}else T([])},[a,se,de,q]);(0,r.useEffect)(()=>{a&&null!==q&&("MY_TASKS"===z?be():"ASSIGNED_BY_ME"===z&&fe())},[a,z,be,fe,q]);const je=new Date;je.setHours(0,0,0,0);const ve=(e,t,a)=>{const r=new Date(e),s=new Date(t);if(isNaN(r.getTime())||isNaN(s.getTime())||r>s)return 0;const l=s.getTime()-r.getTime();if(l<=0)return a>=s?100:0;const n=a.getTime()-r.getTime();return Math.round(Math.max(0,Math.min(100,n/l*100)))},ke=(t,a)=>{e("taskview/".concat(btoa(t),"/").concat(btoa(a)))},Ne=e=>{var t,a;const r={HIGH:{dark:"text-red-400",light:"bg-red-50 text-red-700 border-red-100"},MEDIUM:{dark:"text-yellow-400",light:"bg-yellow-50 text-yellow-700 border-yellow-100"},LOW:{dark:"text-blue-400",light:"bg-blue-50 text-blue-700 border-blue-100"},DEFAULT:{dark:"text-gray-400",light:"bg-gray-50 text-gray-700 border-gray-100"}},s=(null===e||void 0===e?void 0:e.toUpperCase())||"DEFAULT";return"dark"===o?(null===(t=r[s])||void 0===t?void 0:t.dark)||r.DEFAULT.dark:(null===(a=r[s])||void 0===a?void 0:a.light)||r.DEFAULT.light},we=e=>{var t,a;const r=(null===e||void 0===e?void 0:e.toUpperCase().replace(/ /g,"_"))||"DEFAULT",s={IN_PROGRESS:{dark:"text-purple-400",light:"bg-purple-50 text-purple-700"},PENDING:{dark:"text-orange-400",light:"bg-orange-50 text-orange-700"},COMPLETED:{dark:"text-green-400",light:"bg-green-50 text-green-700"},NOT_STARTED:{dark:"text-gray-400",light:"bg-gray-100 text-gray-700"},ON_HOLD:{dark:"text-red-400",light:"bg-red-100 text-red-700"},DEFAULT:{dark:"text-gray-400",light:"bg-gray-50 text-gray-700"}};return"dark"===o?(null===(t=s[r])||void 0===t?void 0:t.dark)||s.DEFAULT.dark:(null===(a=s[r])||void 0===a?void 0:a.light)||s.DEFAULT.light},Ae=e=>{const t={IN_PROGRESS:"bg-purple-500",PENDING:"bg-orange-500",COMPLETED:"bg-green-500",NOT_STARTED:"bg-gray-500",ON_HOLD:"bg-red-500",DEFAULT:"bg-gray-500"};return t[(null===e||void 0===e?void 0:e.toUpperCase().replace(/ /g,"_"))||"DEFAULT"]||t.DEFAULT},De=()=>{pe({id:"",title:"",description:"",createdBy:(null===a||void 0===a?void 0:a.employeeId)||"",assignedTo:"",status:"Not Started",priority:"Medium",createdDate:(new Date).toISOString().split("T")[0],completedDate:"",dueDate:"",rating:"",remark:"",completionNote:"",relatedLinks:[""],attachedFileLinks:[],projectId:""}),J([]),$({}),te("")},Ce=(e,t)=>{var r,l;e.stopPropagation(),X("edit"),pe((0,s.A)((0,s.A)({},t),{},{relatedLinks:null!==(r=t.relatedLinks)&&void 0!==r&&r.length&&t.relatedLinks[0]?t.relatedLinks:[""],attachedFileLinks:t.attachedFileLinks||[],createdBy:t.createdBy||(null===a||void 0===a?void 0:a.employeeId)||"",createdDate:t.createdDate||(new Date).toISOString().split("T")[0],completedDate:t.completedDate||"",dueDate:t.dueDate||"",projectId:t.projectId||(null===(l=t.id)||void 0===l?void 0:l.projectId)||""})),J([]),$({}),te(""),V(!0)},Se=(e,t,a)=>{e.stopPropagation(),ue({show:!0,projectId:t,taskId:a})},Ie=()=>{V(!1),De()},Le=()=>{pe(e=>(0,s.A)((0,s.A)({},e),{},{relatedLinks:[...e.relatedLinks,""]}))},Te=e=>{J(t=>[...t,...Array.from(e.target.files)]),Q.attachedFileLinks&&$(e=>{const t=(0,s.A)({},e);return delete t.attachedFileLinks,t})},Ee=async e=>{if(e.preventDefault(),!(()=>{const e={};return(!ye.title||ye.title.trim().length<3)&&(e.title="Title must be at least 3 characters"),ye.title.length>100&&(e.title="Title cannot exceed 100 characters"),ye.assignedTo||(e.assignedTo="Assigned to is required"),ye.dueDate||(e.dueDate="Due date is required"),ye.projectId||(e.projectId="Project ID is required"),ye.description&&ye.description.length>255&&(e.description="Description cannot exceed 255 characters"),ye.remark&&ye.remark.length>200&&(e.remark="Remark cannot exceed 200 characters"),ye.completionNote&&ye.completionNote.length>200&&(e.completionNote="Completion note cannot exceed 200 characters"),"Completed"===ye.status?(ye.completedDate||(e.completedDate='Completed date is required when status is "Completed"'),ye.rating?(parseInt(ye.rating)<1||parseInt(ye.rating)>5)&&(e.rating="Rating must be between 1 and 5"):e.rating='Rating (1-5) is required when status is "Completed"'):ye.rating&&(parseInt(ye.rating)<1||parseInt(ye.rating)>5)&&(e.rating="Rating must be between 1 and 5"),"create"===W&&0===Z.length&&(e.attachedFileLinks="At least one file attachment is required."),$(e),0===Object.keys(e).length})())return;re(!0),te("");const t=new FormData,r={id:ye.id||null,title:ye.title,description:ye.description||null,createdBy:a.employeeId,assignedTo:ye.assignedTo,status:ye.status,priority:ye.priority,createdDate:ye.createdDate,dueDate:ye.dueDate,completedDate:ye.completedDate||null,rating:ye.rating?parseInt(ye.rating):null,remark:ye.remark||null,completionNote:ye.completionNote||null,relatedLinks:ye.relatedLinks.filter(e=>""!==e.trim()),projectId:ye.projectId};"create"===W&&delete r.id,t.append("taskDTO",new Blob([JSON.stringify(r)],{type:"application/json"})),Z.forEach(e=>t.append("attachedFileLinks",e));try{const e="/".concat(a.employeeId,"/").concat(ye.assignedTo,"/").concat(ye.projectId,"/task"),r="create"===W?"post":"put";await j.bI[r](e,t,{headers:{"Content-Type":"multipart/form-data"}}),xe({show:!0,message:"Task ".concat("create"===W?"created":"updated"," successfully!")}),Ie(),be(),null!==q&&void 0!==q&&q.includes("TASK_TEAMLEAD_SIDEBAR")&&fe()}catch(F){var s,l,n;console.error("Submission failed:",F);const t=(null===(s=F.response)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.message)||(null===(n=F.response)||void 0===n?void 0:n.data)||F.message;te("Failed to ".concat(W," task: ").concat(t)),me({show:!0,message:"Failed to ".concat(W," task. Please check details and try again.")})}finally{re(!1)}},Me=e=>Array.isArray(e)?e.filter(e=>{var t;return"ALL"===U||(null===(t=e.status)||void 0===t?void 0:t.toUpperCase().replace(/ /g,"_"))===U}).sort((e,t)=>{if("startDateAsc"===R){const a=new Date(e.startDate||e.createdDate),r=new Date(t.startDate||t.createdDate);return a.getTime()-r.getTime()}if("priorityDesc"===R){var a,r;const s={HIGH:1,MEDIUM:2,LOW:3};return(s[null===(a=e.priority)||void 0===a?void 0:a.toUpperCase()]||4)-(s[null===(r=t.priority)||void 0===r?void 0:r.toUpperCase()]||4)}return 0}):[],Fe=(0,r.useMemo)(()=>Me(N),[N,U,R]),_e=(0,r.useMemo)(()=>Me(L),[L,U,R]),Ue=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],n=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const c=Q[t],i=ye[t]||"",x=n||("createdBy"===t||"createdDate"===t),m=e=>{(e=>{const{name:t,value:a}=e.target;pe(e=>(0,s.A)((0,s.A)({},e),{},{[t]:a})),Q[t]&&$(e=>(0,s.A)((0,s.A)({},e),{},{[t]:""})),ee&&te("")})({target:{name:t,value:e}})};return"assignedTo"===t?(0,v.jsxs)("div",{className:"group relative",children:[(0,v.jsxs)("label",{className:"block text-sm font-semibold mb-3 flex items-center ".concat("dark"===o?"text-gray-200":"text-gray-800"),children:[e,r&&(0,v.jsx)("span",{className:"text-red-500 ml-1 text-base",children:"*"}),x&&(0,v.jsx)("span",{className:"ml-2 px-2 py-1 text-xs rounded-full ".concat("dark"===o?"bg-gray-700 text-gray-400":"bg-gray-100 text-gray-500"),children:"Read Only"})]}),(0,v.jsx)(C,{value:i,onChange:m,theme:o,error:c,disabled:x}),c&&(0,v.jsxs)("div",{className:"mt-3 flex items-center space-x-2 text-red-600 animate-slideIn",children:[(0,v.jsx)(d,{className:"w-4 h-4 flex-shrink-0"}),(0,v.jsx)("p",{className:"text-sm font-medium",children:c})]})]},t):"projectId"===t?(0,v.jsxs)("div",{className:"group relative",children:[(0,v.jsxs)("label",{className:"block text-sm font-semibold mb-3 flex items-center ".concat("dark"===o?"text-gray-200":"text-gray-800"),children:[e,r&&(0,v.jsx)("span",{className:"text-red-500 ml-1 text-base",children:"*"}),x&&(0,v.jsx)("span",{className:"ml-2 px-2 py-1 text-xs rounded-full ".concat("dark"===o?"bg-gray-700 text-gray-400":"bg-gray-100 text-gray-500"),children:"Read Only"})]}),(0,v.jsx)(S,{value:i,onChange:m,theme:o,error:c,disabled:x}),c&&(0,v.jsxs)("div",{className:"mt-3 flex items-center space-x-2 text-red-600 animate-slideIn",children:[(0,v.jsx)(d,{className:"w-4 h-4 flex-shrink-0"}),(0,v.jsx)("p",{className:"text-sm font-medium",children:c})]})]},t):(0,v.jsxs)("div",{className:"group relative",children:[(0,v.jsxs)("label",{className:"block text-sm font-semibold mb-3 flex items-center ".concat("dark"===o?"text-gray-200":"text-gray-800"),children:[e,r&&(0,v.jsx)("span",{className:"text-red-500 ml-1 text-base",children:"*"}),x&&(0,v.jsx)("span",{className:"ml-2 px-2 py-1 text-xs rounded-full ".concat("dark"===o?"bg-gray-700 text-gray-400":"bg-gray-100 text-gray-500"),children:"Read Only"})]}),"select"===a?(0,v.jsxs)("div",{className:"relative",children:[(0,v.jsxs)("select",{value:i,onChange:e=>m(e.target.value),className:"w-full px-5 py-4 border-2 rounded-xl transition-all duration-300 appearance-none\n                                focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 focus:outline-none\n                                ".concat(c?"border-red-300 bg-red-50 focus:border-red-500 focus:ring-red-500/20":"dark"===o?"border-gray-600 bg-gray-700 text-white hover:border-gray-500 group-hover:border-blue-400":"border-gray-200 bg-white hover:border-gray-300 group-hover:border-blue-300","\n                                ").concat(x?"dark"===o?"bg-gray-800 cursor-not-allowed opacity-60":"bg-gray-50 cursor-not-allowed opacity-60":""),disabled:x,children:[(0,v.jsxs)("option",{value:"",children:["Choose ",e]}),l.map(e=>(0,v.jsx)("option",{value:e.value||e,children:e.label||e},e.value||e))]}),(0,v.jsx)("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2 pointer-events-none",children:(0,v.jsx)("svg",{className:"w-5 h-5 ".concat("text-gray-400"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,v.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}):"date"===a?(0,v.jsx)("input",{type:"date",value:i,onChange:e=>m(e.target.value),className:"w-full px-5 py-4 border-2 rounded-xl transition-all duration-300\n                            focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 focus:outline-none\n                            ".concat(c?"border-red-300 bg-red-50 focus:border-red-500 focus:ring-red-500/20":"dark"===o?"border-gray-600 bg-gray-700 text-white hover:border-gray-500 group-hover:border-blue-400":"border-gray-200 bg-white hover:border-gray-300 group-hover:border-blue-300","\n                            ").concat(x?"dark"===o?"bg-gray-800 cursor-not-allowed opacity-60":"bg-gray-50 cursor-not-allowed opacity-60":""),disabled:x}):"file"===a?(0,v.jsxs)("div",{children:[(0,v.jsxs)("div",{className:"relative border-2 border-dashed rounded-xl transition-all duration-300\n                            ".concat(c?"border-red-300 bg-red-50":"dark"===o?"border-gray-600 bg-gray-800 hover:border-blue-400 hover:bg-blue-900/20":"border-gray-300 bg-gray-50 hover:border-blue-400 hover:bg-blue-50","\n                            ").concat(x?"opacity-60 cursor-not-allowed":"cursor-pointer"),children:[(0,v.jsx)("input",{type:"file",multiple:!0,onChange:Te,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:x,accept:"*/*"}),(0,v.jsxs)("div",{className:"px-6 py-8 text-center",children:[(0,v.jsx)(g,{className:"mx-auto h-12 w-12 mb-4 ".concat("dark"===o?"text-gray-500":"text-gray-400")}),(0,v.jsxs)("p",{className:"text-sm font-medium mb-1 ".concat("dark"===o?"text-gray-300":"text-gray-700"),children:["Drop your file here, or ",(0,v.jsx)("span",{className:"text-blue-600",children:"browse"})]}),(0,v.jsx)("p",{className:"text-xs ".concat("text-gray-500"),children:"Files (MAX. 10MB each)"})]})]}),c&&(0,v.jsxs)("div",{className:"mt-3 flex items-center space-x-2 text-red-600 animate-slideIn",children:[(0,v.jsx)(d,{className:"w-4 h-4 flex-shrink-0"}),(0,v.jsx)("p",{className:"text-sm font-medium",children:c})]})]}):"textarea"===a?(0,v.jsx)("textarea",{value:i,onChange:e=>m(e.target.value),className:"w-full px-5 py-4 border-2 rounded-xl transition-all duration-300 resize-none h-32\n                            focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 focus:outline-none\n                            ".concat(c?"border-red-300 bg-red-50 focus:border-red-500 focus:ring-red-500/20":"dark"===o?"border-gray-600 bg-gray-700 text-white hover:border-gray-500 group-hover:border-blue-400":"border-gray-200 bg-white hover:border-gray-300 group-hover:border-blue-300","\n                            ").concat(x?"dark"===o?"bg-gray-800 cursor-not-allowed opacity-60":"bg-gray-50 cursor-not-allowed opacity-60":""),placeholder:"Enter ".concat(e.toLowerCase(),"..."),required:r,disabled:x}):(0,v.jsx)("input",{type:a,value:i,onChange:e=>m(e.target.value),className:"w-full px-5 py-4 border-2 rounded-xl transition-all duration-300\n                            focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 focus:outline-none\n                            ".concat(c?"border-red-300 bg-red-50 focus:border-red-500 focus:ring-red-500/20":"dark"===o?"border-gray-600 bg-gray-700 text-white hover:border-gray-500 group-hover:border-blue-400":"border-gray-200 bg-white hover:border-gray-300 group-hover:border-blue-300","\n                            ").concat(x?"dark"===o?"bg-gray-800 cursor-not-allowed opacity-60":"bg-gray-50 cursor-not-allowed opacity-60":""),placeholder:"Enter ".concat(e.toLowerCase(),"..."),required:r,disabled:x}),c&&"file"!==a&&(0,v.jsxs)("div",{className:"mt-3 flex items-center space-x-2 text-red-600 animate-slideIn",children:[(0,v.jsx)(d,{className:"w-4 h-4 flex-shrink-0"}),(0,v.jsx)("p",{className:"text-sm font-medium",children:c})]})]},t)},Oe=(e,t,r,s)=>(0,v.jsxs)("div",{className:"mb-8 hidden md:block",children:[(0,v.jsx)("h2",{className:"text-2xl font-bold mb-4 ".concat("dark"===o?"text-white":"text-slate-800"),children:t}),(0,v.jsx)("div",{className:"rounded-xl shadow-md overflow-hidden border ".concat("dark"===o?"bg-gray-800 border-gray-700":"bg-white border-slate-200/80"),children:(0,v.jsx)("div",{className:"overflow-x-auto",children:(0,v.jsxs)("table",{className:"min-w-full divide-y divide-slate-200",children:[(0,v.jsx)("thead",{className:"dark"===o?"bg-gray-700":"bg-slate-50",children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider ".concat("dark"===o?"text-gray-300":"text-slate-600"),children:"Task Title"}),(0,v.jsx)("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider ".concat("dark"===o?"text-gray-300":"text-slate-600"),children:"Status"}),(0,v.jsx)("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider ".concat("dark"===o?"text-gray-300":"text-slate-600"),children:"Priority"}),s&&(0,v.jsx)("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider ".concat("dark"===o?"text-gray-300":"text-slate-600"),children:"Assigned To"}),(!Be||"MY_TASKS"===z)&&(0,v.jsx)("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider ".concat("dark"===o?"text-gray-300":"text-slate-600"),children:"Assigned By"}),(0,v.jsx)("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider ".concat("dark"===o?"text-gray-300":"text-slate-600"),children:"Start Date"}),(0,v.jsx)("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider ".concat("dark"===o?"text-gray-300":"text-slate-600"),children:"Due Date"}),(0,v.jsx)("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider ".concat("dark"===o?"text-gray-300":"text-slate-600"),children:"Progress"}),s&&Be&&(0,v.jsx)("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider ".concat("dark"===o?"text-gray-300":"text-slate-600"),children:"Actions"})]})}),(0,v.jsx)("tbody",{className:"divide-y transition-colors duration-150 ".concat("dark"===o?"bg-gray-800 divide-gray-700":"bg-white divide-slate-200"),children:e.length>0?e.map(e=>{const t=ve(e.startDate||e.createdDate,e.dueDate,je),r=t<=50?"bg-green-500":t<=75?"bg-yellow-500":"bg-red-500";return(0,v.jsxs)("tr",{onClick:()=>ke(e.projectId,e.id),className:"cursor-pointer ".concat("dark"===o?"hover:bg-gray-700":"hover:bg-slate-50"),children:[(0,v.jsx)("td",{className:"px-6 py-4 text-sm font-medium ".concat("dark"===o?"text-white":"text-slate-800"),children:e.title}),(0,v.jsx)("td",{className:"px-6 py-4",children:(0,v.jsxs)("span",{className:"text-xs font-bold uppercase tracking-wider px-2 py-1 rounded-full ".concat(we(e.status)),children:[(0,v.jsx)("span",{className:"h-2 w-2 rounded-full inline-block ".concat(Ae(e.status)," mr-1")}),e.status.replace(/_/g," ")]})}),(0,v.jsx)("td",{className:"px-6 py-4",children:(0,v.jsx)("span",{className:"text-xs font-bold py-1 px-2.5 rounded-md ".concat("dark"===o?"":"border"," ").concat(Ne(e.priority)),children:e.priority})}),s&&(0,v.jsx)("td",{className:"px-6 py-4 text-sm ".concat("dark"===o?"text-white":"text-slate-800"),children:e.assignedTo}),(!Be||"MY_TASKS"===z)&&(0,v.jsx)("td",{className:"px-6 py-4 text-sm ".concat("dark"===o?"text-white":"text-slate-800"),children:e.createdBy}),(0,v.jsx)("td",{className:"px-6 py-4 text-sm ".concat("dark"===o?"text-gray-400":"text-slate-500"),children:(0,v.jsxs)("div",{className:"flex items-center",children:[(0,v.jsx)(k,{theme:o}),e.startDate||e.createdDate]})}),(0,v.jsx)("td",{className:"px-6 py-4 text-sm ".concat("dark"===o?"text-gray-400":"text-slate-500"),children:(0,v.jsxs)("div",{className:"flex items-center",children:[(0,v.jsx)(k,{theme:o}),e.dueDate]})}),(0,v.jsxs)("td",{className:"px-6 py-4 text-sm",children:[(0,v.jsx)("div",{className:"w-24 rounded-full h-2.5 ".concat("dark"===o?"bg-gray-600":"bg-gray-200"),children:(0,v.jsx)("div",{className:"".concat(r," h-full rounded-full"),style:{width:"".concat(t,"%")}})}),(0,v.jsxs)("div",{className:"text-right text-xs ".concat("dark"===o?"text-gray-400":"text-gray-600"),children:[t,"%"]})]}),s&&Be&&(0,v.jsx)("td",{className:"px-6 py-4 text-sm flex items-center space-x-2",children:e.createdBy===(null===a||void 0===a?void 0:a.employeeId)&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("button",{onClick:t=>Ce(t,e),className:"p-2 rounded-full ".concat("dark"===o?"text-indigo-400 hover:bg-gray-700":"text-indigo-600 hover:bg-indigo-50"," transition-colors"),"aria-label":"Edit Task",children:(0,v.jsx)(m.A,{size:18})}),(0,v.jsx)("button",{onClick:t=>Se(t,e.projectId,e.id),className:"p-2 rounded-full ".concat("dark"===o?"text-red-400 hover:bg-gray-700":"text-red-600 hover:bg-red-50"," transition-colors"),"aria-label":"Delete Task",children:(0,v.jsx)(u.A,{size:18})})]})})]},"".concat(e.id,"-").concat(e.projectId))}):(0,v.jsx)("tr",{children:(0,v.jsx)("td",{colSpan:Be?s?9:8:s?8:7,className:"text-center py-10 ".concat("dark"===o?"text-gray-400":"text-gray-500"),children:r})})})]})})})]}),Re=(e,t)=>(0,v.jsx)("div",{className:"space-y-4 md:hidden",children:e.length>0?e.map(e=>{const t=ve(e.startDate||e.createdDate,e.dueDate,je),r=t<=50?"bg-green-500":t<=75?"bg-yellow-500":"bg-red-500";return(0,v.jsxs)("div",{onClick:()=>ke(e.projectId,e.id),className:"p-4 rounded-xl shadow-md cursor-pointer transition-transform duration-200 ease-in-out hover:scale-[1.01] ".concat("dark"===o?"bg-gray-800":"bg-white"),children:[(0,v.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,v.jsx)("h3",{className:"text-lg font-bold ".concat("dark"===o?"text-white":"text-slate-800"),children:e.title}),(0,v.jsx)("span",{className:"text-sm ".concat("dark"===o?"text-gray-400":"text-gray-500"),children:"ASSIGNED_BY_ME"===z?"To: ".concat(e.assignedTo):"By: ".concat(e.createdBy)})]}),(0,v.jsxs)("div",{className:"flex justify-between items-center text-sm mb-2",children:[(0,v.jsxs)("div",{className:"flex items-center",children:[(0,v.jsx)("span",{className:"h-2 w-2 rounded-full inline-block ".concat(Ae(e.status)," mr-2")}),(0,v.jsx)("span",{className:"font-medium ".concat("dark"===o?"text-gray-300":"text-gray-700"),children:e.status.replace(/_/g," ")})]}),(0,v.jsx)("span",{className:"text-xs font-bold py-0.5 px-2 rounded-md ".concat("dark"===o?"bg-gray-700":"border"," ").concat(Ne(e.priority)),children:e.priority})]}),(0,v.jsxs)("div",{className:"flex justify-between text-sm ".concat("dark"===o?"text-gray-400":"text-gray-500"),children:[(0,v.jsxs)("div",{className:"flex items-center",children:[(0,v.jsx)(k,{theme:o}),(0,v.jsxs)("span",{children:["Start: ",e.startDate||e.createdDate]})]}),(0,v.jsxs)("div",{className:"flex items-center",children:[(0,v.jsx)(k,{theme:o}),(0,v.jsxs)("span",{children:["Due: ",e.dueDate]})]})]}),(0,v.jsxs)("div",{className:"mt-4",children:[(0,v.jsxs)("p",{className:"text-sm mb-1 ".concat("dark"===o?"text-gray-400":"text-gray-600"),children:["Progress: ",t,"%"]}),(0,v.jsx)("div",{className:"w-full rounded-full h-2.5 ".concat("dark"===o?"bg-gray-600":"bg-gray-200"),children:(0,v.jsx)("div",{className:"".concat(r," h-full rounded-full"),style:{width:"".concat(t,"%")}})})]}),Be&&e.createdBy===(null===a||void 0===a?void 0:a.employeeId)&&"ASSIGNED_BY_ME"===z&&(0,v.jsxs)("div",{className:"flex justify-end mt-4 gap-2",children:[(0,v.jsx)("button",{onClick:t=>Ce(t,e),className:"text-indigo-600 hover:text-indigo-900 p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors","aria-label":"Edit Task",children:(0,v.jsx)(m.A,{size:18})}),(0,v.jsx)("button",{onClick:t=>Se(t,e.projectId,e.id),className:"text-red-600 hover:text-red-900 p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors","aria-label":"Delete Task",children:(0,v.jsx)(u.A,{size:18})})]})]},"".concat(e.id,"-").concat(e.projectId))}):(0,v.jsx)("div",{className:"text-center py-10 rounded-xl shadow-md ".concat("dark"===o?"bg-gray-800 text-gray-400":"bg-white text-gray-500"),children:t})}),Pe="MY_TASKS"===z,Be=null===q||void 0===q?void 0:q.includes("MY_TASKS_MY_TASK_DASHBOARD_TEAM_LEAD_SIDEBAR"),He=null===q||void 0===q?void 0:q.includes("MY_TASKS_MY_TASK_DASHBOARD_CREATE_TASK");return E&&null===q?(0,v.jsx)("div",{className:"flex justify-center items-center min-h-screen ".concat("dark"===o?"bg-gray-900 text-white":"bg-white text-black"),children:"Loading permissions and tasks..."}):F&&!E?(0,v.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 ".concat("dark"===o?"bg-gray-900":"bg-gradient-to-br from-slate-50 to-gray-100"),children:(0,v.jsxs)("div",{className:"rounded-xl shadow-md p-8 max-w-md w-full text-center ".concat("dark"===o?"bg-gray-800":"bg-white"),children:[(0,v.jsx)(d,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),(0,v.jsx)("h2",{className:"text-xl font-bold text-red-600 mb-2",children:"Error"}),(0,v.jsx)("p",{className:"dark"===o?"text-gray-300":"text-gray-700",children:F}),(0,v.jsx)("p",{className:"mt-4 text-sm ".concat("dark"===o?"text-gray-400":"text-gray-500"),children:"If the issue persists, please contact support or check your network connection."})]})}):(0,v.jsxs)("div",{className:"flex min-h-screen font-sans ".concat("dark"===o?"bg-gray-900":"bg-gradient-to-br from-slate-50 to-gray-100"),children:[Be&&!B&&(0,v.jsx)("button",{onClick:()=>H(!0),className:"fixed right-0 top-1/2 -translate-y-1/2 p-2 rounded-l-lg bg-indigo-600 text-white shadow-lg z-50 hover:bg-indigo-700 transition-colors","aria-label":"Open Team Sidebar",children:(0,v.jsx)(p.A,{size:24})}),(0,v.jsxs)("div",{className:"flex-1 transition-all duration-300 ".concat(B&&Be?"md:mr-80":"mr-0"," p-4 sm:p-6 lg:p-8"),children:[B&&Be&&(0,v.jsx)("div",{className:"md:hidden fixed inset-0 bg-black opacity-50 z-30",onClick:()=>H(!1)}),(0,v.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,v.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8",children:[(0,v.jsx)("div",{children:(0,v.jsx)("h1",{className:"text-3xl font-extrabold ".concat("dark"===o?"text-white":"text-slate-800"),children:Be&&"ASSIGNED_BY_ME"===z?"Tasks Assigned by You":"My Task Dashboard"})}),(0,v.jsx)("div",{className:"mt-4 sm:mt-0 flex gap-4",children:He&&(0,v.jsxs)("button",{onClick:()=>{X("create"),De(),V(!0)},className:"flex cursor-pointer items-center justify-center bg-indigo-600 text-white font-semibold py-2.5 px-5 rounded-xl shadow-md hover:bg-indigo-700 transition-colors focus:outline-none focus:ring-4 focus:ring-indigo-500/20",children:[(0,v.jsx)(h,{size:18,className:"mr-2"})," Create Task"]})})]}),(0,v.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-end sm:space-x-4 mb-6",children:[(0,v.jsxs)("div",{className:"w-full sm:w-1/3 mb-4 sm:mb-0",children:[(0,v.jsx)("label",{htmlFor:"filterStatus",className:"block text-sm font-medium mb-1 ".concat("dark"===o?"text-gray-300":"text-gray-700"),children:"Filter Status:"}),(0,v.jsxs)("select",{id:"filterStatus",value:U,onChange:e=>{O(e.target.value),le(0)},className:"block w-full pl-3 pr-10 py-2 text-base focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-lg shadow-sm ".concat("dark"===o?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-black"),children:[(0,v.jsx)("option",{value:"ALL",children:"All"}),(0,v.jsx)("option",{value:"NOT_STARTED",children:"Not Started"}),(0,v.jsx)("option",{value:"PENDING",children:"Pending"}),(0,v.jsx)("option",{value:"IN_PROGRESS",children:"In Progress"}),(0,v.jsx)("option",{value:"COMPLETED",children:"Completed"}),(0,v.jsx)("option",{value:"ON_HOLD",children:"On Hold"})]})]}),(0,v.jsxs)("div",{className:"w-full sm:w-1/3 mb-4 sm:mb-0",children:[(0,v.jsx)("label",{htmlFor:"sortOption",className:"block text-sm font-medium mb-1 ".concat("dark"===o?"text-gray-300":"text-gray-700"),children:"Sort by:"}),(0,v.jsxs)("select",{id:"sortOption",value:R,onChange:e=>P(e.target.value),className:"block w-full pl-3 pr-10 py-2 text-base focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-lg shadow-sm ".concat("dark"===o?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-black"),children:[(0,v.jsx)("option",{value:"none",children:"None"}),(0,v.jsx)("option",{value:"startDateAsc",children:"Start Date (Ascending)"}),(0,v.jsx)("option",{valueD:"priorityDesc",children:"Priority (High to Low)"})]})]}),(0,v.jsxs)("div",{className:"w-full sm:w-1/3",children:[(0,v.jsx)("label",{htmlFor:"itemsPerPage",className:"block text-sm font-medium mb-1 ".concat("dark"===o?"text-gray-300":"text-gray-700"),children:"Items per page:"}),(0,v.jsx)("select",{id:"itemsPerPage",value:de,onChange:e=>{const t=parseInt(e.target.value,10);ce(t),le(0)},className:"block w-full pl-3 pr-10 py-2 text-base focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-lg shadow-sm ".concat("dark"===o?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-black"),children:Array.from({length:10},(e,t)=>t+1).map(e=>(0,v.jsx)("option",{value:e,children:e},e))})]})]}),Be&&"ASSIGNED_BY_ME"===z?(0,v.jsxs)(v.Fragment,{children:[Oe(_e,"Tasks Assigned By You","You have not assigned any tasks yet.",!0),Re(_e,"You have not assigned any tasks yet.")]}):(0,v.jsxs)(v.Fragment,{children:[Oe(Fe,"Tasks Assigned to You","No tasks to display.",!1),Re(Fe,"No tasks to display.")]}),(0,v.jsx)("div",{className:"mt-8 flex justify-center",children:(0,v.jsx)("div",{className:"flex items-center justify-center space-x-2",children:Array.from({length:ne},(e,t)=>t).map(e=>(0,v.jsx)("button",{onClick:()=>{le(e)},className:"flex items-center justify-center h-10 w-10 rounded-full text-sm font-semibold transition-all duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 ".concat(se===e?"bg-indigo-600 text-white shadow-lg":"".concat("dark"===o?"text-gray-300 bg-gray-700 hover:bg-gray-600 hover:text-white":"text-slate-600 bg-white hover:bg-indigo-50 hover:text-indigo-600")),children:e+1},e))})}),(()=>{if(!G)return null;const e="edit"===W;return(0,v.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-[200] p-4 animate-fadeIn",children:(0,v.jsxs)("div",{className:"rounded-3xl w-full max-w-6xl max-h-[95vh] overflow-hidden shadow-2xl animate-slideUp flex flex-col ".concat("dark"===o?"bg-gray-800":"bg-white"),children:[(0,v.jsxs)("div",{className:"px-8 py-6 bg-gradient-to-r from-indigo-500 to-purple-600 text-white relative overflow-hidden flex-shrink-0",children:[(0,v.jsx)("div",{className:"absolute inset-0 bg-black/10"}),(0,v.jsxs)("div",{className:"relative flex items-center justify-between",children:[(0,v.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,v.jsx)("div",{className:"text-4xl",children:e?(0,v.jsx)(m.A,{className:"w-10 h-10"}):(0,v.jsx)(h,{className:"w-10 h-10"})}),(0,v.jsxs)("div",{children:[(0,v.jsx)("h2",{className:"text-2xl font-bold",children:e?"Update Task":"Create New Task"}),(0,v.jsx)("p",{className:"text-white/90 text-sm",children:e?"Modify task details and information":"Fill in the details to create a new task"})]})]}),(0,v.jsx)("button",{onClick:Ie,className:"p-3 hover:bg-white/20 rounded-full transition-all duration-200 group","aria-label":"Close",children:(0,v.jsx)(c.A,{className:"w-6 h-6 group-hover:rotate-90 transition-transform duration-200"})})]})]}),(0,v.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,v.jsxs)("form",{className:"p-8",onSubmit:Ee,children:[(0,v.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e&&Ue("Task ID","id","text",!0,[],!0),Ue("Project ID","projectId","text",!0),Ue("Task Title","title","text",!0),Ue("Description","description","textarea"),Ue("Assigned To","assignedTo","text",!0),Ue("Created By","createdBy","text",!1,[],!0),Ue("Status","status","select",!0,["Not Started","In Progress","Completed","On Hold"]),Ue("Priority","priority","select",!0,["High","Medium","Low"]),Ue("Created Date","createdDate","date",!1,[],!0),Ue("Due Date","dueDate","date",!0),Ue("Completed Date","completedDate","date",!1,[],"create"===W),Ue("Rating (1-5)","rating","number"),Ue("Remark","remark","textarea"),Ue("Completion Note","completionNote","textarea")]}),(0,v.jsxs)("div",{className:"mt-8 space-y-4",children:[(0,v.jsx)("label",{className:"block text-sm font-semibold ".concat("dark"===o?"text-gray-200":"text-gray-800"),children:"Related Links"}),ye.relatedLinks.map((e,t)=>(0,v.jsxs)("div",{className:"flex gap-3 items-start",children:[(0,v.jsx)("input",{type:"url",value:e,onChange:e=>((e,t)=>{const a=[...ye.relatedLinks];a[e]=t,pe(e=>(0,s.A)((0,s.A)({},e),{},{relatedLinks:a}))})(t,e.target.value),className:"flex-1 px-5 py-4 border-2 rounded-xl transition-all duration-300 focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 focus:outline-none ".concat("dark"===o?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white"),placeholder:"Enter related link URL"}),(0,v.jsx)("button",{type:"button",onClick:()=>(e=>{pe(t=>(0,s.A)((0,s.A)({},t),{},{relatedLinks:t.relatedLinks.filter((t,a)=>a!==e)}))})(t),disabled:1===ye.relatedLinks.length,className:"px-4 py-4 rounded-xl transition-all duration-300 ".concat(1===ye.relatedLinks.length?"text-gray-400 cursor-not-allowed":"text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-gray-700"),children:(0,v.jsx)(u.A,{size:18})})]},t)),(0,v.jsxs)("button",{type:"button",onClick:Le,className:"flex items-center text-indigo-600 hover:text-indigo-700 font-medium transition-colors duration-200",children:[(0,v.jsx)(h,{size:18,className:"mr-1"}),"Add Related Link"]})]}),(0,v.jsxs)("div",{className:"mt-8",children:[Ue("Attached Files","attachedFileLinks","file",!e),Z.length>0&&(0,v.jsxs)("div",{className:"mt-6 space-y-3",children:[(0,v.jsx)("p",{className:"text-sm font-semibold ".concat("dark"===o?"text-gray-300":"text-gray-700"),children:"Selected files to upload:"}),(0,v.jsx)("div",{className:"space-y-2",children:Z.map((e,t)=>(0,v.jsxs)("div",{className:"flex justify-between items-center p-4 rounded-xl border transition-all duration-300 ".concat("dark"===o?"bg-gray-700 border-gray-600":"bg-gray-100 border-gray-200"),children:[(0,v.jsxs)("div",{className:"flex items-center space-x-3 min-w-0",children:[(0,v.jsx)("div",{className:"p-2 rounded ".concat("dark"===o?"bg-gray-600":"bg-gray-200"),children:(0,v.jsx)(g,{className:"w-4 h-4 ".concat("dark"===o?"text-gray-400":"text-gray-500")})}),(0,v.jsx)("span",{className:"text-sm truncate ".concat("dark"===o?"text-gray-300":"text-gray-800"),title:e.name,children:e.name})]}),(0,v.jsx)("button",{type:"button",onClick:()=>{return e=t,void J(t=>t.filter((t,a)=>a!==e));var e},className:"text-red-500 hover:text-red-700 p-2 rounded transition-colors duration-200","aria-label":"Remove ".concat(e.name),children:(0,v.jsx)(u.A,{size:16})})]},t))})]}),e&&ye.attachedFileLinks.length>0&&(0,v.jsxs)("div",{className:"mt-6 space-y-3",children:[(0,v.jsx)("p",{className:"text-sm font-semibold ".concat("dark"===o?"text-gray-300":"text-gray-700"),children:"Existing Attached Files:"}),(0,v.jsx)("ul",{className:"space-y-2",children:ye.attachedFileLinks.map((e,t)=>(0,v.jsx)("li",{className:"text-sm ".concat("dark"===o?"text-gray-400":"text-gray-600"),children:(0,v.jsxs)("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline flex items-center",children:[(0,v.jsx)(y,{size:16,className:"mr-2"})," ",e.substring(e.lastIndexOf("/")+1)]})},t))})]})]}),ee&&(0,v.jsx)("div",{className:"mt-6 p-5 border-l-4 border-red-400 rounded-r-xl animate-slideIn ".concat("dark"===o?"bg-red-900/20":"bg-red-50"),children:(0,v.jsxs)("div",{className:"flex items-center",children:[(0,v.jsx)(d,{className:"w-6 h-6 text-red-400 mr-3"}),(0,v.jsx)("p",{className:"font-medium ".concat("dark"===o?"text-red-300":"text-red-800"),children:ee})]})})]})}),(0,v.jsxs)("div",{className:"px-8 py-6 border-t flex justify-end space-x-4 flex-shrink-0 ".concat("dark"===o?"bg-gray-700 border-gray-600":"bg-gray-50 border-gray-200"),children:[(0,v.jsx)("button",{type:"button",onClick:Ie,className:"px-8 py-3 border-2 rounded-xl font-semibold transition-all duration-200 focus:ring-4 focus:ring-gray-500/20 ".concat("dark"===o?"border-gray-600 text-gray-300 hover:bg-gray-600 hover:border-gray-500":"border-gray-300 text-gray-700 hover:bg-gray-100 hover:border-gray-400"),children:"Cancel"}),(0,v.jsx)("button",{type:"button",onClick:Ee,disabled:ae,className:"px-10 py-3 bg-gradient-to-r from-indigo-600 to-purple-700 text-white font-bold rounded-xl\n                                    shadow-lg hover:shadow-xl transform hover:scale-[1.02] transition-all duration-200 \n                                    focus:ring-4 focus:ring-indigo-500/50 flex items-center space-x-2\n                                    ".concat(ae?"cursor-not-allowed opacity-75":""),children:ae?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{className:"h-5 w-5 border-4 border-white border-t-transparent rounded-full animate-spin"}),(0,v.jsx)("span",{children:e?"Updating...":"Creating..."})]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(n.A,{className:"w-5 h-5"}),(0,v.jsx)("span",{children:e?"Update Task":"Create Task"})]})})]})]})})})()]})]}),Be&&(0,v.jsxs)("div",{className:"fixed inset-y-0 right-0 w-80 shadow-xl transform transition-transform duration-300 z-40 ".concat(B?"translate-x-0":"translate-x-full"," ").concat("dark"===o?"bg-gray-800":"bg-white"),children:[B&&(0,v.jsx)("button",{onClick:()=>H(!1),className:"absolute left-0 top-1/2 -translate-x-1/2 -translate-y-1/2 p-2 rounded-full bg-indigo-600 text-white shadow-lg hover:bg-indigo-700 transition-colors z-50","aria-label":"Close Team Sidebar",children:(0,v.jsx)(b.A,{size:24})}),(0,v.jsx)("div",{className:"p-4 border-b ".concat("dark"===o?"border-gray-700":"border-gray-200"),children:(0,v.jsx)("h3",{className:"text-xl font-bold ".concat("dark"===o?"text-white":"text-gray-800"),children:"Team Dashboard"})}),(0,v.jsxs)("div",{className:"p-4 space-y-2",children:[(0,v.jsxs)("button",{onClick:()=>{Y("MY_TASKS"),le(0),H(!1)},className:"w-full text-left p-3 rounded-lg transition-colors flex items-center font-semibold ".concat(Pe?"bg-indigo-500 text-white shadow-md":"".concat("dark"===o?"hover:bg-gray-700 text-gray-300":"hover:bg-gray-100 text-gray-700")),children:[(0,v.jsx)(y,{size:18,className:"mr-2"}),(0,v.jsx)("span",{children:"My Tasks"})]}),(0,v.jsxs)("button",{onClick:()=>{Y("ASSIGNED_BY_ME"),le(0),H(!1)},className:"w-full text-left p-3 rounded-lg transition-colors flex items-center font-semibold ".concat(Pe?"".concat("dark"===o?"hover:bg-gray-700 text-gray-300":"hover:bg-gray-100 text-gray-700"):"bg-indigo-500 text-white shadow-md"),children:[(0,v.jsx)(m.A,{size:18,className:"mr-2"}),(0,v.jsx)("span",{children:"Tasks Assigned By You"})]})]})]}),ie.show&&(0,v.jsx)(w,{message:ie.message,onClose:()=>xe({show:!1,message:""}),theme:o}),ge.show&&(0,v.jsx)(A,{message:ge.message,onClose:()=>me({show:!1,message:""}),theme:o}),he.show&&(0,v.jsx)(D,{onConfirm:async()=>{const{projectId:e,taskId:t}=he;if(e&&t)try{const a="/".concat(e,"/").concat(t,"/delete/task");await j.bI.delete(a),xe({show:!0,message:"Task deleted successfully!"}),be(),fe()}catch(F){var a;console.error("Failed to delete task:",(null===(a=F.response)||void 0===a?void 0:a.data)||F.message),me({show:!0,message:"Failed to delete the task. Please try again."})}finally{ue({show:!1,projectId:null,taskId:null})}},onCancel:()=>ue({show:!1,projectId:null,taskId:null}),theme:o}),(0,v.jsx)("style",{jsx:!0,children:"\n                @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }\n                @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }\n                @keyframes slideIn { from { transform: translateX(-10px); opacity: 0; } to { transform: translateX(0); opacity: 1; } }\n                .animate-fadeIn { animation: fadeIn 0.3s ease-out; }\n                .animate-slideUp { animation: slideUp 0.4s ease-out; }\n                .animate-slideIn { animation: slideIn 0.3s ease-out; }\n                @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }\n            "})]})},L=(0,o.A)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var T=a(1680),E=a(5088);const M=(0,o.A)("calendar-days",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]),F=(0,o.A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),_=(0,o.A)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),U=(0,o.A)("message-square",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),O=(0,o.A)("git-fork",[["circle",{cx:"12",cy:"18",r:"3",key:"1mpf1b"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["path",{d:"M18 9v2c0 .6-.4 1-1 1H7c-.6 0-1-.4-1-1V9",key:"1uq4wg"}],["path",{d:"M12 12v3",key:"158kv8"}]]),R=(0,o.A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),P=e=>{let{children:t,onClose:a,title:r,type:s,theme:l}=e,o="",d=null;return"confirm"===s?(o="text-yellow-600",d=(0,v.jsx)(y,{className:"h-6 w-6 text-yellow-500"})):"success"===s?(o="text-green-600",d=(0,v.jsx)(n.A,{className:"h-6 w-6 text-green-500"})):"error"===s&&(o="text-red-600",d=(0,v.jsx)(L,{className:"h-6 w-6 text-red-500"})),(0,v.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex justify-center items-center z-[200] animate-fadeIn",children:(0,v.jsxs)("div",{className:"p-6 rounded-3xl shadow-2xl w-full max-w-md mx-4 border animate-slideUp ".concat("dark"===l?"bg-gray-800 border-gray-700":"bg-white border-gray-200"),children:[(0,v.jsxs)("div",{className:"flex items-center mb-4",children:[d&&(0,v.jsx)("span",{className:"mr-3",children:d}),(0,v.jsx)("h3",{className:"text-xl font-bold ".concat(o),children:r})]}),t]})})},B=e=>{let{message:t,onClose:a,theme:r}=e;return(0,v.jsxs)(P,{onClose:a,title:"An Error Occurred",type:"error",theme:r,children:[(0,v.jsx)("p",{className:"mb-6 text-base whitespace-pre-wrap ".concat("dark"===r?"text-gray-300":"text-gray-700"),children:t}),(0,v.jsx)("div",{className:"flex justify-end",children:(0,v.jsx)("button",{onClick:a,className:"bg-red-600 text-white font-semibold py-3 px-8 rounded-xl hover:bg-red-700 transition-all duration-200 focus:ring-4 focus:ring-red-500/20",children:"OK"})})]})},H=e=>{let{message:t,onClose:a,theme:r}=e;return(0,v.jsxs)(P,{onClose:a,title:"Success",type:"success",theme:r,children:[(0,v.jsx)("p",{className:"mb-6 text-base whitespace-pre-wrap ".concat("dark"===r?"text-gray-300":"text-gray-700"),children:t}),(0,v.jsx)("div",{className:"flex justify-end",children:(0,v.jsx)("button",{onClick:a,className:"bg-green-600 text-white font-semibold py-3 px-8 rounded-xl hover:bg-green-700 transition-all duration-200 focus:ring-4 focus:ring-green-500/20",children:"OK"})})]})},z=e=>{let{onConfirm:t,onCancel:a,theme:r}=e;return(0,v.jsxs)(P,{onClose:a,title:"Confirm Deletion",type:"confirm",theme:r,children:[(0,v.jsx)("p",{className:"mb-6 text-base ".concat("dark"===r?"text-gray-300":"text-gray-700"),children:"Are you sure you want to permanently delete this history entry? This action cannot be undone."}),(0,v.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,v.jsx)("button",{onClick:a,className:"px-6 py-3 rounded-xl border-2 font-semibold transition-all duration-200 focus:ring-4 focus:ring-gray-400/20 ".concat("dark"===r?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"),children:"Cancel"}),(0,v.jsx)("button",{onClick:t,className:"bg-red-600 text-white font-semibold py-3 px-8 rounded-xl hover:bg-red-700 transition-all duration-200 focus:ring-4 focus:ring-red-500/20",children:"Delete"})]})]})},Y=e=>{let{setShowUpdateHistoryPopup:t,handleUpdateHistorySubmit:a,updateHistoryData:r,handleUpdateHistoryInputChange:s,handleUpdateHistoryFileChange:l,assignedBy:n,employeeId:o,theme:d}=e;const c=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",l=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";const o=r[t]||"";return(0,v.jsxs)("div",{className:"group relative",children:[(0,v.jsxs)("label",{className:"block text-sm font-semibold mb-3 flex items-center ".concat("dark"===d?"text-gray-200":"text-gray-800"),children:[e,l&&(0,v.jsx)("span",{className:"text-red-500 ml-1 text-base",children:"*"})]}),"textarea"===a?(0,v.jsx)("textarea",{name:t,value:o,onChange:s,className:"w-full px-5 py-4 border-2 rounded-xl transition-all duration-300 resize-none h-32\n                            focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 focus:outline-none\n                            ".concat("dark"===d?"border-gray-600 bg-gray-700 text-white hover:border-gray-500 group-hover:border-blue-400":"border-gray-200 bg-white hover:border-gray-300 group-hover:border-blue-300"),placeholder:n,required:l}):(0,v.jsx)("input",{type:a,name:t,value:o,onChange:s,className:"w-full px-5 py-4 border-2 rounded-xl transition-all duration-300\n                            focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 focus:outline-none\n                            ".concat("dark"===d?"border-gray-600 bg-gray-700 text-white hover:border-gray-500 group-hover:border-blue-400":"border-gray-200 bg-white hover:border-gray-300 group-hover:border-blue-300"),placeholder:n,required:l})]})};return(0,v.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-[200] p-4 animate-fadeIn",children:(0,v.jsxs)("form",{onSubmit:a,className:"rounded-3xl w-full max-w-4xl max-h-[95vh] flex flex-col overflow-hidden shadow-2xl animate-slideUp ".concat("dark"===d?"bg-gray-800":"bg-white"),children:[(0,v.jsxs)("div",{className:"px-8 py-6 bg-gradient-to-r from-blue-500 to-indigo-600 text-white relative overflow-hidden flex-shrink-0",children:[(0,v.jsx)("div",{className:"absolute inset-0 bg-black/10"}),(0,v.jsxs)("div",{className:"relative flex items-center justify-between",children:[(0,v.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,v.jsx)("div",{className:"text-4xl",children:(0,v.jsx)(h,{className:"w-10 h-10"})}),(0,v.jsxs)("div",{children:[(0,v.jsx)("h2",{className:"text-2xl font-bold",children:"Update Task History"}),(0,v.jsx)("p",{className:"text-white/90 text-sm",children:"Add progress updates and track changes"})]})]}),(0,v.jsx)("button",{onClick:()=>t(!1),className:"p-3 hover:bg-white/20 rounded-full transition-all duration-200 group","aria-label":"Close",type:"button",children:(0,v.jsx)(L,{className:"w-6 h-6 group-hover:rotate-90 transition-transform duration-200"})})]})]}),(0,v.jsx)("div",{className:"overflow-y-auto flex-grow p-8",children:(0,v.jsxs)("div",{className:"space-y-8",children:[(0,v.jsxs)("div",{className:"space-y-6",children:[(0,v.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,v.jsx)("div",{className:"w-2 h-8 rounded-full ".concat("dark"===d?"bg-blue-500":"bg-blue-600")}),(0,v.jsx)("h3",{className:"text-lg font-semibold ".concat("dark"===d?"text-white":"text-gray-900"),children:"Update Information"})]}),(0,v.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c("Changes","changes","text",!0,"e.g., Status: IN_PROGRESS \u2192 COMPLETED"),c("Note","note","text",!1,"Add a descriptive note")]}),c("Related Links","relatedLinks","text",!1,"https://example.com, https://another.com"),o===n&&c("Remark","remark","text",!1,"Add a remark")]}),(0,v.jsxs)("div",{className:"space-y-6",children:[(0,v.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,v.jsx)("div",{className:"w-2 h-8 rounded-full ".concat("dark"===d?"bg-orange-500":"bg-orange-600")}),(0,v.jsx)("h3",{className:"text-lg font-semibold ".concat("dark"===d?"text-white":"text-gray-900"),children:"File Attachments"})]}),(0,v.jsxs)("div",{className:"space-y-4",children:[(0,v.jsx)("label",{className:"block text-sm font-semibold ".concat("dark"===d?"text-gray-300":"text-gray-700"),children:"Upload Files (Max 5)"}),(0,v.jsxs)("div",{className:"relative border-2 border-dashed rounded-xl transition-all duration-300 cursor-pointer\n                                    ".concat("dark"===d?"border-gray-600 bg-gray-800 hover:border-blue-400 hover:bg-blue-900/20":"border-gray-300 bg-gray-50 hover:border-blue-400 hover:bg-blue-50"),children:[(0,v.jsx)("input",{type:"file",name:"files",multiple:!0,onChange:l,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",accept:"*/*"}),(0,v.jsxs)("div",{className:"px-6 py-8 text-center",children:[(0,v.jsx)(g,{className:"mx-auto h-12 w-12 mb-4 ".concat("dark"===d?"text-gray-500":"text-gray-400")}),(0,v.jsxs)("p",{className:"text-sm font-medium mb-1 ".concat("dark"===d?"text-gray-300":"text-gray-700"),children:["Drop your files here, or ",(0,v.jsx)("span",{className:"text-blue-600",children:"browse"})]}),(0,v.jsx)("p",{className:"text-xs ".concat("text-gray-500"),children:"Any files (Max 5 files)"})]})]}),r.relatedFileLinks.length>0&&(0,v.jsxs)("div",{className:"space-y-3",children:[(0,v.jsx)("p",{className:"text-sm font-semibold ".concat("dark"===d?"text-gray-300":"text-gray-700"),children:"Selected files:"}),(0,v.jsx)("div",{className:"space-y-2",children:r.relatedFileLinks.map((e,t)=>(0,v.jsx)("div",{className:"flex justify-between items-center p-4 rounded-xl border transition-all duration-300 ".concat("dark"===d?"bg-gray-700 border-gray-600":"bg-gray-100 border-gray-200"),children:(0,v.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,v.jsx)("div",{className:"p-2 rounded ".concat("dark"===d?"bg-gray-600":"bg-gray-200"),children:(0,v.jsx)(T.A,{className:"w-4 h-4 ".concat("dark"===d?"text-gray-400":"text-gray-500")})}),(0,v.jsx)("span",{className:"text-sm truncate ".concat("dark"===d?"text-gray-300":"text-gray-800"),title:e.name,children:e.name})]})},t))})]})]})]})]})}),(0,v.jsxs)("div",{className:"px-8 py-6 border-t flex justify-end space-x-4 flex-shrink-0 ".concat("dark"===d?"bg-gray-700 border-gray-600":"bg-gray-50 border-gray-200"),children:[(0,v.jsx)("button",{type:"button",onClick:()=>t(!1),className:"px-8 py-3 border-2 rounded-xl font-semibold transition-all duration-200 focus:ring-4 focus:ring-gray-500/20 ".concat("dark"===d?"border-gray-600 text-gray-300 hover:bg-gray-600 hover:border-gray-500":"border-gray-300 text-gray-700 hover:bg-gray-100 hover:border-gray-400"),children:"Cancel"}),(0,v.jsxs)("button",{type:"submit",className:"px-10 py-3 bg-gradient-to-r from-blue-500 to-indigo-600 text-white font-bold rounded-xl\n                                hover:shadow-lg transform hover:scale-105 transition-all duration-200 \n                                focus:ring-4 focus:ring-blue-500/30 flex items-center space-x-2",children:[(0,v.jsx)(g,{className:"w-5 h-5"}),(0,v.jsx)("span",{children:"Update Changes"})]})]})]})})},q=()=>{var e,t,a,o;const{projectid:d,id:c}=(0,l.g)(),i=e=>{try{return atob(e)}catch(X){return console.error("Error decoding ID:",X),null}},x=i(d),g=i(c),b=(0,l.Zp)(),[k,N]=(0,r.useState)(""),[w,A]=(0,r.useState)(!1),{userData:D,theme:C}=(0,r.useContext)(f.ob),[S,I]=(0,r.useState)({changes:"",note:"",relatedLinks:"",relatedFileLinks:[],remark:""}),[P,q]=(0,r.useState)(null),[K,G]=(0,r.useState)([]),[V,W]=(0,r.useState)(!0),[X,Z]=(0,r.useState)(null),[J,Q]=(0,r.useState)({show:!1,message:""}),[$,ee]=(0,r.useState)({show:!1,message:""}),[te,ae]=(0,r.useState)({show:!1,historyId:null}),[re,se]=(0,r.useState)(null),[le,ne]=(0,r.useState)(null),oe=e=>{if(e.response){if(e.response.data){if("string"===typeof e.response.data.message)return e.response.data.message;if("string"===typeof e.response.data.error)return e.response.data.error;if("string"===typeof e.response.data)return e.response.data}return"Error: ".concat(e.response.status," - ").concat(e.response.statusText)}return e.request?"No response from the server. Please check your network connection.":e.message||"An unknown error occurred."},de=async()=>{if(x&&g){W(!0),Z(null);try{var e;const t=await j.bI.get("/task/".concat(x,"/").concat(g));console.log("Task Data Received:",t.data),q(t.data),N(null===(e=t.data)||void 0===e?void 0:e.createdBy);const a=await j.bI.get("/".concat(x,"/").concat(g,"/updatetasks"));console.log("All task history responses:",a.data),G(a.data)}catch(r){var t,a;console.error("Error in fetchTaskData:",(null===(t=r.response)||void 0===t?void 0:t.data)||r.message),404===(null===(a=r.response)||void 0===a?void 0:a.status)?(Z("Task not found. Please check the ID."),q(null)):Z(oe(r)||"Failed to fetch critical task details.")}finally{W(!1)}}};(0,r.useEffect)(()=>{de()},[x,g]);const ce=()=>{se(null),ne(null)},ie=async()=>{try{if(!le||!le.id)return void ee({show:!0,message:"Cannot save. Invalid history item."});const e=null===D||void 0===D?void 0:D.employeeId;if(!e||(null===D||void 0===D?void 0:D.employeeId)!==k)return void ee({show:!0,message:"Only the task assigner can add remarks."});const t=(le.relatedFileLinks||[]).map(e=>{try{return new URL(e).pathname.substring(1)}catch(t){return e}}),a=(0,s.A)((0,s.A)({},le),{},{reviewedBy:e,updatedDate:(new Date).toISOString(),relatedLinks:Array.isArray(le.relatedLinks)?le.relatedLinks:le.relatedLinks?[le.relatedLinks]:[],relatedFileLinks:t});await j.bI.put("/".concat(e,"/status/").concat(x,"/").concat(g),a,{headers:{"Content-Type":"application/json"}}),ce(),Q({show:!0,message:"Remark updated successfully!"}),de()}catch(X){console.error("Error updating status:",X);const t=oe(X);ee({show:!0,message:"An error occurred while saving: ".concat(t)})}},xe=e=>{const{name:t,value:a}=e.target;ne(e=>(0,s.A)((0,s.A)({},e),{},{[t]:a}))};if(V)return(0,v.jsx)("div",{className:"flex justify-center items-center h-screen ".concat("dark"===C?"bg-gray-900":"bg-gray-100"),children:(0,v.jsx)("div",{className:"text-xl font-semibold ".concat("dark"===C?"text-gray-300":"text-gray-600"),children:"Loading Task Details..."})});if(X)return(0,v.jsx)("div",{className:"flex justify-center items-center h-screen ".concat("dark"===C?"bg-gray-900":"bg-red-50"),children:(0,v.jsx)("div",{className:"text-xl font-semibold p-8 text-center ".concat("dark"===C?"text-red-400":"text-red-600"),children:X})});if(!P)return(0,v.jsx)("div",{className:"flex justify-center items-center h-screen text-2xl font-semibold ".concat("dark"===C?"bg-gray-900 text-red-400":"bg-gradient-to-br from-gray-50 to-blue-100 text-red-600"),children:"Task not found. Please check the ID."});const ge="COMPLETED"===P.status.toUpperCase(),me=(null===D||void 0===D?void 0:D.employeeId)===k;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{className:"min-h-screen p-0 flex items-start justify-center font-sans ".concat("dark"===C?"bg-gray-900":"bg-gradient-to-br from-slate-50 to-gray-100"),children:(0,v.jsxs)("div",{className:"w-full max-w-full pt-6 pb-6 sm:pt-8 sm:pb-8 md:pt-10 md:pb-10 px-0 rounded-3xl shadow-2xl border ".concat("dark"===C?"bg-gray-800 border-gray-700":"bg-white border-gray-100"),children:[(0,v.jsxs)("div",{className:"flex items-center justify-between  pb-4 border-b ".concat("dark"===C?"border-gray-700":"border-gray-200"),children:[(0,v.jsx)("button",{onClick:()=>b(-1),className:"p-2 rounded-full transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-opacity-75 ".concat("dark"===C?"text-gray-400 hover:bg-gray-700 hover:text-indigo-400":"text-gray-600 hover:bg-gray-100 hover:text-indigo-700"),"aria-label":"Go back to tasks list",children:(0,v.jsx)(p.A,{className:"h-7 w-7"})}),(0,v.jsx)("h2",{className:"text-3xl sm:text-4xl font-extrabold flex-grow text-center ".concat("dark"===C?"text-white":"text-gray-900"),children:"Task Details"})]}),(0,v.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,v.jsxs)("div",{className:"p-6 rounded-2xl border ".concat("dark"===C?"bg-gray-700 border-gray-600":"bg-gray-50 border-gray-200"),children:[(0,v.jsxs)("div",{className:"mb-8 space-y-6",children:[(0,v.jsx)("h3",{className:"text-2xl sm:text-3xl font-bold leading-tight text-center ".concat("dark"===C?"text-white":"text-slate-800"),children:P.title}),(0,v.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,v.jsxs)("div",{className:"flex flex-col space-y-2 ".concat("dark"===C?"text-gray-300":"text-gray-700"),children:[(0,v.jsxs)("div",{className:"flex items-center",children:[(0,v.jsx)(y,{className:"h-4 w-4 text-indigo-500 mr-2 flex-shrink-0"}),(0,v.jsx)("span",{className:"font-semibold text-sm sm:text-base",children:"Priority:"})]}),(0,v.jsx)("span",{className:"text-xs sm:text-sm px-3 py-2 rounded-lg border shadow-sm ".concat((e=>{switch(e?e.toUpperCase():""){case"HIGH":return"bg-red-100 text-red-800 border-red-200";case"MEDIUM":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"LOW":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}})(P.priority)),children:P.priority})]}),(0,v.jsxs)("div",{className:"flex flex-col space-y-2 ".concat("dark"===C?"text-gray-300":"text-gray-700"),children:[(0,v.jsxs)("div",{className:"flex items-center",children:[(0,v.jsx)(E.A,{className:"h-4 w-4 text-indigo-500 mr-2 flex-shrink-0"}),(0,v.jsx)("span",{className:"font-semibold text-sm sm:text-base",children:"Status:"})]}),(0,v.jsx)("span",{className:"text-xs sm:text-sm px-3 py-2 rounded-lg border shadow-sm ".concat((e=>{switch(e?e.toUpperCase().replace(" ","_"):""){case"IN_PROGRESS":return"bg-purple-100 text-purple-800 border-purple-200";case"PENDING":return"bg-orange-100 text-orange-800 border-orange-200";case"COMPLETED":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}})(P.status)),children:P.status})]}),(0,v.jsxs)("div",{className:"flex flex-col space-y-2 ".concat("dark"===C?"text-gray-300":"text-gray-700"),children:[(0,v.jsxs)("div",{className:"flex items-center",children:[(0,v.jsx)(M,{className:"h-4 w-4 text-indigo-500 mr-2 flex-shrink-0"}),(0,v.jsx)("span",{className:"font-semibold text-sm sm:text-base",children:"Due Date:"})]}),(0,v.jsx)("div",{className:"text-xs sm:text-sm p-2 sm:p-3 rounded-lg border shadow-sm ".concat("dark"===C?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-200 text-black"),children:P.dueDate})]}),(0,v.jsxs)("div",{className:"flex flex-col space-y-2 ".concat("dark"===C?"text-gray-300":"text-gray-700"),children:[(0,v.jsxs)("div",{className:"flex items-center",children:[(0,v.jsx)(M,{className:"h-4 w-4 text-indigo-500 mr-2 flex-shrink-0"}),(0,v.jsx)("span",{className:"font-semibold text-sm sm:text-base",children:"Created On:"})]}),(0,v.jsx)("div",{className:"text-xs sm:text-sm p-2 sm:p-3 rounded-lg border shadow-sm ".concat("dark"===C?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-200 text-black"),children:P.createdDate})]}),(0,v.jsxs)("div",{className:"flex flex-col space-y-2 ".concat("dark"===C?"text-gray-300":"text-gray-700"),children:[(0,v.jsxs)("div",{className:"flex items-center",children:[(0,v.jsx)(F,{className:"h-4 w-4 text-indigo-500 mr-2 flex-shrink-0"}),(0,v.jsx)("span",{className:"font-semibold text-sm sm:text-base",children:"Created By:"})]}),(0,v.jsx)("div",{className:"text-xs sm:text-sm p-2 sm:p-3 rounded-lg border shadow-sm ".concat("dark"===C?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-200 text-black"),children:P.createdBy})]}),(0,v.jsxs)("div",{className:"flex flex-col space-y-2 ".concat("dark"===C?"text-gray-300":"text-gray-700"),children:[(0,v.jsxs)("div",{className:"flex items-center",children:[(0,v.jsx)(F,{className:"h-4 w-4 text-indigo-500 mr-2 flex-shrink-0"}),(0,v.jsx)("span",{className:"font-semibold text-sm sm:text-base",children:"Assigned To:"})]}),(0,v.jsx)("div",{className:"text-xs sm:text-sm p-2 sm:p-3 rounded-lg border shadow-sm ".concat("dark"===C?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-200 text-black"),children:P.assignedTo})]}),P.completedDate&&(0,v.jsxs)("div",{className:"flex flex-col space-y-2 ".concat("dark"===C?"text-gray-300":"text-gray-700"),children:[(0,v.jsxs)("div",{className:"flex items-center",children:[(0,v.jsx)(n.A,{className:"h-4 w-4 text-green-600 mr-2 flex-shrink-0"}),(0,v.jsx)("span",{className:"font-semibold text-sm sm:text-base",children:"Completed On:"})]}),(0,v.jsx)("div",{className:"text-xs sm:text-sm p-2 sm:p-3 rounded-lg border shadow-sm ".concat("dark"===C?"bg-green-900/30 border-green-700 text-green-300":"bg-green-50 border-green-200 text-green-800"),children:P.completedDate})]}),P.rating&&(0,v.jsxs)("div",{className:"flex flex-col space-y-2 ".concat("dark"===C?"text-gray-300":"text-gray-700"),children:[(0,v.jsxs)("div",{className:"flex items-center",children:[(0,v.jsx)(_,{className:"h-4 w-4 text-yellow-500 mr-2 flex-shrink-0"}),(0,v.jsx)("span",{className:"font-semibold text-sm sm:text-base",children:"Rating:"})]}),(0,v.jsxs)("div",{className:"text-xs sm:text-sm p-2 sm:p-3 rounded-lg border shadow-sm ".concat("dark"===C?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-200 text-black"),children:[P.rating," / 10"]})]})]})]}),(0,v.jsxs)("div",{className:"mb-8",children:[(0,v.jsx)("h4",{className:"text-xl font-semibold mb-3 ".concat("dark"===C?"text-white":"text-gray-800"),children:"Description"}),(0,v.jsx)("div",{className:"p-5 rounded-lg border leading-relaxed shadow-sm ".concat("dark"===C?"bg-gray-600 border-gray-500 text-gray-300":"bg-white border-gray-200 text-gray-700"),children:P.description})]}),P.remark&&(0,v.jsxs)("div",{className:"mb-8",children:[(0,v.jsx)("h4",{className:"text-xl font-semibold mb-3 ".concat("dark"===C?"text-white":"text-gray-800"),children:"Remark"}),(0,v.jsxs)("div",{className:"p-5 rounded-lg border leading-relaxed shadow-sm ".concat("dark"===C?"bg-gray-600 border-gray-500 text-gray-300":"bg-gray-100 border-gray-200 text-gray-800"),children:[(0,v.jsx)(U,{className:"inline-block h-4 w-4 mr-2 ".concat("dark"===C?"text-gray-400":"text-gray-500")})," ",P.remark]})]}),P.completionNote&&(0,v.jsxs)("div",{className:"mb-8",children:[(0,v.jsx)("h4",{className:"text-xl font-semibold mb-3 ".concat("dark"===C?"text-white":"text-gray-800"),children:"Completion Note"}),(0,v.jsx)("div",{className:"p-5 rounded-lg border leading-relaxed shadow-sm ".concat("dark"===C?"bg-green-900/30 border-green-700 text-green-300":"bg-green-50 border-green-200 text-green-800"),children:P.completionNote})]}),((null===(e=P.relatedLinks)||void 0===e?void 0:e.length)>0||(null===(t=P.attachedFileLinks)||void 0===t?void 0:t.length)>0)&&(0,v.jsxs)("div",{className:"mb-8",children:[(0,v.jsx)("h4",{className:"text-xl font-semibold mb-3 ".concat("dark"===C?"text-white":"text-gray-800"),children:"Related Links & Files"}),(0,v.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(null===(a=P.relatedLinks)||void 0===a?void 0:a.length)>0&&(0,v.jsxs)("div",{className:"p-4 rounded-lg border shadow-sm ".concat("dark"===C?"bg-blue-900/30 border-blue-700":"bg-blue-50 border-blue-200"),children:[(0,v.jsxs)("h5",{className:"font-medium flex items-center mb-2 ".concat("dark"===C?"text-blue-300":"text-blue-800"),children:[(0,v.jsx)(O,{className:"h-4 w-4 mr-2"})," Related Links:"]}),(0,v.jsx)("ul",{className:"space-y-1",children:P.relatedLinks.map((e,t)=>(0,v.jsx)("li",{children:(0,v.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 hover:underline text-sm break-all",children:e})},t))})]}),(null===(o=P.attachedFileLinks)||void 0===o?void 0:o.length)>0&&(0,v.jsxs)("div",{className:"p-4 rounded-lg border shadow-sm ".concat("dark"===C?"bg-purple-900/30 border-purple-700":"bg-purple-50 border-purple-200"),children:[(0,v.jsxs)("h5",{className:"font-medium flex items-center mb-2 ".concat("dark"===C?"text-purple-300":"text-purple-800"),children:[(0,v.jsx)(T.A,{className:"h-4 w-4 mr-2"})," Attached Files:"]}),(0,v.jsx)("ul",{className:"space-y-1",children:P.attachedFileLinks.map((e,t)=>(0,v.jsx)("li",{children:(0,v.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"text-purple-600 hover:text-purple-800 hover:underline text-sm break-all",children:decodeURIComponent(e.split("/").pop().split("?")[0])})},t))})]})]})]})]}),(0,v.jsx)("div",{className:"p-6 rounded-2xl border ".concat("dark"===C?"bg-gray-700 border-gray-600":"bg-gray-50 border-gray-200"),children:(0,v.jsxs)("div",{className:"mb-8",children:[(0,v.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,v.jsx)("h4",{className:"text-xl font-semibold ".concat("dark"===C?"text-white":"text-gray-800"),children:"Update History"}),!ge&&!me&&(0,v.jsxs)("button",{onClick:()=>A(!0),className:"flex items-center justify-center font-semibold py-3 px-6 rounded-xl shadow-md focus:outline-none focus:ring-4 focus:ring-opacity-75 transition-all duration-200 ".concat("bg-indigo-600 text-white hover:bg-indigo-700 focus:ring-indigo-500"),children:[(0,v.jsx)(h,{className:"w-4 h-4 mr-2"}),"Create History"]})]}),(null===K||void 0===K?void 0:K.length)>0?(0,v.jsx)("div",{className:"overflow-x-auto rounded-lg border shadow-sm ".concat("dark"===C?"border-gray-600":"border-gray-200"),children:(0,v.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,v.jsx)("thead",{className:"dark"===C?"bg-gray-600":"bg-white",children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{scope:"col",className:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider ".concat("dark"===C?"text-gray-300":"text-gray-500"),children:"S.No"}),(0,v.jsx)("th",{scope:"col",className:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider ".concat("dark"===C?"text-gray-300":"text-gray-500"),children:"Updated Date"}),(0,v.jsx)("th",{scope:"col",className:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider ".concat("dark"===C?"text-gray-300":"text-gray-500"),children:"Changes"}),(0,v.jsx)("th",{scope:"col",className:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider ".concat("dark"===C?"text-gray-300":"text-gray-500"),children:"Note"}),(0,v.jsx)("th",{scope:"col",className:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider ".concat("dark"===C?"text-gray-300":"text-gray-500"),children:"Related Links"}),(0,v.jsx)("th",{scope:"col",className:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider ".concat("dark"===C?"text-gray-300":"text-gray-500"),children:"Related Files"}),(0,v.jsx)("th",{scope:"col",className:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider ".concat("dark"===C?"text-gray-300":"text-gray-500"),children:"Remarks"}),(0,v.jsx)("th",{scope:"col",className:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider ".concat("dark"===C?"text-gray-300":"text-gray-500"),children:"Reviewed By"}),(0,v.jsx)("th",{scope:"col",className:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider ".concat("dark"===C?"text-gray-300":"text-gray-500"),children:"Actions"})]})}),(0,v.jsx)("tbody",{className:"divide-y transition-colors duration-150 ".concat("dark"===C?"bg-gray-700 divide-gray-600":"bg-white divide-gray-200"),children:K.map((e,t)=>{return(0,v.jsxs)("tr",{className:"transition-colors duration-150 ".concat("dark"===C?"hover:bg-gray-600":"hover:bg-gray-50"),children:[(0,v.jsx)("td",{className:"px-4 py-3 text-sm border ".concat("dark"===C?"text-white border-gray-600":"text-gray-900 border-gray-300"),children:t+1}),(0,v.jsx)("td",{className:"px-4 py-3 text-sm border ".concat("dark"===C?"text-gray-300 border-gray-600":"text-gray-500 border-gray-300"),children:new Date(e.updatedDate).toLocaleString()}),(0,v.jsx)("td",{className:"px-4 py-3 text-sm border ".concat("dark"===C?"text-white border-gray-600":"text-gray-900 border-gray-300"),children:e.changes}),(0,v.jsx)("td",{className:"px-4 py-3 text-sm italic border ".concat("dark"===C?"text-gray-300 border-gray-600":"text-gray-500 border-gray-300"),children:e.note||"-"}),(0,v.jsx)("td",{className:"px-4 py-3 text-sm border ".concat("dark"===C?"text-white border-gray-600":"text-gray-900 border-gray-300"),children:(r=e.relatedLinks,r&&0!==r.length?(0,v.jsx)("ul",{className:"list-disc list-inside text-xs space-y-1",children:r.map((e,t)=>(0,v.jsx)("li",{children:(0,v.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 hover:underline",children:e})},t))}):"-")}),(0,v.jsx)("td",{className:"px-4 py-3 text-sm border ".concat("dark"===C?"text-white border-gray-600":"text-gray-900 border-gray-300"),children:(a=e.relatedFileLinks,a&&0!==a.length?(0,v.jsx)("ul",{className:"list-disc list-inside text-xs space-y-1",children:a.map((e,t)=>(0,v.jsx)("li",{children:(0,v.jsxs)("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"text-purple-600 hover:text-purple-800 hover:underline flex items-center",children:[(0,v.jsx)(T.A,{size:14,className:"mr-1"}),decodeURIComponent(e.split("/").pop().split("?")[0])]})},t))}):"-")}),(0,v.jsx)("td",{className:"px-4 py-3 text-sm italic border ".concat("dark"===C?"text-gray-300 border-gray-600":"text-gray-500 border-gray-300"),children:re===e.id?(0,v.jsx)("input",{type:"text",name:"remark",value:(null===le||void 0===le?void 0:le.remark)||"",onChange:xe,className:"w-full p-1 border rounded ".concat("dark"===C?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300 text-black")}):e.remark||"-"}),(0,v.jsx)("td",{className:"px-4 py-3 text-sm border ".concat("dark"===C?"text-white border-gray-600":"text-gray-900 border-gray-300"),children:e.reviewedBy||"-"}),(0,v.jsx)("td",{className:"px-4 py-3 text-sm border ".concat("dark"===C?"text-white border-gray-600":"text-gray-900 border-gray-300"),children:(0,v.jsxs)("div",{className:"flex gap-2",children:[me&&(re===e.id?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("button",{onClick:ie,className:"text-green-600 hover:text-green-800","aria-label":"Save",children:(0,v.jsx)(R,{size:16})}),(0,v.jsx)("button",{onClick:ce,className:"text-red-600 hover:text-red-800","aria-label":"Cancel",children:(0,v.jsx)(L,{size:16})})]}):(0,v.jsx)("button",{onClick:()=>{return se((t=e).id),void ne(t);var t},className:"text-blue-600 hover:text-blue-800","aria-label":"Edit",children:(0,v.jsx)(m.A,{size:16})})),(0,v.jsx)("button",{onClick:()=>{return t=e.id,void ae({show:!0,historyId:t});var t},className:"text-red-600 hover:text-red-800","aria-label":"Delete",children:(0,v.jsx)(u.A,{size:16})})]})})]},e.id);var a,r})})]})}):(0,v.jsx)("div",{className:"text-center py-4 ".concat("dark"===C?"text-gray-400":"text-gray-500"),children:"No history recorded for this task yet."})]})})]})]})}),w&&(0,v.jsx)(Y,{setShowUpdateHistoryPopup:A,handleUpdateHistorySubmit:async e=>{if(e.preventDefault(),!S.changes)return void ee({show:!0,message:"The 'Changes' field is required."});const t=null===D||void 0===D?void 0:D.employeeId;if(!t)return void ee({show:!0,message:"User ID not found. Please log in again."});const a=t===k,r=new FormData,s={id:Date.now(),changes:S.changes,note:S.note||null,relatedLinks:S.relatedLinks.split(",").map(e=>e.trim()).filter(e=>e),reviewedBy:a?t:null,remark:a?S.remark:null,updatedDate:(new Date).toISOString()};if(r.append("taskUpdateDTO",new Blob([JSON.stringify(s)],{type:"application/json"})),S.relatedFileLinks&&S.relatedFileLinks.length>0)for(const l of S.relatedFileLinks)r.append("relatedFileLinks",l);try{const e=await j.bI.post("/history/".concat(x,"/").concat(g),r);console.log("Create History Response:",e.data),A(!1),I({changes:"",note:"",relatedLinks:"",relatedFileLinks:[],remark:""}),Q({show:!0,message:"Task history created successfully!"}),de()}catch(X){console.error("Error creating history:",X);const t=oe(X);ee({show:!0,message:"Failed to create history: ".concat(t)})}},updateHistoryData:S,handleUpdateHistoryInputChange:e=>{const{name:t,value:a}=e.target;I(e=>(0,s.A)((0,s.A)({},e),{},{[t]:a}))},handleUpdateHistoryFileChange:e=>{const t=Array.from(e.target.files);let a=[...S.relatedFileLinks,...t];a.length>5&&(ee({show:!0,message:"You can only upload a maximum of 5 files."}),a=a.slice(0,5)),I(e=>(0,s.A)((0,s.A)({},e),{},{relatedFileLinks:a}))},assignedBy:k,employeeId:null===D||void 0===D?void 0:D.employeeId,theme:C}),$.show&&(0,v.jsx)(B,{message:$.message,onClose:()=>ee({show:!1,message:""}),theme:C}),J.show&&(0,v.jsx)(H,{message:J.message,onClose:()=>Q({show:!1,message:""}),theme:C}),te.show&&(0,v.jsx)(z,{onConfirm:async()=>{const e=te.historyId;ae({show:!1,historyId:null});try{if(!(null===D||void 0===D?void 0:D.employeeId))return void ee({show:!0,message:"User ID not found. Please log in again."});const t=await j.bI.delete("/".concat(x,"/").concat(g,"/").concat(e,"/delete"));200===t.status||204===t.status?(Q({show:!0,message:"History entry deleted successfully."}),de()):ee({show:!0,message:"Failed to delete history entry. Server responded with status ".concat(t.status,".")})}catch(X){console.error("Error deleting history:",X);const t=oe(X);ee({show:!0,message:"An error occurred while deleting: ".concat(t)})}},onCancel:()=>ae({show:!1,historyId:null}),theme:C}),(0,v.jsx)("style",{jsx:!0,children:"\n                @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }\n                @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }\n                @keyframes slideIn { from { transform: translateX(-10px); opacity: 0; } to { transform: translateX(0); opacity: 1; } }\n                .animate-fadeIn { animation: fadeIn 0.3s ease-out; }\n                .animate-slideUp { animation: slideUp 0.4s ease-out; }\n                .animate-slideIn { animation: slideIn 0.3s ease-out; }\n            "})]})},K=()=>(0,v.jsxs)(l.BV,{children:[(0,v.jsx)(l.qh,{path:"/",element:(0,v.jsx)(I,{})}),(0,v.jsx)(l.qh,{path:"taskview/:projectid/:id",element:(0,v.jsx)(q,{})})]})},2054:(e,t,a)=>{a.d(t,{A:()=>r});const r=(0,a(7784).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},5088:(e,t,a)=>{a.d(t,{A:()=>r});const r=(0,a(7784).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},6533:(e,t,a)=>{a.d(t,{A:()=>r});const r=(0,a(7784).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])}}]);
//# sourceMappingURL=945.b649ddd3.chunk.js.map