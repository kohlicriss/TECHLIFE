"use strict";(self.webpackChunktechlife=self.webpackChunktechlife||[]).push([[361],{6361:(e,t,a)=>{a.r(t),a.d(t,{default:()=>k});var r=a(9379),o=a(5043),n=a(7234),l=a(9722),s=a(6396),d=a(5239),c=a.n(d),i=a(5439),g=a(579);const y="http://localhost:8087/api/payroll",b=localStorage.getItem("accessToken"),m=async e=>{const t=await fetch("".concat(y,"/create"),{method:"POST",headers:{Authorization:"Bearer ".concat(b),"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to add employee")}return t.json()},x=async e=>{const t=await fetch("".concat(y,"/payroll/calculate"),{method:"POST",headers:{Authorization:"Bearer ".concat(b),"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to calculate payroll");return t.json()},p=async(e,t,a)=>(await l.A.get("".concat(y,"/employees/").concat(e,"/salary/").concat(t,"/").concat(a),{headers:{Authorization:"Bearer ".concat(b)}})).data.data,u=async(e,t)=>(await l.A.put("".concat(y,"/admin/payroll/").concat(e,"/update"),t,{headers:{Authorization:"Bearer ".concat(b)}})).data,h=async()=>{var e;const t=null===(e=(await l.A.get("".concat(y,"/employee"),{headers:{Authorization:"Bearer ".concat(b)}})).data)||void 0===e?void 0:e.data;return Array.isArray(t)?t:[]},f=e=>({January:1,February:2,March:3,April:4,May:5,June:6,July:7,August:8,September:9,October:10,November:11,December:12}[e]),N=e=>{var t,a,r,o,n;if(!e)return v();console.log("Transform function input:",e);const l=void 0!==e.payrollId?e:null,s=e.employee||e,d=s.annualSalary||0,c=d?1e5*d/12:0,i=(null===l||void 0===l?void 0:l.grossEarnings)||(c>0?c:0),g=(null===l||void 0===l?void 0:l.totalDeductions)||(c>0?Math.round(.12*c)+200:0),y=(null===l||void 0===l?void 0:l.netSalary)||i-g,b=(null===l||void 0===l?void 0:l.bonusAmount)||0,m=(null===l||void 0===l?void 0:l.hikePercentage)||0;return{id:s.id||s.employeeId,employeeId:s.employeeId,employeeName:s.empName||s.employeeName,email:s.email||"",phoneNumber:s.phoneNumber||"",annualSalary:d,accountNumber:s.accountNumber||"",ifsccode:s.IFSCcode||s.ifsccode||"",bankName:s.bankName||"",pfnum:s.PFnum||s.pfnum||"",panNumber:s.panNumber||"",aadharNumber:s.aadharNumber||"",uanNumber:s.uanNumber||"",department:s.department||"",designation:s.designation||"",bankAccountName:s.empName||s.employeeName,phoneNo:s.phoneNumber||"",panNo:s.panNumber||"",standardDays:Number(null===l||void 0===l?void 0:l.standardDays)||Number(null===l||void 0===l?void 0:l.totalWorkingDays)||Number(null===l||void 0===l?void 0:l.workingDays)||Number(null===l||void 0===l||null===(t=l.attendance)||void 0===t?void 0:t.standardDays)||26,payableDays:Number(null===l||void 0===l?void 0:l.payableDays)||Number(null===l||void 0===l?void 0:l.paidDays)||Number(null===l||void 0===l||null===(a=l.attendance)||void 0===a?void 0:a.payableDays)||26,lossOfPayDays:Number(null===l||void 0===l?void 0:l.lossOfPayDays)||Number(null===l||void 0===l?void 0:l.lopDays)||Number(null===l||void 0===l||null===(r=l.attendance)||void 0===r?void 0:r.lossOfPayDays)||0,lopReversalDays:Number(null===l||void 0===l?void 0:l.lopReversalDays)||Number(null===l||void 0===l||null===(o=l.attendance)||void 0===o?void 0:o.lopReversalDays)||0,arrearDays:Number(null===l||void 0===l?void 0:l.arrearDays)||Number(null===l||void 0===l||null===(n=l.attendance)||void 0===n?void 0:n.arrearDays)||0,bonus:b,hike:m,earnings:l?[{name:"BASIC",monthlyRate:l.basicSalary||0,currentMonth:l.basicSalary||0,arrear:0,total:l.basicSalary||0},{name:"HRA",monthlyRate:l.hraAmount||0,currentMonth:l.hraAmount||0,arrear:0,total:l.hraAmount||0},{name:"CONVEYANCE",monthlyRate:l.conveyanceAllowance||0,currentMonth:l.conveyanceAllowance||0,arrear:0,total:l.conveyanceAllowance||0},{name:"MEDICAL",monthlyRate:l.medicalAllowance||0,currentMonth:l.medicalAllowance||0,arrear:0,total:l.medicalAllowance||0},{name:"SPECIAL ALLOWANCE",monthlyRate:l.specialAllowance||0,currentMonth:l.specialAllowance||0,arrear:0,total:l.specialAllowance||0}]:c>0?[{name:"BASIC",monthlyRate:Math.round(.5*c),currentMonth:Math.round(.5*c),arrear:0,total:Math.round(.5*c)},{name:"HRA",monthlyRate:Math.round(.4*c),currentMonth:Math.round(.4*c),arrear:0,total:Math.round(.4*c)},{name:"SPECIAL ALLOWANCE",monthlyRate:Math.round(.1*c),currentMonth:Math.round(.1*c),arrear:0,total:Math.round(.1*c)}]:[],deductions:l?[{name:"PROVIDENT FUND",amount:l.providentFund||0},{name:"PROFESSIONAL TAX",amount:l.professionalTax||0},{name:"INCOME TAX",amount:l.incomeTax||0}]:c>0?[{name:"PROVIDENT FUND",amount:Math.round(.12*c)},{name:"PROFESSIONAL TAX",amount:200}]:[],grossEarnings:i,totalDeductions:g,netSalary:y,payrollId:null===l||void 0===l?void 0:l.payrollId}},v=()=>({id:"unknown",employeeId:"unknown",employeeName:"Unknown Employee",email:"",phoneNumber:"",annualSalary:0,accountNumber:"",ifsccode:"",bankName:"",pfnum:"",panNumber:"",aadharNumber:"",uanNumber:"",department:"",designation:"",bankAccountName:"Unknown Employee",phoneNo:"",panNo:"",pfNo:"",standardDays:26,payableDays:26,lossOfPayDays:0,lopReversalDays:0,arrearDays:0,bonus:0,hike:0,earnings:[],deductions:[],grossEarnings:0,totalDeductions:0,netSalary:0}),w=()=>{const{theme:e}=(0,o.useContext)(n.ob),t="dark"===e;return(0,g.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 flex items-center justify-center p-6 ".concat(t?"bg-gray-800":"bg-white"),children:(0,g.jsxs)("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8 text-center",children:[(0,g.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,g.jsx)("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,g.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Access Denied"}),(0,g.jsx)("p",{className:"text-gray-600 mb-6",children:"You don't have permission to access the payroll management system. This page is restricted to ADMIN users only."}),(0,g.jsx)("button",{onClick:()=>window.history.back(),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Go Back"})]})})},j=()=>(0,g.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 flex items-center justify-center",children:(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,g.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading payroll system..."})]})}),A=e=>{let{isAdding:t,newEmployee:a,onEmployeeChange:r,onSave:l,onCancel:s,loading:d}=e;const{theme:c}=(0,o.useContext)(n.ob),i="dark"===c;return t?(0,g.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:(0,g.jsxs)("div",{className:"rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto ".concat(i?"bg-gray-800":"bg-white"),children:[(0,g.jsxs)("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white p-6",children:[(0,g.jsx)("h2",{className:"text-2xl font-bold",children:"Add New Employee"}),(0,g.jsx)("p",{className:"opacity-90",children:"Fill in the employee details below"})]}),(0,g.jsxs)("div",{className:"p-6",children:[(0,g.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,g.jsx)("div",{className:"md:col-span-2",children:(0,g.jsx)("h3",{className:"text-lg font-semibold mb-4 border-l-4 border-green-500 pl-3 ".concat(i?"text-white":"text-gray-800"),children:"Personal Information"})}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(i?"text-gray-300":"text-gray-700"),children:"Employee ID *"}),(0,g.jsx)("input",{type:"text",value:a.employeeId,onChange:e=>r("employeeId",e.target.value),className:"w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-colors ".concat(i?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-800"),placeholder:"e.g., ACS00000001"})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(i?"text-gray-300":"text-gray-700"),children:"Employee Name *"}),(0,g.jsx)("input",{type:"text",value:a.employeeName,onChange:e=>r("employeeName",e.target.value),className:"w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-colors ".concat(i?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-800"),placeholder:"Full name"})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(i?"text-gray-300":"text-gray-700"),children:"Email *"}),(0,g.jsx)("input",{type:"email",value:a.email,onChange:e=>r("email",e.target.value),className:"w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-colors ".concat(i?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-800"),placeholder:"email@company.com"})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(i?"text-gray-300":"text-gray-700"),children:"Phone Number"}),(0,g.jsx)("input",{type:"tel",value:a.phoneNumber,onChange:e=>r("phoneNumber",e.target.value),className:"w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-colors ".concat(i?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-800"),placeholder:"9876543210"})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(i?"text-gray-300":"text-gray-700"),children:"Designation"}),(0,g.jsx)("input",{type:"text",value:a.designation,onChange:e=>r("designation",e.target.value),className:"w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-colors ".concat(i?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-800"),placeholder:"e.g., Software Engineer"})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(i?"text-gray-300":"text-gray-700"),children:"Department"}),(0,g.jsx)("input",{type:"text",value:a.department,onChange:e=>r("department",e.target.value),className:"w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-colors ".concat(i?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-800"),placeholder:"e.g., Engineering"})]}),(0,g.jsx)("div",{className:"md:col-span-2",children:(0,g.jsx)("h3",{className:"text-lg font-semibold mb-4 border-l-4 border-green-500 pl-3 ".concat(i?"text-white":"text-gray-800"),children:"Salary Information"})}),(0,g.jsxs)("div",{className:"md:col-span-2",children:[(0,g.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(i?"text-gray-300":"text-gray-700"),children:"Annual Salary (LPA)"}),(0,g.jsx)("input",{type:"number",value:a.annualSalary,onChange:e=>r("annualSalary",""===e.target.value?"":Number(e.target.value)),className:"w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-colors ".concat(i?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-800"),placeholder:"6.0",step:"0.1",min:"0"})]}),(0,g.jsx)("div",{className:"md:col-span-2",children:(0,g.jsx)("h3",{className:"text-lg font-semibold mb-4 border-l-4 border-green-500 pl-3 ".concat(i?"text-white":"text-gray-800"),children:"Bank Details"})}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(i?"text-gray-300":"text-gray-700"),children:"Account Number"}),(0,g.jsx)("input",{type:"text",value:a.accountNumber,onChange:e=>r("accountNumber",e.target.value),className:"w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-colors ".concat(i?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-800"),placeholder:"9861376290"})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(i?"text-gray-300":"text-gray-700"),children:"IFSC Code"}),(0,g.jsx)("input",{type:"text",value:a.ifsccode,onChange:e=>r("ifsccode",e.target.value),className:"w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-colors ".concat(i?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-800"),placeholder:"SBIN0001234"})]}),(0,g.jsxs)("div",{className:"md:col-span-2",children:[(0,g.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(i?"text-gray-300":"text-gray-700"),children:"Bank Name"}),(0,g.jsx)("input",{type:"text",value:a.bankName,onChange:e=>r("bankName",e.target.value),className:"w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-colors ".concat(i?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-800"),placeholder:"State Bank of India"})]}),(0,g.jsx)("div",{className:"md:col-span-2",children:(0,g.jsx)("h3",{className:"text-lg font-semibold mb-4 border-l-4 border-green-500 pl-3 ".concat(i?"text-white":"text-gray-800"),children:"Government Identifiers"})}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(i?"text-gray-300":"text-gray-700"),children:"PF Number"}),(0,g.jsx)("input",{type:"text",value:a.pfnum,onChange:e=>r("pfnum",e.target.value),className:"w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-colors ".concat(i?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-800"),placeholder:"PF123456"})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(i?"text-gray-300":"text-gray-700"),children:"PAN Number"}),(0,g.jsx)("input",{type:"text",value:a.panNumber,onChange:e=>r("panNumber",e.target.value),className:"w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-colors ".concat(i?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-800"),placeholder:"ABCDE1234F"})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(i?"text-gray-300":"text-gray-700"),children:"Aadhar Number"}),(0,g.jsx)("input",{type:"text",value:a.aadharNumber,onChange:e=>r("aadharNumber",e.target.value),className:"w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-colors ".concat(i?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-800"),placeholder:"123412341234"})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(i?"text-gray-300":"text-gray-700"),children:"UAN Number"}),(0,g.jsx)("input",{type:"text",value:a.uanNumber,onChange:e=>r("uanNumber",e.target.value),className:"w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-colors ".concat(i?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-800"),placeholder:"UAN123456789"})]})]}),(0,g.jsxs)("div",{className:"flex gap-4 justify-end pt-6 mt-6 border-t ".concat(i?"border-gray-700":"border-gray-200"),children:[(0,g.jsx)("button",{onClick:s,disabled:d,className:"px-6 py-2 border rounded-lg transition-colors font-medium disabled:opacity-50 ".concat(i?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"),children:"Cancel"}),(0,g.jsx)("button",{onClick:l,disabled:d,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium disabled:opacity-50 flex items-center gap-2",children:d?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Adding..."]}):"Add Employee"})]})]})]})}):null},D=e=>{let{editingEmployee:t,onInputChange:a,onSaveEdit:r,onCancelEdit:l,loading:s}=e;const{theme:d}=(0,o.useContext)(n.ob),c="dark"===d;return t?(0,g.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center p-4 z-50",children:(0,g.jsxs)("div",{className:"rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto ".concat(c?"bg-gray-800":"bg-white"),children:[(0,g.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6",children:[(0,g.jsxs)("h2",{className:"text-2xl font-bold",children:["Edit Employee - ",t.employeeName]}),(0,g.jsx)("p",{className:"opacity-90",children:"Update employee details, bonus, and hike information"})]}),(0,g.jsxs)("div",{className:"p-6",children:[(0,g.jsxs)("div",{className:"mb-6",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold mb-4 ".concat(c?"text-white":"text-gray-800"),children:"Personal Information"}),(0,g.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(c?"text-gray-300":"text-gray-700"),children:"Employee Name"}),(0,g.jsx)("input",{type:"text",value:t.employeeName,onChange:e=>a("employeeName",e.target.value),className:"w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ".concat(c?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800")})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(c?"text-gray-300":"text-gray-700"),children:"Employee ID"}),(0,g.jsx)("input",{type:"text",value:t.employeeId,readOnly:!0,className:"w-full border rounded-lg px-4 py-2 ".concat(c?"bg-gray-600 border-gray-600 text-gray-400":"bg-gray-100 border-gray-300 text-gray-600")})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(c?"text-gray-300":"text-gray-700"),children:"Email"}),(0,g.jsx)("input",{type:"email",value:t.email,onChange:e=>a("email",e.target.value),className:"w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ".concat(c?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800")})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(c?"text-gray-300":"text-gray-700"),children:"Phone Number"}),(0,g.jsx)("input",{type:"tel",value:t.phoneNo,onChange:e=>a("phoneNo",e.target.value),className:"w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ".concat(c?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800")})]})]})]}),(0,g.jsxs)("div",{className:"mb-6",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold mb-4 ".concat(c?"text-white":"text-gray-800"),children:"Financial Information"}),(0,g.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(c?"text-gray-300":"text-gray-700"),children:"Annual Salary (LPA)"}),(0,g.jsx)("input",{type:"number",step:"0.1",value:t.annualSalary,onChange:e=>a("annualSalary",parseFloat(e.target.value)),className:"w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ".concat(c?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800")})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(c?"text-gray-300":"text-gray-700"),children:"Bonus Amount (\u20b9)"}),(0,g.jsx)("input",{type:"number",value:t.bonus||0,onChange:e=>a("bonus",Number(e.target.value)),className:"w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ".concat(c?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-800"),placeholder:"Enter bonus amount"})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(c?"text-gray-300":"text-gray-700"),children:"Hike Percentage (%)"}),(0,g.jsx)("input",{type:"number",step:"0.1",value:t.hike||0,onChange:e=>a("hike",Number(e.target.value)),className:"w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ".concat(c?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-800"),placeholder:"Enter hike percentage"})]})]})]}),(0,g.jsxs)("div",{className:"mb-6",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold mb-4 ".concat(c?"text-white":"text-gray-800"),children:"Bank Details"}),(0,g.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(c?"text-gray-300":"text-gray-700"),children:"Account Number"}),(0,g.jsx)("input",{type:"text",value:t.accountNumber,onChange:e=>a("accountNumber",e.target.value),className:"w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ".concat(c?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800")})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(c?"text-gray-300":"text-gray-700"),children:"IFSC Code"}),(0,g.jsx)("input",{type:"text",value:t.ifsccode,onChange:e=>a("ifsccode",e.target.value),className:"w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ".concat(c?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800")})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(c?"text-gray-300":"text-gray-700"),children:"Bank Name"}),(0,g.jsx)("input",{type:"text",value:t.bankName,onChange:e=>a("bankName",e.target.value),className:"w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ".concat(c?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800")})]})]})]}),(0,g.jsxs)("div",{className:"mb-6",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold mb-4 ".concat(c?"text-white":"text-gray-800"),children:"Government Identifiers"}),(0,g.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(c?"text-gray-300":"text-gray-700"),children:"PF Number"}),(0,g.jsx)("input",{type:"text",value:t.pfnum,onChange:e=>a("pfnum",e.target.value),className:"w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ".concat(c?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800")})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(c?"text-gray-300":"text-gray-700"),children:"PAN Number"}),(0,g.jsx)("input",{type:"text",value:t.panNumber,onChange:e=>a("panNumber",e.target.value),className:"w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ".concat(c?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800")})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(c?"text-gray-300":"text-gray-700"),children:"Aadhar Number"}),(0,g.jsx)("input",{type:"text",value:t.aadharNumber,onChange:e=>a("aadharNumber",e.target.value),className:"w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ".concat(c?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800")})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(c?"text-gray-300":"text-gray-700"),children:"UAN Number"}),(0,g.jsx)("input",{type:"text",value:t.uanNumber,onChange:e=>a("uanNumber",e.target.value),className:"w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ".concat(c?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800")})]})]})]}),(0,g.jsxs)("div",{className:"flex gap-4 justify-end pt-4 border-t ".concat(c?"border-gray-700":"border-gray-200"),children:[(0,g.jsx)("button",{onClick:l,className:"px-6 py-2 border rounded-lg transition-colors font-medium ".concat(c?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"),children:"Cancel"}),(0,g.jsx)("button",{onClick:r,disabled:s,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium disabled:opacity-50 flex items-center gap-2",children:s?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Saving..."]}):"Save Changes"})]})]})]})}):null},k=()=>{const[e,t]=(0,o.useState)("April"),[a,l]=(0,o.useState)("2025"),[d,y]=(0,o.useState)(null),[b,v]=(0,o.useState)(null),[k,S]=(0,o.useState)(!1),{userData:C}=(0,o.useContext)(n.ob),[E,I]=(0,o.useState)(!1),[P,L]=(0,o.useState)(!1),[O,T]=(0,o.useState)(!1),[R,F]=(0,o.useState)(""),[M,B]=(0,o.useState)([]),{theme:U}=((0,i.Zp)(),(0,o.useContext)(n.ob)),z="dark"===U,[G,H]=(0,o.useState)({employeeId:"",employeeName:"",email:"",phoneNumber:"",designation:"",department:"",annualSalary:0,accountNumber:"",ifsccode:"",bankName:"",pfnum:"",panNumber:"",aadharNumber:"",uanNumber:""}),[Y,V]=(0,o.useState)([]),J=(0,o.useRef)(null),W=(M.filter(e=>{var t,a,r,o;if(!e)return!1;const n=R.toLowerCase().trim();(null===(t=e.empName)||void 0===t?void 0:t.toLowerCase().includes(n))||(null===(a=e.designation)||void 0===a?void 0:a.toLowerCase().includes(n))||(null===(r=e.employeeId)||void 0===r?void 0:r.toLowerCase().includes(n))||null===(o=e.email)||void 0===o||o.toLowerCase().includes(n)}),(0,o.useCallback)((e,t)=>{H(a=>(0,r.A)((0,r.A)({},a),{},{[e]:t}))},[])),_=(0,o.useCallback)((e,t)=>{v(a=>(0,r.A)((0,r.A)({},a),{},{[e]:t}))},[]);(0,o.useEffect)(()=>{X()},[e,a]);const X=async()=>{try{T(!0);const t=await h();console.log("Raw employees from API:",t);const o=Array.isArray(t)?t:[],n=await Promise.all(o.map(async t=>{try{const o=f(e);console.log("Fetching payroll for ".concat(t.employeeId,", ").concat(o,", ").concat(a));const n=await p(t.employeeId,o,parseInt(a));if(console.log("Payroll API response for ".concat(t.employeeId,":"),n),n&&n.payrollId){console.log("Merging payroll data for ".concat(t.employeeId));const e=N(t),a=(0,r.A)((0,r.A)({},n),{},{employee:(0,r.A)((0,r.A)({},t),e)}),o=N(a);return console.log("Combined data for ".concat(t.employeeId,":"),o),o}return console.log("No payroll data for ".concat(t.employeeId,", using employee data only")),N(t)}catch(o){console.warn("No payroll data found for ".concat(t.employeeId,":"),o.message);const e=N(t);return console.log("Employee data without payroll for ".concat(t.employeeId,":"),e),e}}));console.log("Final employees data to set:",n),V(n),T(!1)}catch(t){console.error("Error fetching employees:",t),V([]),T(!1),alert("Failed to load employee data. Please try again.")}};if(!C)return(0,g.jsx)(j,{});if(!C||!(Array.isArray(C.roles)?C.roles.includes("ADMIN"):"ADMIN"===C.roles))return(0,g.jsx)(w,{});const q=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const a=Number(e);return isNaN(a)?"0.0":a.toFixed(t)},Z=e=>new Intl.NumberFormat("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e),K=()=>{y(null),S(!1),v(null)},Q=e=>{v((0,r.A)({},e)),S(!0)},$=(Y||[]).map((e,t)=>{var a,o;const n=e.grossEarnings||(null===(a=e.earnings)||void 0===a?void 0:a.reduce((e,t)=>e+((null===t||void 0===t?void 0:t.total)||0),0))||0,l=e.totalDeductions||(null===(o=e.deductions)||void 0===o?void 0:o.reduce((e,t)=>e+((null===t||void 0===t?void 0:t.amount)||0),0))||0,s=e.bonus||0,d=e.netSalary||n-l+s;return(0,r.A)((0,r.A)({id:(null===e||void 0===e?void 0:e.id)||(null===e||void 0===e?void 0:e.employeeId)||"emp-".concat(t),employeeId:(null===e||void 0===e?void 0:e.employeeId)||"unknown-".concat(t),employeeName:(null===e||void 0===e?void 0:e.employeeName)||"Unknown Employee",designation:(null===e||void 0===e?void 0:e.designation)||"-",department:(null===e||void 0===e?void 0:e.department)||"-",email:(null===e||void 0===e?void 0:e.email)||"-",phoneNumber:(null===e||void 0===e?void 0:e.phoneNumber)||"-",annualSalary:(null===e||void 0===e?void 0:e.annualSalary)||0},e),{},{grossEarnings:n,totalDeductions:l,bonusAmount:s,netSalary:d,earnings:e.earnings||[],deductions:e.deductions||[]})});if(d&&!k){const t=d,r=t.grossEarnings||0,o=t.totalDeductions||0,n=t.bonusAmount||0,l=t.netSalary||0;return(0,g.jsx)("div",{className:"min-h-screen p-6 ".concat(z?"bg-gray-900":"bg-gradient-to-br from-blue-50 to-purple-50"),children:(0,g.jsxs)("div",{className:"max-w-4xl mx-auto rounded-2xl shadow-2xl overflow-hidden border ".concat(z?"bg-gray-800 border-gray-700":"bg-white border-blue-100"),children:[(0,g.jsx)("div",{className:"bg-gradient-to-r from-blue-800 to-purple-800 text-white p-8",children:(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("h1",{className:"text-3xl font-bold",children:"ANASOL CONSULTANCY SERVICES PVT LTD"}),(0,g.jsx)("h2",{className:"text-xl mt-2 opacity-90",children:"SALARY SLIP"}),(0,g.jsxs)("div",{className:"mt-3 bg-white/20 px-4 py-1 rounded-full inline-block text-sm",children:[e," ",a]})]}),(0,g.jsx)("div",{className:"w-24 h-24 bg-white/20 rounded-xl flex items-center justify-center",children:(0,g.jsx)("img",{src:"/assets/anasol-logo.png",alt:"Anasol Logo",className:"w-20 h-20 object-contain"})})]})}),(0,g.jsxs)("div",{className:"p-4 border-b flex justify-between items-center ".concat(z?"bg-gray-700 border-gray-600":"bg-gray-50 border-gray-200"),children:[(0,g.jsx)("button",{onClick:K,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-medium",children:"\u2190 Back to Employee List"}),(0,g.jsx)("button",{onClick:()=>Q(d),className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors font-medium",children:"Edit Salary"})]}),(0,g.jsxs)("div",{ref:J,className:"p-8",children:[(0,g.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[(0,g.jsxs)("div",{className:"p-6 rounded-xl shadow-sm border ".concat(z?"bg-gray-700 border-gray-600":"bg-white border-blue-100"),children:[(0,g.jsx)("h3",{className:"text-lg font-semibold mb-4 border-l-4 border-blue-500 pl-3 ".concat(z?"text-white":"text-gray-800"),children:"Personal Information"}),(0,g.jsxs)("div",{className:"space-y-3",children:[(0,g.jsxs)("div",{className:"flex justify-between items-center pb-2 border-b border-gray-100",children:[(0,g.jsx)("span",{className:"font-medium ".concat(z?"text-gray-300":"text-gray-600"),children:"Employee Name:"}),(0,g.jsx)("span",{className:"font-semibold ".concat(z?"text-white":"text-gray-800"),children:t.employeeName})]}),(0,g.jsxs)("div",{className:"flex justify-between items-center pb-2 border-b border-gray-100",children:[(0,g.jsx)("span",{className:"font-medium ".concat(z?"text-gray-300":"text-gray-600"),children:"Employee ID:"}),(0,g.jsx)("span",{className:"font-semibold ".concat(z?"text-white":"text-gray-800"),children:t.employeeId})]}),(0,g.jsxs)("div",{className:"flex justify-between items-center pb-2 border-b border-gray-100",children:[(0,g.jsx)("span",{className:"font-medium ".concat(z?"text-gray-300":"text-gray-600"),children:"Designation:"}),(0,g.jsx)("span",{className:"font-semibold ".concat(z?"text-white":"text-gray-800"),children:t.designation})]}),(0,g.jsxs)("div",{className:"flex justify-between items-center pb-2 border-b border-gray-100",children:[(0,g.jsx)("span",{className:"font-medium ".concat(z?"text-gray-300":"text-gray-600"),children:"Department:"}),(0,g.jsx)("span",{className:"font-semibold ".concat(z?"text-white":"text-gray-800"),children:t.department})]}),(0,g.jsxs)("div",{className:"flex justify-between items-center",children:[(0,g.jsx)("span",{className:"font-medium ".concat(z?"text-gray-300":"text-gray-600"),children:"Phone No:"}),(0,g.jsx)("span",{className:"font-semibold ".concat(z?"text-white":"text-gray-800"),children:t.phoneNo})]})]})]}),(0,g.jsxs)("div",{className:"p-6 rounded-xl shadow-sm border ".concat(z?"bg-gray-800 border-gray-700":"bg-white border-blue-100"),children:[(0,g.jsx)("h3",{className:"text-lg font-semibold mb-4 border-l-4 border-blue-500 pl-3 ".concat(z?"text-gray-200":"text-gray-800"),children:"Bank & Tax Information"}),(0,g.jsxs)("div",{className:"space-y-3",children:[(0,g.jsxs)("div",{className:"flex justify-between items-center pb-2 border-b border-gray-100",children:[(0,g.jsx)("span",{className:"font-medium ".concat(z?"text-gray-300":"text-gray-600"),children:"Bank A/C Name:"}),(0,g.jsx)("span",{className:"font-semibold ".concat(z?"text-white":"text-gray-800"),children:t.bankAccountName})]}),(0,g.jsxs)("div",{className:"flex justify-between items-center pb-2 border-b border-gray-100",children:[(0,g.jsx)("span",{className:"font-medium ".concat(z?"text-gray-300":"text-gray-600"),children:"PAN No:"}),(0,g.jsx)("span",{className:"font-semibold ".concat(z?"text-white":"text-gray-800"),children:t.panNo})]}),(0,g.jsxs)("div",{className:"flex justify-between items-center pb-2 border-b border-gray-100",children:[(0,g.jsx)("span",{className:"font-medium ".concat(z?"text-gray-300":"text-gray-600"),children:"PF No:"}),(0,g.jsx)("span",{className:"font-semibold ".concat(z?"text-white":"text-gray-800"),children:t.pfNo})]}),(0,g.jsxs)("div",{className:"flex justify-between items-center pb-2 border-b border-gray-100",children:[(0,g.jsx)("span",{className:"font-medium ".concat(z?"text-gray-300":"text-gray-600"),children:"IFSC Code:"}),(0,g.jsx)("span",{className:"font-semibold ".concat(z?"text-white":"text-gray-800"),children:t.ifsccode})]}),(0,g.jsxs)("div",{className:"flex justify-between items-center",children:[(0,g.jsx)("span",{className:"font-medium ".concat(z?"text-gray-300":"text-gray-600"),children:"Email:"}),(0,g.jsx)("span",{className:"font-semibold ".concat(z?"text-white":"text-gray-800"),children:t.email})]})]})]})]}),(0,g.jsxs)("div",{className:"mb-8",children:[(0,g.jsx)("h3",{className:"text-xl font-bold mb-4 border-l-4 border-blue-500 pl-3 ".concat(z?"text-gray-200":"text-gray-800"),children:"Attendance Information"}),(0,g.jsx)("div",{className:"overflow-x-auto rounded-xl shadow-sm border ".concat(z?"border-gray-600":"border-gray-200"),children:(0,g.jsxs)("table",{className:"min-w-full ".concat(z?"bg-gray-800":"bg-white"),children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{className:"".concat(z?"bg-gradient-to-r from-gray-700 to-gray-600":"bg-gradient-to-r from-gray-50 to-blue-50"),children:[(0,g.jsx)("th",{className:"border-b px-6 py-4 font-semibold ".concat(z?"border-gray-600 text-gray-300":"border-gray-200 text-gray-700"),children:"Standard Days"}),(0,g.jsx)("th",{className:"border-b px-6 py-4 font-semibold ".concat(z?"border-gray-600 text-gray-300":"border-gray-200 text-gray-700"),children:"Payable Days"}),(0,g.jsx)("th",{className:"border-b px-6 py-4 font-semibold ".concat(z?"border-gray-600 text-gray-300":"border-gray-200 text-gray-700"),children:"Loss of Pay Days"}),(0,g.jsx)("th",{className:"border-b px-6 py-4 font-semibold ".concat(z?"border-gray-600 text-gray-300":"border-gray-200 text-gray-700"),children:"LOP Reversal Days"}),(0,g.jsx)("th",{className:"border-b px-6 py-4 font-semibold ".concat(z?"border-gray-600 text-gray-300":"border-gray-200 text-gray-700"),children:"Arrear Days"})]})}),(0,g.jsx)("tbody",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{className:"border-b px-6 py-4 text-center font-medium ".concat(z?"border-gray-700 text-gray-200":"border-gray-100 text-gray-900"),children:q(t.standardDays)}),(0,g.jsx)("td",{className:"border-b px-6 py-4 text-center font-medium ".concat(z?"border-gray-700 text-gray-200":"border-gray-100 text-gray-900"),children:q(t.payableDays)}),(0,g.jsx)("td",{className:"border-b px-6 py-4 text-center font-medium ".concat(z?"border-gray-700 text-gray-200":"border-gray-100 text-gray-900"),children:q(t.lossOfPayDays)}),(0,g.jsx)("td",{className:"border-b px-6 py-4 text-center font-medium ".concat(z?"border-gray-700 text-gray-200":"border-gray-100 text-gray-900"),children:q(t.lopReversalDays)}),(0,g.jsx)("td",{className:"border-b px-6 py-4 text-center font-medium ".concat(z?"border-gray-700 text-gray-200":"border-gray-100 text-gray-900"),children:q(t.arrearDays)})]})})]})})]}),n>0&&(0,g.jsxs)("div",{className:"mb-8",children:[(0,g.jsx)("h3",{className:"text-xl font-bold mb-4 border-l-4 border-blue-500 pl-3 ".concat(z?"text-gray-200":"text-gray-800"),children:"Additional Compensation"}),(0,g.jsx)("div",{className:"overflow-x-auto rounded-xl shadow-sm border ".concat(z?"border-gray-600":"border-gray-200"),children:(0,g.jsxs)("table",{className:"min-w-full ".concat(z?"bg-gray-800":"bg-white"),children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{className:"".concat(z?"bg-gradient-to-r from-yellow-900 to-orange-900":"bg-gradient-to-r from-yellow-50 to-orange-50"),children:[(0,g.jsx)("th",{className:"border-b px-6 py-4 font-semibold ".concat(z?"border-gray-600 text-gray-300":"border-gray-200 text-gray-700"),children:"Bonus Amount"}),(0,g.jsx)("th",{className:"border-b px-6 py-4 font-semibold ".concat(z?"border-gray-600 text-gray-300":"border-gray-200 text-gray-700"),children:"Hike Percentage"})]})}),(0,g.jsx)("tbody",{children:(0,g.jsxs)("tr",{children:[(0,g.jsxs)("td",{className:"border-b px-6 py-4 text-center font-bold ".concat(z?"border-gray-700 text-yellow-400":"border-gray-100 text-yellow-700"),children:["\u20b9",n.toLocaleString()]}),(0,g.jsxs)("td",{className:"border-b px-6 py-4 text-center font-medium ".concat(z?"border-gray-700 text-gray-200":"border-gray-100 text-gray-900"),children:[t.hike||0,"%"]})]})})]})})]}),(0,g.jsxs)("div",{className:"mb-8",children:[(0,g.jsx)("h3",{className:"text-xl font-bold mb-4 border-l-4 border-blue-500 pl-3 ".concat(z?"text-gray-200":"text-gray-800"),children:"Salary Details"}),(0,g.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,g.jsxs)("div",{className:"lg:col-span-2",children:[(0,g.jsx)("h4",{className:"font-semibold mb-3 ".concat(z?"text-gray-300":"text-gray-700"),children:"EARNINGS"}),(0,g.jsx)("div",{className:"overflow-x-auto rounded-xl shadow-sm border ".concat(z?"border-gray-600":"border-gray-200"),children:(0,g.jsxs)("table",{className:"min-w-full ".concat(z?"bg-gray-800":"bg-white"),children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{className:"".concat(z?"bg-gradient-to-r from-gray-700 to-gray-600":"bg-gradient-to-r from-gray-50 to-blue-50"),children:[(0,g.jsx)("th",{className:"border-b px-4 py-3 font-semibold ".concat(z?"border-gray-600 text-gray-300":"border-gray-200 text-gray-700"),children:"Description"}),(0,g.jsx)("th",{className:"border-b px-4 py-3 font-semibold text-right ".concat(z?"border-gray-600 text-gray-300":"border-gray-200 text-gray-700"),children:"Monthly Rate"}),(0,g.jsx)("th",{className:"border-b px-4 py-3 font-semibold text-right ".concat(z?"border-gray-600 text-gray-300":"border-gray-200 text-gray-700"),children:"Current Month"}),(0,g.jsx)("th",{className:"border-b px-4 py-3 font-semibold text-right ".concat(z?"border-gray-600 text-gray-300":"border-gray-200 text-gray-700"),children:"Arrear (+/-)"}),(0,g.jsx)("th",{className:"border-b px-4 py-3 font-semibold text-right ".concat(z?"border-gray-600 text-gray-300":"border-gray-200 text-gray-700"),children:"Total"})]})}),(0,g.jsxs)("tbody",{children:[(t.earnings||[]).map((e,t)=>(0,g.jsxs)("tr",{className:z?"hover:bg-gray-700":"hover:bg-gray-50",children:[(0,g.jsx)("td",{className:"border-b px-4 py-3 ".concat(z?"border-gray-700 text-gray-300":"border-gray-100 text-gray-700"),children:e.name}),(0,g.jsxs)("td",{className:"border-b px-4 py-3 text-right font-medium ".concat(z?"border-gray-700 text-gray-200":"border-gray-100 text-gray-900"),children:["\u20b9",(e.monthlyRate||0).toLocaleString()]}),(0,g.jsxs)("td",{className:"border-b px-4 py-3 text-right font-medium ".concat(z?"border-gray-700 text-gray-200":"border-gray-100 text-gray-900"),children:["\u20b9",(e.currentMonth||0).toLocaleString()]}),(0,g.jsx)("td",{className:"border-b px-4 py-3 text-right font-medium ".concat(z?"border-gray-700 text-gray-200":"border-gray-100 text-gray-900"),children:e.arrear||0}),(0,g.jsxs)("td",{className:"border-b px-4 py-3 text-right font-medium ".concat(z?"border-gray-700 text-gray-200":"border-gray-100 text-gray-900"),children:["\u20b9",(e.total||0).toLocaleString()]})]},t)),n>0&&(0,g.jsxs)("tr",{className:z?"bg-yellow-900 hover:bg-yellow-800":"bg-yellow-50 hover:bg-yellow-100",children:[(0,g.jsx)("td",{className:"border-b px-4 py-3 font-semibold ".concat(z?"border-gray-600 text-yellow-300":"border-gray-100 text-yellow-800"),children:"BONUS"}),(0,g.jsx)("td",{className:"border-b px-4 py-3 text-right font-medium ".concat(z?"border-gray-600 text-yellow-300":"border-gray-100 text-yellow-800"),children:"-"}),(0,g.jsx)("td",{className:"border-b px-4 py-3 text-right font-medium ".concat(z?"border-gray-600 text-yellow-300":"border-gray-100 text-yellow-800"),children:"-"}),(0,g.jsx)("td",{className:"border-b px-4 py-3 text-right font-medium ".concat(z?"border-gray-600 text-yellow-300":"border-gray-100 text-yellow-800"),children:"-"}),(0,g.jsxs)("td",{className:"border-b px-4 py-3 text-right font-bold ".concat(z?"border-gray-600 text-yellow-300":"border-gray-100 text-yellow-800"),children:["\u20b9",n.toLocaleString()]})]}),(0,g.jsxs)("tr",{className:z?"bg-blue-900":"bg-blue-50",children:[(0,g.jsx)("td",{className:"border-b px-4 py-3 font-semibold ".concat(z?"border-gray-600 text-gray-200":"border-gray-200 text-gray-800"),colSpan:"4",children:"GROSS EARNINGS"}),(0,g.jsxs)("td",{className:"border-b px-4 py-3 text-right font-semibold ".concat(z?"border-gray-600 text-blue-300":"border-gray-200 text-blue-800"),children:["\u20b9",r.toLocaleString()]})]})]})]})})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("h4",{className:"font-semibold mb-3 ".concat(z?"text-gray-300":"text-gray-700"),children:"DEDUCTIONS"}),(0,g.jsx)("div",{className:"overflow-x-auto rounded-xl shadow-sm border ".concat(z?"border-gray-600":"border-gray-200"),children:(0,g.jsxs)("table",{className:"min-w-full ".concat(z?"bg-gray-800":"bg-white"),children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{className:"".concat(z?"bg-gradient-to-r from-gray-700 to-gray-600":"bg-gradient-to-r from-gray-50 to-blue-50"),children:[(0,g.jsx)("th",{className:"border-b px-4 py-3 font-semibold ".concat(z?"border-gray-600 text-gray-300":"border-gray-200 text-gray-700"),children:"Description"}),(0,g.jsx)("th",{className:"border-b px-4 py-3 font-semibold text-right ".concat(z?"border-gray-600 text-gray-300":"border-gray-200 text-gray-700"),children:"Amount"})]})}),(0,g.jsxs)("tbody",{children:[(t.deductions||[]).map((e,t)=>(0,g.jsxs)("tr",{className:z?"hover:bg-gray-700":"hover:bg-gray-50",children:[(0,g.jsx)("td",{className:"border-b px-4 py-3 ".concat(z?"border-gray-700 text-gray-300":"border-gray-100 text-gray-700"),children:e.name}),(0,g.jsxs)("td",{className:"border-b px-4 py-3 text-right font-medium ".concat(z?"border-gray-700 text-red-400":"border-gray-100 text-red-600"),children:["\u20b9",(e.amount||0).toLocaleString()]})]},t)),(0,g.jsxs)("tr",{className:z?"bg-blue-900":"bg-blue-50",children:[(0,g.jsx)("td",{className:"border-b px-4 py-3 font-semibold ".concat(z?"border-gray-600 text-gray-200":"border-gray-200 text-gray-800"),children:"TOTAL DEDUCTIONS"}),(0,g.jsxs)("td",{className:"border-b px-4 py-3 text-right font-semibold ".concat(z?"border-gray-600 text-red-400":"border-gray-200 text-red-700"),children:["\u20b9",o.toLocaleString()]})]}),n>0&&(0,g.jsxs)("tr",{className:z?"bg-yellow-900":"bg-yellow-50",children:[(0,g.jsx)("td",{className:"border-b px-4 py-3 font-semibold ".concat(z?"border-gray-600 text-yellow-300":"border-gray-200 text-yellow-800"),children:"BONUS ADDED"}),(0,g.jsxs)("td",{className:"border-b px-4 py-3 text-right font-semibold ".concat(z?"border-gray-600 text-yellow-300":"border-gray-200 text-yellow-800"),children:["+ \u20b9",n.toLocaleString()]})]}),(0,g.jsxs)("tr",{className:z?"bg-green-900":"bg-green-50",children:[(0,g.jsx)("td",{className:"border-b px-4 py-3 font-bold ".concat(z?"border-gray-600 text-green-300":"border-gray-200 text-green-800"),children:"NET SALARY"}),(0,g.jsxs)("td",{className:"border-b px-4 py-3 text-right font-bold ".concat(z?"border-gray-600 text-green-300":"border-gray-200 text-green-800"),children:["\u20b9",l.toLocaleString()]})]})]})]})})]})]})]}),(0,g.jsx)("div",{className:"mt-8 pt-6 border-t text-center text-sm ".concat(z?"border-gray-600 text-gray-400":"border-gray-300 text-gray-600"),children:(0,g.jsx)("p",{children:"#1016, 11th Floor, DSL Abacus IT Park, Uppal Hyderabad-500039 | Ph: 9632091726"})})]})]})})}return(0,g.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 p-6",children:[(0,g.jsx)(A,{isAdding:E,newEmployee:G,onEmployeeChange:W,onSave:async()=>{var t;if(G.employeeId&&G.employeeName&&G.email)try{L(!0);const o={employeeId:(t=G).employeeId,empName:t.employeeName,email:t.email,phoneNumber:t.phoneNumber,annualSalary:t.annualSalary,accountNumber:t.accountNumber,ifsccode:t.ifsccode,bankName:t.bankName,pfnum:t.pfnum,panNumber:t.panNumber,aadharNumber:t.aadharNumber,uanNumber:t.uanNumber,department:t.department,designation:t.designation};console.log("Sending data to backend:",o);const n=await m(o);console.log("Response from backend:",n);const l=f(e);try{await x({employeeId:G.employeeId,month:l,year:parseInt(a)})}catch(r){console.warn("Payroll calculation failed:",r)}await X(),I(!1),H({employeeId:"",employeeName:"",email:"",phoneNumber:"",designation:"",department:"",annualSalary:0,accountNumber:"",ifsccode:"",bankName:"",pfnum:"",panNumber:"",aadharNumber:"",uanNumber:""}),alert("Employee added successfully!")}catch(o){console.error("Error adding employee:",o),console.error("Error details:",o.message),alert("Failed to add employee: ".concat(o.message))}finally{L(!1)}else alert("Please fill in all required fields")},onCancel:()=>{I(!1),H({employeeId:"",employeeName:"",email:"",phoneNumber:"",designation:"",department:"",annualSalary:0,accountNumber:"",ifsccode:"",bankName:"",pfnum:"",panNumber:"",aadharNumber:"",uanNumber:""})},loading:P}),k&&(0,g.jsx)(D,{editingEmployee:b,onInputChange:_,onSaveEdit:async()=>{if(b)try{L(!0);const n=f(e),l=parseInt(a);let s;console.log("Fetching payroll for: ".concat(b.employeeId,", ").concat(n,", ").concat(l));try{s=await p(b.employeeId,n,l),console.log("Full payroll response:",s)}catch(r){return console.error("Error fetching payroll:",r),void alert("No payroll record found. Please generate payroll for this employee first.")}const d=s.payrollId;if(console.log("Extracted payroll ID:",d),!d)return console.error("No payroll ID found in response. Available keys:",Object.keys(s)),void alert("Could not find payroll ID. Please check the payroll data.");try{await u(d,{bonusAmount:b.bonus||0,hikePercentage:b.hike||0,basicSalary:b.basicSalary,hraAmount:b.hra,conveyanceAllowance:b.conveyanceAllowance,medicalAllowance:b.medicalAllowance,specialAllowance:b.specialAllowance,otherAllowances:b.otherAllowances,providentFund:b.providentFund,professionalTax:b.professionalTax,incomeTax:b.incomeTax,otherDeductions:b.otherDeductions}),setTimeout(async()=>{await X()},500),S(!1),v(null),alert("Employee payroll updated successfully!")}catch(o){var t;console.error("Error updating payroll:",o),console.error("Error response:",null===(t=o.response)||void 0===t?void 0:t.data),alert("Failed to update payroll. Please try again.")}}catch(r){console.error("Error in handleSaveEdit:",r),alert("Failed to update employee. Please try again.")}finally{L(!1)}},onCancelEdit:()=>{S(!1),v(null)},loading:P}),(0,g.jsxs)("div",{className:"max-w-7xl mx-auto rounded-2xl shadow-xl overflow-hidden border ".concat(z?"bg-gray-800 border-gray-700":"bg-white border-blue-100"),children:[(0,g.jsx)("div",{className:"container mx-auto px-4 pt-6",children:(0,g.jsxs)("button",{onClick:()=>window.history.back(),className:"flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors ".concat(z?"bg-gray-700 text-gray-200 hover:bg-gray-600":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-200"),children:[(0,g.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),(0,g.jsx)("span",{children:"Back"})]})}),(0,g.jsx)("div",{className:"p-6 border-b ".concat(z?"bg-gray-800 border-gray-700":"bg-white border-gray-200"),children:(0,g.jsxs)("div",{className:"flex flex-wrap gap-4 items-center justify-between",children:[(0,g.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(z?"text-gray-300":"text-gray-700"),children:"Month"}),(0,g.jsx)("select",{value:e,onChange:e=>t(e.target.value),className:"border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(z?"bg-gray-700 border-gray-600 text-white":"border-gray-300 text-gray-900"),children:["January","February","March","April","May","June","July","August","September","October","November","December"].map(e=>(0,g.jsx)("option",{value:e,children:e},e))})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(z?"text-gray-300":"text-gray-700"),children:"Year"}),(0,g.jsx)("select",{value:a,onChange:e=>l(e.target.value),className:"border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(z?"bg-gray-700 border-gray-600 text-white":"border-gray-300 text-gray-900"),children:["2023","2024","2025"].map(e=>(0,g.jsx)("option",{value:e,children:e},e))})]}),(0,g.jsxs)("div",{className:"flex-1",children:[(0,g.jsx)("label",{htmlFor:"search-input",className:"block text-sm font-medium mb-2 ".concat(z?"text-gray-300":"text-gray-700"),children:"Search Employees"}),(0,g.jsx)("input",{id:"search-input",type:"text",placeholder:"Search by name, role, or employee ID",value:R,onChange:e=>F(e.target.value),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ".concat(z?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"border-gray-300 text-gray-900")})]})]}),(0,g.jsxs)("div",{className:"flex gap-4",children:[(0,g.jsxs)("button",{onClick:()=>{I(!0)},className:"px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all shadow-lg font-medium flex items-center gap-2",children:[(0,g.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Employee"]}),(0,g.jsx)("button",{onClick:async()=>{try{const t=[["Employee ID","Employee Name","Designation","Department","Gross Earnings","Bonus","Total Deductions","Net Salary"].join(","),...$.map(e=>[e.employeeId,'"'.concat(e.employeeName,'"'),'"'.concat(e.designation,'"'),'"'.concat(e.department,'"'),e.grossEarnings,e.bonusAmount,e.totalDeductions,e.netSalary].join(","))].join("\n"),r=new Blob(["\ufeff"+t],{type:"text/csv;charset=utf-8;"}),o=URL.createObjectURL(r),n=document.createElement("a");n.href=o,n.download="Employee_Salary_Summary_".concat(e,"_").concat(a,".csv"),document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(o)}catch(t){console.error("Error downloading Excel:",t),alert("Failed to download Excel sheet. Please try again.")}},className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all shadow-lg font-medium",children:"Download Excel Sheet"})]})]})}),(0,g.jsxs)("div",{className:"p-6 ".concat(z?"bg-gray-800":"bg-white"),children:[(0,g.jsxs)("h3",{className:"text-2xl font-bold mb-6 ".concat(z?"text-gray-200":"text-gray-800"),children:["Employee Salary Summary - ",e," ",a]}),O?(0,g.jsxs)("div",{className:"flex justify-center items-center py-12",children:[(0,g.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),(0,g.jsx)("span",{className:"ml-4 ".concat(z?"text-gray-400":"text-gray-600"),children:"Loading employee data..."})]}):(0,g.jsx)("div",{className:"overflow-x-auto rounded-xl shadow-sm border ".concat(z?"border-gray-600":"border-gray-200"),children:(0,g.jsxs)("table",{className:"min-w-full ".concat(z?"bg-gray-800":"bg-white"),children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{className:"".concat(z?"bg-gradient-to-r from-gray-700 to-gray-600":"bg-gradient-to-r from-gray-50 to-blue-50"),children:[(0,g.jsx)("th",{className:"border-b px-6 py-4 text-left font-semibold ".concat(z?"border-gray-600 text-gray-300":"border-gray-200 text-gray-700"),children:"Employee ID"}),(0,g.jsx)("th",{className:"border-b px-6 py-4 text-left font-semibold ".concat(z?"border-gray-600 text-gray-300":"border-gray-200 text-gray-700"),children:"Employee Name"}),(0,g.jsx)("th",{className:"border-b px-6 py-4 text-left font-semibold ".concat(z?"border-gray-600 text-gray-300":"border-gray-200 text-gray-700"),children:"Designation"}),(0,g.jsx)("th",{className:"border-b px-6 py-4 text-left font-semibold ".concat(z?"border-gray-600 text-gray-300":"border-gray-200 text-gray-700"),children:"Department"}),(0,g.jsx)("th",{className:"border-b px-6 py-4 text-right font-semibold ".concat(z?"border-gray-600 text-gray-300":"border-gray-200 text-gray-700"),children:"Gross Earnings"}),(0,g.jsx)("th",{className:"border-b px-6 py-4 text-right font-semibold ".concat(z?"border-gray-600 text-gray-300":"border-gray-200 text-gray-700"),children:"Bonus"}),(0,g.jsx)("th",{className:"border-b px-6 py-4 text-right font-semibold ".concat(z?"border-gray-600 text-gray-300":"border-gray-200 text-gray-700"),children:"Deductions"}),(0,g.jsx)("th",{className:"border-b px-6 py-4 text-right font-semibold ".concat(z?"border-gray-600 text-gray-300":"border-gray-200 text-gray-700"),children:"Net Salary"}),(0,g.jsx)("th",{className:"border-b px-6 py-4 text-center font-semibold ".concat(z?"border-gray-600 text-gray-300":"border-gray-200 text-gray-700"),children:"Actions"})]})}),(0,g.jsx)("tbody",{children:$.length>0?$.map(t=>(0,g.jsxs)("tr",{className:"transition-colors ".concat(z?"hover:bg-gray-700":"hover:bg-blue-50"),children:[(0,g.jsx)("td",{className:"border-b px-6 py-4 font-medium ".concat(z?"border-gray-700 text-gray-200":"border-gray-100 text-gray-900"),children:t.employeeId}),(0,g.jsx)("td",{className:"border-b px-6 py-4 font-semibold ".concat(z?"border-gray-700 text-gray-200":"border-gray-100 text-gray-800"),children:t.employeeName}),(0,g.jsx)("td",{className:"border-b px-6 py-4 ".concat(z?"border-gray-700 text-gray-300":"border-gray-100 text-gray-700"),children:t.designation}),(0,g.jsx)("td",{className:"border-b px-6 py-4 ".concat(z?"border-gray-700 text-gray-300":"border-gray-100 text-gray-700"),children:t.department}),(0,g.jsxs)("td",{className:"border-b px-6 py-4 text-right font-medium ".concat(z?"border-gray-700 text-gray-200":"border-gray-100 text-gray-900"),children:["\u20b9",t.grossEarnings.toLocaleString()]}),(0,g.jsx)("td",{className:"border-b px-6 py-4 text-right font-medium ".concat(z?"border-gray-700 text-yellow-400":"border-gray-100 text-yellow-600"),children:t.bonusAmount>0?"\u20b9".concat(t.bonusAmount.toLocaleString()):"-"}),(0,g.jsxs)("td",{className:"border-b px-6 py-4 text-right font-medium ".concat(z?"border-gray-700 text-red-400":"border-gray-100 text-red-600"),children:["\u20b9",t.totalDeductions.toLocaleString()]}),(0,g.jsxs)("td",{className:"border-b px-6 py-4 text-right font-bold ".concat(z?"border-gray-700 text-green-400":"border-gray-100 text-green-700"),children:["\u20b9",t.netSalary.toLocaleString()]}),(0,g.jsx)("td",{className:"border-b px-6 py-4 ".concat(z?"border-gray-700":"border-gray-100"),children:(0,g.jsxs)("div",{className:"flex gap-2 justify-center",children:[(0,g.jsx)("button",{onClick:()=>(async t=>{try{const n=f(e),l=parseInt(a);let s,d;try{s=await p(t.employeeId,n,l),console.log("Payroll data found:",s)}catch(o){console.warn("No payroll data found, using employee data only:",o.message),s=null}s&&s.payrollId?(d=(0,r.A)((0,r.A)({},t),N((0,r.A)((0,r.A)({},s),{},{employee:t}))),console.log("Merged data with payroll:",d)):(d=N(t),console.log("Using employee data with calculations:",d)),y(d)}catch(n){console.error("Error fetching employee details:",n);const e=N(t);y(e)}})(t),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium text-sm",children:"View"}),(0,g.jsx)("button",{onClick:()=>Q(t),className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors font-medium text-sm",children:"Edit"}),(0,g.jsx)("button",{onClick:()=>async function(t){try{var r,o,n,l,d,i,g,y,b,m,x,u,h,v,w,j;console.log("Starting payslip download for:",t.employeeId);const R=f(e);let F;try{F=await p(t.employeeId,R,parseInt(a)),console.log("Payroll API response:",F)}catch(T){console.warn("No payroll data found, using employee data only:",T.message),F=null}let M={};if(F){var A,D,k,S,C,E,I,P,L,O;console.log("=== PAYROLL DATA DEBUG ==="),console.log("Full payroll data:",F),console.log("Available keys:",Object.keys(F)),F.attendance&&(console.log("Attendance object found:",F.attendance),console.log("Attendance keys:",Object.keys(F.attendance))),F.attendanceDetails&&(console.log("AttendanceDetails object found:",F.attendanceDetails),console.log("AttendanceDetails keys:",Object.keys(F.attendanceDetails)));const e={};Object.keys(F).forEach(t=>{const a=F[t];"number"===typeof a&&(e[t]=a)}),console.log("All numeric fields:",e),M={standardDays:Number(F.standardDays)||Number(F.totalWorkingDays)||Number(F.workingDays)||Number(null===(A=F.attendance)||void 0===A?void 0:A.standardDays)||Number(null===(D=F.attendanceDetails)||void 0===D?void 0:D.standardDays)||26,payableDays:Number(F.payableDays)||Number(F.paidDays)||Number(null===(k=F.attendance)||void 0===k?void 0:k.payableDays)||Number(null===(S=F.attendanceDetails)||void 0===S?void 0:S.payableDays)||26,lossOfPayDays:Number(F.lossOfPayDays)||Number(F.lopDays)||Number(null===(C=F.attendance)||void 0===C?void 0:C.lossOfPayDays)||Number(null===(E=F.attendanceDetails)||void 0===E?void 0:E.lossOfPayDays)||0,lopReversalDays:Number(F.lopReversalDays)||Number(null===(I=F.attendance)||void 0===I?void 0:I.lopReversalDays)||Number(null===(P=F.attendanceDetails)||void 0===P?void 0:P.lopReversalDays)||0,arrearDays:Number(F.arrearDays)||Number(null===(L=F.attendance)||void 0===L?void 0:L.arrearDays)||Number(null===(O=F.attendanceDetails)||void 0===O?void 0:O.arrearDays)||0,hike:Number(F.hike)||Number(F.hikePercentage)||0},console.log("=== EXTRACTED ATTENDANCE DATA ==="),console.log("Final attendance data:",M),console.log("Standard Days (raw):",F.standardDays),console.log("Payable Days (raw):",F.payableDays),console.log("Loss of Pay Days (raw):",F.lossOfPayDays)}else console.log("No payroll data found, using defaults"),M={standardDays:26,payableDays:26,lossOfPayDays:0,lopReversalDays:0,arrearDays:0,hike:0};const B=N(M),U=B.grossEarnings||0,z=B.totalDeductions||0,G=B.bonus||0,H=B.netSalary||U-z+G,Y=(null===(r=B.earnings)||void 0===r||null===(o=r.find(e=>"BASIC"===e.name))||void 0===o?void 0:o.total)||0,V=(null===(n=B.earnings)||void 0===n||null===(l=n.find(e=>"HRA"===e.name))||void 0===l?void 0:l.total)||0,J=(null===(d=B.earnings)||void 0===d||null===(i=d.find(e=>"CONVEYANCE"===e.name))||void 0===i?void 0:i.total)||0,W=(null===(g=B.earnings)||void 0===g||null===(y=g.find(e=>"MEDICAL"===e.name))||void 0===y?void 0:y.total)||0,_=(null===(b=B.earnings)||void 0===b||null===(m=b.find(e=>"SPECIAL ALLOWANCE"===e.name))||void 0===m?void 0:m.total)||0,X=(null===(x=B.deductions)||void 0===x||null===(u=x.find(e=>"PROVIDENT FUND"===e.name))||void 0===u?void 0:u.amount)||0,K=(null===(h=B.deductions)||void 0===h||null===(v=h.find(e=>"PROFESSIONAL TAX"===e.name))||void 0===v?void 0:v.amount)||0,Q=(null===(w=B.deductions)||void 0===w||null===(j=w.find(e=>"INCOME TAX"===e.name))||void 0===j?void 0:j.amount)||0,$=document.createElement("div");$.style.position="absolute",$.style.left="-9999px",$.style.width="800px",$.style.padding="10px",$.style.backgroundColor="white",$.style.fontFamily="Arial, sans-serif",$.innerHTML='\n      <div style="font-family: \'Arial\', sans-serif; max-width: 800px; margin: 0 auto;">\n        \x3c!-- Company Header --\x3e\n        <div style="background: linear-gradient(135deg, #1e40af, #3730a3); color: white; padding: 20px; border-radius: 10px; margin-bottom: 20px; text-align: center;">\n          <div style="font-size: 28px; font-weight: bold; margin-bottom: 8px;">ANASOL CONSULTANCY SERVICES PVT LTD</div>\n          <div style="font-size: 22px; opacity: 0.9; margin-bottom: 12px;">SALARY SLIP</div>\n          <div style="background: rgba(255,255,255,0.2); padding: 8px 20px; border-radius: 20px; display: inline-block; font-weight: bold;">\n            '.concat(e," ").concat(a,'\n          </div>\n        </div>\n\n        \x3c!-- Employee Information --\x3e\n        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">\n          <div style="background: #f8fafc; padding: 20px; border-radius: 8px; border-left: 4px solid #3b82f6;">\n            <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #e2e8f0;">\n              <span style="font-weight: 600; color: #4b5563;">Employee Name:</span>\n              <span style="font-weight: 500; color: #1f2937;">').concat(B.employeeName,'</span>\n            </div>\n            <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #e2e8f0;">\n              <span style="font-weight: 600; color: #4b5563;">Employee ID:</span>\n              <span style="font-weight: 500; color: #1f2937;">').concat(B.employeeId,'</span>\n            </div>\n            <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #e2e8f0;">\n              <span style="font-weight: 600; color: #4b5563;">Designation:</span>\n              <span style="font-weight: 500; color: #1f2937;">').concat(B.designation||"N/A",'</span>\n            </div>\n            <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #e2e8f0;">\n              <span style="font-weight: 600; color: #4b5563;">Department:</span>\n              <span style="font-weight: 500; color: #1f2937;">').concat(B.department||"N/A",'</span>\n            </div>\n            <div style="display: flex; justify-content: space-between; padding: 8px 0;">\n              <span style="font-weight: 600; color: #4b5563;">Phone No:</span>\n              <span style="font-weight: 500; color: #1f2937;">').concat(B.phoneNo||B.phoneNumber||"N/A",'</span>\n            </div>\n          </div>\n\n          <div style="background: #f8fafc; padding: 20px; border-radius: 8px; border-left: 4px solid #3b82f6;">\n            <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #e2e8f0;">\n              <span style="font-weight: 600; color: #4b5563;">Bank A/C Name:</span>\n              <span style="font-weight: 500; color: #1f2937;">').concat(B.bankAccountName||B.employeeName,'</span>\n            </div>\n            <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #e2e8f0;">\n              <span style="font-weight: 600; color: #4b5563;">PAN No:</span>\n              <span style="font-weight: 500; color: #1f2937;">').concat(B.panNo||B.panNumber||"N/A",'</span>\n            </div>\n            <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #e2e8f0;">\n              <span style="font-weight: 600; color: #4b5563;">PF No:</span>\n              <span style="font-weight: 500; color: #1f2937;">').concat(B.pfNo||B.pfnum||"N/A",'</span>\n            </div>\n            <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #e2e8f0;">\n              <span style="font-weight: 600; color: #4b5563;">IFSC Code:</span>\n              <span style="font-weight: 500; color: #1f2937;">').concat(B.ifsccode||"N/A",'</span>\n            </div>\n            <div style="display: flex; justify-content: space-between; padding: 8px 0;">\n              <span style="font-weight: 600; color: #4b5563;">Email:</span>\n              <span style="font-weight: 500; color: #1f2937;">').concat(B.email||"N/A",'</span>\n            </div>\n          </div>\n        </div>\n\n        \x3c!-- Attendance Information - Use attendanceData instead of data --\x3e\n        // Attendance Information - Use attendanceData instead of data\n<div style="font-size: 18px; font-weight: bold; color: #1e40af; margin-bottom: 12px; border-left: 4px solid #1e40af; padding-left: 10px;">ATTENDANCE INFORMATION</div>\n<div style="padding: 0 30px;">\n  <table style="width: 100%; border-collapse: collapse; margin-bottom: 20px; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">\n    <thead>\n      <tr style="background: linear-gradient(135deg, #1e40af, #3730a3); color: white;">\n        <th style="padding: 12px; text-align: center; font-weight: 600;">Standard Days</th>\n        <th style="padding: 12px; text-align: center; font-weight: 600;">Payable Days</th>\n        <th style="padding: 12px; text-align: center; font-weight: 600;">Loss of Pay Days</th>\n        <th style="padding: 12px; text-align: center; font-weight: 600;">LOP Reversal Days</th>\n        <th style="padding: 12px; text-align: center; font-weight: 600;">Arrear Days</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr>\n        <td style="padding: 12px; text-align: center; background: white;">').concat(q(M.standardDays),'</td>\n        <td style="padding: 12px; text-align: center; background: white;">').concat(q(M.payableDays),'</td>\n        <td style="padding: 12px; text-align: center; background: white;">').concat(q(M.lossOfPayDays),'</td>\n        <td style="padding: 12px; text-align: center; background: white;">').concat(q(M.lopReversalDays),'</td>\n        <td style="padding: 12px; text-align: center; background: white;">').concat(q(M.arrearDays),"</td>\n      </tr>\n    </tbody>\n  </table>\n</div>\n\n        \x3c!-- Bonus Information --\x3e\n        ").concat(G>0?'\n        <div style="font-size: 18px; font-weight: bold; color: #1e40af; margin-bottom: 12px; border-left: 4px solid #1e40af; padding-left: 10px;">ADDITIONAL COMPENSATION</div>\n        <div style="padding: 0 30px;">\n          <table style="width: 100%; border-collapse: collapse; margin-bottom: 20px; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">\n            <thead>\n              <tr style="background: linear-gradient(135deg, #1e40af, #3730a3); color: white;">\n                <th style="padding: 12px; text-align: center; font-weight: 600;">Bonus Amount</th>\n                <th style="padding: 12px; text-align: center; font-weight: 600;">Hike Percentage</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr>\n                <td style="padding: 12px; text-align: center; background: white;">\u20b9'.concat(G.toLocaleString(),'</td>\n                <td style="padding: 12px; text-align: center; background: white;">').concat(M.hike,"%</td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n        "):"",'\n\n        \x3c!-- Salary Details --\x3e\n        <div style="margin: 20px 0;">\n          <div style="font-size: 18px; font-weight: bold; color: #1e40af; margin-bottom: 12px; border-left: 4px solid #1e40af; padding-left: 10px;">SALARY DETAILS</div>\n          \n          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">\n            \x3c!-- Earnings --\x3e\n            <div>\n              <div style="font-size: 16px; font-weight: bold; color: #1e40af; margin-bottom: 8px; border-left: 4px solid #1e40af; padding-left: 10px;">EARNINGS</div>\n              <table style="width: 100%; border-collapse: collapse; margin-bottom: 15px;">\n                <thead>\n                  <tr style="background: linear-gradient(135deg, #1e40af, #3730a3); color: white;">\n                    <th style="padding: 12px; text-align: left; font-weight: 600;">Description</th>\n                    <th style="padding: 12px; text-align: right; font-weight: 600;">Amount (\u20b9)</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  <tr style="border-bottom: 1px solid #e5e7eb;">\n                    <td style="padding: 12px;">Basic Salary</td>\n                    <td style="padding: 12px; text-align: right;">\u20b9').concat(Z(Y),'</td>\n                  </tr>\n                  <tr style="border-bottom: 1px solid #e5e7eb;">\n                    <td style="padding: 12px;">HRA</td>\n                    <td style="padding: 12px; text-align: right;">\u20b9').concat(Z(V),'</td>\n                  </tr>\n                  <tr style="border-bottom: 1px solid #e5e7eb;">\n                    <td style="padding: 12px;">Conveyance Allowance</td>\n                    <td style="padding: 12px; text-align: right;">\u20b9').concat(Z(J),'</td>\n                  </tr>\n                  <tr style="border-bottom: 1px solid #e5e7eb;">\n                    <td style="padding: 12px;">Medical Allowance</td>\n                    <td style="padding: 12px; text-align: right;">\u20b9').concat(Z(W),'</td>\n                  </tr>\n                  <tr style="border-bottom: 1px solid #e5e7eb;">\n                    <td style="padding: 12px;">Special Allowance</td>\n                    <td style="padding: 12px; text-align: right;">\u20b9').concat(Z(_),"</td>\n                  </tr>\n                  ").concat(G>0?'\n                  <tr style="border-bottom: 1px solid #e5e7eb;">\n                    <td style="padding: 12px;">Bonus</td>\n                    <td style="padding: 12px; text-align: right;">\u20b9'.concat(Z(G),"</td>\n                  </tr>\n                  "):"",'\n                  <tr style="background: #dbeafe; font-weight: bold;">\n                    <td style="padding: 12px;"><strong>GROSS EARNINGS</strong></td>\n                    <td style="padding: 12px; text-align: right;"><strong>\u20b9').concat(Z(U),'</strong></td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n\n            \x3c!-- Deductions --\x3e\n            <div>\n              <div style="font-size: 16px; font-weight: bold; color: #1e40af; margin-bottom: 8px; border-left: 4px solid #1e40af; padding-left: 10px;">DEDUCTIONS</div>\n              <table style="width: 100%; border-collapse: collapse; margin-bottom: 15px;">\n                <thead>\n                  <tr style="background: linear-gradient(135deg, #1e40af, #3730a3); color: white;">\n                    <th style="padding: 12px; text-align: left; font-weight: 600;">Description</th>\n                    <th style="padding: 12px; text-align: right; font-weight: 600;">Amount (\u20b9)</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  <tr style="border-bottom: 1px solid #e5e7eb;">\n                    <td style="padding: 12px;">Provident Fund</td>\n                    <td style="padding: 12px; text-align: right;">\u20b9').concat(Z(X),'</td>\n                  </tr>\n                  <tr style="border-bottom: 1px solid #e5e7eb;">\n                    <td style="padding: 12px;">Professional Tax</td>\n                    <td style="padding: 12px; text-align: right;">\u20b9').concat(Z(K),'</td>\n                  </tr>\n                  <tr style="border-bottom: 1px solid #e5e7eb;">\n                    <td style="padding: 12px;">Income Tax</td>\n                    <td style="padding: 12px; text-align: right;">\u20b9').concat(Z(Q),'</td>\n                  </tr>\n                  <tr style="background: #dbeafe; font-weight: bold;">\n                    <td style="padding: 12px;"><strong>TOTAL DEDUCTIONS</strong></td>\n                    <td style="padding: 12px; text-align: right;"><strong>\u20b9').concat(Z(z),'</strong></td>\n                  </tr>\n                  <tr style="background: #dcfce7; font-weight: bold; color: #166534; font-size: 18px;">\n                    <td style="padding: 12px;"><strong>NET SALARY</strong></td>\n                    <td style="padding: 12px; text-align: right;"><strong>\u20b9').concat(Z(H),'</strong></td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n\n        \x3c!-- Footer --\x3e\n        <div style="text-align: center; margin-top: 25px; padding-top: 15px; border-top: 2px solid #e5e7eb; color: #6b7280; font-size: 14px;">\n          <p>#1016, 11th Floor, DSL Abacus IT Park, Uppal Hyderabad-500039</p>\n          <p>Ph: 9632091726 | Email: hr@anasolconsultancy.com | www.anasol.com</p>\n          <p style="margin-top: 8px; color: #9ca3af; font-style: italic;">\n            This is a computer-generated document and does not require a signature\n          </p>\n        </div>\n      </div>\n    '),document.body.appendChild($);const ee=await c()($,{scale:2,useCORS:!0,logging:!1});document.body.removeChild($);const te=ee.toDataURL("image/png"),ae=new s.Ay("p","mm","a4"),re=210,oe=ee.height*re/ee.width;ae.addImage(te,"PNG",0,0,re,oe);const ne="Payslip_".concat(B.employeeName,"_").concat(e,"_").concat(a,".pdf");ae.save(ne),console.log("PDF payslip downloaded successfully:",ne)}catch(T){console.error("Error downloading payslip:",T),console.error("Error details:",T.message),alert("Failed to download payslip: "+T.message)}}(t),className:"px-4 py-2 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-colors font-medium text-sm",children:"Download"})]})})]},t.id)):(0,g.jsx)("tr",{children:(0,g.jsx)("td",{colSpan:"9",className:"px-6 py-8 text-center ".concat(z?"text-gray-400":"text-gray-500"),children:O?"Loading employees...":"No employees found. Add some employees to get started."})})})]})})]})]})]})}}}]);
//# sourceMappingURL=361.f0f23a85.chunk.js.map