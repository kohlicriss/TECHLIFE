"use strict";(self.webpackChunktechlife=self.webpackChunktechlife||[]).push([[810],{7249:(e,t,a)=>{a.d(t,{A:()=>i});var r=a(5043),s=a(579);const i=e=>{let{selectedDate:t,onSelectDate:a,onClose:i}=e;const[l,n]=(0,r.useState)(t||new Date),[o,d]=(0,r.useState)("calendar"),c=l.getFullYear(),x=l.getMonth(),g=["January","February","March","April","May","June","July","August","September","October","November","December"];return(0,s.jsxs)("div",{className:"absolute z-10 bg-white shadow-lg rounded-lg w-full p-4 mt-2 border border-gray-300",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:["calendar"===o&&(0,s.jsx)("button",{onClick:()=>n(new Date(l.getFullYear(),l.getMonth()-1,1)),className:"text-gray-600 hover:text-gray-800",children:"<"}),(0,s.jsxs)("div",{className:"flex-1 flex justify-center space-x-2",children:[(0,s.jsx)("button",{onClick:()=>d("month"),className:"font-semibold px-2 py-1 rounded-md hover:bg-gray-100",children:l.toLocaleString("default",{month:"long"})}),(0,s.jsx)("button",{onClick:()=>d("year"),className:"font-semibold px-2 py-1 rounded-md hover:bg-gray-100",children:c})]}),"calendar"===o&&(0,s.jsx)("button",{onClick:()=>n(new Date(l.getFullYear(),l.getMonth()+1,1)),className:"text-gray-600 hover:text-gray-800",children:">"})]}),"calendar"===o&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"grid grid-cols-7 gap-1 text-sm font-medium text-center text-gray-500",children:[(0,s.jsx)("div",{children:"Su"}),(0,s.jsx)("div",{children:"Mo"}),(0,s.jsx)("div",{children:"Tu"}),(0,s.jsx)("div",{children:"We"}),(0,s.jsx)("div",{children:"Th"}),(0,s.jsx)("div",{children:"Fr"}),(0,s.jsx)("div",{children:"Sa"})]}),(0,s.jsx)("div",{className:"grid grid-cols-7 gap-1 text-sm",children:(()=>{const e=new Date(c,x+1,0).getDate();const r=((e,t)=>new Date(t,e,1).getDay())(x,c),i=[];for(let t=0;t<r;t++)i.push((0,s.jsx)("div",{className:"text-gray-400 p-2 text-center"},`empty-${t}`));for(let l=1;l<=e;l++){const e=new Date(c,x,l),r=t&&e.toDateString()===t.toDateString(),n=e.toDateString()===(new Date).toDateString();i.push((0,s.jsx)("button",{onClick:()=>a(e),className:`p-1 rounded-full text-center hover:bg-gray-200 transition-colors ${n?"bg-orange-500 text-white font-bold":""} ${r&&!n?"bg-blue-200 text-blue-800 font-bold":""}`,children:l},`day-${l}`))}return i})()})]}),"month"===o&&(0,s.jsx)("div",{className:"grid grid-cols-3 gap-2 p-2",children:g.map((e,t)=>(0,s.jsx)("button",{onClick:()=>(n(new Date(c,t,1)),void d("calendar")),className:"p-2 rounded-md text-center hover:bg-gray-200 transition-colors "+(t===x?"bg-blue-500 text-white font-bold":""),children:e.substring(0,3)},e))}),"year"===o&&(()=>{const e=10*Math.floor(c/10),t=Array.from({length:12},(t,a)=>e-1+a);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("button",{onClick:()=>n(new Date(e-11,x,1)),className:"text-gray-600 hover:text-gray-800",children:"<"}),(0,s.jsxs)("h3",{className:"font-semibold",children:[e," - ",e+9]}),(0,s.jsx)("button",{onClick:()=>n(new Date(e+11,x,1)),className:"text-gray-600 hover:text-gray-800",children:">"})]}),(0,s.jsx)("div",{className:"grid grid-cols-4 gap-2 p-2",children:t.map(t=>(0,s.jsx)("button",{onClick:()=>(n(new Date(t,x,1)),void d("calendar")),className:`p-2 rounded-md text-center hover:bg-gray-200 transition-colors ${t===c?"bg-blue-500 text-white font-bold":"text-gray-700"} ${t<e||t>e+9?"text-gray-400":""}`,children:t},t))})]})})()]})}},9810:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Q});var r=a(5043),s=a(3895),i=a(9657),l=(a(2157),a(9002)),n=a(6992),o=a(6102),d=a(7869),c=a(379),x=a(2647),g=a(2291),m=a(2185),u=a(760),h=a(6028),y=a(6446),p=a(9570),b=a(7249),f=a(6213),v=a(3721),j=a(9910),w=a(363),N=a(184),k=a(5200),L=a(3156),D=a(579);const S=e=>{let{leave:t,onClose:a}=e;const{theme:s}=(0,r.useContext)(j.ob);return t?(0,D.jsx)(p.N,{children:(0,D.jsx)(y.P.div,{className:"fixed inset-0 z-50 flex items-center justify-center  bg-opacity-25 backdrop-blur-sm",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,D.jsxs)(y.P.div,{className:` ${"dark"===s?"bg-gray-500 text-gray-200":"bg-stone-100"} rounded-lg shadow-xl p-6 max-w-lg w-full relative`,initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},children:[(0,D.jsx)("button",{onClick:a,className:`w-20 h-20 absolute top-3 right-3 ${"dark"===s?"text-gray-200":"text-gray-500"} hover:text-gray-700 text-xl`,children:(0,D.jsx)(L.XoR,{})}),(0,D.jsx)("h2",{className:"text-2xl font-bold mb-4 "+("dark"===s?"text-gray-200":"text-gray-800"),children:"Leave Request Summary"}),(0,D.jsxs)("div",{className:"space-y-2",children:[(0,D.jsxs)("div",{children:[(0,D.jsx)("strong",{children:"Employee ID:"})," ",t.EmployeeId]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("strong",{children:"Employee Name:"})," ",t.EmployeeName]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("strong",{children:"Leave Type:"})," ",t.Leave_type]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("strong",{children:"Leave On:"})," ",Array.isArray(t.Leave_On)?t.Leave_On.join(" "):t.Leave_On]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("strong",{children:"Status:"})," ",t.status]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("strong",{children:"Request By:"})," ",t.Request_By]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("strong",{children:"Action Date:"})," ",t.Action_Date]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("strong",{children:"Rejection Reason:"})," ",t.Rejection_Reason||"-"]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("strong",{children:"Reason:"}),t.Reason||"-"," "]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("strong",{children:"Action:"})," ",(0,D.jsx)("a",{href:t.Action,target:"_blank",rel:"noreferrer",className:"text-gray-600 underline",children:"\u22ef"})]})]})]})})}):null};var A=a(8105),C=a(3442);const _=()=>{(0,v.Zp)();const[e,t]=(0,r.useState)("Today"),a=[{name:"Present",value:60},{name:"Late",value:20},{name:"Permission",value:20},{name:"Absent",value:4}],s={Present:"text-green-600",Late:"text-blue-600",Permission:"text-yellow-600",Absent:"text-red-600"},i=["#4CAF50","#2196F3","#FFC107","#EF5350"],x=[...a],{theme:g}=(0,r.useContext)(j.ob);return(0,D.jsxs)(y.P.div,{className:" p-2 rounded-xl shadow-md border border-gray-200 hover:border-blue-500 hover:shadow-xl transition-all duration-300 ease-in-out h-full "+("dark"===g?"bg-gray-600 ":"bg-stone-100 "),initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeOut"},children:[(0,D.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,D.jsx)("h2",{className:"text-xl font-bold "+("dark"===g?"bg-gradient-to-br from-orange-100 to-orange-400 bg-clip-text text-transparent border-gray-100":"text-gray-800 "),children:"Attendance Overview"}),(0,D.jsx)("div",{className:"relative inline-block text-left mt-1",children:(0,D.jsxs)("select",{value:e,onChange:e=>t(e.target.value),className:"inline-flex justify-center w-full rounded-md border border-gray-200 shadow-sm px-4 py-2  text-sm font-medium focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 "+("dark"===g?"bg-gray-600 text-white  hover:bg-gray-500":"bg-white text-gray-700"),children:[(0,D.jsx)("option",{children:"Today"}),(0,D.jsx)("option",{children:"This Week"}),(0,D.jsx)("option",{children:"This Month"}),(0,D.jsx)("option",{children:"Last Month"})]})})]}),(0,D.jsxs)("div",{className:"relative h-48 -mt-10",children:[(0,D.jsx)(l.u,{width:"100%",height:"100%",children:(0,D.jsxs)(n.r,{children:[(0,D.jsx)(o.F,{data:x,cx:"50%",cy:"100%",startAngle:180,endAngle:0,innerRadius:80,outerRadius:140,paddingAngle:2,dataKey:"value",cornerRadius:5,children:x.map((e,t)=>(0,D.jsx)(d.f,{fill:i[t%i.length]},`cell-${t}`))}),(0,D.jsx)(c.m,{})]})}),(0,D.jsxs)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-center mt-18",children:[(0,D.jsx)("p",{className:"text-sm font-medium "+("dark"===g?"text-white ":"text-gray-500 "),children:" Total Attendance"}),(0,D.jsx)("p",{className:"text-4xl font-bold "+("dark"===g?"text-white ":"text-gray-800 "),children:104})]})]}),(0,D.jsx)("hr",{className:"my-6 border-gray-200"}),(0,D.jsxs)("div",{className:"flex justify-between items-start",children:[(0,D.jsxs)("div",{children:[(0,D.jsx)("h3",{className:"text-lg font-semibold mb-2 "+("dark"===g?"text-white ":"text-gray-800 "),children:"Status"}),(0,D.jsx)("ul",{className:"space-y-2",children:(0,D.jsx)(p.N,{children:a.map((e,t)=>(0,D.jsxs)(y.P.li,{className:`flex items-center  font-medium ${"dark"===g?"text-white ":s[e.name]||"text-gray-700 "}`,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},children:[(0,D.jsx)("span",{className:"inline-block h-3 w-3 rounded-full mr-3 ring-2 ring-white",style:{backgroundColor:i[t%i.length]}}),e.name]},e.name))})})]}),(0,D.jsxs)("div",{className:"text-right",children:[(0,D.jsx)("h3",{className:"text-lg font-semibold  mb-2 "+("dark"===g?"text-white ":"text-gray-800 "),children:"Percentage"}),(0,D.jsx)("ul",{className:"space-y-2",children:(0,D.jsx)(p.N,{children:a.map((e,t)=>(0,D.jsxs)(y.P.li,{className:"  font-bold "+("dark"===g?"text-white ":"text-gray-700 "),initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.1*t},children:[e.value,"%"]},e.name))})})]})]})]})},P=e=>(0,D.jsx)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:(0,D.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm.87 14.13H11.5v-6h1.37v6zM12 5.5c-3.59 0-6.5 2.91-6.5 6.5s2.91 6.5 6.5 6.5 6.5-2.91 6.5-6.5-2.91-6.5-6.5-6.5zm.5 1.5h-1v5.25l4.5 2.62.75-1.35-3.5-2.02V7z"})}),R=[{Month:"Aug",Year:"25",NoofEmployee:100},{Month:"Sept",Year:"25",NoofEmployee:120},{Month:"Oct",Year:"25",NoofEmployee:80},{Month:"Nov",Year:"25",NoofEmployee:150},{Month:"Dec",Year:"25",NoofEmployee:7}],E=()=>{const[e,t]=(0,r.useState)("This Year"),{theme:a}=(0,r.useContext)(j.ob),s=R.map(e=>({name:`${e.Month}-${e.Year}`,employees:e.NoofEmployee})),i="dark"===a?"#FFFFFF":"#000000",n="bg-blue-600 text-white shadow-md",o="dark"===a?"bg-gray-600 text-gray-200 hover:bg-gray-500":"bg-white text-gray-700 hover:bg-gray-100";return(0,D.jsxs)(y.P.div,{className:" rounded-xl  focus:ring-2 focus:ring-blue-500 focus:border-blue-500 shadow-md p-4 w-full font-sans border border-gray-200 h-96 flex flex-col "+("dark"===a?"bg-gray-700 text-gray-200 ":"bg-stone-100 text-gray-800"),initial:{opacity:0,y:50},animate:{opacity:1,y:.5,scale:1},transition:{duration:.5,delay:.2},children:[(0,D.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,D.jsxs)("div",{className:"flex items-center",children:[(0,D.jsx)(P,{className:"w-6 h-6 text-blue-600 inline-block mr-2"}),(0,D.jsx)("h2",{className:"text-xl font-semibold text-start",children:"No of Leaves Taken"})]}),(0,D.jsxs)("div",{className:"flex p-0.5 rounded-lg border border-gray-300",children:[(0,D.jsx)("button",{className:`text-xs py-1 px-3 rounded-md transition-colors duration-200 ${"This Year"===e?n:o}`,onClick:()=>t("This Year"),children:"This Year"}),(0,D.jsx)("button",{className:`text-xs py-1 px-3 rounded-md transition-colors duration-200 ${"Last Year"===e?n:o}`,onClick:()=>t("Last Year"),children:"Last Year"})]})]}),(0,D.jsx)(l.u,{width:"100%",height:"90%",children:(0,D.jsxs)(g.E,{data:s,margin:{top:5,right:30,left:20,bottom:5},children:[(0,D.jsx)(m.W,{dataKey:"name",stroke:i,tick:{fill:i}}),(0,D.jsx)(u.h,{stroke:i,tick:{fill:i},hide:!0}),(0,D.jsx)(c.m,{contentStyle:{backgroundColor:"dark"===a?"#63676cff":"#fff",border:a?"1px solid #4B5563":"1px solid #ccc"}}),(0,D.jsx)(h.y,{dataKey:"employees",fill:"#ADD8E6"})]})})]})},$=()=>{const[e,t]=(0,r.useState)(new Date),[a,s]=(0,r.useState)(0),{theme:i}=(0,r.useContext)(j.ob),l=e.getMonth(),n=e.getFullYear(),o=new Date,d=((e,t)=>new Date(e,t+1,0).getDate())(n,l),c=((e,t)=>new Date(e,t,1).getDay())(n,l),x=Array.from({length:c},(e,t)=>t),g=Array.from({length:d},(e,t)=>t+1);return(0,D.jsx)("div",{className:`flex justify-center rounded-xl items-center  focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${"dark"===i?"bg-gray-600 ":"bg-stone-100 "} p-2`,children:(0,D.jsxs)(y.P.div,{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl w-full h-96 transform transition-all",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:0},children:[(0,D.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[(0,D.jsx)(y.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>{s(-1),t(e=>{const t=new Date(e);return t.setMonth(t.getMonth()-1),t})},className:"p-2 rounded-full text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200",children:(0,D.jsx)(A.A,{className:"h-5 w-5"})}),(0,D.jsxs)(y.P.h2,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},transition:{duration:.3},className:"text-xl font-semibold text-gray-800 dark:text-gray-100 flex-grow text-center",children:[["January","February","March","April","May","June","July","August","September","October","November","December"][l]," ",n]},l+"-"+n),(0,D.jsx)(y.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>{s(1),t(e=>{const t=new Date(e);return t.setMonth(t.getMonth()+1),t})},className:"p-2 rounded-full text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200",children:(0,D.jsx)(C.A,{className:"h-5 w-5"})})]}),(0,D.jsx)("div",{className:"grid grid-cols-7 gap-1 p-4 bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((e,t)=>(0,D.jsx)("div",{className:"text-center text-sm font-medium text-gray-500 dark:text-gray-400",children:e},t))}),(0,D.jsx)(p.N,{initial:!1,custom:a,children:(0,D.jsxs)(y.P.div,{custom:a,variants:{enter:e=>({x:e>0?300:-300,opacity:0}),center:{x:0,opacity:1},exit:e=>({x:e<0?300:-300,opacity:0})},initial:"enter",animate:"center",transition:{x:{type:"spring",stiffness:300,damping:30},opacity:{duration:.2}},className:"grid grid-cols-7 gap-1 p-4",children:[x.map((e,t)=>(0,D.jsx)("div",{className:"h-10"},`empty-${t}`)),g.map(e=>{const t=e===o.getDate()&&l===o.getMonth()&&n===o.getFullYear(),a=(c+e-1)%7===0||(c+e-1)%7===6;return(0,D.jsx)("div",{className:`flex items-center justify-center h-10 w-10  rounded-full text-gray-800 dark:text-gray-200 cursor-pointer \n                              ${t?"bg-blue-600 text-white font-bold shadow-md transform scale-110":""}\n                              ${t||a?"":"hover:bg-gray-100 dark:hover:bg-gray-700"}\n                              ${!t&&a?"text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700":""}\n                              ${t?"relative z-10":""}\n                              transition-all duration-200 ease-in-out\n                              `,children:e},e)})]},l+"-"+n)})]})})},F=[{title:"Total Present",value:"104/108"},{title:"Paid Leaves",value:"10"},{title:"Unpaid Leaves",value:"10"},{title:"Sick leaves",value:"15"},{title:"Pending Request",value:"15"}],M=e=>{let{title:t,icontextcolor:a,value:s,icon:i,color:l}=e;const{theme:n}=(0,r.useContext)(j.ob);return(0,D.jsxs)(y.P.div,{className:" rounded-xl p-2 shadow-md border border-gray-200 hover:border-blue-500 hover:shadow-xl   transition-shadow duration-300 h-full flex flex-col items-center justify-center text-center  focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 "+("dark"===n?"bg-gray-500 ":"bg-stone-100 "),initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},children:[(0,D.jsx)("div",{className:`w-16 h-16 flex items-center justify-center rounded-full mb-2 p-3 ${l}  ${a}`,children:r.cloneElement(i,{className:"w-8 h-8 rounded-full"})}),(0,D.jsxs)("div",{children:[(0,D.jsx)("h3",{className:"text-xl font-semibold  "+("dark"===n?"text-white ":"text-gray-800 "),children:t}),(0,D.jsx)("p",{className:"text-3xl font-bold mt-2 "+("dark"===n?"text-white ":"text-gray-800 "),children:s})]})]})},T=()=>(0,D.jsx)(y.P.div,{className:"p-6 h-full flex flex-col justify-between",initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:(0,D.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-6 gap-6 h-full",children:(0,D.jsxs)(p.N,{children:[(0,D.jsx)(I,{}),F.map((e,t)=>{let a,r,s;switch(e.title){case"Total Present":a=(0,D.jsx)(N.YXz,{className:"w-4 h-4 text-white"}),s="bg-green-100",r="text-green-300";break;case"Paid Leaves":a=(0,D.jsx)(N.VGZ,{className:"w-4 h-4 text-white"}),s="bg-pink-100",r="text-pink-300";break;case"Unpaid Leaves":a=(0,D.jsx)(k.JXP,{className:"w-4 h-4 text-white"}),s="bg-yellow-100",r="text-yellow-300";break;case"Sick leaves":a=(0,D.jsx)(k.JXP,{className:"w-4 h-4 text-white"}),s="bg-purple-100",r="text-purple-300";break;case"Pending Request":a=(0,D.jsx)(N.xvZ,{className:"w-4 h-4 text-white"}),s="bg-blue-100",r="text-blue-300";break;default:a=(0,D.jsx)(w.A,{className:"w-4 h-4 text-white"}),s="bg-gray-100"}return(0,D.jsx)(M,{icon:a,color:s,icontextcolor:r,value:e.value,title:e.title,trends:e.trends,trendPercentage:e.trendPercentage,trendPeriod:e.trendPeriod},t)})]})})}),B=[{title:"Total Present",value:104},{title:"Paid Leaves ",value:10},{title:"Unpaid Leaves",value:6},{title:"Sick leaves",value:5},{title:"Pending Request",value:10}],O=["#3B82F6","#F59E0B","#EF4444","#84CC16","#6B7280"],I=()=>{const{theme:e}=(0,r.useContext)(j.ob),t="dark"===e?"#FFFFFF":"#000000";return(0,D.jsx)("div",{className:"flex justify-center items-center",children:(0,D.jsxs)(n.r,{width:180,height:180,children:[(0,D.jsx)(o.F,{data:B,dataKey:"value",nameKey:"title",cx:"50%",cy:"50%",innerRadius:50,outerRadius:80,children:B.map((e,t)=>(0,D.jsx)(d.f,{fill:O[t%O.length]},`cell-${t}`))}),(0,D.jsx)("text",{x:"50%",y:"50%",textAnchor:"middle",dominantBaseline:"middle",className:"text-lg font-small ",stroke:t,children:"Leaves"}),(0,D.jsx)(c.m,{})]})})},H=e=>{let{leaveHistoryData:t,setLeaveHistoryData:a}=e;const[s,i]=(0,r.useState)("All"),[l,n]=(0,r.useState)("All"),[o,d]=(0,r.useState)("Recently added"),[c,x]=(0,r.useState)(1),[g,m]=(0,r.useState)(10),[u,h]=(0,r.useState)(!1),[b,f]=(0,r.useState)(!0),{empID:w}=(0,v.g)(),[k,L]=(0,r.useState)(null),[A,C]=(0,r.useState)(""),[_,P]=(0,r.useState)(""),[R,E]=(0,r.useState)(null),{userData:$}=(0,r.useContext)(j.ob),F=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";a(a=>a.map(a=>{var r;return a===k?{...a,status:e,Granted_By:"Approve"===e?"Granted By "+((null===$||void 0===$||null===(r=$.roles)||void 0===r?void 0:r[0])||"Admin"):a.Granted_By,Rejection_Reason:"Reject"===e?t:a.Rejection_Reason}:a}))},M=()=>{E(null)},T=["All",...new Set(t.map(e=>e.Leave_type))],B=["All",...new Set(t.map(e=>e.status))],O=(()=>{let e=[...t];switch(e=e.filter(e=>("All"===s||e.Leave_type===s)&&("All"===l||e.status===l)),o){case"Ascending":e.sort((e,t)=>e.Leave_type.localeCompare(t.Leave_type));break;case"Descending":e.sort((e,t)=>t.Leave_type.localeCompare(e.Leave_type));break;case"Last Month":const t=new Date;t.setMonth(t.getMonth()-1),e=e.filter(e=>new Date(e.Leave_On)>=t);break;case"Last 7 Days":const a=new Date;a.setDate(a.getDate()-7),e=e.filter(e=>new Date(e.Leave_On)>=a);break;default:e.sort((e,t)=>new Date(t.Action_Date)-new Date(e.Action_Date))}return e})(),{theme:I}=(0,r.useContext)(j.ob);return(0,D.jsxs)(y.P.div,{className:"shadow-lg rounded-xl p-6 col-span-full border border-gray-200 hover:border-indigo-500 hover:shadow-2xl transition-all duration-300 ease-in-out "+("dark"===I?"bg-gray-600":"bg-stone-100 text-gray-800"),initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.5,delay:.6},children:[(0,D.jsx)("h2",{className:`text-2xl font-bold mb-4 text-left border-b pb-4 ${"dark"===I?"bg-gradient-to-br from-green-400 to-green-800 bg-clip-text text-transparent border-gray-100":"text-gray-800 border-gray-200"} `,children:"Leave Requests History"}),(0,D.jsxs)("div",{className:"flex flex-wrap items-center gap-4 mb-6",children:[(0,D.jsxs)("div",{className:"relative",children:[(0,D.jsx)("label",{className:"text-base font-semibold mr-2 "+("dark"===I?"text-white":"text-gray-700"),children:"Leave Type:"}),(0,D.jsx)("select",{value:s,onChange:e=>i(e.target.value),className:"px-3 py-1.5 rounded-md focus:ring-indigo-500 focus:border-indigo-500 text-gray-700 border "+("dark"===I?"border-black  bg-gray-500 text-white":"border-gray-300"),children:T.map(e=>(0,D.jsx)("option",{value:e,children:e},e))})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{className:"text-base font-semibold mr-2 "+("dark"===I?"text-white":"text-gray-700"),children:"Status:"}),(0,D.jsx)("select",{value:l,onChange:e=>n(e.target.value),className:"px-3 py-1.5 rounded-md focus:ring-indigo-500 focus:border-indigo-500 text-gray-700 border "+("dark"===I?"border-black bg-gray-500 text-white":"border-gray-300"),children:B.map(e=>(0,D.jsx)("option",{value:e,children:e},e))})]}),(0,D.jsxs)("div",{className:"relative",children:[(0,D.jsx)("label",{className:"text-base font-semibold mr-2 "+("dark"===I?"text-white":"text-gray-700"),children:"Sort by:"}),(0,D.jsx)("select",{value:o,onChange:e=>d(e.target.value),className:`px-3 py-1.5 rounded-md focus:ring-indigo-500 focus:border-indigo-500 text-gray-700 ${"dark"===I?"border-black  bg-gray-500 text-white":"border-gray-300"} border`,children:["Recently added","Ascending","Descending","Last Month","Last 7 Days"].map(e=>(0,D.jsx)("option",{value:e,children:e},e))})]})]}),(0,D.jsx)("div",{className:"overflow-x-auto rounded-xl ",children:(0,D.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 border border-gray-200",children:[(0,D.jsx)("thead",{className:"bg-gray-50  "+("dark"===I?" bg-gray-500 text-white":""),children:(0,D.jsxs)("tr",{children:[(0,D.jsx)("th",{className:"w-1/6 px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider "+("dark"===I?"text-white":""),children:" Employee_ID "}),(0,D.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider "+("dark"===I?"text-white":""),children:" Leave Type"}),(0,D.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider "+("dark"===I?"text-white":""),children:" Leave On"}),(0,D.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider "+("dark"===I?"text-white":""),children:" Status"}),(0,D.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider "+("dark"===I?"text-white":""),children:" Request By"}),(0,D.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider "+("dark"===I?"text-white":""),children:" Granted By"}),(0,D.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider "+("dark"===I?"text-white":""),children:" Details"}),(0,D.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider "+("dark"===I?"text-white":""),children:" Action Date"}),(0,D.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider "+("dark"===I?"text-white":""),children:" Rejection Reason"}),(0,D.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider "+("dark"===I?"text-white":""),children:" Action"})]})}),(0,D.jsx)("tbody",{className:"bg-white divide-y divide-gray-500",children:(0,D.jsxs)(p.N,{mode:"wait",children:[O.length>0?O.map((e,t)=>(0,D.jsxs)(y.P.tr,{className:"hover:bg-gray-50",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,delay:.05*t},children:[(0,D.jsxs)("td",{className:"px-4 py-3 whitespace-nowrap text-sm  "+("dark"===I?" bg-gray-500 text-gray-200":"text-gray-900"),children:[" ",e.EmployeeId]}),(0,D.jsxs)("td",{className:"px-4 py-3 whitespace-nowrap text-sm  "+("dark"===I?" bg-gray-500 text-gray-200":"text-gray-900"),children:["  ",e.Leave_type]}),(0,D.jsxs)("td",{className:"px-4 py-3 whitespace-nowrap text-sm  "+("dark"===I?" bg-gray-500 text-gray-200":"text-gray-900"),children:[" ",e.Leave_On]}),(0,D.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm  "+("dark"===I?" bg-gray-500":""),children:(0,D.jsxs)("span",{className:"px-2 py-1 rounded-full text-white text-xs font-semibold "+("Approve"===e.status?"bg-green-500":"Reject"===e.status?"bg-red-500":"bg-blue-500"),children:[" ",e.status]})}),(0,D.jsxs)("td",{className:"px-4 py-3 whitespace-nowrap text-sm  "+("dark"===I?" bg-gray-500 text-gray-200":"text-gray-800"),children:[" ",e.Request_By||"-"]}),(0,D.jsxs)("td",{className:"px-4 py-3 whitespace-nowrap text-sm  "+("dark"===I?" bg-gray-500 text-gray-200":"text-gray-800"),children:[" ",e.Granted_By||"-"]}),(0,D.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-center "+("dark"===I?" bg-gray-500":""),children:(0,D.jsx)("button",{onClick:()=>{E(e)},className:"text-indigo-600 hover:text-indigo-800 text-lg  px-2 rounded",title:"View Details",children:(0,D.jsx)(N.t69,{className:` ${"dark"===I?"text-blue-200":"text-blue-600"} text-lg inline w-6 h-6 md:w-6 md:h-6 transition `})})}),(0,D.jsx)(S,{leave:R,onClose:M}),(0,D.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm  "+("dark"===I?" bg-gray-500 text-gray-200":"text-gray-900"),children:e.Action_Date}),(0,D.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm  "+("dark"===I?" bg-gray-500 text-gray-200":"text-gray-900"),children:e.Rejection_Reason||"-"}),(0,D.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm "+("dark"===I?" bg-gray-500 text-gray-200":"text-gray-900"),children:(0,D.jsx)("button",{onClick:()=>L(e),className:("dark"===I?"text-gray-200":"text-gray-600")+" hover:text-gray-800 text-lg",title:"Take Action",children:"\u22ef"})})]},t)):(0,D.jsx)(y.P.tr,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:(0,D.jsx)("td",{colSpan:"12",className:"text-center py-4 text-gray-500",children:u?"Loading...":"No matching records found."})}),k&&(0,D.jsx)(y.P.div,{className:"fixed inset-0 z-50 flex items-center justify-center backdrop-blur-sm bg-opacity-30",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,D.jsxs)(y.P.div,{className:" rounded-lg shadow-xl p-6 max-w-sm w-full relative "+("dark"===I?"bg-gray-800 text-white ":"bg-white text-gray-800 "),initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},children:[(0,D.jsx)("button",{onClick:()=>{L(null),C(""),P("")},className:"absolute top-3 right-3 text-gray-500 hover:text-gray-700 text-xl",children:"\xd7"}),(0,D.jsx)("h2",{className:"text-xl font-bold mb-4 "+("dark"===I?"text-white ":"text-gray-800 "),children:"Take Action"}),!A&&(0,D.jsxs)("div",{className:"flex gap-4 justify-center",children:[(0,D.jsx)("button",{className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",onClick:()=>C("approve"),children:"Approve"}),(0,D.jsx)("button",{className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",onClick:()=>C("reject"),children:"Reject"})]}),"approve"===A&&(0,D.jsx)("div",{className:"mt-4 flex flex-col items-center",children:(0,D.jsx)("button",{className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",onClick:()=>{F("Approve"),L(null),C("")},children:"Confirm Approve"})}),"reject"===A&&(0,D.jsxs)("div",{className:"mt-4 flex flex-col items-center",children:[(0,D.jsx)("input",{type:"text",row:1,placeholder:"Enter Subject...",value:_,onChange:e=>P(e.target.value),className:"border border-gray-300 rounded p-2 w-full mb-2"}),(0,D.jsx)("textarea",{rows:2,placeholder:"Enter rejection reason...",value:_,onChange:e=>P(e.target.value),className:"border border-gray-300 rounded p-2 w-full mb-2"}),(0,D.jsx)("button",{className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",onClick:()=>{F("Reject",_),L(null),C(""),P("")},disabled:!_.trim(),children:"Confirm Reject"})]})]})})]})})]})}),(0,D.jsx)("div",{className:"mt-4 flex flex-col sm:flex-row items-center justify-between",children:(0,D.jsx)("nav",{className:"flex items-center gap-2",children:(0,D.jsx)("button",{onClick:()=>x(e=>e+1),disabled:!b||u,className:"px-4 py-2 text-sm font-medium text-gray-700  border border-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed "+("dark"===I?"bg-gray-700 text-white border-gray-600 ":""),children:"Load More"})})})]})};const q=function(e){let{onBack:t,leaveHistoryData:a,setLeaveHistoryData:s}=e;const{theme:i}=(0,r.useContext)(j.ob),[l,n]=(0,r.useState)();return(0,D.jsxs)(y.P.div,{className:"p-2 sm:p-2 min-h-screen font-sans "+("dark"===i?"bg-gray-900 text-white":"bg-gray-50 text-gray-900"),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,D.jsxs)("header",{className:"flex flex-col sm:flex-row items-center justify-between pb-6 mb-2 border-b border-gray-200",children:[(0,D.jsx)("h1",{className:"text-3xl sm:text-4xl font-extrabold  mb-4 sm:mb-0 "+("dark"===i?"text-white":"text-gray-900"),children:"Leaves Report"}),(0,D.jsxs)(y.P.button,{onClick:t,className:"flex items-center px-4 py-2 text-sm font-semibold text-blue-600 border border-blue-600 rounded-lg hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors duration-200",whileHover:{scale:1.05,boxShadow:"0px 4px 8px rgba(0, 0, 0, 0.1)"},whileTap:{scale:.95},children:[(0,D.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4 mr-2",children:(0,D.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3"})}),"Back to Dashboard"]})]}),(0,D.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-1 gap-6 mb-2",children:(0,D.jsx)(T,{})}),(0,D.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-4",children:[(0,D.jsx)(_,{}),(0,D.jsx)(E,{}),(0,D.jsx)($,{})]}),(0,D.jsx)("div",{className:"w-full",children:(0,D.jsx)(H,{leaveHistoryData:a,setLeaveHistoryData:s})})]})};var G=a(9463),Y=a(8326),z=a(8877),U=a(2397);const J=e=>{let{onClose:t,onAddLeave:a}=e;const{theme:s}=(0,r.useContext)(j.ob),{empID:i}=(0,v.g)(),[l,n]=(0,r.useState)(!1),[o,d]=(0,r.useState)(!1),[c,x]=(0,r.useState)(null),[g,m]=(0,r.useState)(null),[u,h]=(0,r.useState)(""),[p,f]=(0,r.useState)(""),[w,N]=(0,r.useState)(i||""),[k,L]=(0,r.useState)(""),S=[{sickLeave:"5"},{casualLeave:"10"},{unpaidLeave:"0"},{paidLeave:"15"}].find(e=>Object.keys(e)[0].toLowerCase()===u.toLowerCase());return(0,D.jsx)(y.P.div,{className:"fixed inset-0 z-50 flex items-center justify-center bg-opacity-25 backdrop-blur-sm p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:(0,D.jsx)(y.P.div,{className:"relative w-full max-w-3xl mx-auto  my-auto max-h-[90vh] overflow-y-auto transform transition-all duration-300 scale-95 md:scale-100",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.3},children:(0,D.jsxs)("form",{onSubmit:e=>{e.preventDefault();const r={EmployeeId:w,EmployeeName:k,Leave_type:u,Leave_On:c&&g?[`${c.toLocaleDateString("en-GB")}`,"-",`${g.toLocaleDateString("en-GB")}`]:[c.toLocaleDateString("en-GB")],status:"Pending",Reason:p,Action_Date:(new Date).toLocaleDateString("en-GB"),Action:"https://icons8.com/icon/36944/ellipsis"};a(r),t()},className:"relative w-full max-w-3xl mx-auto rounded-lg   shadow-2xl my-auto max-h-[90vh] overflow-y-auto transform transition-all duration-300 scale-95 md:scale-100 border border-green-200 "+("dark"===s?"bg-gray-700 text-white":"bg-white text-gray-800"),children:[(0,D.jsx)("div",{className:" mb-4 text-center rounded-t bg-gradient-to-br from-orange-200 to-orange-600",children:(0,D.jsx)("h2",{className:"text-2xl pt-6  font-bold border-b pb-8 "+("dark"===s?"text-white border-gray-100":"text-gray-800 border-gray-200"),children:"     Request a Leave"})}),(0,D.jsxs)("div",{className:"space-y-4 p-4",children:[(0,D.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 ",children:[(0,D.jsxs)(y.P.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.1},children:[(0,D.jsx)("label",{className:"block text-sm font-medium  "+("dark"===s?"text-white":"text-gray-700"),children:"Employee Id"}),(0,D.jsx)("input",{type:"text",value:w,onChange:e=>N(e.target.value),className:"w-full px-3 mt-2 sm:px-4 md:px-5 py-3 sm:py-4 border-2 rounded-lg sm:rounded-xl transition-all duration-300 text-sm\n                                                focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 focus:outline-none "+("dark"===s?"border border-gray-100 text-white ":"border border-gray-300 text-black")})]}),(0,D.jsxs)(y.P.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2},children:[(0,D.jsx)("label",{className:"block text-sm font-medium  "+("dark"===s?"text-white":"text-gray-700"),children:"    Employee Name"}),(0,D.jsx)("input",{type:"text",value:k,onChange:e=>L(e.target.value),className:"w-full px-3 mt-2 sm:px-4 md:px-5 py-3 sm:py-4 border-2 rounded-lg sm:rounded-xl transition-all duration-300 text-sm\n                                                focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 focus:outline-none "+("dark"===s?"border border-gray-100 text-white ":"border border-gray-300 text-black")})]})]}),(0,D.jsxs)(y.P.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},children:[(0,D.jsx)("label",{className:"block text-sm font-medium  "+("dark"===s?"text-white":"text-gray-700"),children:"   Leave Type"}),(0,D.jsxs)("select",{className:`w-full px-3 mt-2 sm:px-4 md:px-5 py-3 sm:py-4 border-2 rounded-lg sm:rounded-xl transition-all duration-300 text-sm\n                                                focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 focus:outline-none ${"dark"===s?"border border-gray-100  ":"border border-gray-300 "} shadow-sm focus:border-indigo-500 focus:ring focus:ring-indigo-200 focus:ring-opacity-50`,onChange:e=>{h(e.target.value)},value:u,children:[(0,D.jsx)("option",{value:"",className:""+("dark"===s?"bg-gray-700 text-white":"bg-white text-gray-800"),children:"Select"}),(0,D.jsx)("option",{value:"Sick Leave",className:""+("dark"===s?"bg-gray-700 text-white":"bg-white text-gray-800"),children:"Sick Leave"}),(0,D.jsx)("option",{value:"Casual Leave",className:""+("dark"===s?"bg-gray-700 text-white":"bg-white text-gray-800"),children:"Casual Leave"}),(0,D.jsx)("option",{value:"Unpaid Leave",className:""+("dark"===s?"bg-gray-700 text-white":"bg-white text-gray-800"),children:"Unpaid Leave"}),(0,D.jsx)("option",{value:"Paid Leave",className:""+("dark"===s?"bg-gray-700 text-white":"bg-white text-gray-800"),children:"Paid Leave"})]})]}),(0,D.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,D.jsxs)(y.P.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.4},children:[(0,D.jsx)("label",{className:"block text-sm font-medium  "+("dark"===s?"text-white":"text-gray-700"),children:"   From"}),(0,D.jsxs)("div",{className:"relative mt-1",children:[(0,D.jsx)("input",{type:"text",readOnly:!0,value:c?c.toLocaleDateString("en-GB"):"dd-mm-yyyy",onClick:()=>n(!l),className:"w-full px-3 mt-2 sm:px-4 md:px-5 py-3 sm:py-4 border-2 rounded-lg sm:rounded-xl transition-all duration-300 text-sm\n                                                focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 focus:outline-none "+("dark"===s?"border border-gray-100 text-white":"border border-gray-300 text-black")}),l&&(0,D.jsx)(b.A,{selectedDate:c,onSelectDate:e=>{x(e),n(!1)},onClose:()=>n(!1),className:"$"})]})]}),(0,D.jsxs)(y.P.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.5},children:[(0,D.jsx)("label",{className:"block text-sm font-medium  "+("dark"===s?"text-white":"text-gray-700"),children:"     To"}),(0,D.jsxs)("div",{className:"relative mt-1",children:[(0,D.jsx)("input",{type:"text",readOnly:!0,value:g?g.toLocaleDateString("en-GB"):"dd-mm-yyyy",onClick:()=>d(!o),className:"w-full px-3 mt-2 sm:px-4 md:px-5 py-3 sm:py-4 border-2 rounded-lg sm:rounded-xl transition-all duration-300 text-sm\n                                                focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 focus:outline-none "+("dark"===s?"border border-gray-100 text-white":"border border-gray-300 text-black")}),o&&(0,D.jsx)(b.A,{selectedDate:g,onSelectDate:e=>{m(e),d(!1)},onClose:()=>d(!1)})]})]})]}),(0,D.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,D.jsxs)(y.P.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.6},children:[(0,D.jsx)("label",{className:"block text-sm font-medium  "+("dark"===s?"text-white":"text-gray-700"),children:"    No. of Days"}),(0,D.jsx)("input",{readOnly:!0,type:"text",value:c&&g?`${Math.floor((g-c)/864e5)+1} Days`:"0 Days",className:"w-full px-3 mt-2 sm:px-4 md:px-5 py-3 sm:py-4 border-2 rounded-lg sm:rounded-xl transition-all duration-300 text-sm\n                                                focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 focus:outline-none "+("dark"===s?"border border-gray-100 text-white ":"border border-gray-300 text-black")})]}),(0,D.jsxs)(y.P.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.7},children:[(0,D.jsx)("label",{className:"block text-sm font-medium  "+("dark"===s?"text-white":"text-gray-700"),children:"     Leave Duration"}),(0,D.jsxs)("select",{className:"w-full px-3 mt-2 sm:px-4 md:px-5 py-3 sm:py-4 border-2 rounded-lg sm:rounded-xl transition-all duration-300 text-sm\n                                                focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 focus:outline-none  "+("dark"===s?"border border-gray-100 text-white ":"border border-gray-300 text-black"),children:[(0,D.jsx)("option",{value:"",className:""+("dark"===s?"bg-gray-700 text-white":"bg-white text-gray-800"),children:"Select"}),(0,D.jsx)("option",{value:"Full Day",className:""+("dark"===s?"bg-gray-700 text-white":"bg-white text-gray-800"),children:"Full Day"}),(0,D.jsx)("option",{value:"First Half Day",className:""+("dark"===s?"bg-gray-700 text-white":"bg-white text-gray-800"),children:"First Half Day"}),(0,D.jsx)("option",{value:"Second Half Day",className:""+("dark"===s?"bg-gray-700 text-white":"bg-white text-gray-800"),children:"Second Half Day"})]})]})]}),(0,D.jsxs)(y.P.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.9},children:[(0,D.jsx)("label",{className:"block text-sm font-medium  "+("dark"===s?"text-white":"text-gray-700"),children:"    Remaining Days"}),(0,D.jsx)("input",{type:"text",readOnly:!0,value:S?Object.values(S)[0]:"0",className:"w-full px-3 mt-2 sm:px-4 md:px-5 py-3 sm:py-4 border-2 rounded-lg sm:rounded-xl transition-all duration-300 text-sm\n                                                focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 focus:outline-none cursor-not-allowed "+("dark"===s?"border border-gray-100 text-white ":"border border-gray-300 text-black")})]}),(0,D.jsxs)(y.P.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:1},children:[(0,D.jsx)("label",{className:"block text-sm font-medium  "+("dark"===s?"text-white":"text-gray-700"),children:"    Reason"}),(0,D.jsx)("textarea",{rows:"3",value:p,onChange:e=>f(e.target.value),className:"w-full px-3 mt-2 sm:px-4 md:px-5 py-3 sm:py-4 border-2 rounded-lg sm:rounded-xl transition-all duration-300 text-sm\n                                                focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 focus:outline-none "+("dark"===s?"border border-gray-100 text-white ":"border border-gray-300 text-black")})]})]}),(0,D.jsxs)("div",{className:"mt-6 flex justify-end space-x-3 border-t p-4",children:[(0,D.jsx)(y.P.button,{onClick:t,type:"button",className:"rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},children:"    Cancel"}),(0,D.jsx)(y.P.button,{type:"submit",className:"rounded-md border border-transparent bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},children:"    Add Leave"})]})]})})})},K=e=>{let{title:t,leaveData:a={type:t,consumed:0,remaining:0,total:0},color:x}=e;(0,s.A)("(max-width:500px)");const{type:g,consumed:m,remaining:u,total:h}=a,p=[{name:"Consumed",value:m},{name:"Remaining",value:Math.max(h-m,0)}],b=[x,"#E0E0E0"],{theme:f}=(0,r.useContext)(j.ob);return(0,D.jsxs)(y.P.div,{className:"rounded-xl shadow-lg p-6 h-full flex flex-col items-center justify-center border border-gray-200 hover:border-indigo-500 hover:shadow-2xl transition-all duration-300 ease-in-out "+("dark"===f?"bg-gray-600":"bg-stone-100 text-gray-800"),initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeOut"},children:[(0,D.jsx)("h1",{className:"text-xl font-bold mb-4 text-center "+("dark"===f?"bg-gradient-to-br from-yellow-100 to-yellow-400 bg-clip-text text-transparent border-gray-100":"text-gray-700"),children:t}),(0,D.jsx)(i.A,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",className:"w-full",children:(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(l.u,{width:140,height:140,children:(0,D.jsxs)(n.r,{children:[(0,D.jsx)(o.F,{data:p,cx:"50%",cy:"50%",innerRadius:30,outerRadius:60,paddingAngle:3,dataKey:"value",stroke:"none",className:"ml-0",children:p.map((e,t)=>(0,D.jsx)(d.f,{fill:b[t]},`cell-${t}`))}),(0,D.jsx)("text",{x:"50%",y:"50%",textAnchor:"middle",dominantBaseline:"middle",className:"text-lg font-semibold "+("dark"===f?"text-gray-200":"text-gray-700"),children:g.split(" ")[0]}),(0,D.jsx)(c.m,{})]})}),(0,D.jsxs)("div",{className:"text-center mt-4 space-y-2 text-sm "+("dark"===f?"text-white":"text-gray-700"),children:[(0,D.jsxs)("div",{children:[(0,D.jsx)("strong",{children:"Consumed:"})," ",(0,D.jsx)("span",{className:"font-semibold text-sm text-red-600",children:m})," ","days"]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("strong",{children:"Available:"})," ",(0,D.jsxs)("span",{className:"font-semibold text-sm text-green-600",children:[" ",u]})," ","days"]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("strong",{children:"Total:"})," ",h," days"]})]})]})})]})},W=()=>{const e=["#8884d8","#82ca9d","#ffc658","#ff8042","#a4de6c"],{empID:t}=(0,v.g)(),{theme:a}=(0,r.useContext)(j.ob),[g,m]=(0,r.useState)([]),[u,h]=(0,r.useState)(!0);(0,r.useEffect)(()=>{f.A.get(`http://192.168.0.123:8081/api/attendance/employee/${t}/personalLeavesData`).then(e=>{const t=e.data.map(e=>({name:e.leaveType,value:e.days}));m(t)}).catch(e=>{console.error("Error fetching personal leave data:",e)}).finally(()=>{h(!1)})},[t]);const p=(0,s.A)("(max-width:768px)"),b=g.filter(e=>e.value>0);return(0,D.jsxs)(y.P.div,{className:" rounded-xl shadow-lg p-6 h-full flex flex-col border border-gray-200 hover:border-indigo-500 hover:shadow-2xl transition-all duration-300 ease-in-out "+("dark"===a?"bg-gray-600":"bg-stone-100 text-gray-800"),initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:[(0,D.jsx)("h1",{className:`text-2xl font-bold mb-4 text-center ${"dark"===a?"bg-gradient-to-br from-purple-100 to-purple-400 bg-clip-text text-transparent border-gray-100":"text-gray-700 border-gray-200"} border-b pb-4`,children:"Leave Type Breakdown"}),(0,D.jsx)(i.A,{display:"flex",flexDirection:p?"column":"row",justifyContent:"center",alignItems:"center",height:"100%",gap:2,p:1,children:u?(0,D.jsx)("div",{className:"text-gray-500 text-center w-full",children:"Loading..."}):b.length>0?(0,D.jsx)(l.u,{width:"100%",height:250,children:(0,D.jsxs)(n.r,{children:[(0,D.jsx)(o.F,{data:b,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,fill:"#8884d8",dataKey:"value",paddingAngle:2,labelLine:!1,label:e=>{let{name:t,percent:a}=e;return`${t} ${(100*a).toFixed(0)}%`},children:b.map((t,a)=>(0,D.jsx)(d.f,{fill:e[a%e.length]},`cell-${a}`))}),(0,D.jsx)(x.J,{content:()=>(0,D.jsx)("text",{x:"50%",y:"50%",textAnchor:"middle",dominantBaseline:"middle",className:"text-base font-semibold text-gray-700",children:"Leave Types"}),position:"center"}),(0,D.jsx)(c.m,{})]})}):(0,D.jsx)("div",{className:` text-center w-full ${"dark"===a?"text-white":"text-gray-500"} italic`,children:"No leave data available."})})]})},V=()=>{const{employeeId:e}=(0,v.g)(),{theme:t}=(0,r.useContext)(j.ob),[a,n]=(0,r.useState)("All"),[o,d]=(0,r.useState)([]),[x,p]=(0,r.useState)(!0),[b,f]=(0,r.useState)(null);(0,r.useEffect)(()=>{if(!e)return console.error("Employee ID is missing from URL parameters."),void p(!1);p(!0),f(null);const t=`/attendance/employee/${e}/leavesbar-graph`;return U.HN.get(t).then(e=>{const t=e.data.map(e=>({Day:e.day,Rate:e.rate}));d(t),console.log("Give me Weekly pattern:",t)}).catch(e=>{console.error("Error fetching leaves bar chart data:",e);const t=e.response?`Error: ${e.response.status} - ${e.response.statusText}`:"Failed to load weekly leave pattern data.";f(t)}).finally(()=>{p(!1)}),()=>{}},[e]);const w=(0,s.A)("(max-width:768px)"),N=["All",...new Set(o.map(e=>e.Day))],k="All"===a?o:o.filter(e=>e.Day===a);return(0,D.jsxs)(y.P.div,{className:" shadow-lg rounded-xl p-6 h-full flex flex-col border border-gray-200 hover:border-indigo-500 hover:shadow-2xl transition-all duration-300 ease-in-out "+("dark"===t?"bg-gray-600":"bg-stone-100 text-gray-800"),initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:[(0,D.jsx)("h1",{className:`text-2xl font-bold mb-4 text-center ${"dark"===t?"bg-gradient-to-br from-purple-100 to-purple-400 bg-clip-text text-transparent border-gray-100":"text-gray-700 border-gray-200"} border-b pb-4`,children:"Weekly Leave Pattern"}),(0,D.jsxs)("div",{className:"mb-4 text-center",children:[(0,D.jsx)("label",{className:"mr-2 font-semibold  "+("dark"===t?"text-white":"text-gray-700"),children:"Select Day:"}),(0,D.jsx)("select",{value:a,onChange:e=>n(e.target.value),className:"p-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500 "+("dark"===t?"text-white":" text-gray-800 "),disabled:x||b,children:N.map(e=>(0,D.jsx)("option",{value:e,children:e},e))})]}),(0,D.jsx)(i.A,{display:"flex",flexDirection:w?"column":"row",justifyContent:"center",alignItems:"center",height:"100%",gap:5,p:w?1:2,children:x?(0,D.jsx)("div",{className:"text-gray-500 text-center w-full",children:"Loading..."}):b?(0,D.jsxs)("div",{className:"text-red-500 text-center w-full italic",children:["Error: ",b]}):k.length>0?(0,D.jsx)(l.u,{width:"100%",height:230,children:(0,D.jsxs)(g.E,{data:k,margin:{top:10,right:10,left:10,bottom:0},children:[(0,D.jsx)(m.W,{dataKey:"Day",axisLine:!1,tickLine:!1,className:"text-sm text-gray-600"}),(0,D.jsx)(u.h,{hide:!0}),(0,D.jsx)(c.m,{}),(0,D.jsx)(h.y,{dataKey:"Rate",fill:"#4338CA",radius:[8,8,0,0]})]})}):(0,D.jsx)("div",{className:` text-center w-full ${"dark"===t?"text-white":"text-gray-500"} italic`,children:"No weekly leave pattern data available."})})]})},X=e=>{let{leaveHistoryData:t}=e;const[a,s]=(0,r.useState)("All"),[i,l]=(0,r.useState)("All"),[n,o]=(0,r.useState)("Recently added"),[d,c]=(0,r.useState)(1),[x,g]=(0,r.useState)(10),[m,u]=(0,r.useState)(!1),[h,b]=(0,r.useState)(!0),{empID:f}=(0,v.g)(),[w,k]=(0,r.useState)(null),{theme:L}=(0,r.useContext)(j.ob),A=()=>{k(null)},C=["All",...new Set(t.map(e=>e.Leave_type))],_=["All",...new Set(t.map(e=>e.status))],P=(()=>{let e=[...t];switch(e=e.filter(e=>("All"===a||e.Leave_type===a)&&("All"===i||e.status===i)),n){case"Ascending":e.sort((e,t)=>e.Leave_type.localeCompare(t.Leave_type));break;case"Descending":e.sort((e,t)=>t.Leave_type.localeCompare(e.Leave_type));break;case"Last Month":const t=new Date;t.setMonth(t.getMonth()-1),e=e.filter(e=>new Date(e.Leave_On)>=t);break;case"Last 7 Days":const a=new Date;a.setDate(a.getDate()-7),e=e.filter(e=>new Date(e.Leave_On)>=a);break;default:e.sort((e,t)=>new Date(t.Action_Date)-new Date(e.Action_Date))}return e})();return(0,D.jsxs)(y.P.div,{className:"shadow-lg rounded-xl p-6 col-span-full border border-gray-200 hover:border-indigo-500 hover:shadow-2xl transition-all duration-300 ease-in-out "+("dark"===L?"bg-gray-600":"bg-stone-100 text-gray-800"),initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.5,delay:.6},children:[(0,D.jsx)("h2",{className:`text-2xl font-bold mb-4 text-left border-b pb-4 ${"dark"===L?"bg-gradient-to-br from-green-400 to-green-800 bg-clip-text text-transparent border-gray-100":"text-gray-800 border-gray-200"} `,children:"Leave Requests History"}),(0,D.jsxs)("div",{className:"flex flex-wrap items-center gap-4 mb-6",children:[(0,D.jsxs)("div",{className:"relative",children:[(0,D.jsx)("label",{className:"text-base font-semibold mr-2 "+("dark"===L?"text-white":"text-gray-700"),children:"Leave Type:"}),(0,D.jsx)("select",{value:a,onChange:e=>s(e.target.value),className:"px-3 py-1.5 rounded-md focus:ring-indigo-500 focus:border-indigo-500 text-gray-700 border "+("dark"===L?"border-black  bg-gray-500 text-white":"border-gray-300"),children:C.map(e=>(0,D.jsx)("option",{value:e,children:e},e))})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{className:"text-base font-semibold mr-2 "+("dark"===L?"text-white":"text-gray-700"),children:"Status:"}),(0,D.jsx)("select",{value:i,onChange:e=>l(e.target.value),className:"px-3 py-1.5 rounded-md focus:ring-indigo-500 focus:border-indigo-500 text-gray-700 border "+("dark"===L?"border-black bg-gray-500 text-white":"border-gray-300"),children:_.map(e=>(0,D.jsx)("option",{value:e,children:e},e))})]}),(0,D.jsxs)("div",{className:"relative",children:[(0,D.jsx)("label",{className:"text-base font-semibold mr-2 "+("dark"===L?"text-white":"text-gray-700"),children:"Sort by:"}),(0,D.jsx)("select",{value:n,onChange:e=>o(e.target.value),className:`px-3 py-1.5 rounded-md focus:ring-indigo-500 focus:border-indigo-500 text-gray-700 ${"dark"===L?"border-black  bg-gray-500 text-white":"border-gray-300"} border`,children:["Recently added","Ascending","Descending","Last Month","Last 7 Days"].map(e=>(0,D.jsx)("option",{value:e,children:e},e))})]})]}),(0,D.jsx)("div",{className:"overflow-x-auto rounded-xl",children:(0,D.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 broder border-gray-200",children:[(0,D.jsx)("thead",{className:"bg-gray-50 "+("dark"===L?"border-black  bg-gray-500 text-white":""),children:(0,D.jsxs)("tr",{children:[(0,D.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider "+("dark"===L?"text-white":""),children:" Leave Type"}),(0,D.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider "+("dark"===L?"text-white":""),children:" Leave On"}),(0,D.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider "+("dark"===L?"text-white":""),children:" Status"}),(0,D.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider "+("dark"===L?"text-white":""),children:" Request By"}),(0,D.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider "+("dark"===L?"text-white":""),children:" Granted By"}),(0,D.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider "+("dark"===L?"text-white":""),children:" Details"}),(0,D.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider "+("dark"===L?"text-white":""),children:" Action Date"}),(0,D.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider "+("dark"===L?"text-white":""),children:" Rejection Reason"}),(0,D.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider "+("dark"===L?"text-white":""),children:" Action"})]})}),(0,D.jsx)("tbody",{className:"bg-white divide-y divide-gray-500",children:(0,D.jsx)(p.N,{mode:"wait",children:P.length>0?P.map((e,t)=>(0,D.jsxs)(y.P.tr,{className:"hover:bg-gray-50",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,delay:.05*t},children:[(0,D.jsxs)("td",{className:"px-4 py-3 whitespace-nowrap text-sm  "+("dark"===L?" bg-gray-500 text-gray-200":"text-gray-900"),children:["  ",e.Leave_type]}),(0,D.jsxs)("td",{className:"px-4 py-3 whitespace-nowrap text-sm  "+("dark"===L?" bg-gray-500 text-gray-200":"text-gray-900"),children:[" ",e.Leave_On]}),(0,D.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm  "+("dark"===L?" bg-gray-500":""),children:(0,D.jsxs)("span",{className:"px-2 py-1 rounded-full text-white text-xs font-semibold "+("Approve"===e.status?"bg-green-500":"Reject"===e.status?"bg-red-500":"bg-blue-500"),children:[" ",e.status]})}),(0,D.jsxs)("td",{className:"px-4 py-3 whitespace-nowrap text-sm "+("dark"===L?" bg-gray-500 text-gray-200 ":"text-gray-900"),children:[" ",e.Request_By||"-"]}),(0,D.jsxs)("td",{className:"px-4 py-3 whitespace-nowrap text-sm "+("dark"===L?" bg-gray-500 text-gray-200":"text-gray-900"),children:[" ",e.Granted_By||"-"]}),(0,D.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-center "+("dark"===L?"bg-gray-500 text-gray-200 ":""),children:(0,D.jsx)("button",{onClick:()=>{k(e)},className:"text-indigo-600 hover:text-indigo-800 text-lg",title:"View Details",children:(0,D.jsx)(N.t69,{className:` ${"dark"===L?"text-blue-200":"text-blue-600"} text-lg inline w-6 h-6 md:w-6 md:h-6 transition `})})}),(0,D.jsx)(S,{leave:w,onClose:A}),(0,D.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm  "+("dark"===L?" bg-gray-500 text-gray-200":"text-gray-900"),children:e.Action_Date}),(0,D.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm  "+("dark"===L?" bg-gray-500 text-gray-200":"text-gray-900"),children:e.Rejection_Reason||"-"}),(0,D.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm  "+("dark"===L?" bg-gray-500 text-gray-200":"text-gray-900"),children:(0,D.jsx)("a",{href:e.Action,target:"_blank",rel:"noreferrer",className:` ${"dark"===L?"text-gray-200":"text-gray-600"} hover:text-gray-800 text-lg`,children:"\u22ef"})})]},t)):(0,D.jsx)(y.P.tr,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:(0,D.jsx)("td",{colSpan:"12",className:`text-center py-4 text-gray-500 ${"dark"===L?" bg-gray-500 text-white":""} italic`,children:m?"Loading...":"No matching records found."})})})})]})}),(0,D.jsx)("div",{className:"mt-4 flex flex-col sm:flex-row items-center justify-between",children:(0,D.jsx)("nav",{className:"flex items-center gap-2",children:(0,D.jsx)("button",{onClick:()=>c(e=>e+1),disabled:!h||m,className:"px-4 py-2 text-sm font-medium text-gray-700  border border-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed "+("dark"===L?"bg-gray-700 text-white border-gray-600 ":""),children:"Load More"})})})]})},Z=e=>{let{handleRequestLeave:t}=e;const{userData:a,theme:s}=(0,r.useContext)(j.ob),[i,l]=(0,r.useState)({image:null,initials:"  "});return(0,r.useEffect)(()=>{const e=JSON.parse(localStorage.getItem("emppayload")),t=localStorage.getItem("loggedInUserImage"),a=((null===e||void 0===e?void 0:e.displayName)||"  ").split(" ").map(e=>e[0]).join("").substring(0,2);l({image:t,initials:a})},[a]),(0,D.jsxs)(y.P.div,{className:"flex justify-between items-center p-3  rounded-lg shadow-md mb-3 "+("dark"===s?"bg-gray-600 ":"bg-purple-100 via-pink-100 "),initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,D.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,D.jsx)(y.P.div,{className:"w-16 h-16 bg-gray-300 rounded-full overflow-hidden",children:i.image?(0,D.jsx)("img",{src:i.image,alt:"Profile",className:"w-full h-full object-cover"}):(0,D.jsx)("span",{className:"text-sm font-bold "+("dark"===s?"text-white":"text-gray-600"),children:i.initials})}),(0,D.jsxs)("div",{children:[(0,D.jsxs)("h2",{className:"text-2xl font-bold flex items-center "+("dark"===s?"text-white":"text-gray-700"),children:["Welcome, ",null===a||void 0===a?void 0:a.fullName]}),(0,D.jsxs)("p",{className:" mt-1 text-sm "+("dark"===s?"text-white":"text-gray-600"),children:["You have ",(0,D.jsx)("span",{className:"font-bold text-green-600",children:"10"})," Approved &"," ",(0,D.jsx)("span",{className:"font-bold text-red-600",children:"2"})," Rejected leaves."]})]})]}),(0,D.jsx)(y.P.button,{onClick:t,className:"px-3 py-2 bg-indigo-600 text-sm text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Request Leave"})]})},Q=()=>{var e;const{theme:t}=(0,r.useContext)(j.ob),[a,s]=(0,r.useState)([]),{empID:i,employeeId:l}=(0,v.g)(),{userData:n}=(0,r.useContext)(j.ob),o=((null===n||void 0===n||null===(e=n.roles)||void 0===e?void 0:e[0])||"").toUpperCase(),[d,c]=(0,r.useState)(!1),[x,g]=(0,r.useState)(!1),[m,u]=(0,r.useState)(!1),[h,b]=(0,r.useState)(!0),[w,N]=(0,r.useState)(null),k=["TEAM_LEAD","HR","MANAGER","ADMIN"].includes(o),[L,S]=(0,r.useState)([{EmployeeId:"ACS00000001",Leave_type:"Unpaid Leave",Leave_On:["2025/07/10","-","2025/05/12"],status:"Reject",Request_By:"Panalisation Policy",Granted_By:"",Details:"https://www.flaticon.com/free-icon/document_16702688?term=detail+data&page=1&position=7&origin=search&related_id=16702688",Action_Date:"2025/07/12",Rejection_Reason:"Taking Continues leave in every month",Action:"https://icons8.com/icon/36944/ellipsis"},{EmployeeId:"ACS0000002",Leave_type:"Sick Leave",Leave_On:["2025/07/20"],Days:1,status:"Approve",Request_By:"Panalisation Policy",Granted_By:"",Details:"https://www.flaticon.com/free-icon/document_16702688?term=detail+data&page=1&position=7&origin=search&related_id=16702688",Action_Date:"2025/07/22",Rejection_Reason:null,Action:"https://icons8.com/icon/36944/ellipsis"},{EmployeeId:"ACS00000003",Leave_type:"Sick Leave",Leave_On:["2025/06/22","-","2025/06/24"],status:"Approve",Request_By:"Panalisation Policy",Granted_By:"",Details:"https://www.flaticon.com/free-icon/document_16702688?term=detail+data&page=1&position=7&origin=search&related_id=16702688",Action_Date:"2025/06/26",Rejection_Reason:null,Action:"https://icons8.com/icon/36944/ellipsis"},{EmployeeId:"ACS00000004",Leave_type:"Casual Leave",Leave_On:["2025/06/01"],status:"Approve",Request_By:"Panalisation Policy",Granted_By:"",Details:"https://www.flaticon.com/free-icon/document_16702688?term=detail+data&page=1&position=7&origin=search&related_id=16702688",Action_Date:"2025/06/03",Rejection_Reason:null,Action:"https://icons8.com/icon/36944/ellipsis"},{EmployeeId:"ACS00000005",Leave_type:"Sick Leave",Leave_On:["2025/05/22","-","2025/05/23"],status:"Approve",Request_By:"Panalisation Policy",Granted_By:"",Details:"https://www.flaticon.com/free-icon/document_16702688?term=detail+data&page=1&position=7&origin=search&related_id=16702688",Action_Date:"2025/05/24",Rejection_Reason:null,Action:"https://icons8.com/icon/36944/ellipsis"}]),[A,C]=(0,r.useState)([]),[_,P]=(0,r.useState)(null),R=null!==n&&void 0!==n&&n.roles[0]?`ROLE_${null===n||void 0===n?void 0:n.roles[0]}`:null;(0,r.useEffect)(()=>{(async()=>{let e=await U.ZQ.get(`role-access/${R}`);console.log("from Employee :",e.data),C(e.data)})()},[]),(0,r.useEffect)(()=>{A&&P(null===A||void 0===A?void 0:A.permissions)},[A]),console.log(_);const[E,$]=(0,r.useState)([]);(0,r.useEffect)(()=>{$(null===n||void 0===n?void 0:n.permissions)},[n]),console.log("permissions from userdata:",E);(0,r.useEffect)(()=>{const e=f.A.CancelToken.source();return(async()=>{try{const t=await U.HN.get(`https://hrms.anasolconsultancyservices.com/api/attendance/employee/${l}/leave-summary`,{cancelToken:e.token}),a={Casual:"Casual Leave",Paid:"Paid Leave",Unpaid:"Unpaid Leave",sick:"Sick Leave",Sick:"Sick Leave"},r=t.data.map(e=>({type:a[e.type]||e.type,consumed:e.consumed,remaining:e.remaining,total:e.total}));s(r)}catch(w){f.A.isCancel(w)?console.log("Request cancelled",w.message):console.error("Error fetching line chart data:",w)}})(),()=>{e.cancel("Operation canceled by the user.")}},[l]);const[F,M]=(0,r.useState)(!1),T=a.find(e=>"Casual Leave"===e.type),B=a.find(e=>"Paid Leave"===e.type),O=a.find(e=>"Sick Leave"===e.type),I=a.find(e=>"Unpaid Leave"===e.type);return(0,D.jsxs)("div",{className:"min-h-screen p-2 sm:p-3 lg:p-4 font-sans "+("dark"===t?"bg-gray-900 text-white":"bg-gray-100 text-gray-900"),children:[(0,D.jsxs)(p.N,{children:[k&&!d&&(0,D.jsx)(y.P.button,{onClick:()=>c(!0),className:"fixed right-0 top-1/2 transform -translate-y-1/2 bg-indigo-600 text-white p-2 rounded-l-lg shadow-lg z-50 hover:bg-indigo-700 transition-colors","aria-label":"Open Sidebar",initial:{x:"100%"},animate:{x:"0%"},exit:{x:"100%"},transition:{duration:.3,delay:.2},children:(0,D.jsx)(G.A,{})},"open-sidebar"),(_||[]).includes("VIEW_LEAVES_REPORTS")&&d&&(0,D.jsxs)(y.P.div,{className:`fixed inset-y-0 right-0 w-80 ${"dark"===t?"bg-gray-900":"bg-stone-100"} shadow-xl z-40 p-4 flex flex-col`,initial:{x:"100%"},animate:{x:"0%"},exit:{x:"100%"},transition:{duration:.3},children:[(0,D.jsxs)(y.P.h3,{className:`text-lg font-bold ${"dark"===t?"text-gray-200 hover:bg-gray-500":"text-gray-900 hover:bg-blue-100"} cursor-pointer mb-1 mt-20  p-2 rounded-md`,onClick:()=>{u(!0),c(!1)},whileHover:{scale:1.05},whileTap:{scale:.95},children:[(0,D.jsx)(z.Qak,{className:"w-5 h-5 inline-block mr-2"}),"My Leaves"]}),(0,D.jsxs)(y.P.h3,{className:`text-lg font-bold ${"dark"===t?"text-gray-200 hover:bg-gray-500":"text-gray-900 hover:bg-blue-100"} cursor-pointer mb-4   p-2 rounded-md`,onClick:()=>{g(!0),c(!1)},whileHover:{scale:1.05},whileTap:{scale:.95},children:[(0,D.jsx)(z.Qak,{className:"w-5 h-5 inline-block mr-2"}),"Leaves Reports"]}),(0,D.jsx)("button",{onClick:()=>c(!1),className:"absolute left-0 top-1/2 -translate-x-1/2 -translate-y-1/2 p-2 rounded-full bg-indigo-600 text-white shadow-lg hover:bg-indigo-700 transition-colors z-50","aria-label":"Close Sidebar",initial:{x:"100%"},animate:{x:"0%"},exit:{x:"100%"},transition:{duration:.3,delay:.2},children:(0,D.jsx)(Y.A,{})})]},"sidebar")]}),(0,D.jsx)("main",{className:"transition-all duration-300 ease-in-out "+(d&&k?"mr-80 filter blur-sm":"mr-0"),children:(0,D.jsx)(p.N,{mode:"wait",children:x?(0,D.jsx)(y.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:(0,D.jsx)(q,{onBack:()=>{g(!1)},leaveHistoryData:L,setLeaveHistoryData:S})},"reports"):(0,D.jsxs)(y.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:[(0,D.jsxs)("header",{className:"p-3 mb-6 text-left",children:[(0,D.jsx)("h1",{className:"text-4xl font-bold  mb-8 "+("dark"===t?"bg-gradient-to-br from-green-400 to-green-800 bg-clip-text text-transparent":"text-gray-800"),children:"Leaves"}),(0,D.jsx)(Z,{handleRequestLeave:()=>{M(!0)}})]}),(0,D.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:h?(0,D.jsx)("div",{className:"items-center justify-center",children:(0,D.jsxs)("div",{className:("dark"===t?"text-gray-200":"text-gray-700")+" text-center w-full",children:[" ",(0,D.jsx)("div",{className:"w-16 h-16  rounded-full mb-1 p-3",children:(0,D.jsx)(z.RK_,{className:"w-8 h-8  ml-12  bg-yllow-500  text-yellow-400 rounded-full"})}),"Leaves data loading..."]})}):w?(0,D.jsx)("p",{className:"text-red-500",children:w}):(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(K,{title:"Casual Leave",leaveData:T,color:"#4CAF50"}),(0,D.jsx)(K,{title:"Paid Leave",leaveData:B,color:"#2196F3"}),(0,D.jsx)(K,{title:"Sick Leave",leaveData:O,color:"#FFC107"}),(0,D.jsx)(K,{title:"Unpaid Leave",leaveData:I,color:"#EF5350"})]})}),(0,D.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[(0,D.jsx)(W,{}),(0,D.jsx)(V,{})]}),(0,D.jsx)(X,{leaveHistoryData:L}),F&&(0,D.jsx)(J,{onClose:()=>{M(!1)},onAddLeave:e=>{S(t=>[e,...t])},empID:i})]},"dashboard")})})]})}}}]);
//# sourceMappingURL=810.3c633085.chunk.js.map