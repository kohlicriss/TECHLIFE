/*! For license information please see 245.1de1892b.chunk.js.LICENSE.txt */
(self.webpackChunktechlife=self.webpackChunktechlife||[]).push([[245],{245:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>E});var r=a(3986),s=a(9379),o=a(5043),n=a(5439),l=a(9570),i=a(6446),c=a(184),d=a(7234),u=(a(8139),a(5200)),g=a(2397),p=a(579);const m=["children"],x=["children"],h=["children"],b=["children"],y=e=>{let{projectId:t}=e;const{theme:a}=(0,o.useContext)(d.ob),[r,n]=(0,o.useState)([]),[l,i]=(0,o.useState)(!1),[g,m]=(0,o.useState)(null),[x,h]=(0,o.useState)(null),[b,y]=(0,o.useState)(!1),[j,f]=(0,o.useState)(!1),[N,w]=(0,o.useState)(!1),[k,S]=(0,o.useState)({sprintName:"",startDate:"",endDate:"",status:"PLANNED"}),C="http://192.168.0.112:8090/api/sprints",A=()=>localStorage.getItem("accessToken"),D=async(e,t)=>{try{const a=e.headers.get("authorization")||e.headers.get("Authorization");a&&v(a),(null!==t&&void 0!==t&&t.accessToken||null!==t&&void 0!==t&&t.token||null!==t&&void 0!==t&&t.jwt)&&v((null===t||void 0===t?void 0:t.accessToken)||(null===t||void 0===t?void 0:t.token)||(null===t||void 0===t?void 0:t.jwt))}catch(a){}},P=async()=>{if(t){i(!0),m(null);try{const e=await fetch("".concat(C,"/project/").concat(encodeURIComponent(t)),{headers:{Accept:"application/json",Authorization:A()?"Bearer ".concat(A()):void 0}});if(!e.ok){const t=await e.text().catch(()=>null);throw new Error(t||"HTTP ".concat(e.status))}const a=await e.json().catch(()=>[]);await D(e,a),n(Array.isArray(a)?a:a.sprints||[]),Array.isArray(a)&&a.length&&h(a[0])}catch(e){m(e.message||"Failed to load sprints"),n([])}finally{i(!1)}}};(0,o.useEffect)(()=>{P()},[t]);return(0,p.jsxs)("div",{className:"p-4 rounded-xl shadow-md ".concat("dark"===a?"bg-gray-800 text-gray-200":"bg-white text-gray-800"),children:[(0,p.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,p.jsx)("h3",{className:"text-xl font-bold",children:"Sprints"}),(0,p.jsxs)("div",{className:"flex items-center gap-2",children:[(0,p.jsx)("button",{onClick:()=>{S({sprintName:"",startDate:"",endDate:"",status:"PLANNED"}),y(!0)},title:"Create Sprint",className:"p-2 rounded-md bg-green-600 text-white",children:(0,p.jsx)(c.OiG,{})}),(0,p.jsx)("button",{onClick:()=>{x&&(S({sprintName:x.sprintName||x.title||"",startDate:x.startDate||"",endDate:x.endDate||"",status:x.status||"PLANNED"}),f(!0))},disabled:!x,title:"Edit Selected",className:"p-2 rounded-md bg-yellow-500 text-white",children:(0,p.jsx)(u.SG1,{})}),(0,p.jsx)("button",{onClick:()=>(async e=>{if(t&&e&&window.confirm("Delete sprint ".concat(e.sprintId||e.sprint_id||e.id,"?"))){w(!0);try{const a=e.sprintId||e.sprint_id||e.id,r=await fetch("".concat(C,"/").concat(encodeURIComponent(t),"/").concat(encodeURIComponent(a)),{method:"DELETE",headers:{Authorization:A()?"Bearer ".concat(A()):void 0}}),s=await r.json().catch(()=>null);if(await D(r,s),!r.ok)throw new Error((null===s||void 0===s?void 0:s.message)||"Status ".concat(r.status));await P()}catch(a){alert("Delete failed: "+(a.message||a))}finally{w(!1)}}})(x),disabled:!x,title:"Delete Selected",className:"p-2 rounded-md bg-red-600 text-white",children:(0,p.jsx)(u.Zve,{})})]})]}),l?(0,p.jsx)("div",{className:"py-6 text-center text-sm text-indigo-500",children:"Loading sprints..."}):g?(0,p.jsx)("div",{className:"py-4 text-center text-sm text-red-500",children:g}):0===r.length?(0,p.jsx)("div",{className:"py-6 text-center text-sm text-gray-500",children:"No sprints found."}):(0,p.jsx)("div",{className:"overflow-x-auto",children:(0,p.jsxs)("table",{className:"min-w-full text-sm",children:[(0,p.jsx)("thead",{className:"text-left text-xs uppercase text-gray-500",children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{className:"py-2 px-3",children:"Sprint ID"}),(0,p.jsx)("th",{className:"py-2 px-3",children:"Name"}),(0,p.jsx)("th",{className:"py-2 px-3",children:"Start"}),(0,p.jsx)("th",{className:"py-2 px-3",children:"End"}),(0,p.jsx)("th",{className:"py-2 px-3",children:"Status"})]})}),(0,p.jsx)("tbody",{children:r.map((e,t)=>(0,p.jsxs)("tr",{onClick:()=>h(e),className:"cursor-pointer ".concat(x===e?"ring-2 ring-indigo-300":""," hover:bg-gray-50"),children:[(0,p.jsx)("td",{className:"py-2 px-3",children:e.sprintId||e.sprint_id||e.id||"-"}),(0,p.jsx)("td",{className:"py-2 px-3",children:e.sprintName||e.title||"-"}),(0,p.jsx)("td",{className:"py-2 px-3",children:e.startDate||"-"}),(0,p.jsx)("td",{className:"py-2 px-3",children:e.endDate||"-"}),(0,p.jsx)("td",{className:"py-2 px-3",children:e.status||"-"})]},e.sprintId||e.sprint_id||t))})]})}),b&&(0,p.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4 backdrop-blur-sm",children:(0,p.jsxs)("form",{onSubmit:async e=>{if(null===e||void 0===e||e.preventDefault(),t){w(!0);try{const e=await fetch("".concat(C,"/project/").concat(encodeURIComponent(t)),{method:"POST",headers:{"Content-Type":"application/json",Authorization:A()?"Bearer ".concat(A()):void 0},body:JSON.stringify(k)}),a=await e.json().catch(()=>null);if(await D(e,a),!e.ok)throw new Error((null===a||void 0===a?void 0:a.message)||"Status ".concat(e.status));y(!1),await P()}catch(a){alert("Create failed: "+(a.message||a))}finally{w(!1)}}},className:"w-full max-w-lg p-7 rounded-2xl shadow-2xl transition-all duration-300 ".concat("dark"===a?"bg-gray-800 text-gray-100 border border-gray-700":"bg-white text-gray-900 border border-gray-200"),onClick:e=>e.stopPropagation(),children:[(0,p.jsxs)("div",{className:"flex justify-between items-start mb-5 pb-2 border-b border-gray-300/50 dark:border-gray-700",children:[(0,p.jsx)("h4",{className:"text-xl font-bold tracking-tight",children:"Create New Sprint"}),(0,p.jsx)("button",{type:"button",onClick:()=>y(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors text-2xl leading-none",children:"\xd7"})]}),(0,p.jsxs)("div",{className:"space-y-4",children:[(0,p.jsx)("input",{className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-base ".concat("dark"===a?"bg-gray-700 border-gray-600 placeholder-gray-400":"bg-gray-50 border-gray-300"),placeholder:"Sprint Name (e.g., Sprint 1, Q1 Project Kickoff)",value:k.sprintName,onChange:e=>S(t=>(0,s.A)((0,s.A)({},t),{},{sprintName:e.target.value})),required:!0}),(0,p.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,p.jsx)("input",{type:"date",className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ".concat("dark"===a?"bg-gray-700 border-gray-600":"bg-gray-50 border-gray-300"),value:k.startDate,onChange:e=>S(t=>(0,s.A)((0,s.A)({},t),{},{startDate:e.target.value})),required:!0}),(0,p.jsx)("input",{type:"date",className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ".concat("dark"===a?"bg-gray-700 border-gray-600":"bg-gray-50 border-gray-300"),value:k.endDate,onChange:e=>S(t=>(0,s.A)((0,s.A)({},t),{},{endDate:e.target.value})),required:!0})]}),(0,p.jsxs)("select",{className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ".concat("dark"===a?"bg-gray-700 border-gray-600 text-gray-100":"bg-gray-50 border-gray-300 text-gray-900"),value:k.status,onChange:e=>S(t=>(0,s.A)((0,s.A)({},t),{},{status:e.target.value})),children:[(0,p.jsx)("option",{value:"PLANNED",children:"PLANNED"}),(0,p.jsx)("option",{value:"ACTIVE",children:"ACTIVE"}),(0,p.jsx)("option",{value:"COMPLETED",children:"COMPLETED"}),(0,p.jsx)("option",{value:"CANCELLED",children:"CANCELLED"})]})]}),(0,p.jsxs)("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-gray-300/50 dark:border-gray-700",children:[(0,p.jsx)("button",{type:"button",onClick:()=>y(!1),className:"px-5 py-2 rounded-lg font-semibold transition-colors border ".concat("dark"===a?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-100"),children:"Cancel"}),(0,p.jsxs)("button",{type:"submit",disabled:N,className:"px-5 py-2 bg-green-600 text-white rounded-lg font-semibold shadow-md hover:bg-green-700 disabled:bg-green-400 disabled:cursor-not-allowed transition-colors",children:["     ",N?"Creating...":"Create"," "]})]})]})}),j&&x&&(0,p.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4 backdrop-blur-sm",children:(0,p.jsxs)("form",{onSubmit:async e=>{if(null===e||void 0===e||e.preventDefault(),t&&x){w(!0);try{const e=x.sprintId||x.sprint_id||x.id,a=await fetch("".concat(C,"/").concat(encodeURIComponent(t),"/").concat(encodeURIComponent(e)),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:A()?"Bearer ".concat(A()):void 0},body:JSON.stringify(k)}),r=await a.json().catch(()=>null);if(await D(a,r),!a.ok)throw new Error((null===r||void 0===r?void 0:r.message)||"Status ".concat(a.status));f(!1),await P()}catch(a){alert("Update failed: "+(a.message||a))}finally{w(!1)}}},className:"w-full max-w-lg p-7 rounded-2xl shadow-2xl transition-all duration-300 ".concat("dark"===a?"bg-gray-800 text-gray-100 border border-gray-700":"bg-white text-gray-900 border border-gray-200"),onClick:e=>e.stopPropagation(),children:[(0,p.jsxs)("div",{className:"flex justify-between items-start mb-5 pb-2 border-b border-gray-300/50 dark:border-gray-700",children:[(0,p.jsx)("h4",{className:"text-xl font-bold tracking-tight",children:"Update Sprint Details"}),(0,p.jsx)("button",{type:"button",onClick:()=>f(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors text-2xl leading-none",children:" \xd7 "})]}),(0,p.jsxs)("div",{className:"space-y-4",children:[(0,p.jsx)("input",{className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-base ".concat("dark"===a?"bg-gray-700 border-gray-600 placeholder-gray-400":"bg-gray-50 border-gray-300"),placeholder:"Sprint Name (e.g., Sprint 1, Q1 Project Kickoff)",value:k.sprintName,onChange:e=>S(t=>(0,s.A)((0,s.A)({},t),{},{sprintName:e.target.value})),required:!0}),(0,p.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,p.jsx)("input",{type:"date",className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ".concat("dark"===a?"bg-gray-700 border-gray-600":"bg-gray-50 border-gray-300"),value:k.startDate,onChange:e=>S(t=>(0,s.A)((0,s.A)({},t),{},{startDate:e.target.value})),required:!0}),(0,p.jsx)("input",{type:"date",className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ".concat("dark"===a?"bg-gray-700 border-gray-600":"bg-gray-50 border-gray-300"),value:k.endDate,onChange:e=>S(t=>(0,s.A)((0,s.A)({},t),{},{endDate:e.target.value})),required:!0})]}),(0,p.jsxs)("select",{className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ".concat("dark"===a?"bg-gray-700 border-gray-600 text-gray-100":"bg-gray-50 border-gray-300 text-gray-900"),value:k.status,onChange:e=>S(t=>(0,s.A)((0,s.A)({},t),{},{status:e.target.value})),children:[(0,p.jsx)("option",{value:"PLANNED",children:"PLANNED"}),(0,p.jsx)("option",{value:"ACTIVE",children:"ACTIVE"}),(0,p.jsx)("option",{value:"COMPLETED",children:"COMPLETED"}),(0,p.jsx)("option",{value:"CANCELLED",children:"CANCELLED"})]})]}),(0,p.jsxs)("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-gray-300/50 dark:border-gray-700",children:[(0,p.jsx)("button",{type:"button",onClick:()=>f(!1),className:"px-5 py-2 rounded-lg font-semibold transition-colors border ".concat("dark"===a?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-100"),children:"    Cancel"}),(0,p.jsxs)("button",{type:"submit",disabled:N,className:"px-5 py-2 bg-yellow-500 text-white rounded-lg font-semibold shadow-md hover:bg-yellow-600 disabled:bg-yellow-400 disabled:cursor-not-allowed transition-colors",children:["    ",N?"Updating...":"Update"]})]})]})})]})},j=e=>{var t,a;let{mode:r="create",projectId:n,initialData:l={},onClose:i=()=>{},onSuccess:c=()=>{}}=e;const{theme:u}=(0,o.useContext)(d.ob),[g,m]=(0,o.useState)({timeline_progress:l.timeline_progress||"",client:l.client||"",total_cost:l.total_cost||"",days_to_work:l.days_to_work||"",priority:l.priority||"",startedOn:l.startedOn?l.startedOn.slice(0,10):"",endDate:l.endDate?l.endDate.slice(0,10):"",manager_employeeId:(null===(t=l.manager)||void 0===t?void 0:t.employeeId)||"",manager_name:(null===(a=l.manager)||void 0===a?void 0:a.name)||"",dueAlert:"undefined"!==typeof l.dueAlert?l.dueAlert:0}),[x,h]=(0,o.useState)(!1),b="https://hrms.anasolconsultancyservices.com/api/employee",y=e=>t=>m(a=>(0,s.A)((0,s.A)({},a),{},{[e]:t.target.value}));return(0,p.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4 backdrop-blur-sm",children:(0,p.jsxs)("form",{onSubmit:async e=>{if(null===e||void 0===e||e.preventDefault(),!n)return alert("Project id missing");const t=localStorage.getItem("accessToken");if(!t)return alert("Missing access token. Please login.");const a={timeline_progress:g.timeline_progress,client:g.client,total_cost:g.total_cost,days_to_work:g.days_to_work,priority:g.priority,startedOn:g.startedOn||null,endDate:g.endDate||null,manager:{employeeId:g.manager_employeeId,name:g.manager_name},dueAlert:Number(g.dueAlert||0)},s="create"===r?"".concat(b,"/create/ProjectOverview/").concat(encodeURIComponent(n)):"".concat(b,"/update/ProjectOverview/").concat(encodeURIComponent(n));h(!0);try{const e=await fetch(s,{method:"create"===r?"POST":"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(a)}),o=await e.json().catch(()=>null);if(await(async(e,t)=>{const a=e.headers.get("authorization")||e.headers.get("Authorization");if(a){const e=String(a).startsWith("Bearer ")?a.split(" ")[1]:a;try{localStorage.setItem("accessToken",e)}catch(s){}}const r=(null===t||void 0===t?void 0:t.accessToken)||(null===t||void 0===t?void 0:t.token)||(null===t||void 0===t?void 0:t.jwt);if(r){const e=String(r).startsWith("Bearer ")?r.split(" ")[1]:r;try{localStorage.setItem("accessToken",e)}catch(o){}}})(e,o),!e.ok){const t=(null===o||void 0===o?void 0:o.message)||e.statusText||"Status ".concat(e.status);throw new Error(t)}c(o||a),i()}catch(o){console.error("".concat(r," overview failed"),o),alert("Failed to ".concat(r," overview: ").concat(o.message||o))}finally{h(!1)}},className:"w-full max-w-2xl p-8 rounded-2xl shadow-2xl transition-all duration-300 ".concat("dark"===u?"bg-gray-900 text-gray-100 border border-gray-700":"bg-white text-gray-800 border border-gray-200"),onClick:e=>e.stopPropagation(),children:[(0,p.jsxs)("div",{className:"flex justify-between items-start mb-6 pb-2 border-b border-gray-300/50",children:[(0,p.jsx)("h3",{className:"text-2xl font-extrabold tracking-tight",children:"create"===r?"Create Project Overview":"Update Project Overview"}),(0,p.jsx)("button",{type:"button",onClick:i,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors text-2xl leading-none",children:"\xd7"})]}),(0,p.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-4",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Timeline Progress"}),(0,p.jsx)("input",{className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ".concat("dark"===u?"bg-gray-800 border-gray-600 placeholder-gray-400":"bg-gray-50 border-gray-300"),value:g.timeline_progress,onChange:y("timeline_progress"),placeholder:"e.g., 50%"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Client"}),(0,p.jsx)("input",{className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ".concat("dark"===u?"bg-gray-800 border-gray-600 placeholder-gray-400":"bg-gray-50 border-gray-300"),value:g.client,onChange:y("client"),placeholder:"Client Company Name"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Total Cost"}),(0,p.jsx)("input",{className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ".concat("dark"===u?"bg-gray-800 border-gray-600 placeholder-gray-400":"bg-gray-50 border-gray-300"),value:g.total_cost,onChange:y("total_cost"),placeholder:"e.g., $15,000"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Days to Work"}),(0,p.jsx)("input",{className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ".concat("dark"===u?"bg-gray-800 border-gray-600 placeholder-gray-400":"bg-gray-50 border-gray-300"),value:g.days_to_work,onChange:y("days_to_work"),placeholder:"e.g., 45"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Priority"}),(0,p.jsx)("input",{className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ".concat("dark"===u?"bg-gray-800 border-gray-600 placeholder-gray-400":"bg-gray-50 border-gray-300"),value:g.priority,onChange:y("priority"),placeholder:"e.g., High, Medium, Low"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Due Alert (days)"}),(0,p.jsx)("input",{type:"number",className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ".concat("dark"===u?"bg-gray-800 border-gray-600 placeholder-gray-400":"bg-gray-50 border-gray-300"),value:g.dueAlert,onChange:y("dueAlert"),placeholder:"e.g., 7"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Start Date"}),(0,p.jsx)("input",{type:"date",className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ".concat("dark"===u?"bg-gray-800 border-gray-600 placeholder-gray-400":"bg-gray-50 border-gray-300"),value:g.startedOn,onChange:y("startedOn")})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium mb-1",children:"End Date"}),(0,p.jsx)("input",{type:"date",className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ".concat("dark"===u?"bg-gray-800 border-gray-600 placeholder-gray-400":"bg-gray-50 border-gray-300"),value:g.endDate,onChange:y("endDate")})]}),(0,p.jsxs)("div",{className:"sm:col-span-2",children:[(0,p.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Manager Employee ID"}),(0,p.jsx)("input",{className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ".concat("dark"===u?"bg-gray-800 border-gray-600 placeholder-gray-400":"bg-gray-50 border-gray-300"),value:g.manager_employeeId,onChange:y("manager_employeeId"),placeholder:"e.g., MGR101"})]}),(0,p.jsxs)("div",{className:"sm:col-span-2",children:[(0,p.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Manager Name"}),(0,p.jsx)("input",{className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ".concat("dark"===u?"bg-gray-800 border-gray-600 placeholder-gray-400":"bg-gray-50 border-gray-300"),value:g.manager_name,onChange:y("manager_name"),placeholder:"Full Name"})]})]}),(0,p.jsxs)("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-gray-300/50",children:[(0,p.jsx)("button",{type:"button",onClick:i,className:"px-5 py-2 rounded-lg font-semibold transition-colors border ".concat("dark"===u?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-100"),children:"Cancel"}),(0,p.jsx)("button",{type:"submit",disabled:x,className:"px-5 py-2 bg-blue-600 text-white rounded-lg font-semibold shadow-md hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-not-allowed transition-colors",children:x?"Saving...":"create"===r?"Create":"Update"})]})]})})},f="https://hrms.anasolconsultancyservices.com/api/employee/overview/",v=e=>{if(!e)return;const t=String(e).startsWith("Bearer ")?String(e).split(" ")[1]:String(e);try{localStorage.setItem("accessToken",t)}catch(a){}},N=()=>{const{projectId:e}=(0,n.g)(),[t,a]=(0,o.useState)(()=>e||localStorage.getItem("selectedProjectId")||""),[r,s]=(0,o.useState)(null),[l,i]=(0,o.useState)(!0),[c,g]=(0,o.useState)(null),{theme:m}=(0,o.useContext)(d.ob),[x,h]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{if(e&&e!==t){a(e);try{localStorage.setItem("selectedProjectId",e)}catch(r){}}},[e]),(0,o.useEffect)(()=>{(async()=>{if(i(!0),g(null),!t)return g("No project selected. Select a project to view details."),i(!1),void s(null);const e="".concat(f).concat(encodeURIComponent(t)),a=localStorage.getItem("accessToken");if(!a)return g("Access token missing. Please login (store accessToken in localStorage)."),void i(!1);try{const t=await fetch(e,{method:"GET",headers:{Authorization:"Bearer ".concat(a),Accept:"application/json"}}),r=t.headers.get("authorization")||t.headers.get("Authorization");if(r&&v(r),401===t.status)return g("Unauthorized (401). Access token invalid or expired. Please re-login."),void s(null);if(!t.ok){const e=await t.text().catch(()=>null);throw new Error(e||"HTTP ".concat(t.status))}const o=await t.json(),n=(null===o||void 0===o?void 0:o.accessToken)||(null===o||void 0===o?void 0:o.token)||(null===o||void 0===o?void 0:o.jwt);n&&v(n),s(o)}catch(r){console.error("Fetch error:",r),g("Failed to fetch project data. Check the token and URL. Error: ".concat(r.message))}finally{i(!1)}})()},[t]),l?(0,p.jsx)("div",{className:"flex justify-center items-center h-40",children:(0,p.jsx)("p",{className:"text-xl text-blue-600",children:"Loading project details..."})}):c?(0,p.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 p-4 rounded m-6",role:"alert",children:[(0,p.jsx)("p",{className:"font-bold",children:"Error!"}),(0,p.jsx)("p",{className:"text-sm",children:c})]}):r?(0,p.jsxs)("div",{className:"p-2 space-y-4",children:[(0,p.jsx)("div",{className:"flex items-end justify-end border-b pb-2 mb-2",children:(0,p.jsx)("button",{title:"Update Overview",onClick:()=>h(!0),className:"p-2 rounded-md bg-yellow-500 text-white hover:bg-yellow-600",children:(0,p.jsx)(u.SG1,{})})}),(0,p.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[(0,p.jsx)(w,{title:"Client",value:r.client}),(0,p.jsx)(w,{title:"Total Cost",value:"$".concat(r.total_cost||"N/A")}),(0,p.jsx)(w,{title:"Timeline Progress",value:r.timeline_progress}),(0,p.jsx)(w,{title:"Priority",value:r.priority})]}),x&&(0,p.jsx)(j,{mode:"update",projectId:t,initialData:r,onClose:()=>h(!1),onSuccess:e=>{s(e)}}),(0,p.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,p.jsx)(w,{title:"Start Date",value:r.startedOn?new Date(r.startedOn).toLocaleDateString():"N/A"}),(0,p.jsx)(w,{title:"End Date",value:r.endDate?new Date(r.endDate).toLocaleDateString():"N/A"}),(0,p.jsx)(w,{title:"Days to Work",value:r.days_to_work})]}),r.manager&&(0,p.jsxs)("div",{className:"p-1 rounded-lg border-l-4 border-blue-500 shadow-md ".concat("dark"===m?"bg-gray-800":"bg-blue-50"),children:[(0,p.jsx)("h2",{className:"text-xl font-semibold ".concat("dark"===m?"text-blue-300":"text-blue-700"," mb-1"),children:"Project Manager"}),(0,p.jsxs)("p",{className:"".concat("dark"===m?"text-gray-300":"text-gray-700"),children:[(0,p.jsx)("span",{className:"font-medium",children:"Name:"})," ",r.manager.name]}),(0,p.jsxs)("p",{className:"".concat("dark"===m?"text-gray-300":"text-gray-700"),children:[(0,p.jsx)("span",{className:"font-medium",children:"Employee ID:"})," ",r.manager.employeeId]})]}),(0,p.jsx)("div",{className:"pt-2 border-t mt-2",children:(0,p.jsxs)("p",{className:"text-lg font-bold ".concat(r.dueAlert>0?"text-red-600":"text-green-600"),children:[" Due Alert: ",r.dueAlert," ",r.dueAlert>0?"Days Overdue!":"No Alert"," "]})})]}):(0,p.jsx)("div",{className:"flex justify-center items-center h-40",children:(0,p.jsx)("p",{className:"text-xl text-gray-500",children:"No project data found."})})},w=e=>{let{title:t,value:a}=e;const{theme:r}=(0,o.useContext)(d.ob);return(0,p.jsxs)("div",{className:"p-2 rounded-lg border shadow-sm ".concat("dark"===r?"bg-gray-800":"bg-white"),children:[(0,p.jsx)("p",{className:"text-sm font-medium ".concat("dark"===r?"text-gray-400":"text-gray-500"),children:t}),(0,p.jsx)("p",{className:"text-lg font-semibold ".concat("dark"===r?"text-gray-100":"text-gray-900"),children:a||"N/A"})]})},k={projectDetails:{}},S=()=>{var e,t,a,i;const{theme:g,userData:w}=(0,o.useContext)(d.ob),S=e=>{let{children:t}=e,a=(0,r.A)(e,m);return(0,p.jsx)("div",(0,s.A)((0,s.A)({},a),{},{children:t}))},C=e=>{let{children:t}=e,a=(0,r.A)(e,x);return(0,p.jsx)("span",(0,s.A)((0,s.A)({},a),{},{children:t}))},A=e=>{let{children:t}=e,a=(0,r.A)(e,h);return(0,p.jsx)("h2",(0,s.A)((0,s.A)({},a),{},{children:t}))},P=e=>{let{children:t}=e,a=(0,r.A)(e,b);return(0,p.jsx)("p",(0,s.A)((0,s.A)({},a),{},{children:t}))},{projectId:T}=(0,n.g)(),[E,L]=(0,o.useState)(()=>T||localStorage.getItem("selectedProjectId")||""),[_,O]=(0,o.useState)(null),[z,M]=(0,o.useState)(!1),[R,U]=(0,o.useState)(null),[B,F]=(0,o.useState)(!1),[H,G]=(0,o.useState)(!1),[q,W]=(0,o.useState)(!1),[J,Z]=(0,o.useState)(0),[K,V]=(0,o.useState)([]),[Q,X]=(0,o.useState)(!1),[$,Y]=(0,o.useState)(null),[ee,te]=(0,o.useState)(!1),ae=(null===$||void 0===$?void 0:$.icon)||"\ud83d\udcc1",re=(null===$||void 0===$?void 0:$.color)||"text-indigo-500",se=R||k,oe=(((e,t)=>{const a=new Date(e),r=new Date(t),s=new Date;a.setHours(0,0,0,0),r.setHours(0,0,0,0),s.setHours(0,0,0,0);const o=r.getTime()-a.getTime(),n=s.getTime()-a.getTime();o<=0||n<0||(n>=o||Math.min(100,Math.round(n/o*100)))})(null===se||void 0===se||null===(e=se.projectDetails)||void 0===e?void 0:e.startedOn,null===se||void 0===se||null===(t=se.projectDetails)||void 0===t?void 0:t.endDate),async e=>{if(e){te(!0);try{var t,a,r,s;const n=D();if(!n)throw new Error("Missing token");const l="".concat(f).concat(encodeURIComponent(e)),i=await fetch(l,{headers:{Authorization:"Bearer ".concat(n),Accept:"application/json"}}),c=i.ok?await i.json().catch(()=>null):null,d="https://hrms.anasolconsultancyservices.com/api/employee/".concat(encodeURIComponent(e),"/roles"),u=await fetch(d,{headers:{Authorization:"Bearer ".concat(n),Accept:"application/json"}}),g=u.ok?await u.json().catch(()=>[]):[];let p=null;const m=null===w||void 0===w?void 0:w.employeeId;if(m)try{const t="http://192.168.0.112:8090/api/employee/kpi/".concat(encodeURIComponent(m),"/").concat(encodeURIComponent(e)),a=await fetch(t,{headers:{Authorization:"Bearer ".concat(n),Accept:"application/json"}});a.ok&&(p=await a.json().catch(()=>null))}catch(o){}const x={projectId:e,name:(null===c||void 0===c?void 0:c.projectName)||(null===c||void 0===c?void 0:c.title)||(null===c||void 0===c?void 0:c.projectName)||(null===(t=K.find(t=>(t.projectId||t.project_id)===e))||void 0===t?void 0:t.title)||e,description:(null===c||void 0===c?void 0:c.projectDescription)||(null===c||void 0===c?void 0:c.description)||(null===c||void 0===c?void 0:c.project_details)||"",status:(null===c||void 0===c?void 0:c.status)||(null===c||void 0===c?void 0:c.projectStatus)||(null===c||void 0===c||null===(a=c.projectDetails)||void 0===a?void 0:a.status)||"N/A",kpis:(null===(r=p)||void 0===r?void 0:r.kpis)||(null===c||void 0===c?void 0:c.kpis)||(null===c||void 0===c?void 0:c.KPIs)||(null===(s=K.find(t=>(t.projectId||t.project_id)===e))||void 0===s?void 0:s.kpis)||{},overview:c||null,teamAllocation:Array.isArray(g)?g:(null===g||void 0===g?void 0:g.roles)||[]};Y(x),U(x.overview||null)}catch(n){console.error("loadProjectDetailsById error",n)}finally{te(!1)}}});(0,o.useEffect)(()=>{(async()=>{X(!0);try{const e=D();if(!e)return;const t=await I(0,10,e).catch(()=>[]),a=Array.isArray(t)?t:t.content||[];V(a),a.length&&(Z(0),await oe(a[0].projectId||a[0].project_id))}catch(e){console.error("loadCarouselProjects error",e)}finally{X(!1)}})()},[]);(0,o.useEffect)(()=>{E&&(async e=>{if(e){M(!0);try{const t=localStorage.getItem("accessToken"),a="https://hrms.anasolconsultancyservices.com/api/employee/".concat(encodeURIComponent(e),"/roles"),r=await fetch(a,{headers:{Accept:"application/json",Authorization:t?"Bearer ".concat(t):void 0}});if(!r.ok)return console.warn("Failed to load roles",r.status),void O(null);const s=await r.json().catch(()=>null);if(Array.isArray(s)){const e=s.map(e=>({role:e.role||"Unknown",count:"number"===typeof e.count?e.count:Array.isArray(e.employees)?e.employees.length:0,employees:Array.isArray(e.employees)?e.employees.map(e=>({employeeId:e.employeeId,name:e.displayName||e.employeeName||e.name,image:e.employeeImage||null})):[]}));O(e)}else O(null)}catch(t){console.error("loadRoles error",t),O(null)}finally{M(!1)}}})(E)},[E]);const ne=e=>"https://i.pravatar.cc/40?img=".concat(e+1);return(0,p.jsxs)(S,{className:"relative p-6 rounded-xl shadow-2xl mx-auto border border-orange-400  ".concat("dark"===g?"bg-gray-700":"bg-gradient-to-r from-orange-10 to-orange-50"),children:[(0,p.jsx)(C,{className:"absolute top-4 right-4 text-sm font-bold py-1 px-3 rounded-full shadow-md ring-2 ".concat((e=>{switch(e){case"On Track":return"bg-green-100 text-green-800 ring-green-500";case"At Risk":return"bg-yellow-100 text-yellow-800 ring-yellow-500";case"Completed":return"bg-blue-100 text-blue-800 ring-blue-500";default:return"bg-gray-100 text-gray-800 ring-gray-500"}})(null===$||void 0===$?void 0:$.status)),children:(null===$||void 0===$?void 0:$.status)||"N/A"}),(0,p.jsxs)("div",{className:"flex items-center mb-6 flex-wrap",children:[(0,p.jsxs)(C,{className:"text-5xl mr-4 ".concat(re),children:[ae," "]}),(0,p.jsxs)(A,{className:"text-3xl sm:text-4xl font-extrabold ".concat(re," mt-2 sm:mt-0"),children:[(null===$||void 0===$?void 0:$.name)||"Project"," "]})]}),(0,p.jsx)(P,{className:"text-base sm:text-lg mb-6 leading-relaxed ".concat("dark"===g?"text-gray-200":"text-gray-700"),children:(null===$||void 0===$?void 0:$.description)||(null===$||void 0===$||null===(a=$.overview)||void 0===a?void 0:a.projectDescription)||""}),(0,p.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-2 ",children:[(0,p.jsx)(S,{className:"p-4 rounded-lg shadow-lg border border-gray-200 ".concat("dark"===g?"bg-gray-800 text-white":"bg-gradient-to-br from-yellow-50 to-white"),children:(0,p.jsxs)("div",{className:"relative",children:[(0,p.jsx)("button",{type:"button",title:"Open Sprints",onClick:()=>W(!0),className:"absolute top-2 right-2 z-10 inline-flex items-center gap-2 px-2 py-1 rounded-md bg-indigo-600 text-white text-xs hover:bg-indigo-700",children:"Sprints"}),(0,p.jsx)("h2",{className:"text-xl font-bold mb-4 border-b pb-2 text-yellow-600",children:"Key Metrics (KPIs)"}),(0,p.jsx)("div",{className:"mt-2",children:(0,p.jsx)("dl",{className:"space-y-3",children:null!==$&&void 0!==$&&$.kpis&&Object.keys($.kpis).length?Object.entries($.kpis).map(e=>{let[t,a]=e;return(0,p.jsxs)("div",{className:"flex justify-between border-b border-gray-100 pb-2",children:[(0,p.jsx)("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:t}),(0,p.jsx)("dd",{className:"text-md font-semibold text-gray-500 dark:text-gray-400",children:a})]},t)}):(0,p.jsx)("div",{className:"text-sm text-gray-500",children:"No KPI data available for this project."})})})]})}),q&&(0,p.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40",children:(0,p.jsxs)("div",{className:"w-full max-w-4xl bg-white rounded-xl shadow-xl overflow-auto",children:[(0,p.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,p.jsxs)("h3",{className:"text-lg font-semibold",children:["Sprints for ",E]}),(0,p.jsx)("div",{className:"flex items-center gap-2",children:(0,p.jsx)("button",{onClick:()=>W(!1),className:"px-3 py-1 rounded-md bg-gray-200 hover:bg-gray-300",children:"Close"})})]}),(0,p.jsx)("div",{className:"p-4",children:(0,p.jsx)(y,{projectId:E})})]})}),(0,p.jsxs)(S,{className:"p-4 rounded-lg shadow-lg border border-gray-200 col-span-1 lg:col-span-2 ".concat("dark"===g?"bg-gray-800 text-white":"bg-gradient-to-br from-blue-50 to-white"," mt-6"),children:[(0,p.jsxs)("div",{className:"flex items-start justify-between border-b pb-2 mb-2",children:[(0,p.jsxs)("h1",{className:"text-3xl font-extrabold ".concat("dark"===g?"text-white":"text-gray-800"),children:["Project Overview (",E,")"]}),(0,p.jsxs)("div",{className:"flex items-center gap-2",children:[(0,p.jsx)("button",{title:"Create Overview",onClick:()=>F(!0),className:"p-2 rounded-md bg-green-600 text-white hover:bg-green-700",children:(0,p.jsx)(c.OiG,{})}),(0,p.jsx)("button",{title:"Delete Overview",onClick:async()=>{if(!E)return alert("Project id missing");if(!window.confirm("Delete overview for ".concat(E,"? This cannot be undone.")))return;const e=localStorage.getItem("accessToken");if(!e)return alert("Missing access token. Please login.");G(!0);try{const t="https://hrms.anasolconsultancyservices.com/api/employee/delete/".concat(encodeURIComponent(E)),a=await fetch(t,{method:"DELETE",headers:{Authorization:"Bearer ".concat(e)}}),r=await a.json().catch(()=>null),s=a.headers.get("authorization")||a.headers.get("Authorization");if(s&&v(s),(null!==r&&void 0!==r&&r.accessToken||null!==r&&void 0!==r&&r.token||null!==r&&void 0!==r&&r.jwt)&&v((null===r||void 0===r?void 0:r.accessToken)||(null===r||void 0===r?void 0:r.token)||(null===r||void 0===r?void 0:r.jwt)),!a.ok)throw new Error((null===r||void 0===r?void 0:r.message)||a.statusText||"Status ".concat(a.status));U(null),alert("Project overview deleted.")}catch(t){console.error("Delete overview failed",t),alert("Delete failed: "+(t.message||t))}finally{G(!1)}},disabled:H,className:"p-2 rounded-md bg-red-600 text-white hover:bg-red-700",children:(0,p.jsx)(u.Zve,{})})]})]}),(0,p.jsx)(N,{}),(0,p.jsx)(l.N,{children:B&&(0,p.jsx)(j,{mode:"create",projectId:E,initialData:{},onClose:()=>F(!1),onSuccess:e=>{U(e)}})})]}),(0,p.jsxs)(S,{className:"p-4 rounded-lg shadow-lg border border-gray-100 col-span-1 lg:col-span-3 ".concat("dark"===g?"bg-gray-800 text-white":"bg-gradient-to-br from-indigo-50 to-white"),children:[(0,p.jsx)("h3",{className:"text-xl sm:text-2xl font-bold mb-4 border-b pb-2 ".concat("dark"===g?"text-white":"text-gray-800"),children:"Team Allocation"}),(0,p.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-y-4 gap-x-6",children:z?(0,p.jsx)("div",{className:"col-span-3 py-6 text-center text-sm text-gray-500",children:"Loading team allocation..."}):(null!==$&&void 0!==$&&$.teamAllocation&&$.teamAllocation.length?$.teamAllocation:null!==(i=null!==_&&void 0!==_?_:null===$||void 0===$?void 0:$.team)&&void 0!==i?i:[]).map((e,t)=>{var a;const r=e.role||e.roleName||"Team",s=null!==(a=e.count)&&void 0!==a?a:e.avatars?e.avatars[0]:0,o=e.employees||e.members||[];return(0,p.jsxs)(S,{className:"flex flex-col sm:flex-row sm:items-center justify-between p-2 rounded-md transition border-l-4 border-indigo-400",children:[(0,p.jsx)("p",{className:"font-semibold text-base ".concat("dark"===g?"text-white":"text-gray-800"," mb-1 sm:mb-0"),children:r}),(0,p.jsxs)("div",{className:"flex items-center",children:[(0,p.jsx)("span",{className:"text-sm font-bold mr-3",children:s}),(0,p.jsxs)("div",{className:"flex -space-x-2 overflow-hidden",children:[o.length?o.slice(0,4).map((e,a)=>(0,p.jsx)("img",{className:"inline-block h-8 w-8 rounded-full ring-2 ".concat("dark"===g?"ring-gray-800":"ring-white"," object-cover"),src:e.image||e.employeeImage||ne(a+1+5*t),alt:e.name||e.displayName||"Member ".concat(a+1),title:e.name||e.displayName},e.employeeId||a)):Array.from({length:Math.min(s||1,4)}).map((e,a)=>(0,p.jsx)("img",{className:"inline-block h-8 w-8 rounded-full ring-2 ".concat("dark"===g?"ring-gray-800":"ring-white"," object-cover"),src:ne(a+1+5*t),alt:"Avatar ".concat(a+1)},a)),s>4&&(0,p.jsxs)("span",{className:"flex items-center justify-center h-8 w-8 rounded-full bg-gray-300 text-xs font-medium text-gray-700 ring-2 ring-white dark:bg-gray-600 dark:text-white",children:["+",s-4]})]})]})]},r+t)})})]})]}),(0,p.jsxs)("div",{className:"flex justify-between mt-8 flex-wrap gap-4",children:[(0,p.jsxs)("div",{className:"relative inline-flex items-center justify-center gap-4 group",children:[(0,p.jsx)("div",{className:"absolute inset-0 duration-1000 opacity-60 transitiona-all bg-gradient-to-r from-indigo-500 via-pink-500 to-yellow-400 rounded-xl blur-lg filter group-hover:opacity-100 group-hover:duration-200"}),(0,p.jsxs)("a",{role:"button",className:"group relative inline-flex items-center justify-center text-base rounded-xl bg-gray-900 px-4 py-3 font-semibold text-white transition-all duration-200 hover:bg-gray-800 hover:shadow-lg hover:-translate-y-0.5 hover:shadow-gray-600/30",title:"Previous Project",onClick:async()=>{if(!K.length)return;const e=(J-1+K.length)%K.length;Z(e);const t=K[e].projectId||K[e].project_id;await oe(t)},href:"#",children:["Previous ",(0,p.jsxs)("svg",{"aria-hidden":"true",viewBox:"0 0 10 10",height:"10",width:"10",fill:"none",className:"mt-0.5 ml-2 -mr-1 stroke-white stroke-2",children:[(0,p.jsx)("path",{d:"M0 5h7",className:"transition opacity-0 group-hover:opacity-100"}),(0,p.jsx)("path",{d:"M1 1l4 4-4 4",className:"transition group-hover:translate-x-[3px]"})]})]})]}),(0,p.jsxs)("div",{className:"relative inline-flex items-center justify-center gap-4 group",children:[(0,p.jsx)("div",{className:"absolute inset-0 duration-1000 opacity-60 transitiona-all bg-gradient-to-r from-indigo-500 via-pink-500 to-yellow-400 rounded-xl blur-lg filter group-hover:opacity-100 group-hover:duration-200"}),(0,p.jsxs)("a",{role:"button",className:"group relative inline-flex items-center justify-center text-base rounded-xl bg-gray-900 px-8 py-3 font-semibold text-white transition-all duration-200 hover:bg-gray-800 hover:shadow-lg hover:-translate-y-0.5 hover:shadow-gray-600/30",title:"Next Project",onClick:async()=>{if(!K.length)return;const e=(J+1)%K.length;Z(e);const t=K[e].projectId||K[e].project_id;await oe(t)},href:"#",children:["Next ",(0,p.jsxs)("svg",{"aria-hidden":"true",viewBox:"0 0 10 10",height:"10",width:"10",fill:"none",className:"mt-0.5 ml-2 -mr-1 stroke-white stroke-2",children:["  ",(0,p.jsx)("path",{d:"M0 5h7",className:"transition opacity-0 group-hover:opacity-100"}),"  ",(0,p.jsx)("path",{d:"M1 1l4 4-4 4",className:"transition group-hover:translate-x-[3px]"})]})]})]})]})]},J)},C="https://hrms.anasolconsultancyservices.com/api/employee/project",A=e=>{let{onClose:t,editProject:a=null,onSuccess:r=()=>{}}=e;const[n,l]=(0,o.useState)({title:"",description:"",projectPriority:"Medium",projectStatus:"Not Started",startDate:"",endDate:"",openTask:0,closedTask:0,teamLeadId:[""]}),[c,d]=(0,o.useState)(null),[u,g]=(0,o.useState)(!1),[m,x]=(0,o.useState)(null),[h,b]=(0,o.useState)("");(0,o.useEffect)(()=>{var e,t,r,s;a&&(l({title:a.title||a.project_name||a.title||"",description:a.description||"",projectPriority:a.projectPriority||a.Priority||"Medium",projectStatus:a.projectStatus||a.status||"Not Started",startDate:a.startDate||a.start_date||"",endDate:a.endDate||a.end_date||"",openTask:null!==(e=null!==(t=a.openTask)&&void 0!==t?t:a.Open_task)&&void 0!==e?e:0,closedTask:null!==(r=null!==(s=a.closedTask)&&void 0!==s?s:a.Closed_task)&&void 0!==r?r:0,teamLeadId:Array.isArray(a.teamLeadId)?a.teamLeadId:a.teamLeadId?[String(a.teamLeadId)]:a.Team_Lead?[String(a.Team_Lead)]:[""]}),d(null))},[a]);const y=e=>{const{name:t,value:a}=e.target,r="openTask"===t||"closedTask"===t?parseInt(a)||0:a;l(e=>(0,s.A)((0,s.A)({},e),{},{[t]:r}))},j=async e=>{e.preventDefault(),g(!0),b(""),x(null);const s={title:n.title,description:n.description,projectPriority:n.projectPriority,projectStatus:n.projectStatus,startDate:n.startDate,endDate:n.endDate,openTask:Number(n.openTask||0),closedTask:Number(n.closedTask||0),teamLeadId:n.teamLeadId.filter(Boolean)},o=new FormData;o.append("projectDTO",new Blob([JSON.stringify(s)],{type:"application/json"})),c&&o.append("details",c,c.name);const i=localStorage.getItem("accessToken");if(!i)return b("\u274c Authentication token missing. Please login."),void g(!1);try{const s=a&&(a.projectId||a.project_id)?"".concat(C,"/").concat(a.projectId||a.project_id):C,n=a?"PUT":"POST",c=await fetch(s,{method:n,headers:{Authorization:"Bearer ".concat(i),Accept:"application/json"},body:o}),g=await c.text().catch(()=>"");let h=null;try{h=g?JSON.parse(g):null}catch(e){h=null}if(c.ok)b(a?"\u2705 Project updated successfully!":"\u2705 Project created successfully!"),l({title:"",description:"",projectPriority:"Medium",projectStatus:"Not Started",startDate:"",endDate:"",openTask:0,closedTask:0,teamLeadId:[""]}),d(null),setTimeout(()=>{try{r()}catch(e){}try{t()}catch(a){}},600);else{var u,p;if(null!==(u=h)&&void 0!==u&&u.validationErrors){const e=Object.entries(h.validationErrors).map(e=>{let[t,a]=e;return"".concat(t,": ").concat(a)}).join("\n");b("\u274c Validation failed:\n".concat(e))}else{var m;const e=(null===(m=h)||void 0===m?void 0:m.message)||g||c.statusText||"Status ".concat(c.status);b("\u274c Submission failed (".concat(c.status,"): ").concat(e))}console.error("Project submit failed",{status:c.status,body:null!==(p=h)&&void 0!==p?p:g}),x(g||JSON.stringify(h)||null)}}catch(h){console.error(h),b("\u274c An error occurred: ".concat(h.message)),x(h&&h.stack?String(h.stack):String(h))}finally{g(!1)}},f="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-150",v="block text-sm font-medium text-gray-700 mb-1";return(0,p.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 p-4",children:(0,p.jsxs)(i.P.form,{onSubmit:j,className:"bg-white p-6 rounded-xl shadow-xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,p.jsx)("button",{type:"button",onClick:t,className:"absolute w-6 h-6 top-4 right-4 text-gray-400 hover:text-gray-600 text-3xl font-bold p-1 leading-none",children:"\xd7"}),(0,p.jsx)("h1",{className:"text-3xl font-extrabold text-blue-700 border-b pb-3 mb-6 sticky top-0 bg-white z-10",children:a?"Edit Project":"Create New Project"}),(0,p.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,p.jsxs)("div",{children:[(0,p.jsxs)("label",{htmlFor:"title",className:v,children:["Project Title ",(0,p.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,p.jsx)("input",{name:"title",value:n.title,onChange:y,required:!0,className:f})]}),(0,p.jsxs)("div",{children:[(0,p.jsxs)("label",{htmlFor:"startDate",className:v,children:["Start Date ",(0,p.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,p.jsx)("input",{name:"startDate",type:"date",value:n.startDate,onChange:y,className:f})]}),(0,p.jsxs)("div",{children:[(0,p.jsxs)("label",{htmlFor:"endDate",className:v,children:["End Date ",(0,p.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,p.jsx)("input",{name:"endDate",type:"date",value:n.endDate,onChange:y,className:f})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:v,children:"Priority"}),(0,p.jsxs)("select",{name:"projectPriority",value:n.projectPriority,onChange:y,className:f,children:[(0,p.jsx)("option",{children:"Low"}),(0,p.jsx)("option",{children:"Medium"}),(0,p.jsx)("option",{children:"High"})]})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:v,children:"Status"}),(0,p.jsx)("select",{name:"projectStatus",value:n.projectStatus,onChange:y,className:f,children:[{value:"IN_PROGRESS",label:"In Progress"},{value:"COMPLETED",label:"Completed"},{value:"NOT_STARTED",label:"Not Started"}].map(e=>(0,p.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,p.jsxs)("div",{className:"mt-4",children:[(0,p.jsxs)("label",{htmlFor:"description",className:v,children:["Description ",(0,p.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,p.jsx)("textarea",{name:"description",rows:"4",value:n.description,onChange:y,className:f})]}),(0,p.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:v,children:"Open Tasks"}),(0,p.jsx)("input",{name:"openTask",type:"number",min:"0",value:n.openTask,onChange:y,className:f})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:v,children:"Closed Tasks"}),(0,p.jsx)("input",{name:"closedTask",type:"number",min:"0",value:n.closedTask,onChange:y,className:f})]})]}),(0,p.jsxs)("div",{className:"mt-4",children:[(0,p.jsx)("label",{className:v,children:"Team Lead ID"}),(0,p.jsx)("input",{name:"teamLead",value:n.teamLeadId[0],onChange:e=>((e,t)=>{const a=[...n.teamLeadId];a[t]=e.target.value,l(e=>(0,s.A)((0,s.A)({},e),{},{teamLeadId:a}))})(e,0),className:f,placeholder:"e.g., EMP-005"})]}),(0,p.jsxs)("div",{className:"mt-4 border-t pt-4",children:[(0,p.jsx)("label",{className:"".concat(v," text-base"),children:"Details (attach file)"}),(0,p.jsx)("input",{type:"file",onChange:e=>{var t;return d((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)},className:"mt-2"}),c&&(0,p.jsxs)("p",{className:"text-sm mt-2",children:["Selected: ",(0,p.jsx)("strong",{children:c.name})]})]}),(0,p.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,p.jsx)("button",{type:"button",onClick:t,className:"px-4 py-2 border rounded",children:"Cancel"}),(0,p.jsx)("button",{type:"submit",disabled:u,className:"px-4 py-2 bg-blue-600 text-white rounded",children:u?"Creating...":"Create Project"})]}),h&&(0,p.jsx)("p",{className:"mt-4 p-2 rounded ".concat(h.startsWith("\u2705")?"bg-green-50 text-green-700":"bg-red-50 text-red-700"),children:h}),m&&(0,p.jsxs)("div",{className:"mt-3 p-3 bg-gray-50 rounded border text-xs text-gray-700",children:[(0,p.jsx)("div",{className:"font-semibold mb-1",children:"Server debug:"}),(0,p.jsx)("pre",{className:"whitespace-pre-wrap break-words",children:m}),(0,p.jsxs)("div",{className:"flex gap-2 mt-3",children:[(0,p.jsx)("button",{type:"button",onClick:()=>{x(null),b("")},className:"px-3 py-1 border rounded",children:"Dismiss"}),(0,p.jsx)("button",{type:"button",onClick:j,disabled:u,className:"px-3 py-1 bg-blue-600 text-white rounded",children:"Retry"})]})]})]})})},D=()=>localStorage.getItem("accessToken"),P="https://hrms.anasolconsultancyservices.com/api/employee",I=async function(e,t,a){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(!a)throw new Error("Authentication token missing.");const s=r?"".concat(P,"/projects/").concat(encodeURIComponent(r)):"".concat(P,"/").concat(e,"/").concat(t,"/projectId/asc/projects"),o=await fetch(s,{headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}});if(!o.ok){if(401===o.status)throw new Error("Unauthorized: Token expired or invalid. Please log in again.");const e=await o.json().catch(()=>({message:o.statusText}));throw new Error("API Error: ".concat(e.message||o.statusText))}return o.json()};function T(){var e;const{userData:t,theme:a}=(0,o.useContext)(d.ob),r=((null===t||void 0===t||null===(e=t.roles)||void 0===e?void 0:e[0])||"").toUpperCase(),[m,x]=(["TEAM_LEAD","HR","MANAGER","ADMIN"].includes(r),(0,o.useState)([])),[h,b]=(0,o.useState)(null),y=null!==t&&void 0!==t&&t.roles[0]?"ROLE_".concat(null===t||void 0===t?void 0:t.roles[0]):null;(0,o.useEffect)(()=>{(async()=>{let e=await g.ZQ.get("role-access/".concat(y));console.log("from MyTeam :",e.data),x(e.data)})()},[]),(0,o.useEffect)(()=>{m&&b(null===m||void 0===m?void 0:m.permissions)},[m]),console.log(h);const[j,f]=(0,o.useState)([]);(0,o.useEffect)(()=>{f(null===t||void 0===t?void 0:t.permissions)},[t]),console.log("permissions from userdata:",j);const[v,N]=(0,o.useState)([]),[w,k]=(0,o.useState)(!0),[S,P]=(0,o.useState)(null),[T,E]=(0,o.useState)({pageNumber:0,pageSize:11,totalElements:0,totalPages:1}),[L,_]=(0,o.useState)(!1),[O,z]=(0,o.useState)("All"),M=(0,n.Zp)(),R=(0,o.useCallback)(async(e,a)=>{k(!0),P(null);const r=D();try{const o=Array.isArray(null===t||void 0===t?void 0:t.roles)?t.roles[0]:(null===t||void 0===t?void 0:t.roles)||"",n="string"===typeof o?o.toUpperCase().replace(/^ROLE_/,""):"",l=!("ADMIN"===n)&&null!==t&&void 0!==t&&t.employeeId?t.employeeId:null,i=await I(e,a,r,l);l&&Array.isArray(i)?(N(i||[]),E(e=>(0,s.A)((0,s.A)({},e),{},{totalElements:i.length||0}))):(N(i.content||i||[]),E({pageNumber:"undefined"!==typeof i.pageNumber?i.pageNumber:e,pageSize:"undefined"!==typeof i.pageSize?i.pageSize:a,totalElements:"undefined"!==typeof i.totalElements?i.totalElements:Array.isArray(i)?i.length:0,totalPages:"undefined"!==typeof i.totalPages?i.totalPages:1}))}catch(o){console.error("Failed to load projects:",o),P(o.message),N([])}finally{k(!1)}},[t]);(0,o.useEffect)(()=>{R(T.pageNumber,T.pageSize)},[R,T.pageNumber,T.pageSize]);const U=e=>{e>=0&&e<T.totalPages&&E(t=>(0,s.A)((0,s.A)({},t),{},{pageNumber:e}))},B=e=>{switch(e){case"High":return"bg-green-100 text-green-800";case"Medium":return"bg-orange-100 text-orange-800";case"Low":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},F=e=>{switch(e){case"In Progress":return"bg-green-100 text-green-800";case"Ongoing":return"bg-blue-100 text-blue-800";case"Upcoming":return"bg-yellow-100 text-yellow-800";case"Completed":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},H=e=>e?Array.isArray(e.teamLeadId)&&e.teamLeadId.length?e.teamLeadId.join(", "):Array.isArray(e.TeamLeadId)&&e.TeamLeadId.length?e.TeamLeadId.join(", "):e.teamLeadId?String(e.teamLeadId):e.TeamLeadId?String(e.TeamLeadId):e.TeamLead?String(e.TeamLead):e.Team_Lead?String(e.Team_Lead):"N/A":"N/A",[G,q]=(0,o.useState)(null),[W,J]=(0,o.useState)(null),Z=v.filter(e=>"All"===O||e.projectStatus===O);return(0,p.jsxs)(i.P.div,{className:"p-6 rounded-2xl shadow-2xl border border-purple-500 relative ".concat("dark"===a?"bg-gray-800":"bg-gradient-to-br from-purple-10 to-purple-50 "),children:[(0,p.jsxs)("div",{className:"flex justify-between items-center mb-4 border-b pb-4",children:[(0,p.jsx)("h2",{className:"text-3xl font-extrabold ".concat("dark"===a?"text-purple-400":"text-purple-800"),children:"  Project Overview"}),(0,p.jsxs)("div",{className:"flex items-center gap-2",children:[(h||[]).includes("CREATE_PROJECT")&&(0,p.jsx)("button",{title:"Create Project",onClick:()=>{q(null),_(!0)},className:"p-2 rounded-md bg-green-600 text-white hover:bg-green-700",children:(0,p.jsx)(c.OiG,{})}),(0,p.jsx)("button",{title:"Edit selected",onClick:()=>{if(!W)return alert("Select a project first (click the select icon on a row).");q(W),_(!0)},disabled:!W,className:"p-2 rounded-md ".concat(W?"bg-yellow-500 text-white hover:bg-yellow-600":"bg-gray-200 text-gray-500 cursor-not-allowed"),children:(0,p.jsx)(u.SG1,{})}),(0,p.jsx)("button",{title:"Delete selected",onClick:()=>(async e=>{if(!e)return alert("Select a project to delete.");const t=e.projectId||e.project_id;if(!t)return alert("Missing project id");if(!window.confirm("Delete project ".concat(t,"? This cannot be undone.")))return;const a=localStorage.getItem("accessToken");if(!a)return alert("Missing auth token. Login required.");try{const e=await fetch("".concat(C,"/").concat(t),{method:"DELETE",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}}),r=await e.json().catch(()=>null);if(!e.ok){if(500===e.status&&null!==r&&void 0!==r&&r.error&&/foreign key/i.test(r.error))return alert("Delete failed: ".concat(r.message||"Project has related data.","\nDelete related dependent resources first."));if(null!==r&&void 0!==r&&r.validationErrors){const t=Object.entries(r.validationErrors).map(e=>{let[t,a]=e;return"".concat(t,": ").concat(a)}).join("\n");return alert("Delete failed: ".concat(r.message||e.statusText,"\n").concat(t))}throw new Error((null===r||void 0===r?void 0:r.message)||e.statusText||"Status ".concat(e.status))}J(null),R(T.pageNumber,T.pageSize)}catch(r){console.error("Delete failed",r),alert("Delete failed: "+(r.message||"Unknown error"))}})(W),disabled:!W,className:"p-2 rounded-md ".concat(W?"bg-red-600 text-white hover:bg-red-700":"bg-gray-200 text-gray-500 cursor-not-allowed"),children:(0,p.jsx)(u.Zve,{})})]})]}),(0,p.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,p.jsxs)("select",{value:O,onChange:e=>z(e.target.value),className:"min-w-[150px] border-2 border-purple-400 font-medium rounded-xl px-4 py-2 text-sm shadow-inner transition ".concat("dark"===a?"bg-gray-700 text-purple-200 focus:border-purple-500":"bg-white text-purple-800 focus:border-purple-600"),children:[(0,p.jsx)("option",{value:"All",className:"".concat("dark"===a?"bg-gray-900":"bg-white"),children:"All Statuses"}),(0,p.jsx)("option",{value:"In Progress",className:"".concat("dark"===a?"bg-gray-900":"bg-white"),children:"InProgress"}),(0,p.jsx)("option",{value:"Completed",className:"".concat("dark"===a?"bg-gray-900":"bg-white"),children:"Completed"}),(0,p.jsx)("option",{value:"Not Started",className:"".concat("dark"===a?"bg-gray-900":"bg-white"),children:"NotStarted"})]}),w&&(0,p.jsx)("p",{className:"text-base ".concat("dark"===a?"text-purple-300":"text-purple-700"),children:"Loading projects..."}),S&&(0,p.jsxs)("p",{className:"text-red-500 font-semibold text-base",children:["Error: ",S]})]}),(0,p.jsx)("div",{className:"overflow-x-auto rounded-xl shadow-2xl",children:(0,p.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 ".concat("dark"===a?"bg-gray-700":"bg-white"),children:[(0,p.jsx)("thead",{className:"text-left uppercase tracking-wider text-xs sm:text-sm ".concat("dark"===a?"bg-gray-700 text-purple-300 border-b border-purple-500":"bg-purple-100 text-purple-800"),children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{className:"py-3 px-4 text-xs sm:text-sm font-semibold whitespace-nowrap",children:"Project"}),(0,p.jsx)("th",{className:"py-3 px-4 text-xs sm:text-sm font-semibold whitespace-nowrap",children:"Team Lead"}),(0,p.jsxs)("th",{className:"py-3 px-4 text-xs sm:text-sm font-semibold whitespace-nowrap",children:[(0,p.jsx)(c.bfZ,{className:"inline mr-1"}),"Start"]}),(0,p.jsxs)("th",{className:"py-3 px-4 text-xs sm:text-sm font-semibold whitespace-nowrap",children:[(0,p.jsx)(c.bfZ,{className:"inline mr-1"}),"End"]}),(0,p.jsx)("th",{className:"py-3 px-4 text-xs sm:text-sm font-semibold whitespace-nowrap",children:"Priority"}),(0,p.jsx)("th",{className:"py-3 px-4 text-xs sm:text-sm font-semibold whitespace-nowrap",children:"Status"}),(0,p.jsx)("th",{className:"py-3 px-4 text-xs sm:text-sm font-semibold whitespace-nowrap",children:"Open/Closed"}),(0,p.jsx)("th",{className:"py-3 px-4 text-xs sm:text-sm font-semibold whitespace-nowrap",children:"Details"})]})}),(0,p.jsx)("tbody",{className:"divide-y divide-gray-100 ".concat("dark"===a?"divide-gray-600":"bg-white"),children:(0,p.jsx)(l.N,{mode:"wait",children:Z.length>0?Z.map((e,t)=>(0,p.jsxs)(i.P.tr,{className:"border-t border-gray-100 ".concat("dark"===a?"text-gray-100 hover:bg-gray-600":"text-gray-800 hover:bg-purple-50"," cursor-pointer transition duration-150"),onClick:()=>(e=>{const t=e.projectId||e.project_id;try{localStorage.setItem("selectedProjectId",t)}catch(a){}M("/project-details/".concat(t),{state:{project:e}})})(e),children:[(0,p.jsxs)("td",{className:"py-3 px-4 text-sm font-bold max-w-[200px] whitespace-normal",children:[(0,p.jsxs)("button",{onClick:t=>((e,t)=>{t&&t.stopPropagation&&t.stopPropagation(),J(e)})(e,t),className:"mr-2 px-2 py-1 rounded ".concat(W===e?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700"),children:["  ",W===e?"Selected":"Select"]}),e.title||e.project_name]}),(0,p.jsxs)("td",{className:"py-3 px-4 text-sm max-w-[150px] font-medium text-gray-600 whitespace-normal",children:["  ",H(e)]}),(0,p.jsx)("td",{className:"py-3 px-4 text-xs sm:text-sm whitespace-nowrap",children:e.startDate}),(0,p.jsx)("td",{className:"py-3 px-4 text-xs sm:text-sm whitespace-nowrap",children:e.endDate}),(0,p.jsx)("td",{onClick:e=>{e.stopPropagation()},className:"py-3 px-4",children:(0,p.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold shadow-sm ".concat(B(e.projectPriority||e.Priority)),children:["  ",e.projectPriority||e.Priority]})}),(0,p.jsx)("td",{onClick:e=>{e.stopPropagation()},className:"py-3 px-4",children:(0,p.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold shadow-sm ".concat(F(e.projectStatus||e.status)),children:["  ",e.projectStatus||e.status]})}),(0,p.jsxs)("td",{onClick:e=>{e.stopPropagation()},className:"py-3 px-4 text-sm whitespace-nowrap",children:[(0,p.jsx)("span",{className:"text-blue-600 font-semibold",children:e.openTask||e.Open_task||0})," / ",(0,p.jsx)("span",{className:"text-gray-500",children:e.closedTask||e.Closed_task||0})]}),(0,p.jsx)("td",{onClick:e=>{e.stopPropagation()},className:"py-3 px-4 text-center",children:(0,p.jsx)("a",{href:e.details||e.Details,target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),children:(0,p.jsxs)(i.P.div,{whileHover:{scale:1.2},children:["  ",(0,p.jsx)(c.t69,{className:"".concat("dark"===a?"text-blue-300":"text-blue-700"," text-lg transition")})]})})})]},e.projectId||e.project_id)):(0,p.jsx)("tr",{children:(0,p.jsx)("td",{colSpan:"8",className:"p-10 text-center text-lg ".concat("dark"===a?"text-gray-300":"text-gray-500"),children:w?"Fetching data...":"No projects found matching the filter."})})})})]})}),(0,p.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center mt-6 p-3 rounded-xl ".concat("dark"===a?"bg-gray-700 border border-gray-600 text-white":"bg-white border border-gray-200 text-gray-700"," shadow-md"),children:[(0,p.jsxs)("span",{className:"text-sm mb-2 sm:mb-0",children:[" Showing ",v.length," projects out of ",T.totalElements," total "]}),(0,p.jsxs)("div",{className:"flex space-x-2",children:[(0,p.jsx)("button",{onClick:()=>U(T.pageNumber-1),disabled:0===T.pageNumber,className:"px-3 py-1 rounded-lg text-sm bg-purple-200 text-purple-800 hover:bg-purple-300 disabled:opacity-50 disabled:cursor-not-allowed transition",children:"     \u2190 Previous "}),(0,p.jsxs)("span",{className:"px-3 py-1 rounded-lg text-sm bg-purple-600 text-white font-bold",children:[T.pageNumber+1," / ",T.totalPages]}),(0,p.jsx)("button",{onClick:()=>U(T.pageNumber+1),disabled:T.pageNumber>=T.totalPages-1,className:"px-3 py-1 rounded-lg text-sm bg-purple-200 text-purple-800 hover:bg-purple-300 disabled:opacity-50 disabled:cursor-not-allowed transition",children:"     Next \u2192 "})]})]}),(0,p.jsx)(l.N,{children:L&&(0,p.jsx)(A,{onClose:()=>{_(!1),q(null)},editProject:G,onSuccess:()=>{_(!1),q(null),R(T.pageNumber,T.pageSize)}})})]})}const E=()=>{const{theme:e}=(0,o.useContext)(d.ob);return(0,p.jsxs)("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 ".concat("dark"===e?"bg-gray-900":"bg-gray-50 "),children:[(0,p.jsx)("div",{className:"mb-8",children:(0,p.jsx)(S,{})}),(0,p.jsx)("div",{children:(0,p.jsx)(T,{})})]})}},8139:(e,t)=>{var a;!function(){"use strict";var r={}.hasOwnProperty;function s(){for(var e="",t=0;t<arguments.length;t++){var a=arguments[t];a&&(e=n(e,o(a)))}return e}function o(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return s.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var a in e)r.call(e,a)&&e[a]&&(t=n(t,a));return t}function n(e,t){return t?e?e+" "+t:e+t:e}e.exports?(s.default=s,e.exports=s):void 0===(a=function(){return s}.apply(t,[]))||(e.exports=a)}()},9570:(e,t,a)=>{"use strict";a.d(t,{N:()=>v});var r=a(579),s=a(5043),o=a(2190),n=a(4930),l=a(293),i=a(9379),c=a(9674),d=a(8676),u=a(1051);function g(e,t){if("function"===typeof e)return e(t);null!==e&&void 0!==e&&(e.current=t)}function p(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return s.useCallback(function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return e=>{let a=!1;const r=t.map(t=>{const r=g(t,e);return a||"function"!==typeof r||(a=!0),r});if(a)return()=>{for(let e=0;e<r.length;e++){const a=r[e];"function"===typeof a?a():g(t[e],null)}}}}(...t),t)}class m extends s.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=t.offsetParent,a=(0,d.s)(e)&&e.offsetWidth||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=a-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function x(e){let{children:t,isPresent:a,anchorX:o,root:n}=e;const l=(0,s.useId)(),i=(0,s.useRef)(null),c=(0,s.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:d}=(0,s.useContext)(u.Q),g=p(i,null===t||void 0===t?void 0:t.ref);return(0,s.useInsertionEffect)(()=>{const{width:e,height:t,top:r,left:s,right:u}=c.current;if(a||!i.current||!e||!t)return;const g="left"===o?"left: ".concat(s):"right: ".concat(u);i.current.dataset.motionPopId=l;const p=document.createElement("style");d&&(p.nonce=d);const m=null!==n&&void 0!==n?n:document.head;return m.appendChild(p),p.sheet&&p.sheet.insertRule('\n          [data-motion-pop-id="'.concat(l,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            ").concat(g,"px !important;\n            top: ").concat(r,"px !important;\n          }\n        ")),()=>{m.contains(p)&&m.removeChild(p)}},[a]),(0,r.jsx)(m,{isPresent:a,childRef:i,sizeRef:c,children:s.cloneElement(t,{ref:g})})}const h=e=>{let{children:t,initial:a,isPresent:o,onExitComplete:l,custom:d,presenceAffectsLayout:u,mode:g,anchorX:p,root:m}=e;const h=(0,n.M)(b),y=(0,s.useId)();let j=!0,f=(0,s.useMemo)(()=>(j=!1,{id:y,initial:a,isPresent:o,custom:d,onExitComplete:e=>{h.set(e,!0);for(const t of h.values())if(!t)return;l&&l()},register:e=>(h.set(e,!1),()=>h.delete(e))}),[o,h,l]);return u&&j&&(f=(0,i.A)({},f)),(0,s.useMemo)(()=>{h.forEach((e,t)=>h.set(t,!1))},[o]),s.useEffect(()=>{!o&&!h.size&&l&&l()},[o]),"popLayout"===g&&(t=(0,r.jsx)(x,{isPresent:o,anchorX:p,root:m,children:t})),(0,r.jsx)(c.t.Provider,{value:f,children:t})};function b(){return new Map}var y=a(8917);const j=e=>e.key||"";function f(e){const t=[];return s.Children.forEach(e,e=>{(0,s.isValidElement)(e)&&t.push(e)}),t}const v=e=>{let{children:t,custom:a,initial:i=!0,onExitComplete:c,presenceAffectsLayout:d=!0,mode:u="sync",propagate:g=!1,anchorX:p="left",root:m}=e;const[x,b]=(0,y.xQ)(g),v=(0,s.useMemo)(()=>f(t),[t]),N=g&&!x?[]:v.map(j),w=(0,s.useRef)(!0),k=(0,s.useRef)(v),S=(0,n.M)(()=>new Map),[C,A]=(0,s.useState)(v),[D,P]=(0,s.useState)(v);(0,l.E)(()=>{w.current=!1,k.current=v;for(let e=0;e<D.length;e++){const t=j(D[e]);N.includes(t)?S.delete(t):!0!==S.get(t)&&S.set(t,!1)}},[D,N.length,N.join("-")]);const I=[];if(v!==C){let e=[...v];for(let t=0;t<D.length;t++){const a=D[t],r=j(a);N.includes(r)||(e.splice(t,0,a),I.push(a))}return"wait"===u&&I.length&&(e=I),P(f(e)),A(v),null}const{forceRender:T}=(0,s.useContext)(o.L);return(0,r.jsx)(r.Fragment,{children:D.map(e=>{const t=j(e),s=!(g&&!x)&&(v===D||N.includes(t));return(0,r.jsx)(h,{isPresent:s,initial:!(w.current&&!i)&&void 0,custom:a,presenceAffectsLayout:d,mode:u,root:m,onExitComplete:s?void 0:()=>{if(!S.has(t))return;S.set(t,!0);let e=!0;S.forEach(t=>{t||(e=!1)}),e&&(null===T||void 0===T||T(),P(k.current),g&&(null===b||void 0===b||b()),c&&c())},anchorX:p,children:e},t)})})}}}]);
//# sourceMappingURL=245.1de1892b.chunk.js.map