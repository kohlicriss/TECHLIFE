"use strict";(self.webpackChunktechlife=self.webpackChunktechlife||[]).push([[361],{6361:(e,a,r)=>{r.r(a),r.d(a,{default:()=>k});var t=r(9379),n=r(5043),o=r(7234),l=r(9722),s=r(6396),d=r(5239),i=r.n(d),c=r(5439),m=r(579);const p="https://hrms.anasolconsultancyservices.com/api/payroll",b=localStorage.getItem("accessToken"),u=async e=>{const a=await fetch("".concat(p,"/create"),{method:"POST",headers:{Authorization:"Bearer ".concat(b),"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok){const e=await a.json();throw new Error(e.message||"Failed to add employee")}return a.json()},x=async e=>{const a=await fetch("".concat(p,"/payroll/calculate"),{method:"POST",headers:{Authorization:"Bearer ".concat(b),"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok)throw new Error("Failed to calculate payroll");return a.json()},g=async(e,a,r)=>(await l.A.get("".concat(p,"/employees/").concat(e,"/salary/").concat(a,"/").concat(r),{headers:{Authorization:"Bearer ".concat(b)}})).data.data,y=async(e,a)=>(await l.A.put("".concat(p,"/admin/payroll/").concat(e,"/update"),a,{headers:{Authorization:"Bearer ".concat(b)}})).data,h=async()=>{var e;const a=null===(e=(await l.A.get("".concat(p,"/employee"),{headers:{Authorization:"Bearer ".concat(b)}})).data)||void 0===e?void 0:e.data;return Array.isArray(a)?a:[]},f=e=>({January:1,February:2,March:3,April:4,May:5,June:6,July:7,August:8,September:9,October:10,November:11,December:12}[e]),N=e=>{if(!e)return v();console.log("Transform function input:",e);const a=void 0!==e.payrollId?e:null,r=e.employee||e,t=r.annualSalary||0,n=t?1e5*t/12:0,o=(null===a||void 0===a?void 0:a.grossEarnings)||(n>0?n:0),l=(null===a||void 0===a?void 0:a.totalDeductions)||(n>0?Math.round(.12*n)+200:0),s=(null===a||void 0===a?void 0:a.netSalary)||o-l,d=(null===a||void 0===a?void 0:a.bonusAmount)||0,i=(null===a||void 0===a?void 0:a.hikePercentage)||0;return{id:r.id||r.employeeId,employeeId:r.employeeId,employeeName:r.empName||r.employeeName,email:r.email||"",phoneNumber:r.phoneNumber||"",annualSalary:t,accountNumber:r.accountNumber||"",ifsccode:r.IFSCcode||r.ifsccode||"",bankName:r.bankName||"",pfnum:r.PFnum||r.pfnum||"",panNumber:r.panNumber||"",aadharNumber:r.aadharNumber||"",uanNumber:r.uanNumber||"",department:r.department||"",designation:r.designation||"",bankAccountName:r.empName||r.employeeName,phoneNo:r.phoneNumber||"",panNo:r.panNumber||"",standardDays:(null===a||void 0===a?void 0:a.totalWorkingDays)||26,payableDays:(null===a||void 0===a?void 0:a.paidDays)||26,lossOfPayDays:(null===a||void 0===a?void 0:a.lossOfPayDays)||0,lopReversalDays:0,arrearDays:0,bonus:d,hike:i,earnings:a?[{name:"BASIC",monthlyRate:a.basicSalary||0,currentMonth:a.basicSalary||0,arrear:0,total:a.basicSalary||0},{name:"HRA",monthlyRate:a.hraAmount||0,currentMonth:a.hraAmount||0,arrear:0,total:a.hraAmount||0},{name:"CONVEYANCE",monthlyRate:a.conveyanceAllowance||0,currentMonth:a.conveyanceAllowance||0,arrear:0,total:a.conveyanceAllowance||0},{name:"MEDICAL",monthlyRate:a.medicalAllowance||0,currentMonth:a.medicalAllowance||0,arrear:0,total:a.medicalAllowance||0},{name:"SPECIAL ALLOWANCE",monthlyRate:a.specialAllowance||0,currentMonth:a.specialAllowance||0,arrear:0,total:a.specialAllowance||0}]:n>0?[{name:"BASIC",monthlyRate:Math.round(.5*n),currentMonth:Math.round(.5*n),arrear:0,total:Math.round(.5*n)},{name:"HRA",monthlyRate:Math.round(.4*n),currentMonth:Math.round(.4*n),arrear:0,total:Math.round(.4*n)},{name:"SPECIAL ALLOWANCE",monthlyRate:Math.round(.1*n),currentMonth:Math.round(.1*n),arrear:0,total:Math.round(.1*n)}]:[],deductions:a?[{name:"PROVIDENT FUND",amount:a.providentFund||0},{name:"PROFESSIONAL TAX",amount:a.professionalTax||0},{name:"INCOME TAX",amount:a.incomeTax||0}]:n>0?[{name:"PROVIDENT FUND",amount:Math.round(.12*n)},{name:"PROFESSIONAL TAX",amount:200}]:[],grossEarnings:o,totalDeductions:l,netSalary:s,payrollId:null===a||void 0===a?void 0:a.payrollId}},v=()=>({id:"unknown",employeeId:"unknown",employeeName:"Unknown Employee",email:"",phoneNumber:"",annualSalary:0,accountNumber:"",ifsccode:"",bankName:"",pfnum:"",panNumber:"",aadharNumber:"",uanNumber:"",department:"",designation:"",bankAccountName:"Unknown Employee",phoneNo:"",panNo:"",pfNo:"",standardDays:26,payableDays:26,lossOfPayDays:0,lopReversalDays:0,arrearDays:0,bonus:0,hike:0,earnings:[],deductions:[],grossEarnings:0,totalDeductions:0,netSalary:0}),j=()=>(0,m.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 flex items-center justify-center p-6",children:(0,m.jsxs)("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8 text-center",children:[(0,m.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,m.jsx)("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,m.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,m.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Access Denied"}),(0,m.jsx)("p",{className:"text-gray-600 mb-6",children:"You don't have permission to access the payroll management system. This page is restricted to ADMIN users only."}),(0,m.jsx)("button",{onClick:()=>window.history.back(),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Go Back"})]})}),w=()=>(0,m.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 flex items-center justify-center",children:(0,m.jsxs)("div",{className:"text-center",children:[(0,m.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,m.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading payroll system..."})]})}),A=e=>{let{isAdding:a,newEmployee:r,onEmployeeChange:t,onSave:n,onCancel:o,loading:l}=e;return a?(0,m.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:(0,m.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,m.jsxs)("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white p-6",children:[(0,m.jsx)("h2",{className:"text-2xl font-bold",children:"Add New Employee"}),(0,m.jsx)("p",{className:"opacity-90",children:"Fill in the employee details below"})]}),(0,m.jsxs)("div",{className:"p-6",children:[(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,m.jsx)("div",{className:"md:col-span-2",children:(0,m.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-800 border-l-4 border-green-500 pl-3",children:"Personal Information"})}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employee ID *"}),(0,m.jsx)("input",{type:"text",value:r.employeeId,onChange:e=>t("employeeId",e.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-colors",placeholder:"e.g., ACS00000001"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employee Name *"}),(0,m.jsx)("input",{type:"text",value:r.employeeName,onChange:e=>t("employeeName",e.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-colors",placeholder:"Full name"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),(0,m.jsx)("input",{type:"email",value:r.email,onChange:e=>t("email",e.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-colors",placeholder:"email@company.com"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),(0,m.jsx)("input",{type:"tel",value:r.phoneNumber,onChange:e=>t("phoneNumber",e.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-colors",placeholder:"9876543210"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Designation"}),(0,m.jsx)("input",{type:"text",value:r.designation,onChange:e=>t("designation",e.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-colors",placeholder:"e.g., Software Engineer"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department"}),(0,m.jsx)("input",{type:"text",value:r.department,onChange:e=>t("department",e.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-colors",placeholder:"e.g., Engineering"})]}),(0,m.jsx)("div",{className:"md:col-span-2",children:(0,m.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-800 border-l-4 border-green-500 pl-3",children:"Salary Information"})}),(0,m.jsxs)("div",{className:"md:col-span-2",children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Annual Salary (LPA)"}),(0,m.jsx)("input",{type:"number",value:r.annualSalary,onChange:e=>t("annualSalary",""===e.target.value?"":Number(e.target.value)),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-colors",placeholder:"6.0",step:"0.1",min:"0"})]}),(0,m.jsx)("div",{className:"md:col-span-2",children:(0,m.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-800 border-l-4 border-green-500 pl-3",children:"Bank Details"})}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Number"}),(0,m.jsx)("input",{type:"text",value:r.accountNumber,onChange:e=>t("accountNumber",e.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-colors",placeholder:"9861376290"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"IFSC Code"}),(0,m.jsx)("input",{type:"text",value:r.ifsccode,onChange:e=>t("ifsccode",e.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-colors",placeholder:"SBIN0001234"})]}),(0,m.jsxs)("div",{className:"md:col-span-2",children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bank Name"}),(0,m.jsx)("input",{type:"text",value:r.bankName,onChange:e=>t("bankName",e.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-colors",placeholder:"State Bank of India"})]}),(0,m.jsx)("div",{className:"md:col-span-2",children:(0,m.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-800 border-l-4 border-green-500 pl-3",children:"Government Identifiers"})}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"PF Number"}),(0,m.jsx)("input",{type:"text",value:r.pfnum,onChange:e=>t("pfnum",e.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-colors",placeholder:"PF123456"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"PAN Number"}),(0,m.jsx)("input",{type:"text",value:r.panNumber,onChange:e=>t("panNumber",e.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-colors",placeholder:"ABCDE1234F"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Aadhar Number"}),(0,m.jsx)("input",{type:"text",value:r.aadharNumber,onChange:e=>t("aadharNumber",e.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-colors",placeholder:"123412341234"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"UAN Number"}),(0,m.jsx)("input",{type:"text",value:r.uanNumber,onChange:e=>t("uanNumber",e.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-colors",placeholder:"UAN123456789"})]})]}),(0,m.jsxs)("div",{className:"flex gap-4 justify-end pt-6 mt-6 border-t",children:[(0,m.jsx)("button",{onClick:o,disabled:l,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium disabled:opacity-50",children:"Cancel"}),(0,m.jsx)("button",{onClick:n,disabled:l,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium disabled:opacity-50 flex items-center gap-2",children:l?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Adding..."]}):"Add Employee"})]})]})]})}):null},S=e=>{let{editingEmployee:a,onInputChange:r,onSaveEdit:t,onCancelEdit:n,loading:o}=e;return a?(0,m.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center p-4 z-50",children:(0,m.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,m.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6",children:[(0,m.jsxs)("h2",{className:"text-2xl font-bold",children:["Edit Employee - ",a.employeeName]}),(0,m.jsx)("p",{className:"opacity-90",children:"Update employee details, bonus, and hike information"})]}),(0,m.jsxs)("div",{className:"p-6",children:[(0,m.jsxs)("div",{className:"mb-6",children:[(0,m.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Personal Information"}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employee Name"}),(0,m.jsx)("input",{type:"text",value:a.employeeName,onChange:e=>r("employeeName",e.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employee ID"}),(0,m.jsx)("input",{type:"text",value:a.employeeId,readOnly:!0,className:"w-full border border-gray-300 bg-gray-100 rounded-lg px-4 py-2 text-gray-600"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,m.jsx)("input",{type:"email",value:a.email,onChange:e=>r("email",e.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),(0,m.jsx)("input",{type:"tel",value:a.phoneNo,onChange:e=>r("phoneNo",e.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors"})]})]})]}),(0,m.jsxs)("div",{className:"mb-6",children:[(0,m.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Financial Information"}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Annual Salary (LPA)"}),(0,m.jsx)("input",{type:"number",step:"0.1",value:a.annualSalary,onChange:e=>r("annualSalary",parseFloat(e.target.value)),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bonus Amount (\u20b9)"}),(0,m.jsx)("input",{type:"number",value:a.bonus||0,onChange:e=>r("bonus",Number(e.target.value)),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Enter bonus amount"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hike Percentage (%)"}),(0,m.jsx)("input",{type:"number",step:"0.1",value:a.hike||0,onChange:e=>r("hike",Number(e.target.value)),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Enter hike percentage"})]})]})]}),(0,m.jsxs)("div",{className:"mb-6",children:[(0,m.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Bank Details"}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Number"}),(0,m.jsx)("input",{type:"text",value:a.accountNumber,onChange:e=>r("accountNumber",e.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"IFSC Code"}),(0,m.jsx)("input",{type:"text",value:a.ifsccode,onChange:e=>r("ifsccode",e.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bank Name"}),(0,m.jsx)("input",{type:"text",value:a.bankName,onChange:e=>r("bankName",e.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors"})]})]})]}),(0,m.jsxs)("div",{className:"mb-6",children:[(0,m.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Government Identifiers"}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"PF Number"}),(0,m.jsx)("input",{type:"text",value:a.pfnum,onChange:e=>r("pfnum",e.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"PAN Number"}),(0,m.jsx)("input",{type:"text",value:a.panNumber,onChange:e=>r("panNumber",e.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Aadhar Number"}),(0,m.jsx)("input",{type:"text",value:a.aadharNumber,onChange:e=>r("aadharNumber",e.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"UAN Number"}),(0,m.jsx)("input",{type:"text",value:a.uanNumber,onChange:e=>r("uanNumber",e.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors"})]})]})]}),(0,m.jsxs)("div",{className:"flex gap-4 justify-end pt-4 border-t",children:[(0,m.jsx)("button",{onClick:n,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium",children:"Cancel"}),(0,m.jsx)("button",{onClick:t,disabled:o,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium disabled:opacity-50 flex items-center gap-2",children:o?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Saving..."]}):"Save Changes"})]})]})]})}):null},k=()=>{const[e,a]=(0,n.useState)("April"),[r,l]=(0,n.useState)("2025"),[d,p]=(0,n.useState)(null),[b,v]=(0,n.useState)(null),[k,C]=(0,n.useState)(!1),{userData:E}=(0,n.useContext)(o.ob),[I,D]=(0,n.useState)(!1),[L,P]=(0,n.useState)(!1),[F,T]=(0,n.useState)(!1),[O,R]=(0,n.useState)(""),[M,B]=(0,n.useState)([]),[U,z]=((0,c.Zp)(),(0,n.useState)({employeeId:"",employeeName:"",email:"",phoneNumber:"",designation:"",department:"",annualSalary:0,accountNumber:"",ifsccode:"",bankName:"",pfnum:"",panNumber:"",aadharNumber:"",uanNumber:""})),[G,H]=(0,n.useState)([]),V=(0,n.useRef)(null),Y=(M.filter(e=>{var a,r,t;return(null===(a=e.empName)||void 0===a?void 0:a.toLowerCase().includes(O.toLowerCase()))||(null===(r=e.designation)||void 0===r?void 0:r.toLowerCase().includes(O.toLowerCase()))||(null===(t=e.employeeId)||void 0===t?void 0:t.toLowerCase().includes(O.toLowerCase()))}),(0,n.useCallback)((e,a)=>{z(r=>(0,t.A)((0,t.A)({},r),{},{[e]:a}))},[])),J=(0,n.useCallback)((e,a)=>{v(r=>(0,t.A)((0,t.A)({},r),{},{[e]:a}))},[]);(0,n.useEffect)(()=>{_()},[e,r]);const _=async()=>{try{T(!0);const a=await h();console.log("Raw employees from API:",a);const n=Array.isArray(a)?a:[],o=await Promise.all(n.map(async a=>{try{const n=f(e);console.log("Fetching payroll for ".concat(a.employeeId,", ").concat(n,", ").concat(r));const o=await g(a.employeeId,n,parseInt(r));if(console.log("Payroll API response for ".concat(a.employeeId,":"),o),o&&o.payrollId){console.log("Merging payroll data for ".concat(a.employeeId));const e=N(a),r=(0,t.A)((0,t.A)({},o),{},{employee:(0,t.A)((0,t.A)({},a),e)}),n=N(r);return console.log("Combined data for ".concat(a.employeeId,":"),n),n}return console.log("No payroll data for ".concat(a.employeeId,", using employee data only")),N(a)}catch(n){console.warn("No payroll data found for ".concat(a.employeeId,":"),n.message);const e=N(a);return console.log("Employee data without payroll for ".concat(a.employeeId,":"),e),e}}));console.log("Final employees data to set:",o),H(o),T(!1)}catch(a){console.error("Error fetching employees:",a),H([]),T(!1),alert("Failed to load employee data. Please try again.")}};if(!E)return(0,m.jsx)(w,{});if(!E||!(Array.isArray(E.roles)?E.roles.includes("ADMIN"):"ADMIN"===E.roles))return(0,m.jsx)(j,{});const W=e=>new Intl.NumberFormat("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e),X=()=>{p(null),C(!1),v(null)},q=e=>{v((0,t.A)({},e)),C(!0)},Z=(G||[]).map((e,a)=>{var r,n;const o=e.grossEarnings||(null===(r=e.earnings)||void 0===r?void 0:r.reduce((e,a)=>e+((null===a||void 0===a?void 0:a.total)||0),0))||0,l=e.totalDeductions||(null===(n=e.deductions)||void 0===n?void 0:n.reduce((e,a)=>e+((null===a||void 0===a?void 0:a.amount)||0),0))||0,s=e.bonus||0,d=e.netSalary||o-l+s;return(0,t.A)((0,t.A)({id:(null===e||void 0===e?void 0:e.id)||(null===e||void 0===e?void 0:e.employeeId)||"emp-".concat(a),employeeId:(null===e||void 0===e?void 0:e.employeeId)||"unknown-".concat(a),employeeName:(null===e||void 0===e?void 0:e.employeeName)||"Unknown Employee",designation:(null===e||void 0===e?void 0:e.designation)||"-",department:(null===e||void 0===e?void 0:e.department)||"-",email:(null===e||void 0===e?void 0:e.email)||"-",phoneNumber:(null===e||void 0===e?void 0:e.phoneNumber)||"-",annualSalary:(null===e||void 0===e?void 0:e.annualSalary)||0},e),{},{grossEarnings:o,totalDeductions:l,bonusAmount:s,netSalary:d,earnings:e.earnings||[],deductions:e.deductions||[]})});if(d&&!k){const a=d,t=a.grossEarnings||0,n=a.totalDeductions||0,o=a.bonusAmount||0,l=a.netSalary||0;return(0,m.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 p-6",children:(0,m.jsxs)("div",{className:"max-w-4xl mx-auto bg-white rounded-2xl shadow-2xl overflow-hidden border border-blue-100",children:[(0,m.jsx)("div",{className:"bg-gradient-to-r from-blue-800 to-purple-800 text-white p-8",children:(0,m.jsxs)("div",{className:"flex items-center justify-between",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("h1",{className:"text-3xl font-bold",children:"ANASOL CONSULTANCY SERVICES PVT LTD"}),(0,m.jsx)("h2",{className:"text-xl mt-2 opacity-90",children:"SALARY SLIP"}),(0,m.jsxs)("div",{className:"mt-3 bg-white/20 px-4 py-1 rounded-full inline-block text-sm",children:[e," ",r]})]}),(0,m.jsx)("div",{className:"w-24 h-24 bg-white/20 rounded-xl flex items-center justify-center",children:(0,m.jsx)("img",{src:"/assets/anasol-logo.png",alt:"Anasol Logo",className:"w-20 h-20 object-contain"})})]})}),(0,m.jsxs)("div",{className:"p-4 bg-gray-50 border-b flex justify-between items-center",children:[(0,m.jsx)("button",{onClick:X,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-medium",children:"\u2190 Back to Employee List"}),(0,m.jsx)("button",{onClick:()=>q(d),className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors font-medium",children:"Edit Salary"})]}),(0,m.jsxs)("div",{ref:V,className:"p-8",children:[(0,m.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[(0,m.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-blue-100",children:[(0,m.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-800 border-l-4 border-blue-500 pl-3",children:"Personal Information"}),(0,m.jsxs)("div",{className:"space-y-3",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center pb-2 border-b border-gray-100",children:[(0,m.jsx)("span",{className:"font-medium text-gray-600",children:"Employee Name:"}),(0,m.jsx)("span",{className:"font-semibold text-gray-800",children:a.employeeName})]}),(0,m.jsxs)("div",{className:"flex justify-between items-center pb-2 border-b border-gray-100",children:[(0,m.jsx)("span",{className:"font-medium text-gray-600",children:"Employee ID:"}),(0,m.jsx)("span",{className:"font-semibold text-gray-800",children:a.employeeId})]}),(0,m.jsxs)("div",{className:"flex justify-between items-center pb-2 border-b border-gray-100",children:[(0,m.jsx)("span",{className:"font-medium text-gray-600",children:"Designation:"}),(0,m.jsx)("span",{className:"font-semibold text-gray-800",children:a.designation})]}),(0,m.jsxs)("div",{className:"flex justify-between items-center pb-2 border-b border-gray-100",children:[(0,m.jsx)("span",{className:"font-medium text-gray-600",children:"Department:"}),(0,m.jsx)("span",{className:"font-semibold text-gray-800",children:a.department})]}),(0,m.jsxs)("div",{className:"flex justify-between items-center",children:[(0,m.jsx)("span",{className:"font-medium text-gray-600",children:"Phone No:"}),(0,m.jsx)("span",{className:"font-semibold text-gray-800",children:a.phoneNo})]})]})]}),(0,m.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-blue-100",children:[(0,m.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-800 border-l-4 border-blue-500 pl-3",children:"Bank & Tax Information"}),(0,m.jsxs)("div",{className:"space-y-3",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center pb-2 border-b border-gray-100",children:[(0,m.jsx)("span",{className:"font-medium text-gray-600",children:"Bank A/C Name:"}),(0,m.jsx)("span",{className:"font-semibold text-gray-800",children:a.bankAccountName})]}),(0,m.jsxs)("div",{className:"flex justify-between items-center pb-2 border-b border-gray-100",children:[(0,m.jsx)("span",{className:"font-medium text-gray-600",children:"PAN No:"}),(0,m.jsx)("span",{className:"font-semibold text-gray-800",children:a.panNo})]}),(0,m.jsxs)("div",{className:"flex justify-between items-center pb-2 border-b border-gray-100",children:[(0,m.jsx)("span",{className:"font-medium text-gray-600",children:"PF No:"}),(0,m.jsx)("span",{className:"font-semibold text-gray-800",children:a.pfNo})]}),(0,m.jsxs)("div",{className:"flex justify-between items-center pb-2 border-b border-gray-100",children:[(0,m.jsx)("span",{className:"font-medium text-gray-600",children:"IFSC Code:"}),(0,m.jsx)("span",{className:"font-semibold text-gray-800",children:a.ifsccode})]}),(0,m.jsxs)("div",{className:"flex justify-between items-center",children:[(0,m.jsx)("span",{className:"font-medium text-gray-600",children:"Email:"}),(0,m.jsx)("span",{className:"font-semibold text-gray-800",children:a.email})]})]})]})]}),(0,m.jsxs)("div",{className:"mb-8",children:[(0,m.jsx)("h3",{className:"text-xl font-bold mb-4 text-gray-800 border-l-4 border-blue-500 pl-3",children:"Attendance Information"}),(0,m.jsx)("div",{className:"overflow-x-auto rounded-xl shadow-sm border border-gray-200",children:(0,m.jsxs)("table",{className:"min-w-full bg-white",children:[(0,m.jsx)("thead",{children:(0,m.jsxs)("tr",{className:"bg-gradient-to-r from-gray-50 to-blue-50",children:[(0,m.jsx)("th",{className:"border-b border-gray-200 px-6 py-4 font-semibold text-gray-700",children:"Standard Days"}),(0,m.jsx)("th",{className:"border-b border-gray-200 px-6 py-4 font-semibold text-gray-700",children:"Payable Days"}),(0,m.jsx)("th",{className:"border-b border-gray-200 px-6 py-4 font-semibold text-gray-700",children:"Loss of Pay Days"}),(0,m.jsx)("th",{className:"border-b border-gray-200 px-6 py-4 font-semibold text-gray-700",children:"LOP Reversal Days"}),(0,m.jsx)("th",{className:"border-b border-gray-200 px-6 py-4 font-semibold text-gray-700",children:"Arrear Days"})]})}),(0,m.jsx)("tbody",{children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{className:"border-b border-gray-100 px-6 py-4 text-center font-medium text-gray-900",children:a.standardDays}),(0,m.jsx)("td",{className:"border-b border-gray-100 px-6 py-4 text-center font-medium text-gray-900",children:a.payableDays}),(0,m.jsx)("td",{className:"border-b border-gray-100 px-6 py-4 text-center font-medium text-gray-900",children:a.lossOfPayDays}),(0,m.jsx)("td",{className:"border-b border-gray-100 px-6 py-4 text-center font-medium text-gray-900",children:a.lopReversalDays}),(0,m.jsx)("td",{className:"border-b border-gray-100 px-6 py-4 text-center font-medium text-gray-900",children:a.arrearDays})]})})]})})]}),o>0&&(0,m.jsxs)("div",{className:"mb-8",children:[(0,m.jsx)("h3",{className:"text-xl font-bold mb-4 text-gray-800 border-l-4 border-blue-500 pl-3",children:"Additional Compensation"}),(0,m.jsx)("div",{className:"overflow-x-auto rounded-xl shadow-sm border border-gray-200",children:(0,m.jsxs)("table",{className:"min-w-full bg-white",children:[(0,m.jsx)("thead",{children:(0,m.jsxs)("tr",{className:"bg-gradient-to-r from-yellow-50 to-orange-50",children:[(0,m.jsx)("th",{className:"border-b border-gray-200 px-6 py-4 font-semibold text-gray-700",children:"Bonus Amount"}),(0,m.jsx)("th",{className:"border-b border-gray-200 px-6 py-4 font-semibold text-gray-700",children:"Hike Percentage"})]})}),(0,m.jsx)("tbody",{children:(0,m.jsxs)("tr",{children:[(0,m.jsxs)("td",{className:"border-b border-gray-100 px-6 py-4 text-center font-bold text-yellow-700",children:["\u20b9",o.toLocaleString()]}),(0,m.jsxs)("td",{className:"border-b border-gray-100 px-6 py-4 text-center font-medium text-gray-900",children:[a.hike||0,"%"]})]})})]})})]}),(0,m.jsxs)("div",{className:"mb-8",children:[(0,m.jsx)("h3",{className:"text-xl font-bold mb-4 text-gray-800 border-l-4 border-blue-500 pl-3",children:"Salary Details"}),(0,m.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,m.jsxs)("div",{className:"lg:col-span-2",children:[(0,m.jsx)("h4",{className:"font-semibold mb-3 text-gray-700",children:"EARNINGS"}),(0,m.jsx)("div",{className:"overflow-x-auto rounded-xl shadow-sm border border-gray-200",children:(0,m.jsxs)("table",{className:"min-w-full bg-white",children:[(0,m.jsx)("thead",{children:(0,m.jsxs)("tr",{className:"bg-gradient-to-r from-gray-50 to-blue-50",children:[(0,m.jsx)("th",{className:"border-b border-gray-200 px-4 py-3 font-semibold text-gray-700",children:"Description"}),(0,m.jsx)("th",{className:"border-b border-gray-200 px-4 py-3 font-semibold text-gray-700 text-right",children:"Monthly Rate"}),(0,m.jsx)("th",{className:"border-b border-gray-200 px-4 py-3 font-semibold text-gray-700 text-right",children:"Current Month"}),(0,m.jsx)("th",{className:"border-b border-gray-200 px-4 py-3 font-semibold text-gray-700 text-right",children:"Arrear (+/-)"}),(0,m.jsx)("th",{className:"border-b border-gray-200 px-4 py-3 font-semibold text-gray-700 text-right",children:"Total"})]})}),(0,m.jsxs)("tbody",{children:[(a.earnings||[]).map((e,a)=>(0,m.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,m.jsx)("td",{className:"border-b border-gray-100 px-4 py-3 text-gray-700",children:e.name}),(0,m.jsxs)("td",{className:"border-b border-gray-100 px-4 py-3 text-right font-medium text-gray-900",children:["\u20b9",(e.monthlyRate||0).toLocaleString()]}),(0,m.jsxs)("td",{className:"border-b border-gray-100 px-4 py-3 text-right font-medium text-gray-900",children:["\u20b9",(e.currentMonth||0).toLocaleString()]}),(0,m.jsx)("td",{className:"border-b border-gray-100 px-4 py-3 text-right font-medium text-gray-900",children:e.arrear||0}),(0,m.jsxs)("td",{className:"border-b border-gray-100 px-4 py-3 text-right font-medium text-gray-900",children:["\u20b9",(e.total||0).toLocaleString()]})]},a)),o>0&&(0,m.jsxs)("tr",{className:"bg-yellow-50 hover:bg-yellow-100",children:[(0,m.jsx)("td",{className:"border-b border-gray-100 px-4 py-3 font-semibold text-yellow-800",children:"BONUS"}),(0,m.jsx)("td",{className:"border-b border-gray-100 px-4 py-3 text-right font-medium text-yellow-800",children:"-"}),(0,m.jsx)("td",{className:"border-b border-gray-100 px-4 py-3 text-right font-medium text-yellow-800",children:"-"}),(0,m.jsx)("td",{className:"border-b border-gray-100 px-4 py-3 text-right font-medium text-yellow-800",children:"-"}),(0,m.jsxs)("td",{className:"border-b border-gray-100 px-4 py-3 text-right font-bold text-yellow-800",children:["\u20b9",o.toLocaleString()]})]}),(0,m.jsxs)("tr",{className:"bg-blue-50 font-semibold",children:[(0,m.jsx)("td",{className:"border-b border-gray-200 px-4 py-3",colSpan:"4",children:"GROSS EARNINGS"}),(0,m.jsxs)("td",{className:"border-b border-gray-200 px-4 py-3 text-right text-blue-800",children:["\u20b9",t.toLocaleString()]})]})]})]})})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("h4",{className:"font-semibold mb-3 text-gray-700",children:"DEDUCTIONS"}),(0,m.jsx)("div",{className:"overflow-x-auto rounded-xl shadow-sm border border-gray-200",children:(0,m.jsxs)("table",{className:"min-w-full bg-white",children:[(0,m.jsx)("thead",{children:(0,m.jsxs)("tr",{className:"bg-gradient-to-r from-gray-50 to-blue-50",children:[(0,m.jsx)("th",{className:"border-b border-gray-200 px-4 py-3 font-semibold text-gray-700",children:"Description"}),(0,m.jsx)("th",{className:"border-b border-gray-200 px-4 py-3 font-semibold text-gray-700 text-right",children:"Amount"})]})}),(0,m.jsxs)("tbody",{children:[(a.deductions||[]).map((e,a)=>(0,m.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,m.jsx)("td",{className:"border-b border-gray-100 px-4 py-3 text-gray-700",children:e.name}),(0,m.jsxs)("td",{className:"border-b border-gray-100 px-4 py-3 text-right font-medium text-red-600",children:["\u20b9",(e.amount||0).toLocaleString()]})]},a)),(0,m.jsxs)("tr",{className:"bg-blue-50 font-semibold",children:[(0,m.jsx)("td",{className:"border-b border-gray-200 px-4 py-3",children:"TOTAL DEDUCTIONS"}),(0,m.jsxs)("td",{className:"border-b border-gray-200 px-4 py-3 text-right text-red-700",children:["\u20b9",n.toLocaleString()]})]}),o>0&&(0,m.jsxs)("tr",{className:"bg-yellow-50 font-semibold",children:[(0,m.jsx)("td",{className:"border-b border-gray-200 px-4 py-3 text-yellow-800",children:"BONUS ADDED"}),(0,m.jsxs)("td",{className:"border-b border-gray-200 px-4 py-3 text-right text-yellow-800",children:["+ \u20b9",o.toLocaleString()]})]}),(0,m.jsxs)("tr",{className:"bg-green-50 font-bold",children:[(0,m.jsx)("td",{className:"border-b border-gray-200 px-4 py-3 text-green-800",children:"NET SALARY"}),(0,m.jsxs)("td",{className:"border-b border-gray-200 px-4 py-3 text-right text-green-800",children:["\u20b9",l.toLocaleString()]})]})]})]})})]})]})]}),(0,m.jsx)("div",{className:"mt-8 pt-6 border-t border-gray-300 text-center text-sm text-gray-600",children:(0,m.jsx)("p",{children:"#1016, 11th Floor, DSL Abacus IT Park, Uppal Hyderabad-500039 | Ph: 9632091726"})})]})]})})}return(0,m.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 p-6",children:[(0,m.jsx)(A,{isAdding:I,newEmployee:U,onEmployeeChange:Y,onSave:async()=>{var a;if(U.employeeId&&U.employeeName&&U.email)try{P(!0);const n={employeeId:(a=U).employeeId,empName:a.employeeName,email:a.email,phoneNumber:a.phoneNumber,annualSalary:a.annualSalary,accountNumber:a.accountNumber,ifsccode:a.ifsccode,bankName:a.bankName,pfnum:a.pfnum,panNumber:a.panNumber,aadharNumber:a.aadharNumber,uanNumber:a.uanNumber,department:a.department,designation:a.designation};console.log("Sending data to backend:",n);const o=await u(n);console.log("Response from backend:",o);const l=f(e);try{await x({employeeId:U.employeeId,month:l,year:parseInt(r)})}catch(t){console.warn("Payroll calculation failed:",t)}await _(),D(!1),z({employeeId:"",employeeName:"",email:"",phoneNumber:"",designation:"",department:"",annualSalary:0,accountNumber:"",ifsccode:"",bankName:"",pfnum:"",panNumber:"",aadharNumber:"",uanNumber:""}),alert("Employee added successfully!")}catch(n){console.error("Error adding employee:",n),console.error("Error details:",n.message),alert("Failed to add employee: ".concat(n.message))}finally{P(!1)}else alert("Please fill in all required fields")},onCancel:()=>{D(!1),z({employeeId:"",employeeName:"",email:"",phoneNumber:"",designation:"",department:"",annualSalary:0,accountNumber:"",ifsccode:"",bankName:"",pfnum:"",panNumber:"",aadharNumber:"",uanNumber:""})},loading:L}),k&&(0,m.jsx)(S,{editingEmployee:b,onInputChange:J,onSaveEdit:async()=>{if(b)try{P(!0);const o=f(e),l=parseInt(r);let s;console.log("Fetching payroll for: ".concat(b.employeeId,", ").concat(o,", ").concat(l));try{s=await g(b.employeeId,o,l),console.log("Full payroll response:",s)}catch(t){return console.error("Error fetching payroll:",t),void alert("No payroll record found. Please generate payroll for this employee first.")}const d=s.payrollId;if(console.log("Extracted payroll ID:",d),!d)return console.error("No payroll ID found in response. Available keys:",Object.keys(s)),void alert("Could not find payroll ID. Please check the payroll data.");try{await y(d,{bonusAmount:b.bonus||0,hikePercentage:b.hike||0,basicSalary:b.basicSalary,hraAmount:b.hra,conveyanceAllowance:b.conveyanceAllowance,medicalAllowance:b.medicalAllowance,specialAllowance:b.specialAllowance,otherAllowances:b.otherAllowances,providentFund:b.providentFund,professionalTax:b.professionalTax,incomeTax:b.incomeTax,otherDeductions:b.otherDeductions}),setTimeout(async()=>{await _()},500),C(!1),v(null),alert("Employee payroll updated successfully!")}catch(n){var a;console.error("Error updating payroll:",n),console.error("Error response:",null===(a=n.response)||void 0===a?void 0:a.data),alert("Failed to update payroll. Please try again.")}}catch(t){console.error("Error in handleSaveEdit:",t),alert("Failed to update employee. Please try again.")}finally{P(!1)}},onCancelEdit:()=>{C(!1),v(null)},loading:L}),(0,m.jsxs)("div",{className:"max-w-7xl mx-auto bg-white rounded-2xl shadow-xl overflow-hidden border border-blue-100",children:[(0,m.jsx)("div",{className:"p-6 bg-white border-b border-gray-200",children:(0,m.jsxs)("div",{className:"flex flex-wrap gap-4 items-center justify-between",children:[(0,m.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Month"}),(0,m.jsx)("select",{value:e,onChange:e=>a(e.target.value),className:"border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:["January","February","March","April","May","June","July","August","September","October","November","December"].map(e=>(0,m.jsx)("option",{value:e,children:e},e))})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Year"}),(0,m.jsx)("select",{value:r,onChange:e=>l(e.target.value),className:"border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:["2023","2024","2025"].map(e=>(0,m.jsx)("option",{value:e,children:e},e))})]}),(0,m.jsxs)("div",{className:"flex-1",children:[(0,m.jsx)("label",{htmlFor:"search-input",className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Employees"}),(0,m.jsx)("input",{id:"search-input",type:"text",placeholder:"Search by name, role, or employee ID",value:O,onChange:e=>R(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,m.jsxs)("div",{className:"flex gap-4",children:[(0,m.jsxs)("button",{onClick:()=>{D(!0)},className:"px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all shadow-lg font-medium flex items-center gap-2",children:[(0,m.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,m.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Employee"]}),(0,m.jsx)("button",{onClick:async()=>{try{const a=[["Employee ID","Employee Name","Designation","Department","Gross Earnings","Bonus","Total Deductions","Net Salary"].join(","),...Z.map(e=>[e.employeeId,'"'.concat(e.employeeName,'"'),'"'.concat(e.designation,'"'),'"'.concat(e.department,'"'),e.grossEarnings,e.bonusAmount,e.totalDeductions,e.netSalary].join(","))].join("\n"),t=new Blob(["\ufeff"+a],{type:"text/csv;charset=utf-8;"}),n=URL.createObjectURL(t),o=document.createElement("a");o.href=n,o.download="Employee_Salary_Summary_".concat(e,"_").concat(r,".csv"),document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(n)}catch(a){console.error("Error downloading Excel:",a),alert("Failed to download Excel sheet. Please try again.")}},className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all shadow-lg font-medium",children:"Download Excel Sheet"})]})]})}),(0,m.jsxs)("div",{className:"p-6",children:[(0,m.jsxs)("h3",{className:"text-2xl font-bold mb-6 text-gray-800",children:["Employee Salary Summary - ",e," ",r]}),F?(0,m.jsxs)("div",{className:"flex justify-center items-center py-12",children:[(0,m.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),(0,m.jsx)("span",{className:"ml-4 text-gray-600",children:"Loading employee data..."})]}):(0,m.jsx)("div",{className:"overflow-x-auto rounded-xl shadow-sm border border-gray-200",children:(0,m.jsxs)("table",{className:"min-w-full bg-white",children:[(0,m.jsx)("thead",{children:(0,m.jsxs)("tr",{className:"bg-gradient-to-r from-gray-50 to-blue-50",children:[(0,m.jsx)("th",{className:"border-b border-gray-200 px-6 py-4 text-left font-semibold text-gray-700",children:"Employee ID"}),(0,m.jsx)("th",{className:"border-b border-gray-200 px-6 py-4 text-left font-semibold text-gray-700",children:"Employee Name"}),(0,m.jsx)("th",{className:"border-b border-gray-200 px-6 py-4 text-left font-semibold text-gray-700",children:"Designation"}),(0,m.jsx)("th",{className:"border-b border-gray-200 px-6 py-4 text-left font-semibold text-gray-700",children:"Department"}),(0,m.jsx)("th",{className:"border-b border-gray-200 px-6 py-4 text-right font-semibold text-gray-700",children:"Gross Earnings"}),(0,m.jsx)("th",{className:"border-b border-gray-200 px-6 py-4 text-right font-semibold text-gray-700",children:"Bonus"}),(0,m.jsx)("th",{className:"border-b border-gray-200 px-6 py-4 text-right font-semibold text-gray-700",children:"Deductions"}),(0,m.jsx)("th",{className:"border-b border-gray-200 px-6 py-4 text-right font-semibold text-gray-700",children:"Net Salary"}),(0,m.jsx)("th",{className:"border-b border-gray-200 px-6 py-4 text-center font-semibold text-gray-700",children:"Actions"})]})}),(0,m.jsx)("tbody",{children:Z.length>0?Z.map(a=>(0,m.jsxs)("tr",{className:"hover:bg-blue-50 transition-colors",children:[(0,m.jsx)("td",{className:"border-b border-gray-100 px-6 py-4 font-medium text-gray-900",children:a.employeeId}),(0,m.jsx)("td",{className:"border-b border-gray-100 px-6 py-4 font-semibold text-gray-800",children:a.employeeName}),(0,m.jsx)("td",{className:"border-b border-gray-100 px-6 py-4 text-gray-700",children:a.designation}),(0,m.jsx)("td",{className:"border-b border-gray-100 px-6 py-4 text-gray-700",children:a.department}),(0,m.jsxs)("td",{className:"border-b border-gray-100 px-6 py-4 text-right font-medium text-gray-900",children:["\u20b9",a.grossEarnings.toLocaleString()]}),(0,m.jsx)("td",{className:"border-b border-gray-100 px-6 py-4 text-right font-medium text-yellow-600",children:a.bonusAmount>0?"\u20b9".concat(a.bonusAmount.toLocaleString()):"-"}),(0,m.jsxs)("td",{className:"border-b border-gray-100 px-6 py-4 text-right text-red-600 font-medium",children:["\u20b9",a.totalDeductions.toLocaleString()]}),(0,m.jsxs)("td",{className:"border-b border-gray-100 px-6 py-4 text-right font-bold text-green-700",children:["\u20b9",a.netSalary.toLocaleString()]}),(0,m.jsx)("td",{className:"border-b border-gray-100 px-6 py-4",children:(0,m.jsxs)("div",{className:"flex gap-2 justify-center",children:[(0,m.jsx)("button",{onClick:()=>(async a=>{try{const o=f(e),l=parseInt(r);let s,d;try{s=await g(a.employeeId,o,l),console.log("Payroll data found:",s)}catch(n){console.warn("No payroll data found, using employee data only:",n.message),s=null}s&&s.payrollId?(d=(0,t.A)((0,t.A)({},a),N((0,t.A)((0,t.A)({},s),{},{employee:a}))),console.log("Merged data with payroll:",d)):(d=N(a),console.log("Using employee data with calculations:",d)),p(d)}catch(o){console.error("Error fetching employee details:",o);const e=N(a);p(e)}})(a),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium text-sm",children:"View"}),(0,m.jsx)("button",{onClick:()=>q(a),className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors font-medium text-sm",children:"Edit"}),(0,m.jsx)("button",{onClick:()=>(async a=>{try{var n,o,l,d,c,m,p,b,u,x,y,h,v,j,w,A;console.log("Starting payslip download for:",a.employeeId);const k=f(e);let C,E=a;try{C=await g(a.employeeId,k,parseInt(r)),console.log("Payroll API response:",C)}catch(S){console.warn("No payroll data found, using employee data only:",S.message),C=null}const I=(0,t.A)((0,t.A)({},C||{}),{},{employee:E}),D=N(I),L=D.grossEarnings||0,P=D.totalDeductions||0,F=D.bonus||0,T=D.netSalary||L-P+F,O=(null===(n=D.earnings)||void 0===n||null===(o=n.find(e=>"BASIC"===e.name))||void 0===o?void 0:o.total)||0,R=(null===(l=D.earnings)||void 0===l||null===(d=l.find(e=>"HRA"===e.name))||void 0===d?void 0:d.total)||0,M=(null===(c=D.earnings)||void 0===c||null===(m=c.find(e=>"CONVEYANCE"===e.name))||void 0===m?void 0:m.total)||0,B=(null===(p=D.earnings)||void 0===p||null===(b=p.find(e=>"MEDICAL"===e.name))||void 0===b?void 0:b.total)||0,U=(null===(u=D.earnings)||void 0===u||null===(x=u.find(e=>"SPECIAL ALLOWANCE"===e.name))||void 0===x?void 0:x.total)||0,z=(null===(y=D.deductions)||void 0===y||null===(h=y.find(e=>"PROVIDENT FUND"===e.name))||void 0===h?void 0:h.amount)||0,G=(null===(v=D.deductions)||void 0===v||null===(j=v.find(e=>"PROFESSIONAL TAX"===e.name))||void 0===j?void 0:j.amount)||0,H=(null===(w=D.deductions)||void 0===w||null===(A=w.find(e=>"INCOME TAX"===e.name))||void 0===A?void 0:A.amount)||0,V=document.createElement("div");V.style.position="absolute",V.style.left="-9999px",V.style.width="800px",V.style.padding="10px",V.style.backgroundColor="white",V.style.fontFamily="Arial, sans-serif",V.innerHTML='\n      <div style="font-family: \'Arial\', sans-serif; max-width: 800px; margin: 0 auto;">\n        \x3c!-- Company Header - Same as reference --\x3e\n        <div style="background: linear-gradient(135deg, #1e40af, #3730a3); color: white; padding: 20px; border-radius: 10px; margin-bottom: 20px; text-align: center;">\n          <div style="font-size: 28px; font-weight: bold; margin-bottom: 8px;">ANASOL CONSULTANCY SERVICES PVT LTD</div>\n          <div style="font-size: 22px; opacity: 0.9; margin-bottom: 12px;">SALARY SLIP</div>\n          <div style="background: rgba(255,255,255,0.2); padding: 8px 20px; border-radius: 20px; display: inline-block; font-weight: bold;">\n            '.concat(e," ").concat(r,'\n          </div>\n        </div>\n\n        \x3c!-- Employee Information - Same as reference --\x3e\n        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">\n          <div style="background: #f8fafc; padding: 20px; border-radius: 8px; border-left: 4px solid #3b82f6;">\n            <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #e2e8f0;">\n              <span style="font-weight: 600; color: #4b5563;">Employee Name:</span>\n              <span style="font-weight: 500; color: #1f2937;">').concat(D.employeeName,'</span>\n            </div>\n            <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #e2e8f0;">\n              <span style="font-weight: 600; color: #4b5563;">Employee ID:</span>\n              <span style="font-weight: 500; color: #1f2937;">').concat(D.employeeId,'</span>\n            </div>\n            <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #e2e8f0;">\n              <span style="font-weight: 600; color: #4b5563;">Designation:</span>\n              <span style="font-weight: 500; color: #1f2937;">').concat(D.designation||"N/A",'</span>\n            </div>\n            <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #e2e8f0;">\n              <span style="font-weight: 600; color: #4b5563;">Department:</span>\n              <span style="font-weight: 500; color: #1f2937;">').concat(D.department||"N/A",'</span>\n            </div>\n            <div style="display: flex; justify-content: space-between; padding: 8px 0;">\n              <span style="font-weight: 600; color: #4b5563;">Phone No:</span>\n              <span style="font-weight: 500; color: #1f2937;">').concat(D.phoneNo||D.phoneNumber||"N/A",'</span>\n            </div>\n          </div>\n\n          <div style="background: #f8fafc; padding: 20px; border-radius: 8px; border-left: 4px solid #3b82f6;">\n            <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #e2e8f0;">\n              <span style="font-weight: 600; color: #4b5563;">Bank A/C Name:</span>\n              <span style="font-weight: 500; color: #1f2937;">').concat(D.bankAccountName||D.employeeName,'</span>\n            </div>\n            <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #e2e8f0;">\n              <span style="font-weight: 600; color: #4b5563;">PAN No:</span>\n              <span style="font-weight: 500; color: #1f2937;">').concat(D.panNo||D.panNumber||"N/A",'</span>\n            </div>\n            <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #e2e8f0;">\n              <span style="font-weight: 600; color: #4b5563;">PF No:</span>\n              <span style="font-weight: 500; color: #1f2937;">').concat(D.pfNo||D.pfnum||"N/A",'</span>\n            </div>\n            <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #e2e8f0;">\n              <span style="font-weight: 600; color: #4b5563;">IFSC Code:</span>\n              <span style="font-weight: 500; color: #1f2937;">').concat(D.ifsccode||"N/A",'</span>\n            </div>\n            <div style="display: flex; justify-content: space-between; padding: 8px 0;">\n              <span style="font-weight: 600; color: #4b5563;">Email:</span>\n              <span style="font-weight: 500; color: #1f2937;">').concat(D.email||"N/A",'</span>\n            </div>\n          </div>\n        </div>\n\n        \x3c!-- Salary Details - Same as reference --\x3e\n        <div style="margin: 20px 0;">\n          <div style="font-size: 18px; font-weight: bold; color: #1e40af; margin-bottom: 12px; border-left: 4px solid #1e40af; padding-left: 10px;">SALARY DETAILS</div>\n          \n          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">\n            \x3c!-- Earnings --\x3e\n            <div>\n              <div style="font-size: 16px; font-weight: bold; color: #1e40af; margin-bottom: 8px; border-left: 4px solid #1e40af; padding-left: 10px;">EARNINGS</div>\n              <table style="width: 100%; border-collapse: collapse; margin-bottom: 15px;">\n                <thead>\n                  <tr style="background: linear-gradient(135deg, #1e40af, #3730a3); color: white;">\n                    <th style="padding: 12px; text-align: left; font-weight: 600;">Description</th>\n                    <th style="padding: 12px; text-align: right; font-weight: 600;">Amount (\u20b9)</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  <tr style="border-bottom: 1px solid #e5e7eb;">\n                    <td style="padding: 12px;">Basic Salary</td>\n                    <td style="padding: 12px; text-align: right;">\u20b9').concat(W(O),'</td>\n                  </tr>\n                  <tr style="border-bottom: 1px solid #e5e7eb;">\n                    <td style="padding: 12px;">HRA</td>\n                    <td style="padding: 12px; text-align: right;">\u20b9').concat(W(R),'</td>\n                  </tr>\n                  <tr style="border-bottom: 1px solid #e5e7eb;">\n                    <td style="padding: 12px;">Conveyance Allowance</td>\n                    <td style="padding: 12px; text-align: right;">\u20b9').concat(W(M),'</td>\n                  </tr>\n                  <tr style="border-bottom: 1px solid #e5e7eb;">\n                    <td style="padding: 12px;">Medical Allowance</td>\n                    <td style="padding: 12px; text-align: right;">\u20b9').concat(W(B),'</td>\n                  </tr>\n                  <tr style="border-bottom: 1px solid #e5e7eb;">\n                    <td style="padding: 12px;">Special Allowance</td>\n                    <td style="padding: 12px; text-align: right;">\u20b9').concat(W(U),"</td>\n                  </tr>\n                  ").concat(F>0?'\n                  <tr style="border-bottom: 1px solid #e5e7eb;">\n                    <td style="padding: 12px;">Bonus</td>\n                    <td style="padding: 12px; text-align: right;">\u20b9'.concat(W(F),"</td>\n                  </tr>\n                  "):"",'\n                  <tr style="background: #dbeafe; font-weight: bold;">\n                    <td style="padding: 12px;"><strong>GROSS EARNINGS</strong></td>\n                    <td style="padding: 12px; text-align: right;"><strong>\u20b9').concat(W(L),'</strong></td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n\n            \x3c!-- Deductions --\x3e\n            <div>\n              <div style="font-size: 16px; font-weight: bold; color: #1e40af; margin-bottom: 8px; border-left: 4px solid #1e40af; padding-left: 10px;">DEDUCTIONS</div>\n              <table style="width: 100%; border-collapse: collapse; margin-bottom: 15px;">\n                <thead>\n                  <tr style="background: linear-gradient(135deg, #1e40af, #3730a3); color: white;">\n                    <th style="padding: 12px; text-align: left; font-weight: 600;">Description</th>\n                    <th style="padding: 12px; text-align: right; font-weight: 600;">Amount (\u20b9)</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  <tr style="border-bottom: 1px solid #e5e7eb;">\n                    <td style="padding: 12px;">Provident Fund</td>\n                    <td style="padding: 12px; text-align: right;">\u20b9').concat(W(z),'</td>\n                  </tr>\n                  <tr style="border-bottom: 1px solid #e5e7eb;">\n                    <td style="padding: 12px;">Professional Tax</td>\n                    <td style="padding: 12px; text-align: right;">\u20b9').concat(W(G),'</td>\n                  </tr>\n                  <tr style="border-bottom: 1px solid #e5e7eb;">\n                    <td style="padding: 12px;">Income Tax</td>\n                    <td style="padding: 12px; text-align: right;">\u20b9').concat(W(H),'</td>\n                  </tr>\n                  <tr style="background: #dbeafe; font-weight: bold;">\n                    <td style="padding: 12px;"><strong>TOTAL DEDUCTIONS</strong></td>\n                    <td style="padding: 12px; text-align: right;"><strong>\u20b9').concat(W(P),'</strong></td>\n                  </tr>\n                  <tr style="background: #dcfce7; font-weight: bold; color: #166534; font-size: 18px;">\n                    <td style="padding: 12px;"><strong>NET SALARY</strong></td>\n                    <td style="padding: 12px; text-align: right;"><strong>\u20b9').concat(W(T),'</strong></td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n\n        \x3c!-- Footer - Same as reference --\x3e\n        <div style="text-align: center; margin-top: 25px; padding-top: 15px; border-top: 2px solid #e5e7eb; color: #6b7280; font-size: 14px;">\n          <p>#1016, 11th Floor, DSL Abacus IT Park, Uppal Hyderabad-500039</p>\n          <p>Ph: 9632091726 | Email: hr@anasolconsultancy.com | www.anasol.com</p>\n          <p style="margin-top: 8px; color: #9ca3af; font-style: italic;">\n            This is a computer-generated document and does not require a signature\n          </p>\n        </div>\n      </div>\n    '),document.body.appendChild(V);const Y=await i()(V,{scale:2,useCORS:!0,logging:!1});document.body.removeChild(V);const J=Y.toDataURL("image/png"),_=new s.Ay("p","mm","a4"),X=210,q=Y.height*X/Y.width;_.addImage(J,"PNG",0,0,X,q);const Z="Payslip_".concat(D.employeeName,"_").concat(e,"_").concat(r,".pdf");_.save(Z),console.log("PDF payslip downloaded successfully:",Z)}catch(S){console.error("Error downloading payslip:",S),console.error("Error details:",S.message),alert("Failed to download payslip: "+S.message)}})(a),className:"px-4 py-2 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-colors font-medium text-sm",children:"Download"})]})})]},a.id)):(0,m.jsx)("tr",{children:(0,m.jsx)("td",{colSpan:"9",className:"px-6 py-8 text-center text-gray-500",children:F?"Loading employees...":"No employees found. Add some employees to get started."})})})]})})]})]})]})}}}]);
//# sourceMappingURL=361.d86ca913.chunk.js.map