"use strict";(self.webpackChunktechlife=self.webpackChunktechlife||[]).push([[488],{5488:(e,s,t)=>{t.r(s),t.d(s,{default:()=>w});var r=t(5043),a=t(3721),l=t(2397),n=t(184),o=t(614),d=t(9910),i=t(5394),m=t(9570),c=t(6446),x=t(579);const u=(e,s)=>{if(e===s)return!0;if(null===e||null===s)return!1;if("object"!==typeof e||"object"!==typeof s)return e===s;if(Array.isArray(e)!==Array.isArray(s))return!1;if(Array.isArray(e)){if(e.length!==s.length)return!1;for(let t=0;t<e.length;t++)if(!u(e[t],s[t]))return!1;return!0}const t=Object.keys(e),r=Object.keys(s);if(t.length!==r.length)return!1;for(const a of t){if(!r.includes(a))return!1;if(!u(e[a],s[a]))return!1}return!0},g=e=>{let{isOpen:s,onClose:t,type:a,title:l,message:d,theme:m}=e;const[c,u]=(0,r.useState)(!1);(0,r.useEffect)(()=>{if(s&&(u(!0),"success"===a||"error"===a)){const e=setTimeout(()=>{g()},3e3);return()=>clearTimeout(e)}},[s,a]);const g=()=>{u(!1),setTimeout(()=>t(),300)};if(!s)return null;return(0,x.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex justify-center items-center z-[300] transition-opacity duration-300 "+(c?"opacity-100":"opacity-0"),children:(0,x.jsxs)("div",{className:`p-6 rounded-3xl shadow-2xl w-full max-w-md m-4 border transform transition-all duration-300 ${c?"scale-100 translate-y-0":"scale-95 translate-y-4"} ${"dark"===m?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[(0,x.jsxs)("div",{className:"flex items-center mb-4",children:[(()=>{switch(a){case"success":return(0,x.jsx)(n.A7C,{className:"w-6 h-6 text-green-500"});case"error":return(0,x.jsx)(n.BS8,{className:"w-6 h-6 text-red-500"});case"info":return(0,x.jsx)(n.__w,{className:"w-6 h-6 text-blue-500"});case"warning":return(0,x.jsx)(i.tr_,{className:"w-6 h-6 text-yellow-500"});default:return null}})(),(0,x.jsx)("h3",{className:`text-xl font-bold ml-3 ${(()=>{switch(a){case"success":return"text-green-600 dark:text-green-400";case"error":return"text-red-600 dark:text-red-400";case"info":return"text-blue-600 dark:text-blue-400";case"warning":return"text-yellow-600 dark:text-yellow-400";default:return"dark"===m?"text-white":"text-gray-800"}})()}`,children:l}),"success"!==a&&"error"!==a&&(0,x.jsx)("button",{onClick:g,className:"ml-auto p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:(0,x.jsx)(o.A,{size:20})})]}),(0,x.jsx)("p",{className:""+("dark"===m?"text-gray-300":"text-gray-600"),children:d}),("success"===a||"error"===a)&&(0,x.jsx)("div",{className:"mt-4 flex justify-end",children:(0,x.jsx)("button",{onClick:g,className:"px-4 py-2 rounded-lg font-medium transition-colors "+("success"===a?"bg-green-500 hover:bg-green-600 text-white":"bg-red-500 hover:bg-red-600 text-white"),children:"OK"})}),"warning"===a&&(0,x.jsxs)("div",{className:"mt-4 flex justify-end space-x-3",children:[(0,x.jsx)("button",{onClick:g,className:"px-4 py-2 rounded-lg font-medium border border-gray-300 text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,x.jsx)("button",{onClick:()=>{g()},className:"px-4 py-2 rounded-lg font-medium bg-blue-500 hover:bg-blue-600 text-white transition-colors",children:"Continue Anyway"})]})]})})},h=e=>{let{isOpen:s,onClose:t,onContinue:a,theme:l}=e;const[n,o]=(0,r.useState)(!1);(0,r.useEffect)(()=>{s&&o(!0)},[s]);return s?(0,x.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex justify-center items-center z-[250] transition-opacity duration-300 "+(n?"opacity-100":"opacity-0"),children:(0,x.jsxs)("div",{className:`p-6 rounded-3xl shadow-2xl w-full max-w-md m-4 border transform transition-all duration-300 ${n?"scale-100 translate-y-0":"scale-95 translate-y-4"} ${"dark"===l?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[(0,x.jsxs)("div",{className:"flex items-center mb-4",children:[(0,x.jsx)(i.tr_,{className:"w-6 h-6 text-yellow-500"}),(0,x.jsx)("h3",{className:"text-xl font-bold ml-3 "+("dark"===l?"text-yellow-400":"text-yellow-600"),children:"No Changes Detected"})]}),(0,x.jsx)("p",{className:"mb-6 "+("dark"===l?"text-gray-300":"text-gray-600"),children:"No changes have been made to the form. Please make some changes before submitting, or cancel to close the form."}),(0,x.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,x.jsx)("button",{onClick:()=>{o(!1),setTimeout(()=>t(),300)},className:"px-4 py-2 rounded-lg font-medium border transition-colors "+("dark"===l?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"),children:"Make Changes"}),(0,x.jsx)("button",{onClick:()=>{o(!1),setTimeout(()=>{t(),a()},300)},className:"px-4 py-2 rounded-lg font-medium bg-blue-500 hover:bg-blue-600 text-white transition-colors",children:"Submit Anyway"})]})]})}):null},p=e=>{let{value:s,onChange:t,theme:a,error:o,disabled:d,isMulti:i=!1,placeholder:u}=e;const[g,h]=(0,r.useState)(!1),[p,y]=(0,r.useState)(""),[b,f]=(0,r.useState)([]),[j,w]=(0,r.useState)(!1),[N,v]=(0,r.useState)(!0),[k,C]=(0,r.useState)(0),E=(0,r.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!j&&(N||s)){w(!0);try{const t=(await l.yE.get(`employee/${e}/15/employeeId/asc/employees`)).data.content||[];f(e=>s?t:[...e,...t]),C(e),v(15===t.length)}catch(o){console.error("Error fetching employees:",o)}finally{w(!1)}}},[j,N]);(0,r.useEffect)(()=>{g&&E(0,!0)},[g]);const S=Array.isArray(s)?s.map(e=>e.value):s?[s.value]:[],T=b.filter(e=>{var s,t;return((null===(s=e.displayName)||void 0===s?void 0:s.toLowerCase().includes(p.toLowerCase()))||(null===(t=e.employeeId)||void 0===t?void 0:t.toLowerCase().includes(p.toLowerCase())))&&!S.includes(e.employeeId)});return(0,x.jsxs)("div",{className:"relative",children:[(0,x.jsxs)("div",{onClick:()=>{d||h(!g)},className:`w-full p-3 border-2 rounded-xl transition-all duration-300 cursor-pointer flex items-center justify-between ${o?"border-red-300":"dark"===a?"border-gray-600":"border-gray-200"} ${d?"opacity-50":""}`,children:[(0,x.jsx)("div",{className:"flex-1",children:(()=>{if(i){const e=Array.isArray(s)?s:[];return 0===e.length?(0,x.jsx)("span",{className:"dark"===a?"text-gray-400":"text-gray-500",children:u}):(0,x.jsx)("div",{className:"flex flex-wrap gap-1",children:e.map(e=>(0,x.jsxs)("div",{className:"flex items-center text-xs font-semibold px-2 py-1 rounded-full "+("dark"===a?"bg-blue-900 text-blue-300":"bg-blue-100 text-blue-800"),children:[(0,x.jsx)("span",{children:e.label}),(0,x.jsx)("button",{onClick:r=>{var a;r.stopPropagation(),a=e,i&&t(s.filter(e=>e.value!==a.value))},className:"ml-2 text-red-500 hover:text-red-700",children:(0,x.jsx)(n.QCr,{})})]},e.value))})}return s?(0,x.jsx)("span",{children:s.label}):(0,x.jsx)("span",{className:"dark"===a?"text-gray-400":"text-gray-500",children:u})})()}),(0,x.jsx)(n.Vr3,{className:`w-4 h-4 transition-transform ${g?"rotate-180":""} ${"dark"===a?"text-gray-400":"text-gray-500"}`})]}),(0,x.jsx)(m.N,{children:g&&!d&&(0,x.jsxs)(c.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute top-full left-0 right-0 mt-2 border rounded-xl shadow-lg z-50 "+("dark"===a?"bg-gray-700 border-gray-600":"bg-white border-gray-200"),children:[(0,x.jsx)("div",{className:"p-2 border-b border-gray-200 dark:border-gray-600",children:(0,x.jsxs)("div",{className:"relative",children:[(0,x.jsx)(n.KSO,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,x.jsx)("input",{type:"text",placeholder:"Search employees...",value:p,onChange:e=>y(e.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg text-sm "+("dark"===a?"bg-gray-800 border-gray-600":"bg-white border-gray-300")})]})}),(0,x.jsxs)("div",{className:"max-h-60 overflow-y-auto",onScroll:e=>{const{scrollTop:s,scrollHeight:t,clientHeight:r}=e.target;t-s<=r+50&&N&&!j&&E(k+1)},children:[T.map(e=>(0,x.jsxs)("div",{onClick:()=>(e=>{const r={value:e.employeeId,label:`${e.displayName} (${e.employeeId})`};if(i){const e=Array.isArray(s)?s:[],a=e.some(e=>e.value===r.value);t(a?e.filter(e=>e.value!==r.value):[...e,r])}else t(r),h(!1)})(e),className:"p-3 cursor-pointer hover:"+("dark"===a?"bg-gray-600":"bg-gray-50"),children:[(0,x.jsx)("div",{className:"font-medium",children:e.displayName}),(0,x.jsx)("div",{className:"text-sm "+("dark"===a?"text-gray-400":"text-gray-500"),children:e.employeeId})]},e.employeeId)),j&&(0,x.jsx)("div",{className:"p-4 text-center text-sm",children:"Loading..."})]})]})})]})},y=e=>{let{team:s,isOpen:t,onClose:a,onTeamUpdated:o,employees:m}=e;const{theme:c}=(0,r.useContext)(d.ob),[y,b]=(0,r.useState)(""),[f,j]=(0,r.useState)([]),[w,N]=(0,r.useState)(!1),[v,k]=(0,r.useState)({}),[C,E]=(0,r.useState)({teamName:"",teamMembers:[]}),[S,T]=(0,r.useState)(!1),[A,I]=(0,r.useState)(!1),[O,$]=(0,r.useState)({isOpen:!1,type:"",title:"",message:""});if((0,r.useEffect)(()=>{if(s){var e;const t=s.teamName||"",r=(null===(e=s.employees)||void 0===e?void 0:e.map(e=>({value:e.employeeId,label:`${e.displayName} (${e.employeeId})`})))||[];b(t),j(r);const a={teamName:t,teamMembers:r};E(a),T(!1),console.log("Original form data set:",a)}},[s]),(0,r.useEffect)(()=>{const e={teamName:y,teamMembers:f},s=!u(e,C);T(s),console.log("Form change detection:",{current:e,original:C,hasChanges:s,isDirty:s})},[y,f,C]),!t)return null;const M=async()=>{if(!(()=>{const e={};return y.trim()||(e.teamName="Team Name is required."),0===f.length&&(e.teamMembers="At least one Team Member is required."),k(e),0===Object.keys(e).length})())return;N(!0),k({});const e=s&&s.projects&&s.projects.length>0?s.projects[0]:"PRO1001";if(!e)return k({general:"Error: Project ID is missing. Cannot update the team."}),void N(!1);const t={teamId:s.teamId,teamName:y,teamDescription:s.teamDescription||"",employeeIds:f.map(e=>e.value),projectId:e};console.log("Update Team Payload:",t);try{await l.yE.put(`employee/team/employee/${s.teamId}`,t),o(),a(),$({isOpen:!0,type:"success",title:"Team Updated Successfully!",message:"The team details have been updated successfully."})}catch(d){var r,n;console.error("Error updating team:",d),k({general:(null===(r=d.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.message)||"Failed to update team. Please check the data and try again."})}finally{N(!1)}},D=async e=>{if(e.preventDefault(),!S)return console.log("No changes detected, showing modal"),void I(!0);await M()};return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-[200] p-2 sm:p-4",children:(0,x.jsxs)("div",{className:"rounded-2xl sm:rounded-3xl w-full max-w-sm sm:max-w-md md:max-w-lg lg:max-w-2xl max-h-[95vh] overflow-hidden shadow-2xl flex flex-col "+("dark"===c?"bg-gray-800":"bg-white"),children:[(0,x.jsx)("div",{className:"px-4 sm:px-6 md:px-8 py-4 sm:py-6 bg-gradient-to-r from-blue-500 to-indigo-700 text-white relative",children:(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-3 sm:space-x-4 min-w-0 flex-1",children:[(0,x.jsx)("div",{className:"p-2 sm:p-3 bg-white/20 rounded-lg sm:rounded-xl flex-shrink-0",children:(0,x.jsx)(n.YXz,{className:"w-6 h-6 sm:w-7 sm:h-7 md:w-8 md:h-8"})}),(0,x.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,x.jsx)("h2",{className:"text-lg sm:text-xl md:text-2xl font-bold break-words",children:"Edit Team"}),(0,x.jsxs)("p",{className:"text-white/90 text-xs sm:text-sm break-words",children:["Update the details for ",s.teamName,"."]}),(0,x.jsxs)("div",{className:"mt-1 flex items-center space-x-2",children:[(0,x.jsx)("div",{className:"w-2 h-2 rounded-full "+(S?"bg-yellow-400":"bg-green-400")}),(0,x.jsx)("span",{className:"text-white/80 text-xs",children:S?"Modified":"No changes"})]})]})]}),(0,x.jsx)("button",{onClick:a,className:"p-2 sm:p-3 hover:bg-white/20 rounded-full transition-all group flex-shrink-0",children:(0,x.jsx)(n.QCr,{className:"w-5 h-5 sm:w-6 sm:h-6 group-hover:rotate-90 transition-transform"})})]})}),(0,x.jsx)("div",{className:"overflow-y-auto flex-grow",children:(0,x.jsxs)("form",{className:"p-4 sm:p-6 md:p-8",onSubmit:D,children:[(0,x.jsxs)("div",{className:"space-y-4 sm:space-y-6",children:[(0,x.jsxs)("div",{children:[(0,x.jsxs)("label",{className:"block text-xs sm:text-sm font-semibold mb-2 sm:mb-3 "+("dark"===c?"text-gray-200":"text-gray-800"),children:["Team Name ",(0,x.jsx)("span",{className:"text-red-500",children:"*"}),!u(y,C.teamName)&&(0,x.jsx)("span",{className:"ml-2 text-xs text-yellow-600 dark:text-yellow-400",children:"(Modified)"})]}),(0,x.jsx)("input",{type:"text",value:y,onChange:e=>b(e.target.value),className:"w-full px-3 sm:px-4 md:px-5 py-3 sm:py-4 border-2 rounded-lg sm:rounded-xl transition-all duration-300 text-sm\n                                            focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 focus:outline-none\n                                            "+(v.teamName?"border-red-300 bg-red-50 focus:border-red-500 focus:ring-red-500/20":u(y,C.teamName)?"dark"===c?"border-gray-600 bg-gray-700 text-white hover:border-gray-500":"border-gray-200 bg-white hover:border-gray-300":"border-yellow-400 bg-yellow-50 dark:bg-yellow-900/20"),placeholder:"e.g., Development Team"}),v.teamName&&(0,x.jsxs)("div",{className:"mt-2 flex items-center space-x-2 text-red-600",children:[(0,x.jsx)(i.tr_,{className:"w-4 h-4 flex-shrink-0"}),(0,x.jsx)("p",{className:"text-xs sm:text-sm font-medium",children:v.teamName})]})]}),(0,x.jsxs)("div",{children:[(0,x.jsxs)("label",{className:"block text-xs sm:text-sm font-semibold mb-2 sm:mb-3 "+("dark"===c?"text-gray-200":"text-gray-800"),children:["Team Members ",(0,x.jsx)("span",{className:"text-red-500",children:"*"}),!u(f,C.teamMembers)&&(0,x.jsx)("span",{className:"ml-2 text-xs text-yellow-600 dark:text-yellow-400",children:"(Modified)"})]}),(0,x.jsx)(p,{value:f,onChange:j,theme:c,error:v.teamMembers,isMulti:!0,placeholder:"Select team members..."}),v.teamMembers&&(0,x.jsxs)("div",{className:"mt-2 flex items-center space-x-2 text-red-600",children:[(0,x.jsx)(i.tr_,{className:"w-4 h-4 flex-shrink-0"}),(0,x.jsx)("p",{className:"text-xs sm:text-sm font-medium",children:v.teamMembers})]})]})]}),v.general&&(0,x.jsx)("div",{className:"mt-4 sm:mt-6 p-3 sm:p-4 border-l-4 border-red-400 rounded-r-lg "+("dark"===c?"bg-red-900/20":"bg-red-50"),children:(0,x.jsxs)("div",{className:"flex items-center",children:[(0,x.jsx)(i.tr_,{className:"w-4 h-4 sm:w-5 sm:h-5 text-red-400 mr-3 flex-shrink-0"}),(0,x.jsx)("p",{className:"font-medium text-sm "+("dark"===c?"text-red-300":"text-red-800"),children:v.general})]})})]})}),(0,x.jsxs)("div",{className:"px-4 sm:px-6 md:px-8 py-4 sm:py-6 border-t flex flex-col sm:flex-row justify-end space-y-3 sm:space-y-0 sm:space-x-4 "+("dark"===c?"bg-gray-700 border-gray-600":"bg-gray-50 border-gray-200"),children:[(0,x.jsx)("button",{type:"button",onClick:a,className:"w-full sm:w-auto px-6 sm:px-8 py-2 sm:py-3 border-2 rounded-lg sm:rounded-xl font-semibold transition-all text-sm "+("dark"===c?"border-gray-600 text-gray-300 hover:bg-gray-600":"border-gray-300 text-gray-700 hover:bg-gray-100"),children:"Cancel"}),(0,x.jsx)("button",{type:"button",onClick:D,disabled:w,className:"w-full sm:w-auto px-8 sm:px-10 py-2 sm:py-3 bg-gradient-to-r from-blue-600 to-indigo-700 text-white font-bold rounded-lg sm:rounded-xl\n                                         hover:shadow-lg transform hover:scale-105 transition-all flex items-center justify-center space-x-2 text-sm\n                                         "+(w?"cursor-not-allowed opacity-75":""),children:w?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"h-4 w-4 sm:h-5 sm:h-5 border-4 border-white border-t-transparent rounded-full animate-spin"}),(0,x.jsx)("span",{children:"Updating..."})]}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(i.G3G,{className:"w-4 h-4 sm:w-5 sm:h-5"}),(0,x.jsx)("span",{children:"Update Team"}),S&&(0,x.jsx)("span",{className:"ml-1 text-xs bg-white/20 px-2 py-1 rounded-full",children:"*"})]})})]})]})}),(0,x.jsx)(h,{isOpen:A,onClose:()=>I(!1),onContinue:async()=>{console.log("User chose to continue anyway"),await M()},theme:c}),(0,x.jsx)(g,{isOpen:O.isOpen,onClose:()=>{$({isOpen:!1,type:"",title:"",message:""})},type:O.type,title:O.title,message:O.message,theme:c})]})},b=e=>{let{isOpen:s,onClose:t,type:a,title:l,message:d,theme:i}=e;const[m,c]=(0,r.useState)(!1);(0,r.useEffect)(()=>{if(s&&(c(!0),"success"===a||"error"===a)){const e=setTimeout(()=>{u()},3e3);return()=>clearTimeout(e)}},[s,a]);const u=()=>{c(!1),setTimeout(()=>t(),300)};if(!s)return null;return(0,x.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex justify-center items-center z-[200] transition-opacity duration-300 "+(m?"opacity-100":"opacity-0"),children:(0,x.jsxs)("div",{className:`p-6 rounded-3xl shadow-2xl w-full max-w-md m-4 border transform transition-all duration-300 ${m?"scale-100 translate-y-0":"scale-95 translate-y-4"} ${"dark"===i?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[(0,x.jsxs)("div",{className:"flex items-center mb-4",children:[(()=>{switch(a){case"success":return(0,x.jsx)(n.A7C,{className:"w-6 h-6 text-green-500"});case"error":return(0,x.jsx)(n.BS8,{className:"w-6 h-6 text-red-500"});case"info":return(0,x.jsx)(n.__w,{className:"w-6 h-6 text-blue-500"});default:return null}})(),(0,x.jsx)("h3",{className:`text-xl font-bold ml-3 ${(()=>{switch(a){case"success":return"text-green-600 dark:text-green-400";case"error":return"text-red-600 dark:text-red-400";case"info":return"text-blue-600 dark:text-blue-400";default:return"dark"===i?"text-white":"text-gray-800"}})()}`,children:l}),"success"!==a&&"error"!==a&&(0,x.jsx)("button",{onClick:u,className:"ml-auto p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:(0,x.jsx)(o.A,{size:20})})]}),(0,x.jsx)("p",{className:""+("dark"===i?"text-gray-300":"text-gray-600"),children:d}),("success"===a||"error"===a)&&(0,x.jsx)("div",{className:"mt-4 flex justify-end",children:(0,x.jsx)("button",{onClick:u,className:"px-4 py-2 rounded-lg font-medium transition-colors "+("success"===a?"bg-green-500 hover:bg-green-600 text-white":"bg-red-500 hover:bg-red-600 text-white"),children:"OK"})})]})})},f=()=>(0,x.jsx)("div",{className:"flex justify-center items-center h-40 sm:h-64",children:(0,x.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 sm:h-32 sm:w-32 border-t-2 border-b-2 border-blue-500"})}),j=e=>{let{message:s}=e;return(0,x.jsxs)("div",{className:"text-center p-4 sm:p-8 bg-red-100 text-red-700 rounded-lg",children:[(0,x.jsx)("h3",{className:"font-bold text-base sm:text-lg",children:"Oops! Something went wrong."}),(0,x.jsx)("p",{className:"text-sm sm:text-base",children:s})]})},w=()=>{var e,s;const{teamId:t}=(0,a.g)(),o=(0,a.Zp)(),[i,m]=(0,r.useState)(null),[c,u]=(0,r.useState)([]),[g,h]=(0,r.useState)(!0),[p,w]=(0,r.useState)(null),[N,v]=(0,r.useState)(!1),[k,C]=(0,r.useState)([]),[E,S]=(0,r.useState)([]),[T,A]=(0,r.useState)([]),[I,O]=(0,r.useState)({isOpen:!1,type:"",title:"",message:""}),{theme:$,userData:M}=(0,r.useContext)(d.ob),D=(null===M||void 0===M?void 0:M.roles)||[],P=D.includes("ADMIN")||D.includes("HR")||D.includes("MANAGER"),_=null!==M&&void 0!==M&&M.roles[0]?`ROLE_${null===M||void 0===M?void 0:M.roles[0]}`:null,U=null===M||void 0===M?void 0:M.employeeId,z=(e,s,t)=>{O({isOpen:!0,type:e,title:s,message:t})};(0,r.useEffect)(()=>{_&&(async()=>{try{let e=await l.ZQ.get(`role-access/${_}`);console.log("from Edit Team :",e.data),S(e.data)}catch(p){console.error("Error fetching permissions:",p),z("error","Permission Error","Failed to load user permissions. Some features may not be available.")}})()},[_]),(0,r.useEffect)(()=>{E&&A((null===E||void 0===E?void 0:E.permissions)||[])},[E]),console.log(T);const L=async()=>{try{h(!0);const e=await l.yE.get(`employee/team/employee/${t}`),s=Array.isArray(e.data)?e.data[0]:e.data;m(s);const r=await l.yE.get(`employee/team/projects/${t}`);u(r.data||[]),w(null)}catch(r){var e,s;console.error("Error fetching team details:",r);const t=(null===(e=r.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||"Could not fetch team details. The team may not exist or an error occurred.";w(t),z("error","Data Loading Error",t)}finally{h(!1)}};if((0,r.useEffect)(()=>{t&&(L(),P&&(async()=>{try{const e=(await l.yE.get("employee/0/1000/employeeId/asc/employees")).data.content.map(e=>({value:e.employeeId,label:`${e.displayName} (${e.employeeId})`}));C(e)}catch(e){console.error("Error fetching employees:",e),z("error","Employee Data Error","Failed to load employee list. Team editing may not work properly.")}})())},[t,P]),g)return(0,x.jsx)(f,{});if(p)return(0,x.jsx)(j,{message:p});if(!i)return(0,x.jsx)("div",{className:"text-center p-4 sm:p-8 text-sm sm:text-base "+("dark"===$?"text-white":"text-gray-800"),children:"No team data found."});const F={...i,projects:c};return(0,x.jsxs)("div",{className:"px-0 sm:px-4 md:px-6 lg:px-8 py-4 sm:py-6 md:py-8 min-h-screen "+("dark"===$?"bg-gray-900 text-white":"bg-gray-50 text-gray-800"),children:[(0,x.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,x.jsxs)("button",{onClick:()=>o(-1),className:"flex items-center text-blue-500 hover:underline mb-4 sm:mb-6 px-4 sm:px-0 text-sm sm:text-base",children:[(0,x.jsx)(n.QVr,{className:"mr-2 w-3 h-3 sm:w-4 sm:h-4"})," Back to All Teams"]}),(0,x.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 sm:mb-6 md:mb-8 px-4 sm:px-0 gap-4 sm:gap-0",children:[(0,x.jsxs)("div",{className:"w-full sm:w-auto",children:[(0,x.jsx)("h1",{className:"text-xl sm:text-2xl md:text-3xl lg:text-4xl font-bold break-words",children:i.teamName}),(0,x.jsxs)("p",{className:"mt-1 sm:mt-2 text-xs sm:text-sm md:text-lg "+("dark"===$?"text-gray-400":"text-gray-600"),children:["Details for team ID: ",i.teamId]})]}),T.includes("TEAMS_EDIT_TEAM")&&(0,x.jsxs)("button",{onClick:()=>v(!0),className:"w-full sm:w-auto bg-blue-600 text-white px-3 sm:px-4 md:px-5 py-2 rounded-lg font-semibold hover:bg-blue-700 transition-colors flex items-center justify-center shadow-md text-xs sm:text-sm md:text-base",children:[(0,x.jsx)(n.uO9,{className:"mr-2 w-3 h-3 sm:w-4 sm:h-4"})," Edit Team"]})]}),(0,x.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6 lg:gap-8",children:[(0,x.jsx)("div",{className:"lg:col-span-2",children:(0,x.jsxs)("div",{className:"rounded-none sm:rounded-lg shadow-lg overflow-hidden border "+("dark"===$?"bg-gray-800 border-gray-700":"bg-white border-gray-200"),children:[(0,x.jsxs)("div",{className:"p-3 sm:p-4 md:p-5 flex items-center space-x-3 sm:space-x-4",children:[(0,x.jsx)(n.YXz,{className:"w-6 h-6 sm:w-7 sm:h-7 md:w-8 md:h-8 text-blue-500 flex-shrink-0"}),(0,x.jsxs)("h2",{className:"text-lg sm:text-xl md:text-2xl font-bold break-words",children:["Team Members (",(null===(e=i.employees)||void 0===e?void 0:e.length)||0,")"]})]}),(0,x.jsx)("div",{className:"p-3 sm:p-4 md:p-5",children:(0,x.jsx)("ul",{className:"space-y-3 sm:space-y-4",children:null===(s=i.employees)||void 0===s?void 0:s.map(e=>(0,x.jsxs)("li",{onClick:()=>(e=>{U&&e.employeeId?o(`/employees/${U}/public/${e.employeeId}`):z("error","Navigation Error","Unable to navigate to employee profile. Please try again.")})(e),className:"p-3 sm:p-4 rounded-lg flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-4 transition-all cursor-pointer transform hover:scale-105 "+("dark"===$?"bg-gray-700 hover:bg-gray-600 hover:shadow-lg":"bg-gray-100 hover:bg-gray-200 hover:shadow-md"),title:`Click to view ${e.displayName}'s profile`,children:[(0,x.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,x.jsx)("p",{className:"font-semibold text-sm sm:text-base break-words",children:e.displayName}),(0,x.jsx)("p",{className:"text-xs sm:text-sm mt-1 break-words "+("dark"===$?"text-gray-400":"text-gray-500"),children:e.workEmail}),(0,x.jsxs)("p",{className:"text-xs font-mono mt-1 "+("dark"===$?"text-gray-500":"text-gray-400"),children:["ID: ",e.employeeId]})]}),e.jobTitlePrimary&&(0,x.jsxs)("div",{className:"text-xs font-bold px-2 sm:px-3 py-1 rounded-full flex items-center flex-shrink-0 "+("TEAM_LEAD"===e.jobTitlePrimary?"dark"===$?"bg-green-800 text-green-200":"bg-green-100 text-green-800":"dark"===$?"bg-gray-600 text-gray-300":"bg-gray-200 text-gray-700"),children:["TEAM_LEAD"===e.jobTitlePrimary&&(0,x.jsx)(n.e7y,{className:"mr-1 sm:mr-2 w-3 h-3"}),(0,x.jsx)("span",{className:"break-words",children:e.jobTitlePrimary})]})]},e.employeeId))})})]})}),(0,x.jsx)("div",{children:(0,x.jsxs)("div",{className:"rounded-none sm:rounded-lg shadow-lg overflow-hidden border "+("dark"===$?"bg-gray-800 border-gray-700":"bg-white border-gray-200"),children:[(0,x.jsxs)("div",{className:"p-3 sm:p-4 md:p-5 flex items-center space-x-3 sm:space-x-4",children:[(0,x.jsx)(n.yd7,{className:"w-6 h-6 sm:w-7 sm:h-7 md:w-8 md:h-8 text-purple-500 flex-shrink-0"}),(0,x.jsxs)("h2",{className:"text-lg sm:text-xl md:text-2xl font-bold break-words",children:["Projects (",c.length,")"]})]}),(0,x.jsx)("div",{className:"p-3 sm:p-4 md:p-5",children:c.length>0?(0,x.jsx)("ul",{className:"space-y-2 sm:space-y-3",children:c.map(e=>(0,x.jsx)("li",{className:"p-2 sm:p-3 rounded-lg "+("dark"===$?"bg-gray-700":"bg-gray-100"),children:(0,x.jsx)("p",{className:"font-semibold text-sm sm:text-base break-words",children:e})},e))}):(0,x.jsx)("p",{className:"text-sm sm:text-base "+("dark"===$?"text-gray-400":"text-gray-600"),children:"No projects are currently assigned to this team."})})]})})]})]}),(0,x.jsx)(y,{isOpen:N,onClose:()=>{v(!1)},team:F,onTeamUpdated:()=>{L(),z("success","Team Updated","Team details have been successfully updated.")},employees:k}),(0,x.jsx)(b,{isOpen:I.isOpen,onClose:()=>{O({isOpen:!1,type:"",title:"",message:""})},type:I.type,title:I.title,message:I.message,theme:$})]})}}}]);
//# sourceMappingURL=488.01601455.chunk.js.map