"use strict";(self.webpackChunktechlife=self.webpackChunktechlife||[]).push([[488],{5488:(e,t,s)=>{s.r(t),s.d(t,{default:()=>j});var r=s(9379),a=s(5043),l=s(1357),o=s(2397),n=s(184),c=s(614),d=s(7234),i=s(5394),m=s(579);const x=(e,t)=>{if(e===t)return!0;if(null===e||null===t)return!1;if("object"!==typeof e||"object"!==typeof t)return e===t;if(Array.isArray(e)!==Array.isArray(t))return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(let s=0;s<e.length;s++)if(!x(e[s],t[s]))return!1;return!0}const s=Object.keys(e),r=Object.keys(t);if(s.length!==r.length)return!1;for(const a of s){if(!r.includes(a))return!1;if(!x(e[a],t[a]))return!1}return!0},u=e=>{let{isOpen:t,onClose:s,type:r,title:l,message:o,theme:d}=e;const[x,u]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if(t&&(u(!0),"success"===r||"error"===r)){const e=setTimeout(()=>{g()},3e3);return()=>clearTimeout(e)}},[t,r]);const g=()=>{u(!1),setTimeout(()=>s(),300)};return t?(0,m.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex justify-center items-center z-[300] transition-opacity duration-300 ".concat(x?"opacity-100":"opacity-0"),children:(0,m.jsxs)("div",{className:"p-6 rounded-3xl shadow-2xl w-full max-w-md m-4 border transform transition-all duration-300 ".concat(x?"scale-100 translate-y-0":"scale-95 translate-y-4"," ").concat("dark"===d?"bg-gray-800 border-gray-700":"bg-white border-gray-200"),children:[(0,m.jsxs)("div",{className:"flex items-center mb-4",children:[(()=>{switch(r){case"success":return(0,m.jsx)(n.A7C,{className:"w-6 h-6 text-green-500"});case"error":return(0,m.jsx)(n.BS8,{className:"w-6 h-6 text-red-500"});case"info":return(0,m.jsx)(n.__w,{className:"w-6 h-6 text-blue-500"});case"warning":return(0,m.jsx)(i.tr_,{className:"w-6 h-6 text-yellow-500"});default:return null}})(),(0,m.jsx)("h3",{className:"text-xl font-bold ml-3 ".concat((()=>{switch(r){case"success":return"text-green-600 dark:text-green-400";case"error":return"text-red-600 dark:text-red-400";case"info":return"text-blue-600 dark:text-blue-400";case"warning":return"text-yellow-600 dark:text-yellow-400";default:return"dark"===d?"text-white":"text-gray-800"}})()),children:l}),"success"!==r&&"error"!==r&&(0,m.jsx)("button",{onClick:g,className:"ml-auto p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:(0,m.jsx)(c.A,{size:20})})]}),(0,m.jsx)("p",{className:"".concat("dark"===d?"text-gray-300":"text-gray-600"),children:o}),("success"===r||"error"===r)&&(0,m.jsx)("div",{className:"mt-4 flex justify-end",children:(0,m.jsx)("button",{onClick:g,className:"px-4 py-2 rounded-lg font-medium transition-colors ".concat("success"===r?"bg-green-500 hover:bg-green-600 text-white":"bg-red-500 hover:bg-red-600 text-white"),children:"OK"})}),"warning"===r&&(0,m.jsxs)("div",{className:"mt-4 flex justify-end space-x-3",children:[(0,m.jsx)("button",{onClick:g,className:"px-4 py-2 rounded-lg font-medium border border-gray-300 text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,m.jsx)("button",{onClick:()=>{g()},className:"px-4 py-2 rounded-lg font-medium bg-blue-500 hover:bg-blue-600 text-white transition-colors",children:"Continue Anyway"})]})]})}):null},g=e=>{let{isOpen:t,onClose:s,onContinue:r,theme:l}=e;const[o,n]=(0,a.useState)(!1);(0,a.useEffect)(()=>{t&&n(!0)},[t]);return t?(0,m.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex justify-center items-center z-[250] transition-opacity duration-300 ".concat(o?"opacity-100":"opacity-0"),children:(0,m.jsxs)("div",{className:"p-6 rounded-3xl shadow-2xl w-full max-w-md m-4 border transform transition-all duration-300 ".concat(o?"scale-100 translate-y-0":"scale-95 translate-y-4"," ").concat("dark"===l?"bg-gray-800 border-gray-700":"bg-white border-gray-200"),children:[(0,m.jsxs)("div",{className:"flex items-center mb-4",children:[(0,m.jsx)(i.tr_,{className:"w-6 h-6 text-yellow-500"}),(0,m.jsx)("h3",{className:"text-xl font-bold ml-3 ".concat("dark"===l?"text-yellow-400":"text-yellow-600"),children:"No Changes Detected"})]}),(0,m.jsx)("p",{className:"mb-6 ".concat("dark"===l?"text-gray-300":"text-gray-600"),children:"No changes have been made to the form. Please make some changes before submitting, or cancel to close the form."}),(0,m.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,m.jsx)("button",{onClick:()=>{n(!1),setTimeout(()=>s(),300)},className:"px-4 py-2 rounded-lg font-medium border transition-colors ".concat("dark"===l?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"),children:"Make Changes"}),(0,m.jsx)("button",{onClick:()=>{n(!1),setTimeout(()=>{s(),r()},300)},className:"px-4 py-2 rounded-lg font-medium bg-blue-500 hover:bg-blue-600 text-white transition-colors",children:"Submit Anyway"})]})]})}):null},h=e=>{let{employeeRoles:t,onSelectionChange:s,onRoleChange:l,theme:n,error:c}=e;const[d,i]=(0,a.useState)([]),[x,u]=(0,a.useState)(!1),[g,h]=(0,a.useState)(!0),[p,y]=(0,a.useState)(0),[b,f]=(0,a.useState)(!1),j=(0,a.useRef)(null),w=(0,a.useRef)(!1),N=(0,a.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(w.current||e>0&&!g)){w.current=!0,u(!0),t||(i([]),h(!0),f(!1));try{var s,r;console.log("[API CALL - EmployeeListPaginatedForEdit] Fetching employees: Page ".concat(e,", Size ").concat(6));const a=await o.yE.get("employee/".concat(e,"/").concat(6,"/employeeId/asc/employees")),l=(null===(s=a.data)||void 0===s?void 0:s.content)||[],n=Array.isArray(l)?l:[];i(e=>t?[...e,...n]:n),y(e),!0===(null===(r=a.data)||void 0===r?void 0:r.last)||n.length<6?(h(!1),f(!0)):h(!0)}catch(a){console.error("Error fetching employees with pagination:",a),t||i([]),h(!1)}finally{u(!1),w.current=!1}}},[g]),v=(0,a.useCallback)(e=>{const{scrollTop:t,scrollHeight:s,clientHeight:r}=e.target;s>r&&s-t<=r+50&&(!g||x||w.current||N(p+1,!0))},[p,g,x,N]);(0,a.useEffect)(()=>{0!==d.length||x||N(0,!1)},[N]);const k=d.map(e=>(0,r.A)((0,r.A)({},e),{},{isSelected:t.hasOwnProperty(e.employeeId),role:t[e.employeeId]||""})),C=e=>(0,m.jsx)("div",{className:"text-center py-3 text-sm text-gray-500",children:e?"Loading employee directory...":"Loading more employees..."});return(0,m.jsxs)("div",{className:"max-h-80 overflow-y-auto p-2 border-2 rounded-lg sm:rounded-xl \n            ".concat("dark"===n?"border-gray-600 bg-gray-700":"border-gray-200 bg-gray-50"),ref:j,onScroll:v,children:[x&&0===d.length?C(!0):0!==d.length||x?k.map(e=>(0,m.jsx)("div",{className:"py-2 border-b border-gray-200 dark:border-gray-600 last:border-0",children:(0,m.jsxs)("label",{className:"flex items-start cursor-pointer",children:[(0,m.jsx)("input",{type:"checkbox",checked:e.isSelected,onChange:()=>s(e.employeeId),className:"mt-1 mr-3 h-4 w-4 text-blue-600 rounded focus:ring-blue-500"}),(0,m.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,m.jsx)("div",{className:"font-medium ".concat("dark"===n?"text-gray-200":"text-gray-800"),children:e.displayName||e.firstName+" "+e.lastName}),(0,m.jsx)("div",{className:"text-xs ".concat("dark"===n?"text-gray-400":"text-gray-500"),children:e.employeeId}),e.isSelected&&(0,m.jsx)("div",{className:"mt-2",onClick:e=>e.stopPropagation(),children:(0,m.jsx)("input",{type:"text",value:e.role||"",onChange:t=>l(e.employeeId,t.target.value),placeholder:"Enter role (e.g., Backend)",className:"w-full px-3 py-1.5 text-sm border rounded-lg\n                                                    ".concat("dark"===n?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300 text-gray-800","\n                                                    focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none")})})]})]})},e.employeeId)):(0,m.jsx)("div",{className:"text-center py-3 text-sm text-gray-500",children:"No employees found."}),x&&d.length>0&&C(!1),b&&d.length>0&&(0,m.jsx)("div",{className:"text-center py-2 text-xs text-gray-400 dark:text-gray-500 border-t border-gray-200 dark:border-gray-600 mt-2",children:"\u2014 All employees loaded \u2014"}),c&&(0,m.jsx)("p",{className:"text-red-500 text-xs mt-1 p-2",children:c})]})},p=e=>{let{team:t,isOpen:s,onClose:l,onTeamUpdated:c}=e;const{theme:p}=(0,a.useContext)(d.ob),[y,b]=(0,a.useState)(""),[f,j]=(0,a.useState)({}),[w,N]=(0,a.useState)(!1),[v,k]=(0,a.useState)({}),[C,S]=(0,a.useState)({teamName:"",employeeRoles:{}}),[E,A]=(0,a.useState)(!1),[T,I]=(0,a.useState)(!1),[O,M]=(0,a.useState)({isOpen:!1,type:"",title:"",message:""});if((0,a.useEffect)(()=>{if(t){var e;const s=t.teamName||"",a=(null===(e=t.employees)||void 0===e?void 0:e.reduce((e,t)=>(e[t.employeeId]=t.role||"",e),{}))||{};b(s),j(a),S({teamName:s,employeeRoles:(0,r.A)({},a)}),A(!1)}},[t]),(0,a.useEffect)(()=>{A(!x({teamName:y,employeeRoles:f},C))},[y,f,C]),!s)return null;const R=async()=>{var e;if(!(()=>{const e={};y.trim()||(e.teamName="Team Name is required.");const t=Object.keys(f);0===t.length?e.teamMembers="At least one Team Member is required.":t.some(e=>{var t;return!(null!==(t=f[e])&&void 0!==t&&t.trim())})&&(e.teamMembers="All selected members must have a role.");return k(e),0===Object.keys(e).length})())return;N(!0),k({});const s=(null===(e=t.projects)||void 0===e?void 0:e.length)>0?t.projects[0]:"";if(!s)return k({general:"Error: Project ID is missing from the existing team data."}),void N(!1);const r={teamId:t.teamId,teamName:y.trim(),teamDescription:t.teamDescription||"",projectId:s,employeeRoles:f};console.log("Submitting updated team payload:",r);try{await o.yE.put("employee/team/employee/".concat(t.teamId),r),c(),l(),M({isOpen:!0,type:"success",title:"Team Updated Successfully!",message:"The team details have been updated."})}catch(i){var a,n,d;console.error("Error updating team:",(null===(a=i.response)||void 0===a?void 0:a.data)||i.message),k({general:(null===(n=i.response)||void 0===n||null===(d=n.data)||void 0===d?void 0:d.message)||"Failed to update team. Please try again."})}finally{N(!1)}},_=e=>{e.preventDefault(),E?R():I(!0)};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-[200] p-2 sm:p-4",children:(0,m.jsxs)("div",{className:"rounded-2xl sm:rounded-3xl w-full max-w-sm sm:max-w-md md:max-w-lg lg:max-w-2xl max-h-[95vh] overflow-hidden shadow-2xl flex flex-col ".concat("dark"===p?"bg-gray-800":"bg-white"),children:[(0,m.jsx)("div",{className:"px-4 sm:px-6 md:px-8 py-4 sm:py-6 bg-gradient-to-r from-blue-500 to-indigo-700 text-white relative",children:(0,m.jsxs)("div",{className:"flex items-center justify-between",children:[(0,m.jsxs)("div",{className:"flex items-center space-x-3 sm:space-x-4 min-w-0 flex-1",children:[(0,m.jsx)("div",{className:"p-2 sm:p-3 bg-white/20 rounded-lg sm:rounded-xl flex-shrink-0",children:(0,m.jsx)(n.YXz,{className:"w-6 h-6 sm:w-7 sm:h-7 md:w-8 md:h-8"})}),(0,m.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,m.jsx)("h2",{className:"text-lg sm:text-xl md:text-2xl font-bold break-words",children:"Edit Team"}),(0,m.jsxs)("p",{className:"text-white/90 text-xs sm:text-sm break-words",children:["Update the details for **",t.teamName,"**."]}),(0,m.jsxs)("div",{className:"mt-1 flex items-center space-x-2",children:[(0,m.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(E?"bg-yellow-400":"bg-green-400")}),(0,m.jsx)("span",{className:"text-white/80 text-xs",children:E?"Modified":"No changes"})]})]})]}),(0,m.jsx)("button",{onClick:l,className:"p-2 sm:p-3 hover:bg-white/20 rounded-full transition-all group flex-shrink-0",children:(0,m.jsx)(n.QCr,{className:"w-5 h-5 sm:w-6 sm:h-6 group-hover:rotate-90 transition-transform"})})]})}),(0,m.jsx)("div",{className:"overflow-y-auto flex-grow",children:(0,m.jsxs)("form",{className:"p-4 sm:p-6 md:p-8",onSubmit:_,children:[(0,m.jsxs)("div",{className:"space-y-4 sm:space-y-6",children:[(0,m.jsxs)("div",{children:[(0,m.jsxs)("label",{className:"block text-xs sm:text-sm font-semibold mb-2 sm:mb-3 ".concat("dark"===p?"text-gray-200":"text-gray-800"),children:["Team Name ",(0,m.jsx)("span",{className:"text-red-500",children:"*"}),!x(y,C.teamName)&&(0,m.jsx)("span",{className:"ml-2 text-xs text-yellow-600 dark:text-yellow-400",children:"(Modified)"})]}),(0,m.jsx)("input",{type:"text",value:y,onChange:e=>b(e.target.value),className:"w-full px-3 sm:px-4 md:px-5 py-3 sm:py-4 border-2 rounded-lg sm:rounded-xl transition-all duration-300 text-sm\n                                            focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 focus:outline-none\n                                            ".concat(v.teamName?"border-red-300 bg-red-50 focus:border-red-500 focus:ring-red-500/20":x(y,C.teamName)?"dark"===p?"border-gray-600 bg-gray-700 text-white hover:border-gray-500":"border-gray-200 bg-white hover:border-gray-300":"border-yellow-400 bg-yellow-50 dark:bg-yellow-900/20"),placeholder:"e.g., Development Team"}),v.teamName&&(0,m.jsxs)("div",{className:"mt-2 flex items-center space-x-2 text-red-600",children:[(0,m.jsx)(i.tr_,{className:"w-4 h-4 flex-shrink-0"}),(0,m.jsx)("p",{className:"text-xs sm:text-sm font-medium",children:v.teamName})]})]}),(0,m.jsxs)("div",{children:[(0,m.jsxs)("label",{className:"block text-xs sm:text-sm font-semibold mb-2 sm:mb-3 ".concat("dark"===p?"text-gray-200":"text-gray-800"),children:["Team Members ",(0,m.jsx)("span",{className:"text-red-500",children:"*"}),!x(f,C.employeeRoles)&&(0,m.jsx)("span",{className:"ml-2 text-xs text-yellow-600 dark:text-yellow-400",children:"(Modified)"})]}),(0,m.jsx)(h,{employeeRoles:f,onSelectionChange:e=>{j(s=>{const a=(0,r.A)({},s);var l,o;a.hasOwnProperty(e)?delete a[e]:a[e]=(null===(l=t.employees)||void 0===l||null===(o=l.find(t=>t.employeeId===e))||void 0===o?void 0:o.role)||"";return a})},onRoleChange:(e,t)=>{j(s=>(0,r.A)((0,r.A)({},s),{},{[e]:t}))},theme:p,error:v.teamMembers}),v.teamMembers&&(0,m.jsxs)("div",{className:"mt-2 flex items-center space-x-2 text-red-600",children:[(0,m.jsx)(i.tr_,{className:"w-4 h-4 flex-shrink-0"}),(0,m.jsx)("p",{className:"text-xs sm:text-sm font-medium",children:v.teamMembers})]})]})]}),v.general&&(0,m.jsx)("div",{className:"mt-4 sm:mt-6 p-3 sm:p-4 border-l-4 border-red-400 rounded-r-lg ".concat("dark"===p?"bg-red-900/20":"bg-red-50"),children:(0,m.jsxs)("div",{className:"flex items-center",children:[(0,m.jsx)(i.tr_,{className:"w-4 h-4 sm:w-5 sm:h-5 text-red-400 mr-3 flex-shrink-0"}),(0,m.jsx)("p",{className:"font-medium text-sm ".concat("dark"===p?"text-red-300":"text-red-800"),children:v.general})]})})]})}),(0,m.jsxs)("div",{className:"px-4 sm:px-6 md:px-8 py-4 sm:py-6 border-t flex flex-col sm:flex-row justify-end space-y-3 sm:space-y-0 sm:space-x-4 ".concat("dark"===p?"bg-gray-700 border-gray-600":"bg-gray-50 border-gray-200"),children:[(0,m.jsx)("button",{type:"button",onClick:l,className:"w-full sm:w-auto px-6 sm:px-8 py-2 sm:py-3 border-2 rounded-lg sm:rounded-xl font-semibold transition-all text-sm ".concat("dark"===p?"border-gray-600 text-gray-300 hover:bg-gray-600":"border-gray-300 text-gray-700 hover:bg-gray-100"),children:"Cancel"}),(0,m.jsx)("button",{type:"button",onClick:_,disabled:w,className:"w-full sm:w-auto px-8 sm:px-10 py-2 sm:py-3 bg-gradient-to-r from-blue-600 to-indigo-700 text-white font-bold rounded-lg sm:rounded-xl\n                                hover:shadow-lg transform hover:scale-105 transition-all flex items-center justify-center space-x-2 text-sm\n                                ".concat(w?"cursor-not-allowed opacity-75":""),children:w?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"h-4 w-4 sm:h-5 sm:w-5 border-4 border-white border-t-transparent rounded-full animate-spin"}),(0,m.jsx)("span",{children:"Updating..."})]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(i.G3G,{className:"w-4 h-4 sm:w-5 sm:h-5"}),(0,m.jsx)("span",{children:"Update Team"}),E&&(0,m.jsx)("span",{className:"ml-1 text-xs bg-white/20 px-2 py-1 rounded-full",children:"*"})]})})]})]})}),(0,m.jsx)(g,{isOpen:T,onClose:()=>I(!1),onContinue:()=>{I(!1),R()},theme:p}),(0,m.jsx)(u,{isOpen:O.isOpen,onClose:()=>{M({isOpen:!1,type:"",title:"",message:""})},type:O.type,title:O.title,message:O.message,theme:p})]})},y=e=>{let{isOpen:t,onClose:s,type:r,title:l,message:o,theme:d}=e;const[i,x]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if(t&&(x(!0),"success"===r||"error"===r)){const e=setTimeout(()=>{u()},3e3);return()=>clearTimeout(e)}},[t,r]);const u=()=>{x(!1),setTimeout(()=>s(),300)};if(!t)return null;return(0,m.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex justify-center items-center z-[200] transition-opacity duration-300 ".concat(i?"opacity-100":"opacity-0"),children:(0,m.jsxs)("div",{className:"p-6 rounded-3xl shadow-2xl w-full max-w-md m-4 border transform transition-all duration-300 ".concat(i?"scale-100 translate-y-0":"scale-95 translate-y-4"," ").concat("dark"===d?"bg-gray-800 border-gray-700":"bg-white border-gray-200"),children:[(0,m.jsxs)("div",{className:"flex items-center mb-4",children:[(()=>{switch(r){case"success":return(0,m.jsx)(n.A7C,{className:"w-6 h-6 text-green-500"});case"error":return(0,m.jsx)(n.BS8,{className:"w-6 h-6 text-red-500"});case"info":return(0,m.jsx)(n.__w,{className:"w-6 h-6 text-blue-500"});default:return null}})(),(0,m.jsx)("h3",{className:"text-xl font-bold ml-3 ".concat((()=>{switch(r){case"success":return"text-green-600 dark:text-green-400";case"error":return"text-red-600 dark:text-red-400";case"info":return"text-blue-600 dark:text-blue-400";default:return"dark"===d?"text-white":"text-gray-800"}})()),children:l}),"success"!==r&&"error"!==r&&(0,m.jsx)("button",{onClick:u,className:"ml-auto p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:(0,m.jsx)(c.A,{size:20})})]}),(0,m.jsx)("p",{className:"".concat("dark"===d?"text-gray-300":"text-gray-600"),children:o}),("success"===r||"error"===r)&&(0,m.jsx)("div",{className:"mt-4 flex justify-end",children:(0,m.jsx)("button",{onClick:u,className:"px-4 py-2 rounded-lg font-medium transition-colors ".concat("success"===r?"bg-green-500 hover:bg-green-600 text-white":"bg-red-500 hover:bg-red-600 text-white"),children:"OK"})})]})})},b=()=>(0,m.jsx)("div",{className:"flex justify-center items-center h-40 sm:h-64",children:(0,m.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 sm:h-32 sm:w-32 border-t-2 border-b-2 border-blue-500"})}),f=e=>{let{message:t}=e;return(0,m.jsxs)("div",{className:"text-center p-4 sm:p-8 bg-red-100 text-red-700 rounded-lg",children:[(0,m.jsx)("h3",{className:"font-bold text-base sm:text-lg",children:"Oops! Something went wrong."}),(0,m.jsx)("p",{className:"text-sm sm:text-base",children:t})]})},j=()=>{var e,t;const{teamId:s}=(0,l.g)(),c=(0,l.Zp)(),[i,x]=(0,a.useState)(null),[u,g]=(0,a.useState)([]),[h,j]=(0,a.useState)(!0),[w,N]=(0,a.useState)(null),[v,k]=(0,a.useState)(!1),[C,S]=(0,a.useState)([]),[E,A]=(0,a.useState)([]),[T,I]=(0,a.useState)([]),[O,M]=(0,a.useState)({isOpen:!1,type:"",title:"",message:""}),{theme:R,userData:_}=(0,a.useContext)(d.ob),D=(null===_||void 0===_?void 0:_.roles)||[],P=D.includes("ADMIN")||D.includes("HR")||D.includes("MANAGER"),z=null!==_&&void 0!==_&&_.roles[0]?"ROLE_".concat(null===_||void 0===_?void 0:_.roles[0]):null,F=null===_||void 0===_?void 0:_.employeeId,U=(e,t,s)=>{M({isOpen:!0,type:e,title:t,message:s})};(0,a.useEffect)(()=>{z&&(async()=>{try{let e=await o.ZQ.get("role-access/".concat(z));console.log("from Edit Team :",e.data),A(e.data)}catch(w){console.error("Error fetching permissions:",w),U("error","Permission Error","Failed to load user permissions. Some features may not be available.")}})()},[z]),(0,a.useEffect)(()=>{E&&I((null===E||void 0===E?void 0:E.permissions)||[])},[E]),console.log(T);const L=async()=>{try{j(!0);const e=await o.yE.get("employee/team/employee/".concat(s)),t=Array.isArray(e.data)?e.data[0]:e.data;x(t);const r=await o.yE.get("employee/team/projects/".concat(s));g(r.data||[]),N(null)}catch(r){var e,t;console.error("Error fetching team details:",r);const s=(null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Could not fetch team details. The team may not exist or an error occurred.";N(s),U("error","Data Loading Error",s)}finally{j(!1)}};if((0,a.useEffect)(()=>{s&&(L(),P&&(async()=>{try{const e=(await o.yE.get("employee/0/1000/employeeId/asc/employees")).data.content.map(e=>({value:e.employeeId,label:"".concat(e.displayName," (").concat(e.employeeId,")")}));S(e)}catch(e){console.error("Error fetching employees:",e),U("error","Employee Data Error","Failed to load employee list. Team editing may not work properly.")}})())},[s,P]),h)return(0,m.jsx)(b,{});if(w)return(0,m.jsx)(f,{message:w});if(!i)return(0,m.jsx)("div",{className:"text-center p-4 sm:p-8 text-sm sm:text-base ".concat("dark"===R?"text-white":"text-gray-800"),children:"No team data found."});const B=(0,r.A)((0,r.A)({},i),{},{projects:u});return(0,m.jsxs)("div",{className:"px-0 sm:px-4 md:px-6 lg:px-8 py-4 sm:py-6 md:py-8 min-h-screen ".concat("dark"===R?"bg-gray-900 text-white":"bg-gray-50 text-gray-800"),children:[(0,m.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,m.jsxs)("button",{onClick:()=>c(-1),className:"flex items-center text-blue-500 hover:underline mb-4 sm:mb-6 px-4 sm:px-0 text-sm sm:text-base",children:[(0,m.jsx)(n.QVr,{className:"mr-2 w-3 h-3 sm:w-4 sm:h-4"})," Back to All Teams"]}),(0,m.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 sm:mb-6 md:mb-8 px-4 sm:px-0 gap-4 sm:gap-0",children:[(0,m.jsxs)("div",{className:"w-full sm:w-auto",children:[(0,m.jsx)("h1",{className:"text-xl sm:text-2xl md:text-3xl lg:text-4xl font-bold break-words",children:i.teamName}),(0,m.jsxs)("p",{className:"mt-1 sm:mt-2 text-xs sm:text-sm md:text-lg ".concat("dark"===R?"text-gray-400":"text-gray-600"),children:["Details for team ID: ",i.teamId]})]}),T.includes("MY_TEAM_MY_TEAMS_EDIT_TEAM")&&(0,m.jsxs)("button",{onClick:()=>k(!0),className:"w-full sm:w-auto bg-blue-600 text-white px-3 sm:px-4 md:px-5 py-2 rounded-lg font-semibold hover:bg-blue-700 transition-colors flex items-center justify-center shadow-md text-xs sm:text-sm md:text-base",children:[(0,m.jsx)(n.uO9,{className:"mr-2 w-3 h-3 sm:w-4 sm:h-4"})," Edit Team"]})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6 lg:gap-8",children:[(0,m.jsx)("div",{className:"lg:col-span-2",children:(0,m.jsxs)("div",{className:"rounded-none sm:rounded-lg shadow-lg overflow-hidden border ".concat("dark"===R?"bg-gray-800 border-gray-700":"bg-white border-gray-200"),children:[(0,m.jsxs)("div",{className:"p-3 sm:p-4 md:p-5 flex items-center space-x-3 sm:space-x-4",children:[(0,m.jsx)(n.YXz,{className:"w-6 h-6 sm:w-7 sm:h-7 md:w-8 md:h-8 text-blue-500 flex-shrink-0"}),(0,m.jsxs)("h2",{className:"text-lg sm:text-xl md:text-2xl font-bold break-words",children:["Team Members (",(null===(e=i.employees)||void 0===e?void 0:e.length)||0,")"]})]}),(0,m.jsx)("div",{className:"p-3 sm:p-4 md:p-5",children:(0,m.jsx)("ul",{className:"space-y-3 sm:space-y-4",children:null===(t=i.employees)||void 0===t?void 0:t.map(e=>(0,m.jsxs)("li",{onClick:()=>(e=>{F&&e.employeeId?c("/employees/".concat(F,"/public/").concat(e.employeeId)):U("error","Navigation Error","Unable to navigate to employee profile. Please try again.")})(e),className:"p-3 sm:p-4 rounded-lg flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-4 transition-all cursor-pointer transform hover:scale-105 ".concat("dark"===R?"bg-gray-700 hover:bg-gray-600 hover:shadow-lg":"bg-gray-100 hover:bg-gray-200 hover:shadow-md"),title:"Click to view ".concat(e.displayName,"'s profile"),children:[(0,m.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,m.jsx)("p",{className:"font-semibold text-sm sm:text-base break-words",children:e.displayName}),(0,m.jsx)("p",{className:"text-xs sm:text-sm mt-1 break-words ".concat("dark"===R?"text-gray-400":"text-gray-500"),children:e.workEmail}),(0,m.jsxs)("p",{className:"text-xs font-mono mt-1 ".concat("dark"===R?"text-gray-500":"text-gray-400"),children:["ID: ",e.employeeId]})]}),e.role&&(0,m.jsx)("div",{className:"text-xs font-bold px-2 sm:px-3 py-1 rounded-full flex items-center flex-shrink-0 ".concat("dark"===R?"bg-indigo-800 text-indigo-200":"bg-indigo-100 text-indigo-800"),children:(0,m.jsxs)("span",{className:"break-words",children:["Role: ",e.role]})})]},e.employeeId))})})]})}),(0,m.jsx)("div",{children:(0,m.jsxs)("div",{className:"rounded-none sm:rounded-lg shadow-lg overflow-hidden border ".concat("dark"===R?"bg-gray-800 border-gray-700":"bg-white border-gray-200"),children:[(0,m.jsxs)("div",{className:"p-3 sm:p-4 md:p-5 flex items-center space-x-3 sm:space-x-4",children:[(0,m.jsx)(n.yd7,{className:"w-6 h-6 sm:w-7 sm:h-7 md:w-8 md:h-8 text-purple-500 flex-shrink-0"}),(0,m.jsxs)("h2",{className:"text-lg sm:text-xl md:text-2xl font-bold break-words",children:["Projects (",u.length,")"]})]}),(0,m.jsx)("div",{className:"p-3 sm:p-4 md:p-5",children:u.length>0?(0,m.jsx)("ul",{className:"space-y-2 sm:space-y-3",children:u.map(e=>(0,m.jsx)("li",{className:"p-2 sm:p-3 rounded-lg ".concat("dark"===R?"bg-gray-700":"bg-gray-100"),children:(0,m.jsx)("p",{className:"font-semibold text-sm sm:text-base break-words",children:e})},e))}):(0,m.jsx)("p",{className:"text-sm sm:text-base ".concat("dark"===R?"text-gray-400":"text-gray-600"),children:"No projects are currently assigned to this team."})})]})})]})]}),(0,m.jsx)(p,{isOpen:v,onClose:()=>{k(!1)},team:B,onTeamUpdated:()=>{L(),U("success","Team Updated","Team details have been successfully updated.")},employees:C}),(0,m.jsx)(y,{isOpen:O.isOpen,onClose:()=>{M({isOpen:!1,type:"",title:"",message:""})},type:O.type,title:O.title,message:O.message,theme:R})]})}}}]);
//# sourceMappingURL=488.eef1a217.chunk.js.map