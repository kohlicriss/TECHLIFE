"use strict";(self.webpackChunktechlife=self.webpackChunktechlife||[]).push([[676],{7676:(e,t,r)=>{r.r(t),r.d(t,{default:()=>w});var s=r(9379),a=r(5043),l=r(5439),o=r(2397),n=r(184),c=r(5394),i=r(614),d=r(7234),m=r(579);const x=e=>{let{isOpen:t,onClose:r,onConfirm:s,title:l,message:o,confirmText:c="Confirm",isConfirming:i}=e;const{theme:x}=(0,a.useContext)(d.ob);return t?(0,m.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-[250] p-2 sm:p-4",children:(0,m.jsxs)("div",{className:"rounded-xl sm:rounded-2xl w-full max-w-sm sm:max-w-md shadow-xl flex flex-col ".concat("dark"===x?"bg-gray-800 text-white":"bg-white"),children:[(0,m.jsxs)("div",{className:"p-4 sm:p-6 flex justify-between items-center border-b",style:{borderColor:"dark"===x?"#4b5563":"#e5e7eb"},children:[(0,m.jsxs)("h3",{className:"text-lg sm:text-xl font-bold flex items-center min-w-0 flex-1",children:[(0,m.jsx)(n.BS8,{className:"text-yellow-400 mr-2 sm:mr-3 w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0"}),(0,m.jsx)("span",{className:"break-words",children:l})]}),(0,m.jsx)("button",{onClick:r,className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition-colors flex-shrink-0 ml-2",children:(0,m.jsx)(n.QCr,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]}),(0,m.jsx)("div",{className:"p-4 sm:p-6",children:(0,m.jsx)("p",{className:"text-sm sm:text-base break-words ".concat("dark"===x?"text-gray-300":"text-gray-600"),children:o})}),(0,m.jsxs)("div",{className:"p-3 sm:p-4 flex flex-col sm:flex-row justify-end space-y-3 sm:space-y-0 sm:space-x-4 border-t ".concat("dark"===x?"bg-gray-700/50 border-gray-700":"bg-gray-50 border-gray-200"),children:[(0,m.jsx)("button",{onClick:r,className:"w-full sm:w-auto px-4 sm:px-6 py-2 rounded-lg font-semibold transition-colors text-sm ".concat("dark"===x?"bg-gray-600 hover:bg-gray-500 text-gray-200":"bg-gray-200 hover:bg-gray-300 text-gray-700"),children:"Cancel"}),(0,m.jsx)("button",{onClick:s,disabled:i,className:"w-full sm:w-auto px-4 sm:px-6 py-2 rounded-lg font-semibold text-white transition-colors flex items-center justify-center text-sm\n                                    ".concat(i?"bg-red-400 cursor-not-allowed":"bg-red-600 hover:bg-red-700"),children:i?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"h-3 w-3 sm:h-4 sm:w-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),(0,m.jsx)("span",{children:"Deleting..."})]}):(0,m.jsx)("span",{children:c})})]})]})}):null};var u=r(9570),g=r(6446);const h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const r=(0,a.useRef)(null);return(0,a.useEffect)(()=>{const s=s=>{const a=t.some(e=>e.current&&e.current.contains(s.target));!r.current||r.current.contains(s.target)||a||e(s)};return document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[e,t]),r},p=e=>{let{isOpen:t,onClose:r,type:s,title:l,message:o,theme:c}=e;const[d,x]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if(t&&(x(!0),"success"===s||"error"===s)){const e=setTimeout(()=>{u()},3e3);return()=>clearTimeout(e)}},[t,s]);const u=()=>{x(!1),setTimeout(()=>r(),300)};if(!t)return null;return(0,m.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex justify-center items-center z-[200] transition-opacity duration-300 ".concat(d?"opacity-100":"opacity-0"),children:(0,m.jsxs)("div",{className:"p-6 rounded-3xl shadow-2xl w-full max-w-md m-4 border transform transition-all duration-300 ".concat(d?"scale-100 translate-y-0":"scale-95 translate-y-4"," ").concat("dark"===c?"bg-gray-800 border-gray-700":"bg-white border-gray-200"),children:[(0,m.jsxs)("div",{className:"flex items-center mb-4",children:[(()=>{switch(s){case"success":return(0,m.jsx)(n.A7C,{className:"w-6 h-6 text-green-500"});case"error":return(0,m.jsx)(n.BS8,{className:"w-6 h-6 text-red-500"});case"info":return(0,m.jsx)(n.__w,{className:"w-6 h-6 text-blue-500"});default:return null}})(),(0,m.jsx)("h3",{className:"text-xl font-bold ml-3 ".concat((()=>{switch(s){case"success":return"text-green-600 dark:text-green-400";case"error":return"text-red-600 dark:text-red-400";case"info":return"text-blue-600 dark:text-blue-400";default:return"dark"===c?"text-white":"text-gray-800"}})()),children:l}),"success"!==s&&"error"!==s&&(0,m.jsx)("button",{onClick:u,className:"ml-auto p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:(0,m.jsx)(i.A,{size:20})})]}),(0,m.jsx)("p",{className:"".concat("dark"===c?"text-gray-300":"text-gray-600"),children:o}),("success"===s||"error"===s)&&(0,m.jsx)("div",{className:"mt-4 flex justify-end",children:(0,m.jsx)("button",{onClick:u,className:"px-4 py-2 rounded-lg font-medium transition-colors ".concat("success"===s?"bg-green-500 hover:bg-green-600 text-white":"bg-red-500 hover:bg-red-600 text-white"),children:"OK"})})]})})},y=e=>{let{name:t,label:r,type:s="text",required:a=!1,hint:l,placeholder:o,value:i,onChange:d,onBlur:x,isError:u,options:g=[],theme:h}=e;const p="w-full px-3 sm:px-4 py-2 sm:py-3 border-2 rounded-lg transition-all duration-300 text-sm\n        focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 focus:outline-none ".concat(u?"border-red-300 bg-red-50 focus:border-red-500 focus:ring-red-500/20":"dark"===h?"border-gray-600 bg-gray-700 text-white hover:border-gray-500":"border-gray-200 bg-white hover:border-gray-300");return(0,m.jsxs)("div",{className:"group relative",children:[(0,m.jsxs)("label",{className:"block text-xs sm:text-sm font-semibold mb-2 flex items-center ".concat("dark"===h?"text-gray-200":"text-gray-800"),children:[r,a&&(0,m.jsx)("span",{className:"text-red-500 ml-1 text-sm",children:"*"})]}),l&&(0,m.jsx)("p",{className:"text-xs mb-2 ".concat("dark"===h?"text-gray-400":"text-gray-500"),children:l}),"select"===s?(0,m.jsxs)("div",{className:"relative",children:[(0,m.jsxs)("select",{name:t,value:i||"",onChange:d,onBlur:x,className:"".concat(p," appearance-none"),required:a,children:[(0,m.jsxs)("option",{value:"",children:["Choose ",r]}),g.map(e=>(0,m.jsx)("option",{value:e,children:e},e))]}),(0,m.jsx)("div",{className:"absolute right-3 sm:right-4 top-1/2 transform -translate-y-1/2 pointer-events-none",children:(0,m.jsx)(n.Vr3,{className:"w-4 h-4 sm:w-5 sm:h-5 ".concat("text-gray-400")})})]}):(0,m.jsx)("input",{type:s,name:t,value:i||"",onChange:d,onBlur:x,className:p,placeholder:o||"Enter ".concat(r.toLowerCase(),"..."),required:a}),u&&(0,m.jsxs)("div",{className:"mt-1 sm:mt-2 flex items-center space-x-2 text-red-600",children:[(0,m.jsx)(c.tr_,{className:"w-3 h-3 sm:w-4 sm:h-4 flex-shrink-0"}),(0,m.jsx)("p",{className:"text-xs sm:text-sm font-medium",children:u})]})]},t)},f=e=>{let{value:t,onChange:r,theme:s,error:l,disabled:i}=e;const[d,x]=(0,a.useState)(!1),[p,y]=(0,a.useState)(""),[f,b]=(0,a.useState)([]),[v,j]=(0,a.useState)(!1),[w,N]=(0,a.useState)(!0),[k,C]=(0,a.useState)(0),[A,S]=(0,a.useState)(!1),E=(0,a.useRef)(!1),T=(0,a.useRef)(null),I=h(()=>x(!1),[T]),P=(0,a.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(E.current||e>0&&!w&&!p)){E.current=!0,j(!0);try{var r,s;console.log("[API CALL - ProjectDropdown] Fetching projects: Page ".concat(e,", Size ").concat(10));const a=await o.yE.get("employee/".concat(e,"/").concat(10,"/projectId/asc/projects"));console.log("[API SUCCESS - ProjectDropdown] Projects fetched for page ".concat(e,":"),a.data);const l=(null===(r=a.data)||void 0===r?void 0:r.content)||[],n=Array.isArray(l)?l:[];b(e=>t?[...e,...n]:n),C(e),!0===(null===(s=a.data)||void 0===s?void 0:s.last)||n.length<10?(N(!1),S(!0)):N(!0)}catch(l){var a;console.error("[API ERROR - ProjectDropdown] Error fetching projects:",(null===(a=l.response)||void 0===a?void 0:a.data)||l.message),t||b([]),N(!1)}finally{j(!1),E.current=!1}}},[w,p]),M=(0,a.useCallback)(e=>{const{scrollTop:t,scrollHeight:r,clientHeight:s}=e.target;r-t<=s+50&&(!w||v||E.current||p||P(k+1,!0))},[k,w,v,P,p]);(0,a.useEffect)(()=>{!d||0!==f.length||v||p||P(0,!1)},[d,P,f.length,v,p]),(0,a.useEffect)(()=>{d||(y(""),b([]),S(!1),N(!0),C(0))},[d]);const L=(Array.isArray(f)?f:[]).filter(e=>{var t,r;return(null===(t=e.title)||void 0===t?void 0:t.toLowerCase().includes(p.toLowerCase()))||(null===(r=e.projectId)||void 0===r?void 0:r.toLowerCase().includes(p.toLowerCase()))});return(0,m.jsxs)("div",{className:"relative",ref:I,children:[(0,m.jsxs)("div",{onClick:()=>{i||x(!d)},className:"w-full px-3 sm:px-4 py-2 sm:py-3 border-2 rounded-lg transition-all duration-300 cursor-pointer flex items-center justify-between text-sm\n                    focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 focus:outline-none ".concat(l?"border-red-300 bg-red-50":"dark"===s?"border-gray-600 bg-gray-700 text-white hover:border-gray-500":"border-gray-200 bg-white hover:border-gray-300"," ").concat(i?"opacity-50":""),children:[(0,m.jsx)("span",{className:t?"":"dark"===s?"text-gray-400":"text-gray-500",children:t?t.label:"Select project..."}),(0,m.jsx)(n.Vr3,{className:"w-4 h-4 transition-transform ".concat(d?"rotate-180":""," ").concat("dark"===s?"text-gray-400":"text-gray-500")})]}),l&&(0,m.jsx)("p",{className:"text-red-500 text-xs mt-1",children:l}),(0,m.jsx)(u.N,{children:d&&!i&&(0,m.jsxs)(g.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute top-full left-0 right-0 mt-2 border rounded-lg shadow-lg z-50 ".concat("dark"===s?"bg-gray-700 border-gray-600":"bg-white border-gray-200"),children:[(0,m.jsx)("div",{className:"p-2 border-b border-gray-200 dark:border-gray-600",children:(0,m.jsxs)("div",{className:"relative",children:[(0,m.jsx)(n.KSO,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,m.jsx)("input",{type:"text",placeholder:"Search projects...",value:p,onChange:e=>y(e.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg text-sm ".concat("dark"===s?"bg-gray-800 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500")})]})}),(0,m.jsxs)("div",{className:"max-h-60 overflow-y-auto",ref:T,onScroll:M,children:[L.length>0?L.map(e=>{const a=(null===t||void 0===t?void 0:t.value)===e.projectId;return(0,m.jsxs)("div",{onClick:()=>(e=>{r({value:e.projectId,label:"".concat(e.projectId,"(").concat(e.title,")")}),x(!1)})(e),className:"p-3 cursor-pointer flex items-center justify-between ".concat(a?"bg-blue-50 dark:bg-blue-900/50":"hover:".concat("dark"===s?"bg-gray-600":"bg-gray-50")),children:[(0,m.jsxs)("div",{className:"dark"===s?"text-white":"text-gray-900",children:[(0,m.jsxs)("div",{className:"font-medium text-sm",children:[e.projectId,"(",e.title,")"]}),(0,m.jsxs)("div",{className:"text-xs ".concat("dark"===s?"text-gray-400":"text-gray-500"),children:["Client: ",e.client," \u2022 Status: ",e.projectStatus]})]}),a&&(0,m.jsx)(c.G3G,{className:"w-5 h-5 text-blue-500"})]},e.projectId)}):p?(0,m.jsxs)("div",{className:"p-4 text-center text-sm ".concat("dark"===s?"text-gray-500":"text-gray-400"),children:['No projects matching "',p,'"']}):v&&0===f.length?(0,m.jsx)("div",{className:"p-4 text-center text-sm ".concat("dark"===s?"text-gray-400":"text-gray-500"),children:"Loading projects..."}):(0,m.jsx)("div",{className:"p-4 text-center text-sm ".concat("dark"===s?"text-gray-500":"text-gray-400"),children:"No projects found."}),v&&f.length>0&&(0,m.jsx)("div",{className:"p-2 text-center text-sm ".concat("dark"===s?"text-gray-400":"text-gray-500"),children:"Loading more projects..."})]}),A&&f.length>0&&(0,m.jsx)("div",{className:"p-2 border-t text-center text-xs font-medium ".concat("dark"===s?"text-gray-500 border-gray-600":"text-gray-400 border-gray-200"),children:"\ud83c\udfaf All projects loaded"})]})})]})},b=e=>{let{employeeRoles:t,onSelectionChange:r,onRoleChange:l,theme:c,error:i,disabled:d,placeholder:x}=e;const[p,y]=(0,a.useState)(!1),[f,b]=(0,a.useState)(""),[v,j]=(0,a.useState)([]),[w,N]=(0,a.useState)(!1),[k,C]=(0,a.useState)(!0),[A,S]=(0,a.useState)(0),[E,T]=(0,a.useState)(!1),I=(0,a.useRef)(!1),P=(0,a.useRef)(null),M=(0,a.useRef)([]),L=h(()=>y(!1),[P,...M.current]),R=(0,a.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(I.current||e>0&&!k)){I.current=!0,N(!0),t||(j([]),C(!0),T(!1));try{console.log("[API CALL - EmployeeMultiSelectRoleDropdown] Fetching employees: Page ".concat(e,", Size ").concat(6));const r=await o.yE.get("employee/".concat(e,"/").concat(6,"/employeeId/asc/employees"));console.log("[API SUCCESS - EmployeeMultiSelectRoleDropdown] Employees fetched for page ".concat(e,":"),r.data);const s=r.data||{},a=s.content||[],l=Array.isArray(a)?a:[];j(e=>t?[...e,...l]:l),S(e),!0===s.last||l.length<6?(C(!1),T(!0)):C(!0)}catch(i){var r;console.error("[API ERROR - EmployeeMultiSelectRoleDropdown] Error fetching employees:",(null===(r=i.response)||void 0===r?void 0:r.data)||i.message),C(!1)}finally{N(!1),I.current=!1}}},[k]),_=(0,a.useCallback)(e=>{const{scrollTop:t,scrollHeight:r,clientHeight:s}=e.target;r>s&&r-t<=s+50&&(!k||w||I.current||f||R(A+1,!0))},[A,k,w,f,R]);(0,a.useEffect)(()=>{!p||0!==v.length||w||f||R(0,!1)},[p,R,v.length,w,f]),(0,a.useEffect)(()=>{p||(b(""),j([]),S(0),T(!1),C(!0))},[p]);const O=Array.isArray(v)?v:[],D=O.filter(e=>{var t;const r=e.displayName||e.firstName+" "+e.lastName;return(null===r||void 0===r?void 0:r.toLowerCase().includes(f.toLowerCase()))||(null===(t=e.employeeId)||void 0===t?void 0:t.toLowerCase().includes(f.toLowerCase()))}),F=Object.keys(t).map(e=>{const r=O.find(t=>t.employeeId===e);return r?(0,s.A)((0,s.A)({},r),{},{role:t[e]}):null}).filter(e=>null!==e);return(0,m.jsxs)("div",{className:"relative",ref:L,children:[(0,m.jsxs)("div",{onClick:()=>{d||y(!p)},className:"w-full px-3 sm:px-4 py-2 sm:py-3 border-2 rounded-lg transition-all duration-300 cursor-pointer flex items-center justify-between text-sm min-h-[46px]\n                    focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 focus:outline-none ".concat(i?"border-red-300 bg-red-50":"dark"===c?"border-gray-600 bg-gray-700 text-white hover:border-gray-500":"border-gray-200 bg-white hover:border-gray-300"," ").concat(d?"opacity-50":""),children:[(0,m.jsx)("div",{className:"flex-1 min-w-0 pr-2 overflow-hidden",children:0===F.length?(0,m.jsx)("span",{className:"dark"===c?"text-gray-400":"text-gray-500",children:x||"Select team members..."}):(0,m.jsx)("div",{className:"flex flex-wrap gap-1",children:F.map(e=>{const t=e.displayName||e.firstName+" "+e.lastName;return(0,m.jsxs)("div",{className:"text-xs font-semibold px-2 sm:px-2.5 py-1 rounded-full ".concat("dark"===c?"bg-blue-900 text-blue-300":"bg-blue-100 text-blue-800"),children:[t," (",e.role||"No Role",")"]},e.employeeId)})})}),(0,m.jsx)(n.Vr3,{className:"w-4 h-4 transition-transform flex-shrink-0 ".concat(p?"rotate-180":""," ").concat("dark"===c?"text-gray-400":"text-gray-500")})]}),i&&(0,m.jsx)("p",{className:"text-red-500 text-xs mt-1",children:i}),(0,m.jsx)(u.N,{children:p&&!d&&(0,m.jsxs)(g.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute top-full left-0 right-0 mt-2 border rounded-lg shadow-lg z-50 ".concat("dark"===c?"bg-gray-700 border-gray-600":"bg-white border-gray-200"),children:[(0,m.jsx)("div",{className:"p-2 border-b border-gray-200 dark:border-gray-600",children:(0,m.jsxs)("div",{className:"relative",children:[(0,m.jsx)(n.KSO,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,m.jsx)("input",{type:"text",placeholder:"Search employees...",value:f,onChange:e=>b(e.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg text-sm ".concat("dark"===c?"bg-gray-800 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500")})]})}),(0,m.jsxs)("div",{className:"max-h-80 overflow-y-auto",ref:P,onScroll:_,children:[D.length>0?D.map((e,s)=>{const a=t.hasOwnProperty(e.employeeId),o=e.displayName||e.firstName+" "+e.lastName;return(0,m.jsx)("div",{className:"p-3 border-b cursor-pointer ".concat("dark"===c?"border-gray-600":"border-gray-100"," ").concat(a?"bg-blue-50 dark:bg-blue-900/50":"hover:".concat("dark"===c?"bg-gray-600":"bg-gray-50")),children:(0,m.jsxs)("div",{className:"flex items-start",children:[(0,m.jsx)("input",{type:"checkbox",checked:a,onChange:()=>{return t=e.employeeId,void r(t);var t},className:"mt-1 mr-3 h-4 w-4 text-blue-600 rounded focus:ring-blue-500 flex-shrink-0"}),(0,m.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,m.jsx)("div",{className:"font-medium text-sm ".concat("dark"===c?"text-white":"text-gray-900"),children:o}),(0,m.jsx)("div",{className:"text-xs ".concat("dark"===c?"text-gray-400":"text-gray-500"),children:e.employeeId}),a&&(0,m.jsx)("div",{className:"mt-2",onClick:e=>e.stopPropagation(),children:(0,m.jsx)("input",{type:"text",value:t[e.employeeId]||"",onChange:t=>{return r=e.employeeId,s=t.target.value,void l(r,s);var r,s},placeholder:"Enter role (e.g., Backend, Lead, QA)",className:"w-full px-3 py-1.5 text-sm border rounded-lg\n                                                                    ".concat("dark"===c?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800","\n                                                                    focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none")})})]})]})},e.employeeId)}):f?(0,m.jsxs)("div",{className:"p-4 text-center text-sm ".concat("dark"===c?"text-gray-500":"text-gray-400"),children:['No employees matching "',f,'" in loaded list.']}):w&&0===v.length?(0,m.jsx)("div",{className:"p-4 text-center text-sm ".concat("dark"===c?"text-gray-400":"text-gray-500"),children:"Loading employees..."}):(0,m.jsx)("div",{className:"p-4 text-center text-sm ".concat("dark"===c?"text-gray-500":"text-gray-400"),children:"No employees found."}),w&&v.length>0&&(0,m.jsx)("div",{className:"p-2 text-center text-sm ".concat("dark"===c?"text-gray-400":"text-gray-500"),children:"Loading more employees..."})]}),E&&v.length>0&&(0,m.jsxs)("div",{className:"p-2 border-t text-center text-xs font-medium ".concat("dark"===c?"text-gray-500 border-gray-600":"text-gray-400 border-gray-200"),children:["\ud83d\udc65 All ",v.length," employees loaded"]})]})})]})},v=()=>(0,m.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,m.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 sm:h-32 sm:w-32 border-t-2 border-b-2 border-blue-500"})}),j=e=>{let{message:t}=e;return(0,m.jsxs)("div",{className:"text-center p-6 sm:p-8 bg-red-100 text-red-700 rounded-lg",children:[(0,m.jsx)("h3",{className:"font-bold text-base sm:text-lg",children:"Oops! Something went wrong."}),(0,m.jsx)("p",{className:"text-sm sm:text-base",children:t})]})},w=()=>{const[e,t]=(0,a.useState)([]),[r,i]=(0,a.useState)(!0),[u,g]=(0,a.useState)(null),[h,w]=(0,a.useState)(!1),[N,k]=(0,a.useState)(!1),[C,A]=(0,a.useState)(null),[S,E]=(0,a.useState)(new Set),[T,I]=(0,a.useState)(""),[P,M]=(0,a.useState)(null),[L,R]=(0,a.useState)(!1),[_,O]=(0,a.useState)("MY_TEAMS"),[D,F]=(0,a.useState)([]),[z,Y]=(0,a.useState)(""),[X,U]=(0,a.useState)({}),[G,q]=(0,a.useState)(null),[B,H]=(0,a.useState)(!1),[Q,V]=(0,a.useState)({}),[J,K]=(0,a.useState)({isOpen:!1,type:"",title:"",message:""}),{userData:W,theme:Z}=(0,a.useContext)(d.ob),$=(null===W||void 0===W||W.roles,(0,l.zy)()),ee=new URLSearchParams($.search),te="true"===ee.get("fromContextMenu"),re=ee.get("targetEmployeeId"),se=te&&re?re:null===W||void 0===W?void 0:W.employeeId,ae=null!==W&&void 0!==W&&W.roles[0]?"ROLE_".concat(W.roles[0]):null,le=(e,t,r)=>{K({isOpen:!0,type:e,title:t,message:r})},oe=async()=>{try{if(i(!0),!se)return void g("Employee ID not found. Please login again.");console.log("[API CALL - fetchTeams] Fetching teams for employee: ".concat(se));const e=await o.yE.get("employee/team/".concat(se));console.log("[API SUCCESS - fetchTeams] Teams fetched:",e.data);const r=Array.isArray(e.data)?e.data:[e.data];t(r||[]),g(null)}catch(r){var e;console.error("[API ERROR - fetchTeams] Error fetching teams:",(null===(e=r.response)||void 0===e?void 0:e.data)||r.message),g("Could not fetch teams data for employee ".concat(se,"."))}finally{i(!1)}},ne=async()=>{if(!P||!P.includes("MY_TEAM_ADMIN_FETCHING_ALLTEAMS"))return F([]),void i(!1);i(!0),F([]);try{console.log("[API CALL - fetchAdminAllTeams] Fetching all teams for admin view.");const e=(await o.yE.get("employee/0/19/teamId/asc/teams")).data.content;F(e),console.log("Admin Fetched Teams (ALL_TEAMS view) \u2705",e),g(null)}catch(u){var e;console.error("[API ERROR - fetchAdminAllTeams] Error From Admin Fetching All Teams \u274c",(null===(e=u.response)||void 0===e?void 0:e.data)||u.message),F([]),g("Failed to load all teams directory.")}finally{i(!1)}};(0,a.useEffect)(()=>{if(ae){let e=async()=>{try{var e;console.log("[API CALL - fetchForPermissionArray] Fetching role access for role: ".concat(ae));let t=await o.ZQ.get("role-access/".concat(ae));console.log("[API SUCCESS - fetchForPermissionArray] Role permissions fetched:",t.data),M(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.permissions)}catch(u){var t;console.error("[API ERROR - fetchForPermissionArray] Error from Fetching Error matching Objects:",(null===(t=u.response)||void 0===t?void 0:t.data)||u.message)}};e()}},[ae]),(0,a.useEffect)(()=>{"MY_TEAMS"===_?oe():"ALL_TEAMS"===_&&ne()},[_,se,P]);const ce="MY_TEAMS"===_?e:D,ie=e=>{U(t=>{const r=(0,s.A)({},t);return r.hasOwnProperty(e)?delete r[e]:r[e]="",r})},de=(e,t)=>{U(r=>(0,s.A)((0,s.A)({},r),{},{[e]:t}))},me=async e=>{if(e.preventDefault(),!(()=>{const e={};z.trim()||(e.teamName="Team Name is required.");const t=Object.keys(X);0===t.length?e.teamMembers="At least one Team Member is required.":t.some(e=>{var t;return!(null!==(t=X[e])&&void 0!==t&&t.trim())})&&(e.teamMembers="All selected members must have a role.");return G||(e.selectedProject="Project selection is required."),V(e),0===Object.keys(e).length})())return;H(!0),V({});const t={teamName:z,teamDescription:"Default Description",projectId:null===G||void 0===G?void 0:G.value,employeeRoles:X};try{console.log("[API CALL - handleCreateTeam] Creating new team with data (JSON format):",t),console.log("--- API Payload JSON START ---"),console.log(JSON.stringify(t,null,2)),console.log("--- API Payload JSON END ---");const e=await o.yE.post("employee/team",t);console.log("[API SUCCESS - handleCreateTeam] Team created successfully. Response:",e.data),"MY_TEAMS"===_?await oe():await ne(),w(!1),Y(""),U({}),q(null),le("success","Team Created Successfully!","The new team has been created successfully.")}catch(l){var r,s,a;console.error("[API ERROR - handleCreateTeam] Failed to create team:",(null===(r=l.response)||void 0===r?void 0:r.data)||l.message),V({general:(null===(s=l.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||"Failed to create team. Please check the data and try again."})}finally{H(!1)}},xe=()=>{w(!1),Y(""),U({}),q(null),V({})},ue=P&&P.includes("MY_TEAM_ADMIN_FETCHING_ALLTEAMS");return(0,m.jsxs)("div",{className:"relative flex min-h-screen ".concat("dark"===Z?"bg-gray-900":"bg-gray-50"),children:[ue&&!L&&(0,m.jsx)("button",{onClick:()=>R(!0),className:"fixed right-0 top-1/2 -translate-y-1/2 p-2 rounded-l-lg bg-indigo-600 text-white shadow-lg z-50 hover:bg-indigo-700 transition-colors","aria-label":"Open Navigation Sidebar",title:"Open Navigation",children:(0,m.jsx)(n._Jj,{size:24})}),(0,m.jsx)("div",{className:"flex-1 transition-all duration-300 ".concat(L?"lg:mr-60":"mr-0"),children:(0,m.jsxs)("div",{className:"px-0 sm:px-4 md:px-6 lg:px-8 py-4 sm:py-6 md:py-8",children:[te&&re&&(0,m.jsxs)("div",{className:"mb-4 sm:mb-6 p-3 sm:p-4 mx-4 sm:mx-0 rounded-none sm:rounded-xl border-l-4 border-blue-500 shadow-md flex items-center space-x-3 ".concat("dark"===Z?"bg-blue-900/20 text-blue-300":"bg-blue-50 text-blue-800"),children:[(0,m.jsx)(n.Ny1,{className:"flex-shrink-0"}),(0,m.jsxs)("p",{className:"font-semibold text-sm sm:text-base break-words",children:["\ud83d\udd0d Viewing teams for employee: ",(0,m.jsx)("span",{className:"font-mono",children:re})]})]}),(0,m.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-4 sm:mb-6 gap-4 mx-4 sm:mx-0",children:[(0,m.jsxs)("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold flex items-center ".concat("dark"===Z?"text-white":"text-gray-800"),children:[(0,m.jsx)(n.YXz,{className:"mr-2 sm:mr-3 text-blue-500"}),"MY_TEAMS"===_?"My Teams":te?"Employee Teams":"All Teams"]}),(0,m.jsxs)("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3 sm:gap-4 w-full md:w-auto",children:[(0,m.jsxs)("div",{className:"relative w-full sm:w-64",children:[(0,m.jsx)("input",{type:"text",placeholder:"Search by team name...",value:T,onChange:e=>I(e.target.value),className:"w-full pl-8 sm:pl-10 pr-4 py-2 border-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/30 transition-colors text-sm ".concat("dark"===Z?"bg-gray-800 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-800 placeholder-gray-500")}),(0,m.jsx)(n.KSO,{className:"absolute left-2 sm:left-3 top-1/2 -translate-y-1/2 w-3 h-3 sm:w-4 sm:h-4 ".concat("dark"===Z?"text-gray-400":"text-gray-500")})]}),(null===P||void 0===P?void 0:P.includes("MY_TEAM_CREATE_TEAM"))&&!te&&(0,m.jsxs)("button",{onClick:()=>w(!0),className:"w-full sm:w-auto bg-black text-white px-4 sm:px-5 py-2 rounded-lg font-semibold hover:bg-gray-800 transition-colors flex items-center justify-center shadow-md text-sm",children:[(0,m.jsx)(n.OiG,{className:"mr-2"})," Create Team"]})]})]}),(()=>{const e="MY_TEAMS"===_,t=e?"My Teams":"All Teams";if(r)return(0,m.jsx)(v,{});if(u&&e)return(0,m.jsx)(j,{message:u});const s=(Array.isArray(ce)?ce:[]).filter(e=>e.teamName&&e.teamName.toLowerCase().includes(T.toLowerCase()));return 0===s.length?(0,m.jsxs)("div",{className:"text-center py-12 sm:py-16 px-4",children:[(0,m.jsx)("div",{className:"w-16 h-16 sm:w-20 sm:h-20 rounded-full flex items-center justify-center mx-auto mb-4 ".concat("dark"===Z?"bg-gray-700":"bg-gray-100"),children:(0,m.jsx)(n.YXz,{className:"w-8 h-8 sm:w-10 sm:h-10 ".concat("text-gray-400")})}),(0,m.jsx)("h2",{className:"text-lg sm:text-xl font-bold mb-2 ".concat("dark"===Z?"text-white":"text-gray-800"),children:T?'No Teams Found matching "'.concat(T,'"'):"".concat(t," Not Available")}),(0,m.jsx)("p",{className:"text-sm sm:text-base mb-4 max-w-md mx-auto ".concat("dark"===Z?"text-gray-300":"text-gray-600"),children:e?"You are not part of any teams yet. Ask your manager to add you.":"No teams are currently listed in the directory or unable to fetch directory data."})]}):(0,m.jsx)(m.Fragment,{children:(0,m.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 mx-4 sm:mx-0",children:s.map((e,t)=>{var r,s,a;const o=e.teamId||t,c=(e=>S.has(e))(o),i=null===(r=e.employees)||void 0===r?void 0:r.find(e=>"TEAM_LEAD"===e.jobTitlePrimary||"MANAGER"===e.jobTitlePrimary),d=(null===(s=e.employees)||void 0===s?void 0:s.filter(e=>e!==i))||[],x=c?d:d.slice(0,4),u=d.length>4,g=i?[i,...x]:x;return(0,m.jsxs)("div",{className:"rounded-none sm:rounded-lg shadow-lg overflow-hidden border transition-shadow duration-300 flex flex-col ".concat("dark"===Z?"bg-gray-800 border-gray-700 hover:shadow-blue-500/20":"bg-white border-gray-200 hover:shadow-xl"),children:[(0,m.jsx)("div",{className:"p-4 sm:p-5",children:(0,m.jsxs)("div",{className:"flex justify-between items-start",children:[(0,m.jsx)("div",{className:"flex-1 min-w-0",children:(0,m.jsx)("h2",{className:"text-lg sm:text-xl font-bold break-words ".concat("dark"===Z?"text-white":"text-gray-900"),children:e.teamName})}),(0,m.jsxs)("div",{className:"flex space-x-2 flex-shrink-0",children:[(0,m.jsx)(l.N_,{to:"/teams/".concat(o),title:"View Details",className:"p-2 text-gray-500 hover:text-blue-500 transition-colors",children:(0,m.jsx)(n.Ny1,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),(null===P||void 0===P?void 0:P.includes("MY_TEAM_DELETE_TEAM"))&&!te&&(0,m.jsx)("button",{onClick:()=>(e=>{A(e),k(!0)})(e),title:"Delete Team",className:"p-2 text-gray-500 hover:text-red-500 transition-colors",children:(0,m.jsx)(n.qbC,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]})]})}),(0,m.jsxs)("div",{className:"px-4 sm:px-5 py-3 sm:py-4 border-t mt-auto ".concat("dark"===Z?"bg-gray-800/50 border-gray-700":"bg-gray-50 border-gray-200"),children:[(0,m.jsxs)("h3",{className:"font-semibold mb-2 text-sm sm:text-base ".concat("dark"===Z?"text-gray-300":"text-gray-700"),children:["Members (",(null===(a=e.employees)||void 0===a?void 0:a.length)||0,")"]}),(0,m.jsxs)("div",{className:"space-y-2",children:[(0,m.jsx)("div",{className:"flex flex-wrap gap-1 sm:gap-2",children:null===g||void 0===g?void 0:g.map(e=>{const t=e.displayName||e.firstName+" "+e.lastName,r=e.employeeId===se,s="TEAM_LEAD"===e.jobTitlePrimary||"MANAGER"===e.jobTitlePrimary;let a;return a=r?"dark"===Z?"bg-green-900 text-green-300":"bg-green-100 text-green-800":s?"dark"===Z?"bg-indigo-900 text-indigo-300":"bg-indigo-100 text-indigo-800":"dark"===Z?"bg-blue-900 text-blue-300":"bg-blue-100 text-blue-800",(0,m.jsxs)("span",{className:"text-xs font-semibold px-2 sm:px-2.5 py-1 rounded-full break-words ".concat(a),children:[t,r&&" (You)",s&&!r&&" (".concat(e.jobTitlePrimary,")")]},e.employeeId)})}),u&&(0,m.jsx)("button",{onClick:()=>(e=>{const t=new Set(S);t.has(e)?t.delete(e):t.add(e),E(t)})(o),className:"flex items-center space-x-1 text-xs sm:text-sm text-blue-600 hover:text-blue-800 font-medium transition-colors",children:c?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(n.Ucs,{className:"w-3 h-3"}),(0,m.jsx)("span",{children:"Show Less"})]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(n.Vr3,{className:"w-3 h-3"}),(0,m.jsxs)("span",{children:["+",d.length-4," more"]})]})})]})]})]},o)})})})})(),h?(0,m.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-[200] p-2 sm:p-4",children:(0,m.jsxs)("div",{className:"flex flex-col rounded-2xl sm:rounded-3xl w-full max-w-sm sm:max-w-md lg:max-w-2xl max-h-[95vh] overflow-hidden shadow-2xl",children:[(0,m.jsx)("div",{className:"px-4 sm:px-6 md:px-8 py-4 sm:py-6 bg-gradient-to-r from-blue-500 to-indigo-700 text-white relative",children:(0,m.jsxs)("div",{className:"flex items-center justify-between",children:[(0,m.jsxs)("div",{className:"flex items-center space-x-3 sm:space-x-4 min-w-0 flex-1",children:[(0,m.jsx)("div",{className:"p-2 sm:p-3 bg-white/20 rounded-lg sm:rounded-xl flex-shrink-0",children:(0,m.jsx)(n.YXz,{className:"w-6 h-6 sm:w-8 sm:h-8"})}),(0,m.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,m.jsx)("h2",{className:"text-lg sm:text-xl md:text-2xl font-bold break-words",children:"Create New Team"}),(0,m.jsx)("p",{className:"text-white/90 text-xs sm:text-sm break-words",children:"Organize employees into a new team and define their roles."})]})]}),(0,m.jsx)("button",{onClick:xe,className:"p-2 sm:p-3 hover:bg-white/20 rounded-full transition-all group flex-shrink-0",children:(0,m.jsx)(n.QCr,{className:"w-5 h-5 sm:w-6 sm:h-6 group-hover:rotate-90 transition-transform"})})]})}),(0,m.jsx)("div",{className:"overflow-y-auto flex-grow ".concat("dark"===Z?"bg-gray-800":"bg-white"),children:(0,m.jsxs)("form",{className:"p-4 sm:p-6 md:p-8",onSubmit:me,children:[(0,m.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:gap-6",children:[(0,m.jsx)("div",{children:(0,m.jsx)(y,{name:"teamName",label:"Team Name",type:"text",required:!0,placeholder:"e.g., Development Team",value:z,onChange:e=>Y(e.target.value),isError:Q.teamName,theme:Z})}),(0,m.jsxs)("div",{children:[(0,m.jsxs)("label",{className:"block text-xs sm:text-sm font-semibold mb-2 ".concat("dark"===Z?"text-gray-200":"text-gray-800"),children:["Project ",(0,m.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,m.jsx)(f,{value:G,onChange:q,theme:Z,error:Q.selectedProject})]}),(0,m.jsxs)("div",{children:[(0,m.jsxs)("label",{className:"block text-xs sm:text-sm font-semibold mb-2 sm:mb-3 ".concat("dark"===Z?"text-gray-200":"text-gray-800"),children:["Team Members ",(0,m.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,m.jsx)(b,{employeeRoles:X,onSelectionChange:ie,onRoleChange:de,theme:Z,error:Q.teamMembers})]})]}),Q.general&&(0,m.jsx)("div",{className:"mt-4 sm:mt-6 p-3 sm:p-4 border-l-4 border-red-400 rounded-r-lg ".concat("dark"===Z?"bg-red-900/20":"bg-red-50"),children:(0,m.jsxs)("div",{className:"flex items-center",children:[(0,m.jsx)(c.tr_,{className:"w-4 h-4 sm:w-5 sm:h-5 text-red-400 mr-3 flex-shrink-0"}),(0,m.jsx)("p",{className:"font-medium text-sm ".concat("dark"===Z?"text-red-300":"text-red-800"),children:Q.general})]})})]})}),(0,m.jsxs)("div",{className:"px-4 sm:px-6 md:px-8 py-4 sm:py-6 border-t flex flex-col sm:flex-row justify-end space-y-3 sm:space-y-0 sm:space-x-4 ".concat("dark"===Z?"bg-gray-700 border-gray-600":"bg-gray-50 border-gray-200"),children:[(0,m.jsx)("button",{type:"button",onClick:xe,className:"w-full sm:w-auto px-6 sm:px-8 py-2 sm:py-3 border-2 rounded-lg font-semibold transition-all text-sm ".concat("dark"===Z?"border-gray-600 text-gray-300 hover:bg-gray-600":"border-gray-300 text-gray-700 hover:bg-gray-100"),children:"Cancel"}),(0,m.jsx)("button",{type:"button",onClick:me,disabled:B,className:"w-full sm:w-auto px-8 sm:px-10 py-2 sm:py-3 bg-gradient-to-r from-blue-600 to-indigo-700 text-white font-bold rounded-lg\n                                hover:shadow-lg transform hover:scale-105 transition-all flex items-center justify-center space-x-2 text-sm\n                                ".concat(B?"cursor-not-allowed opacity-75":""),children:B?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"h-4 w-4 sm:h-5 sm:w-5 border-4 border-white border-t-transparent rounded-full animate-spin"}),(0,m.jsx)("span",{children:"Creating..."})]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(c.G3G,{className:"w-4 h-4 sm:w-5 sm:h-5"}),(0,m.jsx)("span",{children:"Create Team"})]})})]})]})}):null,(0,m.jsx)(x,{isOpen:N,onClose:()=>k(!1),onConfirm:async()=>{if(C){H(!0);try{console.log("[API CALL - confirmDelete] Deleting team with ID: ".concat(C.teamId)),await o.yE.delete("employee/".concat(C.teamId,"/team")),console.log("[API SUCCESS - confirmDelete] Team deleted successfully."),"MY_TEAMS"===_?t(e.filter(e=>e.teamId!==C.teamId)):"ALL_TEAMS"===_&&F(D.filter(e=>e.teamId!==C.teamId)),k(!1),A(null),le("success","Team Deleted Successfully!","The team has been deleted successfully.")}catch(s){var r;console.error("[API ERROR - confirmDelete] Failed to delete team:",(null===(r=s.response)||void 0===r?void 0:r.data)||s.message),le("error","Delete Failed","Failed to delete team. Please try again.")}finally{H(!1)}}},title:"Delete Team",message:'Are you sure you want to delete the team "'.concat(null===C||void 0===C?void 0:C.teamName,'"? This action cannot be undone.'),confirmText:"Delete",isConfirming:B})]})}),ue&&(0,m.jsxs)("aside",{className:"fixed top-16 right-0 h-[calc(100vh-4rem)] border-l transition-all duration-300 z-50 flex flex-col ".concat(L?"w-60 translate-x-0":"w-0 translate-x-full"," ").concat("dark"===Z?"bg-gray-800 border-gray-700":"bg-white border-gray-200"),children:[L&&(0,m.jsx)("button",{onClick:()=>R(!1),className:"absolute -left-12 top-1/2 transform -translate-y-1/2 p-2 rounded-full bg-indigo-600 text-white shadow-lg hover:bg-indigo-700 transition-colors z-50 hidden md:block","aria-label":"Close Navigation Sidebar",title:"Close Navigation",children:(0,m.jsx)(n.X6T,{size:24})}),(0,m.jsxs)("div",{className:"p-4 flex items-center justify-between border-b border-gray-200 dark:border-gray-700",children:[(0,m.jsx)("h3",{className:"text-lg font-bold ".concat("dark"===Z?"text-white":"text-gray-800"),children:"Navigation"}),(0,m.jsx)("button",{onClick:()=>R(!1),className:"p-1 rounded-full ".concat("dark"===Z?"text-gray-400 hover:text-white hover:bg-gray-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),title:"Close Sidebar",children:(0,m.jsx)(n.QCr,{size:18})})]}),(0,m.jsxs)("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[(0,m.jsxs)("button",{onClick:()=>{O("MY_TEAMS"),R(!1)},className:"w-full text-left py-2 px-3 rounded-lg font-medium flex items-center transition-colors ".concat("MY_TEAMS"===_?"bg-blue-600 text-white":"dark"===Z?"text-gray-300 hover:bg-gray-700 hover:text-white":"text-gray-700 hover:bg-gray-200"),children:[(0,m.jsx)(n.YXz,{className:"mr-2",size:16}),"My Teams"]}),(0,m.jsxs)("button",{onClick:()=>{O("ALL_TEAMS"),R(!1),ne()},className:"w-full text-left py-2 px-3 rounded-lg font-medium flex items-center transition-colors ".concat("ALL_TEAMS"===_?"bg-blue-600 text-white":"dark"===Z?"text-gray-300 hover:bg-gray-700 hover:text-white":"text-gray-700 hover:bg-gray-200"),children:[(0,m.jsx)(n.YXz,{className:"mr-2",size:16}),"All Teams"]})]})]}),L&&(0,m.jsx)("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>R(!1)}),(0,m.jsx)(p,{isOpen:J.isOpen,onClose:()=>{K({isOpen:!1,type:"",title:"",message:""})},type:J.type,title:J.title,message:J.message,theme:Z})]})}},9570:(e,t,r)=>{r.d(t,{N:()=>j});var s=r(579),a=r(5043),l=r(2190),o=r(4930),n=r(293),c=r(9379),i=r(9674),d=r(8676),m=r(1051);function x(e,t){if("function"===typeof e)return e(t);null!==e&&void 0!==e&&(e.current=t)}function u(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return a.useCallback(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>{let r=!1;const s=t.map(t=>{const s=x(t,e);return r||"function"!==typeof s||(r=!0),s});if(r)return()=>{for(let e=0;e<s.length;e++){const r=s[e];"function"===typeof r?r():x(t[e],null)}}}}(...t),t)}class g extends a.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=t.offsetParent,r=(0,d.s)(e)&&e.offsetWidth||0,s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft,s.right=r-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function h(e){let{children:t,isPresent:r,anchorX:l,root:o}=e;const n=(0,a.useId)(),c=(0,a.useRef)(null),i=(0,a.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:d}=(0,a.useContext)(m.Q),x=u(c,null===t||void 0===t?void 0:t.ref);return(0,a.useInsertionEffect)(()=>{const{width:e,height:t,top:s,left:a,right:m}=i.current;if(r||!c.current||!e||!t)return;const x="left"===l?"left: ".concat(a):"right: ".concat(m);c.current.dataset.motionPopId=n;const u=document.createElement("style");d&&(u.nonce=d);const g=null!==o&&void 0!==o?o:document.head;return g.appendChild(u),u.sheet&&u.sheet.insertRule('\n          [data-motion-pop-id="'.concat(n,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            ").concat(x,"px !important;\n            top: ").concat(s,"px !important;\n          }\n        ")),()=>{g.contains(u)&&g.removeChild(u)}},[r]),(0,s.jsx)(g,{isPresent:r,childRef:c,sizeRef:i,children:a.cloneElement(t,{ref:x})})}const p=e=>{let{children:t,initial:r,isPresent:l,onExitComplete:n,custom:d,presenceAffectsLayout:m,mode:x,anchorX:u,root:g}=e;const p=(0,o.M)(y),f=(0,a.useId)();let b=!0,v=(0,a.useMemo)(()=>(b=!1,{id:f,initial:r,isPresent:l,custom:d,onExitComplete:e=>{p.set(e,!0);for(const t of p.values())if(!t)return;n&&n()},register:e=>(p.set(e,!1),()=>p.delete(e))}),[l,p,n]);return m&&b&&(v=(0,c.A)({},v)),(0,a.useMemo)(()=>{p.forEach((e,t)=>p.set(t,!1))},[l]),a.useEffect(()=>{!l&&!p.size&&n&&n()},[l]),"popLayout"===x&&(t=(0,s.jsx)(h,{isPresent:l,anchorX:u,root:g,children:t})),(0,s.jsx)(i.t.Provider,{value:v,children:t})};function y(){return new Map}var f=r(8917);const b=e=>e.key||"";function v(e){const t=[];return a.Children.forEach(e,e=>{(0,a.isValidElement)(e)&&t.push(e)}),t}const j=e=>{let{children:t,custom:r,initial:c=!0,onExitComplete:i,presenceAffectsLayout:d=!0,mode:m="sync",propagate:x=!1,anchorX:u="left",root:g}=e;const[h,y]=(0,f.xQ)(x),j=(0,a.useMemo)(()=>v(t),[t]),w=x&&!h?[]:j.map(b),N=(0,a.useRef)(!0),k=(0,a.useRef)(j),C=(0,o.M)(()=>new Map),[A,S]=(0,a.useState)(j),[E,T]=(0,a.useState)(j);(0,n.E)(()=>{N.current=!1,k.current=j;for(let e=0;e<E.length;e++){const t=b(E[e]);w.includes(t)?C.delete(t):!0!==C.get(t)&&C.set(t,!1)}},[E,w.length,w.join("-")]);const I=[];if(j!==A){let e=[...j];for(let t=0;t<E.length;t++){const r=E[t],s=b(r);w.includes(s)||(e.splice(t,0,r),I.push(r))}return"wait"===m&&I.length&&(e=I),T(v(e)),S(j),null}const{forceRender:P}=(0,a.useContext)(l.L);return(0,s.jsx)(s.Fragment,{children:E.map(e=>{const t=b(e),a=!(x&&!h)&&(j===E||w.includes(t));return(0,s.jsx)(p,{isPresent:a,initial:!(N.current&&!c)&&void 0,custom:r,presenceAffectsLayout:d,mode:m,root:g,onExitComplete:a?void 0:()=>{if(!C.has(t))return;C.set(t,!0);let e=!0;C.forEach(t=>{t||(e=!1)}),e&&(null===P||void 0===P||P(),T(k.current),x&&(null===y||void 0===y||y()),i&&i())},anchorX:u,children:e},t)})})}}}]);
//# sourceMappingURL=676.1e057349.chunk.js.map