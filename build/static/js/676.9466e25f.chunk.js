"use strict";(self.webpackChunktechlife=self.webpackChunktechlife||[]).push([[676],{7676:(e,t,s)=>{s.r(t),s.d(t,{default:()=>j});var r=s(5043),a=s(3721),l=s(2397),o=s(184),n=s(5394),i=s(614),d=s(9910),c=s(579);const m=e=>{let{isOpen:t,onClose:s,onConfirm:a,title:l,message:n,confirmText:i="Confirm",isConfirming:m}=e;const{theme:x}=(0,r.useContext)(d.ob);return t?(0,c.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-[250] p-2 sm:p-4",children:(0,c.jsxs)("div",{className:"rounded-xl sm:rounded-2xl w-full max-w-sm sm:max-w-md shadow-xl flex flex-col "+("dark"===x?"bg-gray-800 text-white":"bg-white"),children:[(0,c.jsxs)("div",{className:"p-4 sm:p-6 flex justify-between items-center border-b",style:{borderColor:"dark"===x?"#4b5563":"#e5e7eb"},children:[(0,c.jsxs)("h3",{className:"text-lg sm:text-xl font-bold flex items-center min-w-0 flex-1",children:[(0,c.jsx)(o.BS8,{className:"text-yellow-400 mr-2 sm:mr-3 w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0"}),(0,c.jsx)("span",{className:"break-words",children:l})]}),(0,c.jsx)("button",{onClick:s,className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition-colors flex-shrink-0 ml-2",children:(0,c.jsx)(o.QCr,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]}),(0,c.jsx)("div",{className:"p-4 sm:p-6",children:(0,c.jsx)("p",{className:"text-sm sm:text-base break-words "+("dark"===x?"text-gray-300":"text-gray-600"),children:n})}),(0,c.jsxs)("div",{className:"p-3 sm:p-4 flex flex-col sm:flex-row justify-end space-y-3 sm:space-y-0 sm:space-x-4 border-t "+("dark"===x?"bg-gray-700/50 border-gray-700":"bg-gray-50 border-gray-200"),children:[(0,c.jsx)("button",{onClick:s,className:"w-full sm:w-auto px-4 sm:px-6 py-2 rounded-lg font-semibold transition-colors text-sm "+("dark"===x?"bg-gray-600 hover:bg-gray-500 text-gray-200":"bg-gray-200 hover:bg-gray-300 text-gray-700"),children:"Cancel"}),(0,c.jsx)("button",{onClick:a,disabled:m,className:"w-full sm:w-auto px-4 sm:px-6 py-2 rounded-lg font-semibold text-white transition-colors flex items-center justify-center text-sm\n                                    "+(m?"bg-red-400 cursor-not-allowed":"bg-red-600 hover:bg-red-700"),children:m?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"h-3 w-3 sm:h-4 sm:w-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),(0,c.jsx)("span",{children:"Deleting..."})]}):(0,c.jsx)("span",{children:i})})]})]})}):null};var x=s(3546),g=s(5440);const u=e=>{let{isOpen:t,onClose:s,type:a,title:l,message:n,theme:d}=e;const[m,x]=(0,r.useState)(!1);(0,r.useEffect)(()=>{if(t&&(x(!0),"success"===a||"error"===a)){const e=setTimeout(()=>{g()},3e3);return()=>clearTimeout(e)}},[t,a]);const g=()=>{x(!1),setTimeout(()=>s(),300)};if(!t)return null;return(0,c.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex justify-center items-center z-[200] transition-opacity duration-300 "+(m?"opacity-100":"opacity-0"),children:(0,c.jsxs)("div",{className:`p-6 rounded-3xl shadow-2xl w-full max-w-md m-4 border transform transition-all duration-300 ${m?"scale-100 translate-y-0":"scale-95 translate-y-4"} ${"dark"===d?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[(0,c.jsxs)("div",{className:"flex items-center mb-4",children:[(()=>{switch(a){case"success":return(0,c.jsx)(o.A7C,{className:"w-6 h-6 text-green-500"});case"error":return(0,c.jsx)(o.BS8,{className:"w-6 h-6 text-red-500"});case"info":return(0,c.jsx)(o.__w,{className:"w-6 h-6 text-blue-500"});default:return null}})(),(0,c.jsx)("h3",{className:`text-xl font-bold ml-3 ${(()=>{switch(a){case"success":return"text-green-600 dark:text-green-400";case"error":return"text-red-600 dark:text-red-400";case"info":return"text-blue-600 dark:text-blue-400";default:return"dark"===d?"text-white":"text-gray-800"}})()}`,children:l}),"success"!==a&&"error"!==a&&(0,c.jsx)("button",{onClick:g,className:"ml-auto p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:(0,c.jsx)(i.A,{size:20})})]}),(0,c.jsx)("p",{className:""+("dark"===d?"text-gray-300":"text-gray-600"),children:n}),("success"===a||"error"===a)&&(0,c.jsx)("div",{className:"mt-4 flex justify-end",children:(0,c.jsx)("button",{onClick:g,className:"px-4 py-2 rounded-lg font-medium transition-colors "+("success"===a?"bg-green-500 hover:bg-green-600 text-white":"bg-red-500 hover:bg-red-600 text-white"),children:"OK"})})]})})},h=e=>{let{name:t,label:s,type:r="text",required:a=!1,hint:l,placeholder:i,value:d,onChange:m,onBlur:x,isError:g,options:u=[],theme:h}=e;const y="w-full px-3 sm:px-4 py-2 sm:py-3 border-2 rounded-lg transition-all duration-300 text-sm\n        focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 focus:outline-none "+(g?"border-red-300 bg-red-50 focus:border-red-500 focus:ring-red-500/20":"dark"===h?"border-gray-600 bg-gray-700 text-white hover:border-gray-500":"border-gray-200 bg-white hover:border-gray-300");return(0,c.jsxs)("div",{className:"group relative",children:[(0,c.jsxs)("label",{className:"block text-xs sm:text-sm font-semibold mb-2 flex items-center "+("dark"===h?"text-gray-200":"text-gray-800"),children:[s,a&&(0,c.jsx)("span",{className:"text-red-500 ml-1 text-sm",children:"*"})]}),l&&(0,c.jsx)("p",{className:"text-xs mb-2 "+("dark"===h?"text-gray-400":"text-gray-500"),children:l}),"select"===r?(0,c.jsxs)("div",{className:"relative",children:[(0,c.jsxs)("select",{name:t,value:d||"",onChange:m,onBlur:x,className:`${y} appearance-none`,required:a,children:[(0,c.jsxs)("option",{value:"",children:["Choose ",s]}),u.map(e=>(0,c.jsx)("option",{value:e,children:e},e))]}),(0,c.jsx)("div",{className:"absolute right-3 sm:right-4 top-1/2 transform -translate-y-1/2 pointer-events-none",children:(0,c.jsx)(o.Vr3,{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-400"})})]}):(0,c.jsx)("input",{type:r,name:t,value:d||"",onChange:m,onBlur:x,className:y,placeholder:i||`Enter ${s.toLowerCase()}...`,required:a}),g&&(0,c.jsxs)("div",{className:"mt-1 sm:mt-2 flex items-center space-x-2 text-red-600",children:[(0,c.jsx)(n.tr_,{className:"w-3 h-3 sm:w-4 sm:h-4 flex-shrink-0"}),(0,c.jsx)("p",{className:"text-xs sm:text-sm font-medium",children:g})]})]},t)},y=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const s=(0,r.useRef)(null);return(0,r.useEffect)(()=>{const r=r=>{const a=t.some(e=>e.current&&e.current.contains(r.target));!s.current||s.current.contains(r.target)||a||e(r)};return document.addEventListener("mousedown",r),()=>{document.removeEventListener("mousedown",r)}},[e,t]),s},b=e=>{let{value:t,onChange:s,theme:a,error:i,disabled:d}=e;const[m,u]=(0,r.useState)(!1),[h,b]=(0,r.useState)(""),[p,f]=(0,r.useState)([]),[v,j]=(0,r.useState)(!1),[N,w]=(0,r.useState)(!0),[k,C]=(0,r.useState)(0),[A,S]=(0,r.useState)(1),[E,T]=(0,r.useState)(!1),I=(0,r.useRef)(!1),L=(0,r.useRef)(null),M=y(()=>u(!1),[L]),P=(0,r.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(I.current||e>0&&!N&&!h)){I.current=!0,j(!0);try{var s,r,a;console.log(`[API CALL - ProjectDropdown] Fetching projects: Page ${e}, Size 10`);const o=await l.yE.get(`employee/${e}/10/projectId/asc/projects`);console.log(`[API SUCCESS - ProjectDropdown] Projects fetched for page ${e}:`,o.data);const n=(null===(s=o.data)||void 0===s?void 0:s.content)||[],i=Array.isArray(n)?n:[];f(e=>t?[...e,...i]:i),C(e),S((null===(r=o.data)||void 0===r?void 0:r.totalPages)||1),!0===(null===(a=o.data)||void 0===a?void 0:a.last)||i.length<10?(w(!1),T(!0)):w(!0)}catch(i){var o;console.error("[API ERROR - ProjectDropdown] Error fetching projects:",(null===(o=i.response)||void 0===o?void 0:o.data)||i.message),t||(f([]),S(1)),w(!1)}finally{j(!1),I.current=!1}}},[N,h]),$=(0,r.useCallback)(e=>{const{scrollTop:t,scrollHeight:s,clientHeight:r}=e.target;s-t<=r+50&&(!N||v||I.current||h||P(k+1,!0))},[k,N,v,P,h]);(0,r.useEffect)(()=>{!m||0!==p.length||v||h||P(0,!1)},[m,P,p.length,v,h]),(0,r.useEffect)(()=>{m||(b(""),f([]),T(!1))},[m]);const R=(Array.isArray(p)?p:[]).filter(e=>{var t,s;return(null===(t=e.title)||void 0===t?void 0:t.toLowerCase().includes(h.toLowerCase()))||(null===(s=e.projectId)||void 0===s?void 0:s.toLowerCase().includes(h.toLowerCase()))});return(0,c.jsxs)("div",{className:"relative",ref:M,children:[(0,c.jsxs)("div",{onClick:()=>{d||u(!m)},className:`w-full px-3 sm:px-4 py-2 sm:py-3 border-2 rounded-lg transition-all duration-300 cursor-pointer flex items-center justify-between text-sm \n                    focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 focus:outline-none ${i?"border-red-300 bg-red-50":"dark"===a?"border-gray-600 bg-gray-700 text-white hover:border-gray-500":"border-gray-200 bg-white hover:border-gray-300"} ${d?"opacity-50":""}`,children:[(0,c.jsx)("span",{className:t?"":"dark"===a?"text-gray-400":"text-gray-500",children:t?t.label:"Select project..."}),(0,c.jsx)(o.Vr3,{className:`w-4 h-4 transition-transform ${m?"rotate-180":""} ${"dark"===a?"text-gray-400":"text-gray-500"}`})]}),i&&(0,c.jsx)("p",{className:"text-red-500 text-xs mt-1",children:i}),(0,c.jsx)(x.N,{children:m&&!d&&(0,c.jsxs)(g.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute top-full left-0 right-0 mt-2 border rounded-lg shadow-lg z-50 "+("dark"===a?"bg-gray-700 border-gray-600":"bg-white border-gray-200"),children:[(0,c.jsx)("div",{className:"p-2 border-b border-gray-200 dark:border-gray-600",children:(0,c.jsxs)("div",{className:"relative",children:[(0,c.jsx)(o.KSO,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,c.jsx)("input",{type:"text",placeholder:"Search projects...",value:h,onChange:e=>b(e.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg text-sm "+("dark"===a?"bg-gray-800 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500")})]})}),(0,c.jsxs)("div",{className:"max-h-60 overflow-y-auto",ref:L,onScroll:$,children:[R.length>0?R.map(e=>{const r=(null===t||void 0===t?void 0:t.value)===e.projectId;return(0,c.jsxs)("div",{onClick:()=>(e=>{s({value:e.projectId,label:`${e.projectId}(${e.title})`}),u(!1)})(e),className:"p-3 cursor-pointer flex items-center justify-between "+(r?"bg-blue-50 dark:bg-blue-900/50":"hover:"+("dark"===a?"bg-gray-600":"bg-gray-50")),children:[(0,c.jsxs)("div",{className:"dark"===a?"text-white":"text-gray-900",children:[(0,c.jsxs)("div",{className:"font-medium text-sm",children:[e.projectId,"(",e.title,")"]}),(0,c.jsxs)("div",{className:"text-xs "+("dark"===a?"text-gray-400":"text-gray-500"),children:["Client: ",e.client," \u2022 Status: ",e.projectStatus]})]}),r&&(0,c.jsx)(n.G3G,{className:"w-5 h-5 text-blue-500"})]},e.projectId)}):h?(0,c.jsxs)("div",{className:"p-4 text-center text-sm "+("dark"===a?"text-gray-500":"text-gray-400"),children:['No projects matching "',h,'"']}):v&&0===p.length?(0,c.jsx)("div",{className:"p-4 text-center text-sm "+("dark"===a?"text-gray-400":"text-gray-500"),children:"Loading projects..."}):(0,c.jsx)("div",{className:"p-4 text-center text-sm "+("dark"===a?"text-gray-500":"text-gray-400"),children:"No projects found."}),v&&p.length>0&&(0,c.jsx)("div",{className:"p-2 text-center text-sm "+("dark"===a?"text-gray-400":"text-gray-500"),children:"Loading more projects..."})]}),E&&p.length>0&&(0,c.jsx)("div",{className:"p-2 border-t text-center text-xs font-medium "+("dark"===a?"text-gray-500 border-gray-600":"text-gray-400 border-gray-200"),children:"\ud83c\udfaf All projects loaded"})]})})]})},p=e=>{let{value:t,onChange:s,theme:a,error:i,disabled:d,isMulti:m=!1,placeholder:u}=e;const[h,b]=(0,r.useState)(!1),[p,f]=(0,r.useState)(""),[v,j]=(0,r.useState)([]),[N,w]=(0,r.useState)(!1),[k,C]=(0,r.useState)(!0),[A,S]=(0,r.useState)(0),[E,T]=(0,r.useState)(1),[I,L]=(0,r.useState)(!1),M=(0,r.useRef)(!1),P=(0,r.useRef)(null),$=y(()=>b(!1),[P]),R=(0,r.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(M.current||e>0&&!k&&!p)){M.current=!0,w(!0);try{console.log(`[API CALL - EmployeeDropdown] Fetching employees: Page ${e}, Size 15`);const s=await l.yE.get(`employee/${e}/15/employeeId/asc/employees`);console.log(`[API SUCCESS - EmployeeDropdown] Employees fetched for page ${e}:`,s.data);const r=s.data||{},a=r.content||[],o=Array.isArray(a)?a:[];j(e=>t?[...e,...o]:o),S(e),T(r.totalPages||1),!0===r.last||o.length<15?(C(!1),L(!0)):C(!0)}catch(i){var s;console.error("[API ERROR - EmployeeDropdown] Error fetching employees:",(null===(s=i.response)||void 0===s?void 0:s.data)||i.message),t||(j([]),T(1)),C(!1)}finally{w(!1),M.current=!1}}},[k,p]),D=(0,r.useCallback)(e=>{const{scrollTop:t,scrollHeight:s,clientHeight:r}=e.target;s-t<=r+50&&(!k||N||M.current||p||R(A+1,!0))},[A,k,N,R,p]);(0,r.useEffect)(()=>{!h||0!==v.length||N||p||R(0,!1)},[h,R,v.length,N,p]),(0,r.useEffect)(()=>{h||(f(""),j([]),L(!1))},[h]);const _=(Array.isArray(v)?v:[]).filter(e=>{var t;const s=e.displayName||e.firstName+" "+e.lastName;return(null===s||void 0===s?void 0:s.toLowerCase().includes(p.toLowerCase()))||(null===(t=e.employeeId)||void 0===t?void 0:t.toLowerCase().includes(p.toLowerCase()))});return(0,c.jsxs)("div",{className:"relative",ref:$,children:[(0,c.jsxs)("div",{onClick:()=>{d||b(!h)},className:`w-full px-3 sm:px-4 py-2 sm:py-3 border-2 rounded-lg transition-all duration-300 cursor-pointer flex items-center justify-between text-sm \n                    focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 focus:outline-none ${i?"border-red-300 bg-red-50":"dark"===a?"border-gray-600 bg-gray-700 text-white hover:border-gray-500":"border-gray-200 bg-white hover:border-gray-300"} ${d?"opacity-50":""}`,children:[(0,c.jsx)("div",{className:"flex-1",children:(()=>{const e=u||(m?"Select team members...":"Select a team lead...");if(m){const s=Array.isArray(t)?t:[];return 0===s.length?(0,c.jsx)("span",{className:"dark"===a?"text-gray-400":"text-gray-500",children:e}):(0,c.jsx)("div",{className:"flex flex-wrap gap-1",children:s.map(e=>(0,c.jsx)("div",{className:"text-xs font-semibold px-2 sm:px-2.5 py-1 rounded-full "+("dark"===a?"bg-blue-900 text-blue-300":"bg-blue-100 text-blue-800"),children:e.label},e.value))})}return t?(0,c.jsx)("span",{children:t.label}):(0,c.jsx)("span",{className:"dark"===a?"text-gray-400":"text-gray-500",children:e})})()}),(0,c.jsx)(o.Vr3,{className:`w-4 h-4 transition-transform ${h?"rotate-180":""} ${"dark"===a?"text-gray-400":"text-gray-500"}`})]}),i&&(0,c.jsx)("p",{className:"text-red-500 text-xs mt-1",children:i}),(0,c.jsx)(x.N,{children:h&&!d&&(0,c.jsxs)(g.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute top-full left-0 right-0 mt-2 border rounded-lg shadow-lg z-50 "+("dark"===a?"bg-gray-700 border-gray-600":"bg-white border-gray-200"),children:[(0,c.jsx)("div",{className:"p-2 border-b border-gray-200 dark:border-gray-600",children:(0,c.jsxs)("div",{className:"relative",children:[(0,c.jsx)(o.KSO,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,c.jsx)("input",{type:"text",placeholder:"Search employees...",value:p,onChange:e=>f(e.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg text-sm "+("dark"===a?"bg-gray-800 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500")})]})}),(0,c.jsxs)("div",{className:"max-h-60 overflow-y-auto",ref:P,onScroll:D,children:[_.length>0?_.map(e=>{const r=m?Array.isArray(t)&&t.some(t=>t.value===e.employeeId):(null===t||void 0===t?void 0:t.value)===e.employeeId,l=e.displayName||e.firstName+" "+e.lastName;return(0,c.jsxs)("div",{onClick:()=>(e=>{const r=`${e.displayName||e.firstName+" "+e.lastName} (${e.employeeId})`;if(m){const a=Array.isArray(t)?t:[],l=a.some(t=>t.value===e.employeeId);s(l?a.filter(t=>t.value!==e.employeeId):[...a,{value:e.employeeId,label:r}])}else s({value:e.employeeId,label:r}),b(!1)})(e),className:"p-3 cursor-pointer flex items-center justify-between "+(r?"bg-blue-50 dark:bg-blue-900/50":"hover:"+("dark"===a?"bg-gray-600":"bg-gray-50")),children:[(0,c.jsxs)("div",{className:"dark"===a?"text-white":"text-gray-900",children:[(0,c.jsx)("div",{className:"font-medium text-sm",children:l}),(0,c.jsx)("div",{className:"text-xs "+("dark"===a?"text-gray-400":"text-gray-500"),children:e.employeeId})]}),r&&(0,c.jsx)(n.G3G,{className:"w-5 h-5 text-blue-500"})]},e.employeeId)}):p?(0,c.jsxs)("div",{className:"p-4 text-center text-sm "+("dark"===a?"text-gray-500":"text-gray-400"),children:['No employees matching "',p,'"']}):N&&0===v.length?(0,c.jsx)("div",{className:"p-4 text-center text-sm "+("dark"===a?"text-gray-400":"text-gray-500"),children:"Loading employees..."}):(0,c.jsx)("div",{className:"p-4 text-center text-sm "+("dark"===a?"text-gray-500":"text-gray-400"),children:"No employees found."}),N&&v.length>0&&(0,c.jsx)("div",{className:"p-2 text-center text-sm "+("dark"===a?"text-gray-400":"text-gray-500"),children:"Loading more employees..."})]}),I&&v.length>0&&(0,c.jsx)("div",{className:"p-2 border-t text-center text-xs font-medium "+("dark"===a?"text-gray-500 border-gray-600":"text-gray-400 border-gray-200"),children:"\ud83d\udc65 All employees loaded"})]})})]})},f=()=>(0,c.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,c.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 sm:h-32 sm:w-32 border-t-2 border-b-2 border-blue-500"})}),v=e=>{let{message:t}=e;return(0,c.jsxs)("div",{className:"text-center p-6 sm:p-8 bg-red-100 text-red-700 rounded-lg",children:[(0,c.jsx)("h3",{className:"font-bold text-base sm:text-lg",children:"Oops! Something went wrong."}),(0,c.jsx)("p",{className:"text-sm sm:text-base",children:t})]})},j=()=>{const[e,t]=(0,r.useState)([]),[s,i]=(0,r.useState)(!0),[x,g]=(0,r.useState)(null),[y,j]=(0,r.useState)(!1),[N,w]=(0,r.useState)(!1),[k,C]=(0,r.useState)(null),[A,S]=(0,r.useState)(new Set),[E,T]=(0,r.useState)(""),[I,L]=(0,r.useState)(null),[M,P]=(0,r.useState)(!1),[$,R]=(0,r.useState)("MY_TEAMS"),[D,_]=(0,r.useState)([]),[F,O]=(0,r.useState)(""),[z,Y]=(0,r.useState)(null),[G,q]=(0,r.useState)([]),[H,U]=(0,r.useState)(null),[B,V]=(0,r.useState)(!1),[X,K]=(0,r.useState)({}),[Q,J]=(0,r.useState)({isOpen:!1,type:"",title:"",message:""}),{userData:Z,theme:W}=(0,r.useContext)(d.ob),ee=(null===Z||void 0===Z?void 0:Z.roles)||[],te=(ee.includes("ADMIN")||ee.includes("HR")||ee.includes("MANAGER"),ee.includes("ADMIN")||ee.includes("HR")),se=(0,a.zy)(),re=new URLSearchParams(se.search),ae="true"===re.get("fromContextMenu"),le=re.get("targetEmployeeId"),oe=ae&&le?le:null===Z||void 0===Z?void 0:Z.employeeId,ne=null!==Z&&void 0!==Z&&Z.roles[0]?`ROLE_${Z.roles[0]}`:null,ie=(e,t,s)=>{J({isOpen:!0,type:e,title:t,message:s})},de=async()=>{try{if(i(!0),!oe)return void g("Employee ID not found. Please login again.");console.log(`[API CALL - fetchTeams] Fetching teams for employee: ${oe}`);const e=await l.yE.get(`employee/team/${oe}`);console.log("[API SUCCESS - fetchTeams] Teams fetched:",e.data);const s=Array.isArray(e.data)?e.data:[e.data];t(s||[]),g(null)}catch(s){var e;console.error("[API ERROR - fetchTeams] Error fetching teams:",(null===(e=s.response)||void 0===e?void 0:e.data)||s.message),g(`Could not fetch teams data for employee ${oe}.`)}finally{i(!1)}},ce=async()=>{if(!I||!I.includes("ADMIN_FETCHING_ALLTEAMS"))return _([]),void i(!1);i(!0),_([]);try{console.log("[API CALL - fetchAdminAllTeams] Fetching all teams for admin view.");const e=(await l.yE.get("employee/0/19/teamId/asc/teams")).data.content;_(e),console.log("Admin Fetched Teams (ALL_TEAMS view) \u2705",e),g(null)}catch(x){var e;console.error("[API ERROR - fetchAdminAllTeams] Error From Admin Fetching All Teams \u274c",(null===(e=x.response)||void 0===e?void 0:e.data)||x.message),_([]),g("Failed to load all teams directory.")}finally{i(!1)}};(0,r.useEffect)(()=>{if(ne){let e=async()=>{try{var e;console.log(`[API CALL - fetchForPermissionArray] Fetching role access for role: ${ne}`);let t=await l.ZQ.get(`role-access/${ne}`);console.log("[API SUCCESS - fetchForPermissionArray] Role permissions fetched:",t.data),L(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.permissions)}catch(x){var t;console.error("[API ERROR - fetchForPermissionArray] Error from Fetching Error matching Objects:",(null===(t=x.response)||void 0===t?void 0:t.data)||x.message)}};e()}},[ne]),(0,r.useEffect)(()=>{"MY_TEAMS"===$?de():"ALL_TEAMS"===$&&ce()},[$,te,oe,I]);const me="MY_TEAMS"===$?e:D,xe=((Array.isArray(me)?me:[]).filter(e=>e.teamName&&e.teamName.toLowerCase().includes(E.toLowerCase())),async e=>{if(e.preventDefault(),!(()=>{const e={};return F.trim()||(e.teamName="Team Name is required."),z||(e.teamLead="Team Lead is required."),0===G.length&&(e.teamMembers="At least one Team Member is required."),H||(e.selectedProject="Project selection is required."),K(e),0===Object.keys(e).length})())return;V(!0),K({});const t={teamName:F,teamDescription:"Default Description",employeeIds:[null===z||void 0===z?void 0:z.value,...G.map(e=>e.value)].filter(Boolean),projectId:null===H||void 0===H?void 0:H.value};try{console.log("[API CALL - handleCreateTeam] Creating new team with data:",t),await l.yE.post("employee/team",t),console.log("[API SUCCESS - handleCreateTeam] Team created successfully."),"MY_TEAMS"===$&&await de(),j(!1),O(""),Y(null),q([]),U(null),ie("success","Team Created Successfully!","The new team has been created successfully.")}catch(o){var s,r,a;console.error("[API ERROR - handleCreateTeam] Failed to create team:",(null===(s=o.response)||void 0===s?void 0:s.data)||o.message),K({general:(null===(r=o.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.message)||"Failed to create team. Please check the data and try again."})}finally{V(!1)}}),ge=I&&I.includes("ADMIN_FETCHING_ALLTEAMS");return(0,c.jsxs)("div",{className:"relative flex min-h-screen "+("dark"===W?"bg-gray-900":"bg-gray-50"),children:[ge&&!M&&(0,c.jsx)("button",{onClick:()=>P(!0),className:"fixed right-0 top-1/2 -translate-y-1/2 p-2 rounded-l-lg bg-indigo-600 text-white shadow-lg z-50 hover:bg-indigo-700 transition-colors","aria-label":"Open Navigation Sidebar",title:"Open Navigation",children:(0,c.jsx)(o._Jj,{size:24})}),(0,c.jsx)("div",{className:"flex-1 transition-all duration-300 "+(M?"lg:mr-60":"mr-0"),children:(0,c.jsxs)("div",{className:"px-0 sm:px-4 md:px-6 lg:px-8 py-4 sm:py-6 md:py-8",children:[ae&&le&&(0,c.jsxs)("div",{className:"mb-4 sm:mb-6 p-3 sm:p-4 mx-4 sm:mx-0 rounded-none sm:rounded-xl border-l-4 border-blue-500 shadow-md flex items-center space-x-3 "+("dark"===W?"bg-blue-900/20 text-blue-300":"bg-blue-50 text-blue-800"),children:[(0,c.jsx)(o.Ny1,{className:"flex-shrink-0"}),(0,c.jsxs)("p",{className:"font-semibold text-sm sm:text-base break-words",children:["\ud83d\udd0d Viewing teams for employee: ",(0,c.jsx)("span",{className:"font-mono",children:le})]})]}),(0,c.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-4 sm:mb-6 gap-4 mx-4 sm:mx-0",children:[(0,c.jsxs)("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold flex items-center "+("dark"===W?"text-white":"text-gray-800"),children:[(0,c.jsx)(o.YXz,{className:"mr-2 sm:mr-3 text-blue-500"}),"MY_TEAMS"===$?"My Teams":ae?"Employee Teams":"All Teams"]}),(0,c.jsxs)("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3 sm:gap-4 w-full md:w-auto",children:[(0,c.jsxs)("div",{className:"relative w-full sm:w-64",children:[(0,c.jsx)("input",{type:"text",placeholder:"Search by team name...",value:E,onChange:e=>T(e.target.value),className:"w-full pl-8 sm:pl-10 pr-4 py-2 border-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/30 transition-colors text-sm "+("dark"===W?"bg-gray-800 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-800 placeholder-gray-500")}),(0,c.jsx)(o.KSO,{className:"absolute left-2 sm:left-3 top-1/2 -translate-y-1/2 w-3 h-3 sm:w-4 sm:h-4 "+("dark"===W?"text-gray-400":"text-gray-500")})]}),(null===I||void 0===I?void 0:I.includes("CREATE_TEAM"))&&!ae&&(0,c.jsxs)("button",{onClick:()=>j(!0),className:"w-full sm:w-auto bg-black text-white px-4 sm:px-5 py-2 rounded-lg font-semibold hover:bg-gray-800 transition-colors flex items-center justify-center shadow-md text-sm",children:[(0,c.jsx)(o.OiG,{className:"mr-2"})," Create Team"]})]})]}),(()=>{const e="MY_TEAMS"===$,t=e?"My Teams":"All Teams";if(s)return(0,c.jsx)(f,{});if(x&&e)return(0,c.jsx)(v,{message:x});const r=(Array.isArray(me)?me:[]).filter(e=>e.teamName&&e.teamName.toLowerCase().includes(E.toLowerCase()));return 0===r.length?(0,c.jsxs)("div",{className:"text-center py-12 sm:py-16 px-4",children:[(0,c.jsx)("div",{className:"w-16 h-16 sm:w-20 sm:h-20 rounded-full flex items-center justify-center mx-auto mb-4 "+("dark"===W?"bg-gray-700":"bg-gray-100"),children:(0,c.jsx)(o.YXz,{className:"w-8 h-8 sm:w-10 sm:h-10 text-gray-400"})}),(0,c.jsx)("h2",{className:"text-lg sm:text-xl font-bold mb-2 "+("dark"===W?"text-white":"text-gray-800"),children:E?`No Teams Found matching "${E}"`:`${t} Not Available`}),(0,c.jsx)("p",{className:"text-sm sm:text-base mb-4 max-w-md mx-auto "+("dark"===W?"text-gray-300":"text-gray-600"),children:e?"You are not part of any teams yet. Ask your manager to add you.":"No teams are currently listed in the directory or unable to fetch directory data."})]}):(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 mx-4 sm:mx-0",children:r.map((e,t)=>{var s,r,l;const n=e.teamId||t,i=(e=>A.has(e))(n),d=null===(s=e.employees)||void 0===s?void 0:s.find(e=>"TEAM_LEAD"===e.jobTitlePrimary||"MANAGER"===e.jobTitlePrimary),m=(null===(r=e.employees)||void 0===r?void 0:r.filter(e=>e!==d))||[],x=i?m:m.slice(0,4),g=m.length>4,u=d?[d,...x]:x;null===d||void 0===d||d.jobTitlePrimary;return(0,c.jsxs)("div",{className:"rounded-none sm:rounded-lg shadow-lg overflow-hidden border transition-shadow duration-300 flex flex-col "+("dark"===W?"bg-gray-800 border-gray-700 hover:shadow-blue-500/20":"bg-white border-gray-200 hover:shadow-xl"),children:[(0,c.jsx)("div",{className:"p-4 sm:p-5",children:(0,c.jsxs)("div",{className:"flex justify-between items-start",children:[(0,c.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,c.jsx)("h2",{className:"text-lg sm:text-xl font-bold break-words "+("dark"===W?"text-white":"text-gray-900"),children:e.teamName}),d&&(0,c.jsxs)("div",{className:"flex items-center text-sm sm:text-md mt-2 "+("dark"===W?"text-gray-300":"text-gray-600"),children:[(0,c.jsx)(o.e7y,{className:"mr-2 text-green-500 flex-shrink-0"}),(0,c.jsxs)("strong",{children:[d.jobTitlePrimary,":"]}),(0,c.jsx)("span",{className:"ml-1 break-words",children:d.displayName||d.firstName+" "+d.lastName})]})]}),(0,c.jsxs)("div",{className:"flex space-x-2 flex-shrink-0",children:[(0,c.jsx)(a.N_,{to:`/teams/${n}`,title:"View Details",className:"p-2 text-gray-500 hover:text-blue-500 transition-colors",children:(0,c.jsx)(o.Ny1,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),(null===I||void 0===I?void 0:I.includes("TEAM_DELETE_BTN"))&&!ae&&(0,c.jsx)("button",{onClick:()=>(e=>{C(e),w(!0)})(e),title:"Delete Team",className:"p-2 text-gray-500 hover:text-red-500 transition-colors",children:(0,c.jsx)(o.qbC,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]})]})}),(0,c.jsxs)("div",{className:"px-4 sm:px-5 py-3 sm:py-4 border-t mt-auto "+("dark"===W?"bg-gray-800/50 border-gray-700":"bg-gray-50 border-gray-200"),children:[(0,c.jsxs)("h3",{className:"font-semibold mb-2 text-sm sm:text-base "+("dark"===W?"text-gray-300":"text-gray-700"),children:["Members (",(null===(l=e.employees)||void 0===l?void 0:l.length)||0,")"]}),(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsx)("div",{className:"flex flex-wrap gap-1 sm:gap-2",children:null===u||void 0===u?void 0:u.map(e=>{const t=e.displayName||e.firstName+" "+e.lastName,s=e.employeeId===oe,r="TEAM_LEAD"===e.jobTitlePrimary||"MANAGER"===e.jobTitlePrimary;let a;return a=s?"dark"===W?"bg-green-900 text-green-300":"bg-green-100 text-green-800":r?"dark"===W?"bg-indigo-900 text-indigo-300":"bg-indigo-100 text-indigo-800":"dark"===W?"bg-blue-900 text-blue-300":"bg-blue-100 text-blue-800",(0,c.jsxs)("span",{className:`text-xs font-semibold px-2 sm:px-2.5 py-1 rounded-full break-words ${a}`,children:[t,s&&" (You)",r&&!s&&` (${e.jobTitlePrimary})`]},e.employeeId)})}),g&&(0,c.jsx)("button",{onClick:()=>(e=>{const t=new Set(A);t.has(e)?t.delete(e):t.add(e),S(t)})(n),className:"flex items-center space-x-1 text-xs sm:text-sm text-blue-600 hover:text-blue-800 font-medium transition-colors",children:i?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{children:"Show Less"}),(0,c.jsx)(o.Ucs,{className:"w-3 h-3"})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("span",{children:["+",m.length-4," more"]}),(0,c.jsx)(o.Vr3,{className:"w-3 h-3"})]})})]})]})]},n)})})})})(),y?(0,c.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-[200] p-2 sm:p-4",children:(0,c.jsxs)("div",{className:"rounded-2xl sm:rounded-3xl w-full max-w-sm sm:max-w-md lg:max-w-2xl max-h-[95vh] overflow-hidden shadow-2xl flex flex-col "+("dark"===W?"bg-gray-800":"bg-white"),children:[(0,c.jsx)("div",{className:"px-4 sm:px-6 md:px-8 py-4 sm:py-6 bg-gradient-to-r from-blue-500 to-indigo-700 text-white relative",children:(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)("div",{className:"flex items-center space-x-3 sm:space-x-4 min-w-0 flex-1",children:[(0,c.jsx)("div",{className:"p-2 sm:p-3 bg-white/20 rounded-lg sm:rounded-xl flex-shrink-0",children:(0,c.jsx)(o.YXz,{className:"w-6 h-6 sm:w-8 sm:h-8"})}),(0,c.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,c.jsx)("h2",{className:"text-lg sm:text-xl md:text-2xl font-bold break-words",children:"Create New Team"}),(0,c.jsx)("p",{className:"text-white/90 text-xs sm:text-sm break-words",children:"Organize employees into a new team."})]})]}),(0,c.jsx)("button",{onClick:()=>{j(!1),O(""),Y(null),q([]),U(null),K({})},className:"p-2 sm:p-3 hover:bg-white/20 rounded-full transition-all group flex-shrink-0",children:(0,c.jsx)(o.QCr,{className:"w-5 h-5 sm:w-6 sm:h-6 group-hover:rotate-90 transition-transform"})})]})}),(0,c.jsx)("div",{className:"overflow-y-auto flex-grow",children:(0,c.jsxs)("form",{className:"p-4 sm:p-6 md:p-8",onSubmit:xe,children:[(0,c.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:gap-6",children:[(0,c.jsx)("div",{children:(0,c.jsx)(h,{name:"teamName",label:"Team Name",type:"text",required:!0,placeholder:"e.g., Development Team",value:F,onChange:e=>O(e.target.value),isError:X.teamName,theme:W})}),(0,c.jsxs)("div",{children:[(0,c.jsxs)("label",{className:"block text-xs sm:text-sm font-semibold mb-2 "+("dark"===W?"text-gray-200":"text-gray-800"),children:["Project ",(0,c.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,c.jsx)(b,{value:H,onChange:U,theme:W,error:X.selectedProject}),X.selectedProject&&(0,c.jsx)("p",{className:"text-red-500 text-xs mt-1",children:X.selectedProject})]}),(0,c.jsxs)("div",{children:[(0,c.jsxs)("label",{className:"block text-xs sm:text-sm font-semibold mb-2 "+("dark"===W?"text-gray-200":"text-gray-800"),children:["Team Lead ",(0,c.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,c.jsx)(p,{value:z,onChange:Y,theme:W,error:X.teamLead,isMulti:!1}),X.teamLead&&(0,c.jsx)("p",{className:"text-red-500 text-xs mt-1",children:X.teamLead})]}),(0,c.jsxs)("div",{children:[(0,c.jsxs)("label",{className:"block text-xs sm:text-sm font-semibold mb-2 "+("dark"===W?"text-gray-200":"text-gray-800"),children:["Team Members ",(0,c.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,c.jsx)(p,{value:G,onChange:q,theme:W,error:X.teamMembers,isMulti:!0}),X.teamMembers&&(0,c.jsx)("p",{className:"text-red-500 text-xs mt-1",children:X.teamMembers})]})]}),X.general&&(0,c.jsx)("div",{className:"mt-4 sm:mt-6 p-3 sm:p-4 border-l-4 border-red-400 rounded-r-lg "+("dark"===W?"bg-red-900/20":"bg-red-50"),children:(0,c.jsxs)("div",{className:"flex items-center",children:[(0,c.jsx)(n.tr_,{className:"w-4 h-4 sm:w-5 sm:h-5 text-red-400 mr-3 flex-shrink-0"}),(0,c.jsx)("p",{className:"font-medium text-sm "+("dark"===W?"text-red-300":"text-red-800"),children:X.general})]})})]})}),(0,c.jsxs)("div",{className:"px-4 sm:px-6 md:px-8 py-4 sm:py-6 border-t flex flex-col sm:flex-row justify-end space-y-3 sm:space-y-0 sm:space-x-4 "+("dark"===W?"bg-gray-700 border-gray-600":"bg-gray-50 border-gray-200"),children:[(0,c.jsx)("button",{type:"button",onClick:()=>{j(!1),O(""),Y(null),q([]),U(null),K({})},className:"w-full sm:w-auto px-6 sm:px-8 py-2 sm:py-3 border-2 rounded-lg font-semibold transition-all text-sm "+("dark"===W?"border-gray-600 text-gray-300 hover:bg-gray-600":"border-gray-300 text-gray-700 hover:bg-gray-100"),children:"Cancel"}),(0,c.jsx)("button",{type:"button",onClick:xe,disabled:B,className:"w-full sm:w-auto px-8 sm:px-10 py-2 sm:py-3 bg-gradient-to-r from-blue-600 to-indigo-700 text-white font-bold rounded-lg\n                                            hover:shadow-lg transform hover:scale-105 transition-all flex items-center justify-center space-x-2 text-sm\n                                            "+(B?"cursor-not-allowed opacity-75":""),children:B?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"h-4 w-4 sm:h-5 sm:w-5 border-4 border-white border-t-transparent rounded-full animate-spin"}),(0,c.jsx)("span",{children:"Creating..."})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.G3G,{className:"w-4 h-4 sm:w-5 sm:h-5"}),(0,c.jsx)("span",{children:"Create Team"})]})})]})]})}):null,(0,c.jsx)(m,{isOpen:N,onClose:()=>w(!1),onConfirm:async()=>{if(k){V(!0);try{console.log(`[API CALL - confirmDelete] Deleting team with ID: ${k.teamId}`),await l.yE.delete(`employee/${k.teamId}/team`),console.log("[API SUCCESS - confirmDelete] Team deleted successfully."),"MY_TEAMS"===$?t(e.filter(e=>e.teamId!==k.teamId)):"ALL_TEAMS"===$&&_(D.filter(e=>e.teamId!==k.teamId)),w(!1),C(null),ie("success","Team Deleted Successfully!","The team has been deleted successfully.")}catch(r){var s;console.error("[API ERROR - confirmDelete] Failed to delete team:",(null===(s=r.response)||void 0===s?void 0:s.data)||r.message),ie("error","Delete Failed","Failed to delete team. Please try again.")}finally{V(!1)}}},title:"Delete Team",message:`Are you sure you want to delete the team "${null===k||void 0===k?void 0:k.teamName}"? This action cannot be undone.`,confirmText:"Delete",isConfirming:B})]})}),ge&&(0,c.jsxs)("aside",{className:`fixed top-16 right-0 h-[calc(100vh-4rem)] border-l transition-all duration-300 z-50 flex flex-col ${M?"w-60 translate-x-0":"w-0 translate-x-full"} ${"dark"===W?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[M&&(0,c.jsx)("button",{onClick:()=>P(!1),className:"absolute -left-12 top-1/2 transform -translate-y-1/2 p-2 rounded-full bg-indigo-600 text-white shadow-lg hover:bg-indigo-700 transition-colors z-50 hidden md:block","aria-label":"Close Navigation Sidebar",title:"Close Navigation",children:(0,c.jsx)(o.X6T,{size:24})}),(0,c.jsxs)("div",{className:"p-4 flex items-center justify-between border-b border-gray-200 dark:border-gray-700",children:[(0,c.jsx)("h3",{className:"text-lg font-bold "+("dark"===W?"text-white":"text-gray-800"),children:"Navigation"}),(0,c.jsx)("button",{onClick:()=>P(!1),className:"p-1 rounded-full "+("dark"===W?"text-gray-400 hover:text-white hover:bg-gray-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),title:"Close Sidebar",children:(0,c.jsx)(o.QCr,{size:18})})]}),(0,c.jsxs)("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[(0,c.jsxs)("button",{onClick:()=>{R("MY_TEAMS"),P(!1)},className:"w-full text-left py-2 px-3 rounded-lg font-medium flex items-center transition-colors "+("MY_TEAMS"===$?"bg-blue-600 text-white":"dark"===W?"text-gray-300 hover:bg-gray-700 hover:text-white":"text-gray-700 hover:bg-gray-200"),children:[(0,c.jsx)(o.YXz,{className:"mr-2",size:16}),"My Teams"]}),(0,c.jsxs)("button",{onClick:()=>{R("ALL_TEAMS"),P(!1),ce()},className:"w-full text-left py-2 px-3 rounded-lg font-medium flex items-center transition-colors "+("ALL_TEAMS"===$?"bg-blue-600 text-white":"dark"===W?"text-gray-300 hover:bg-gray-700 hover:text-white":"text-gray-700 hover:bg-gray-200"),children:[(0,c.jsx)(o.YXz,{className:"mr-2",size:16}),"All Teams"]})]})]}),M&&(0,c.jsx)("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>P(!1)}),(0,c.jsx)(u,{isOpen:Q.isOpen,onClose:()=>{J({isOpen:!1,type:"",title:"",message:""})},type:Q.type,title:Q.title,message:Q.message,theme:W})]})}}}]);
//# sourceMappingURL=676.9466e25f.chunk.js.map