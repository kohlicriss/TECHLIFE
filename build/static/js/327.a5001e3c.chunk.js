/*! For license information please see 327.a5001e3c.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunktechlife=self.webpackChunktechlife||[]).push([[327],{5244:(e,t,r)=>{r.d(t,{A:()=>s});const s=(0,r(7784).A)("ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]])},5708:(e,t,r)=>{r.r(t),r.d(t,{default:()=>m});var s=r(5043),o=r(5244);const a=(0,r(7784).A)("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var l=r(6833),i=r(7719),n=r(184),c=r(5440),d=r(3721),u=r(9910),g=r(579);function h(e){let{onSubmit:t}=e;const{theme:r}=(0,s.useContext)(u.o),o="dark"===r,[a,l]=(0,s.useState)({employeeId:"",ticketId:"",title:"",priority:"Low",description:"",roles:""}),[i,n]=(0,s.useState)(!1);(0,s.useEffect)(()=>{const e=localStorage.getItem("employeeId");if(e){const t=JSON.parse(e);l(e=>({...e,employeeId:t.employeeId||""}))}},[]);const c=e=>l(t=>({...t,[e.target.name]:e.target.value}));return(0,g.jsxs)("div",{className:"relative",children:[(0,g.jsxs)("form",{onSubmit:e=>{e.preventDefault(),console.log("Form Submitted:",a),n(!0),setTimeout(()=>n(!1),3e3),t(a),l(e=>({...e,ticketId:"",title:"",priority:"Low",description:"",roles:""}))},className:"p-8 rounded-2xl shadow-lg space-y-6 border transition "+(o?"bg-gray-900 border-gray-700 text-white":"bg-white border-gray-500 text-black"),children:[(0,g.jsx)("h2",{className:"text-3xl font-bold text-center "+(o?"text-blue-300":"text-blue-700"),children:"Fill the form"}),(0,g.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-1 gap-4",children:(0,g.jsx)("input",{name:"title",placeholder:"Issue Title",value:a.title,onChange:c,required:!0,className:"w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 "+(o?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-black")})}),(0,g.jsxs)("select",{name:"priority",value:a.priority,onChange:c,required:!0,className:"w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 "+(o?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-black"),children:[(0,g.jsx)("option",{value:"Low",children:"Low"}),(0,g.jsx)("option",{value:"Medium",children:"Medium"}),(0,g.jsx)("option",{value:"High",children:"High"})]}),(0,g.jsxs)("select",{name:"roles",value:a.roles,onChange:c,required:!0,className:"w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 "+(o?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-black"),children:[(0,g.jsx)("option",{value:"",children:"Select Role"}),(0,g.jsx)("option",{value:"ROLE_ADMIN",children:"Admin"}),(0,g.jsx)("option",{value:"ROLE_HR",children:"HR"}),(0,g.jsx)("option",{value:"ROLE_MANAGER",children:"Manager"})]}),(0,g.jsx)("textarea",{name:"description",placeholder:"Describe your issue in detail",value:a.description,onChange:c,required:!0,rows:"5",className:"w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 "+(o?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-black")}),(0,g.jsx)("div",{className:"flex justify-center",children:(0,g.jsx)("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg shadow-md transition",children:"Submit Ticket"})})]}),i&&(0,g.jsx)("div",{className:"absolute top-4 right-4 z-50 bg-green-500 text-white px-5 py-3 rounded-lg shadow-md",children:"\u2705 Ticket submitted successfully!"})]})}function x(e){let{userRole:t="employee",ticketId:r,ticketStatus:o}=e;const[a,l]=(0,s.useState)([]),[i,n]=(0,s.useState)(""),c=(0,s.useRef)(null),d=(0,s.useRef)(null),h=(0,s.useRef)(null),x=(0,s.useRef)(null),[b,y]=(0,s.useState)(0),[m,p]=(0,s.useState)(!0),[f,w]=(0,s.useState)(!1),{userData:v,theme:j}=(0,s.useContext)(u.o),k="resolved"===(null===o||void 0===o?void 0:o.toLowerCase()),N=e=>{const t=new Map;return e.forEach(e=>{const r=e.id?String(e.id):`${e.repliedAt}-${e.replyText}`;t.set(r,e)}),Array.from(t.values()).sort((e,t)=>new Date(e.repliedAt)-new Date(t.repliedAt))},S="dark"===j,A=a.reduce((e,t)=>{const r=(e=>{const t=new Date(e),r=new Date,s=new Date;return s.setDate(r.getDate()-1),t.toDateString()===r.toDateString()?"Today":t.toDateString()===s.toDateString()?"Yesterday":t.toLocaleDateString([],{day:"numeric",month:"short",year:"numeric"})})(t.repliedAt);return e[r]||(e[r]=[]),e[r].push(t),e},{}),T=async e=>{const t=localStorage.getItem("accessToken");if(r&&t)try{w(!0);const s=await fetch(`https://hrms.anasolconsultancyservices.com/api/ticket/employee/tickets/${r}/messages?page=${e}&size=20`,{headers:{Authorization:`Bearer ${t}`}});if(!s.ok)throw new Error(`HTTP ${s.status}`);const o=await s.json(),a=Array.isArray(null===o||void 0===o?void 0:o.content)?o.content:[];0===a.length?p(!1):l(e=>N([...a,...e]))}catch(s){console.error("\u274c Fetch error:",s)}finally{w(!1)}},D=e=>{if(!e)return"";return new Date(e.endsWith("Z")?e:e+"Z").toLocaleTimeString("en-IN",{timeZone:"Asia/Kolkata",hour:"2-digit",minute:"2-digit",hour12:!0})},C=()=>{if(!r)return void console.error("\u274c Missing ticketId, cannot open WebSocket");const e=localStorage.getItem("accessToken"),t=new WebSocket(`wss://hrms.anasolconsultancyservices.com/api/ticket/ws?ticketId=${r}?token=${e}`);t.onopen=()=>console.log("\u2705 WebSocket connected"),t.onmessage=e=>{try{const t=JSON.parse(e.data);console.log("\ud83d\udce9 Incoming WS message:",t),t&&t.replyText&&l(e=>N([...e,t]))}catch(t){console.error("\u274c WS parse error:",t,e.data)}},t.onclose=()=>{console.warn("WebSocket closed, reconnecting in 5s..."),setTimeout(C,5e3)},t.onerror=e=>console.error("\u274c WebSocket error:",e),c.current=t},E=async()=>{if(!i.trim()||k)return;const e=localStorage.getItem("accessToken"),s={ticketId:r,replyText:i,repliedBy:t,repliedAt:(new Date).toISOString()};try{await fetch(`https://hrms.anasolconsultancyservices.com/api/ticket/employee/tickets/${r}/messages`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(s)}),l(e=>N([...e,s]))}catch(o){console.error("\u274c Send failed:",o)}finally{n("")}};(0,s.useEffect)(()=>{const e=x.current;if(!e)return;var t;e.scrollHeight-e.scrollTop-e.clientHeight<100&&(null===(t=d.current)||void 0===t||t.scrollIntoView({behavior:"smooth"}))},[a]),(0,s.useEffect)(()=>{var e;null===(e=d.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[a]),(0,s.useEffect)(()=>(y(0),l([]),p(!0),T(0),C(),()=>{c.current&&c.current.close(),clearTimeout(h.current)}),[r]),(0,s.useEffect)(()=>{const e=x.current;if(!e)return;const t=()=>{if(0===e.scrollTop&&m&&!f){const e=b+1;y(e),T(e)}};return e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)},[b,m,f]);const I=(0,s.useRef)(0);return(0,s.useEffect)(()=>{const e=x.current;if(e)if(f)I.current=e.scrollHeight;else{const t=e.scrollHeight-I.current;t>0&&(e.scrollTop=t)}},[a,f]),(0,g.jsxs)("div",{className:"flex flex-col h-[500px] rounded-xl border shadow transition-colors duration-300 "+(S?"bg-gray-900 border-gray-700 text-white":"bg-white border-gray-200 text-black"),children:[(0,g.jsxs)("div",{ref:x,className:"flex-1 overflow-y-auto p-4 space-y-4 transition-colors duration-300 "+(S?"bg-gray-800":"bg-gray-50"),children:[Object.entries(A).map(e=>{let[r,s]=e;return(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{className:"text-center text-xs my-2 "+(S?"text-gray-400":"text-gray-500"),children:r}),s.map((e,r)=>(0,g.jsx)("div",{className:`flex ${e.repliedBy===t?"justify-end":"justify-start"} mb-2`,children:(0,g.jsxs)("div",{className:"px-4 py-2 rounded-lg shadow text-sm break-words "+(e.repliedBy===t?"bg-blue-600 text-white rounded-br-none":S?"bg-gray-700 text-white rounded-bl-none":"bg-gray-200 text-gray-900 rounded-bl-none"),style:{maxWidth:"80%",width:"fit-content"},children:[(0,g.jsx)("p",{className:"whitespace-pre-wrap",children:e.replyText}),(0,g.jsx)("div",{className:"text-right text-xs mt-1 opacity-60",children:e.repliedAt||e.clientTime?D(e.repliedAt||e.clientTime):""})]})},`${e.id||e.repliedAt}-${r}`))]},r)}),(0,g.jsx)("div",{ref:d})]}),(0,g.jsxs)("div",{className:"flex items-center gap-2 p-2 border-t "+(S?"border-gray-700":"border-gray-200"),children:[(0,g.jsx)("input",{type:"text",value:i,onChange:e=>n(e.target.value),onKeyDown:e=>"Enter"===e.key&&E(),placeholder:k?"This ticket is resolved. You cannot send messages.":"Type your message",disabled:k,className:"flex-1 border rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 transition-colors duration-300 "+(k?"bg-gray-200 cursor-not-allowed text-red-500":S?"bg-gray-800 border-gray-600 text-white placeholder-gray-400 focus:ring-blue-400":"bg-white border-gray-300 text-black placeholder-gray-500 focus:ring-blue-400")}),(0,g.jsx)("button",{onClick:E,disabled:k,className:"px-4 py-2 rounded text-white transition "+(k?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"),children:"Send"})]})]})}function b(e){let{tickets:t,onTicketClick:r}=e;const{userData:o,theme:a}=(0,s.useContext)(u.o),l="dark"===a,i=e=>{let t;return t=e?new Date(e+"Z"):new Date,t.toLocaleString("en-IN",{timeZone:"Asia/Kolkata",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0})};return t.length?(0,g.jsx)("div",{className:"space-y-4",children:t.map((e,t)=>(0,g.jsxs)("div",{onClick:()=>r(e),className:"cursor-pointer border rounded-lg p-4 shadow-md hover:shadow-lg transition-all "+(l?"bg-gray-800 border-gray-700 hover:border-blue-400 text-gray-200":"bg-white border-gray-300 hover:border-blue-400 text-gray-900"),children:[(0,g.jsxs)("h3",{className:"text-lg font-semibold mb-2 "+(l?"text-blue-300":"text-blue-700"),children:["TicketID: ",e.ticketId]}),(0,g.jsxs)("p",{children:[(0,g.jsx)("strong",{children:"ID:"})," ",e.employeeId]}),(0,g.jsxs)("p",{children:[(0,g.jsx)("strong",{children:"Title:"})," ",e.title]}),(0,g.jsxs)("p",{children:[(0,g.jsx)("strong",{children:"Submitted:"})," ",i(e.sentAt)]}),(0,g.jsxs)("p",{children:[(0,g.jsx)("strong",{children:"Status:"})," ",e.status]}),(0,g.jsxs)("p",{children:[(0,g.jsx)("strong",{children:"Description:"})," ",e.description]}),(0,g.jsxs)("p",{children:[(0,g.jsx)("strong",{children:"Assigned to:"})," ",e.roles]})]},t))}):(0,g.jsx)("div",{className:"text-center py-6 "+(l?"text-gray-400":"text-gray-500"),children:"No tickets submitted yet."})}var y=r(6213);function m(){const[e,t]=(0,s.useState)("history"),[r,m]=(0,s.useState)([]),[p,f]=(0,s.useState)(null),[w,v]=(0,s.useState)("All"),[j,k]=(0,s.useState)(""),[N,S]=(0,s.useState)(""),[A,T]=(0,s.useState)(""),[D,C]=(0,s.useState)("all"),[E,I]=(0,s.useState)(!1),[L,$]=(0,s.useState)(!1),[R,O]=(0,s.useState)("My Tickets"),[z,H]=(0,s.useState)(!1),M=(0,s.useRef)(0),[F,P]=(0,s.useState)(0),[W,B]=(0,s.useState)(!0),[_,Z]=(0,s.useState)(!1),[U,q]=(0,s.useState)(0),Y=(0,d.Zp)(),{empID:J}=(0,d.g)(),{userData:V,theme:K}=(0,s.useContext)(u.o),G=Array.isArray(null===V||void 0===V?void 0:V.roles)?V.roles[0]:(null===V||void 0===V?void 0:V.roles)||"",Q=G.toUpperCase().startsWith("ROLE_")?G.toUpperCase():"ROLE_"+G.toUpperCase(),X=localStorage.getItem("accessToken"),ee="dark"===K,te=[{tab:"My Tickets",icon:o.A},..."ROLE_EMPLOYEE"!==Q?[{tab:"Assigned Tickets",icon:o.A}]:[]],re={all:"All",resolved:"Resolved"},se={all:(0,g.jsx)(a,{size:20}),resolved:(0,g.jsx)(l.A,{size:20})},oe=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(X&&J&&V&&!_&&W){Z(!0);try{let t;"Assigned Tickets"===R||(t=`https://hrms.anasolconsultancyservices.com/api/ticket/admin/tickets/employee/${J}?page=${e}&size=10`);const r=await y.A.get(t,{headers:{Authorization:`Bearer ${X}`}}),{content:s,totalElements:o}=r.data;m(t=>0===e?s:[...t,...s]),q(o),P(e+1),B(s.length>0)}catch(t){console.error("Error fetching tickets:",t),B(!1)}finally{Z(!1)}}};(0,s.useEffect)(()=>{m([]),P(0),B(!0),oe(0)},[R,J,Q,X,V]),(0,s.useEffect)(()=>{const e=()=>{window.innerHeight+window.scrollY>=document.body.offsetHeight-100&&W&&!_&&oe(F)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[F,W,_]),(0,s.useEffect)(()=>{oe()},[J]);const ae=e=>{J?(O(e),m([]),M.current=0,B(!0),f(null),t("history"),Y("Assigned Tickets"===e?`/tickets/role/${Q}/${J}`:`/tickets/employee/${J}`)):console.error("\u274c empID is undefined, cannot navigate")},le=(()=>{let e=[...r];if(""!==A.trim()){const t=A.toLowerCase();e=e.filter(e=>(e.title||"").toLowerCase().includes(t)||(e.status||"").toLowerCase().includes(t)||(e.priority||"").toLowerCase().includes(t))}if("all"!==D&&(e=e.filter(e=>(e.status||"").toLowerCase()===D)),"All"!==w){const t=new Date;e=e.filter(e=>{const r=new Date(e.sentAt||e.createdAt);if("Today"===w)return r.toDateString()===t.toDateString();if("Last 7 days"===w){const e=new Date;return e.setDate(t.getDate()-7),r>=e&&r<=t}if("Last 30 days"===w){const e=new Date;return e.setDate(t.getDate()-30),r>=e&&r<=t}return!0})}if(j){const t=new Date(j);e=e.filter(e=>new Date(e.sentAt||e.createdAt)>=t)}if(N){const t=new Date(N);t.setHours(23,59,59,999),e=e.filter(e=>new Date(e.sentAt||e.createdAt)<=t)}return e.sort((e,t)=>new Date(t.sentAt||t.createdAt)-new Date(e.sentAt||e.createdAt)),e})(),ie=U,ne=le.filter(e=>"resolved"===(e.status||"").trim().toLowerCase()).length,ce=ie-ne;return(0,g.jsx)("div",{className:"min-h-screen transition-colors duration-300 "+(ee?"bg-gray-900 text-white":"bg-gradient-to-br from-blue-50 via-white to-purple-100 text-gray-900"),children:(0,g.jsxs)("div",{className:"flex flex-row-reverse max-w-7xl mx-auto px-4 py-8 gap-4",children:["ROLE_EMPLOYEE"!==Q&&(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)("aside",{className:`sm:flex flex-col border-l transition-all duration-200 hidden sm:flex sm:sticky sm:top-0 h-full ${ee?"bg-gray-800 border-gray-700 text-gray-200":"bg-white border-gray-200 text-gray-900"} ${E?"w-[60px]":"w-[250px]"}`,children:[(0,g.jsx)("div",{className:"flex justify-start p-1.5 items-center",children:(0,g.jsx)(c.P.button,{onClick:()=>I(!E),className:"text-gray-500 hover:text-gray-700 focus:outline-none p-1.5 rounded-full hover:bg-gray-100",transition:{duration:.3},children:E?(0,g.jsx)(n.QVr,{size:14}):(0,g.jsx)(n.Z0P,{size:14})})}),(0,g.jsx)("nav",{className:"flex-1 space-y-1.5 px-1.5",children:te.map(e=>{let{tab:t,icon:r}=e;return(0,g.jsxs)(c.P.button,{className:`w-full text-left py-2 px-2 rounded-md font-medium flex items-center transition-colors\n                ${R===t?"bg-blue-600 text-white":""+(ee?"text-white hover:bg-gray-700":"text-black hover:bg-gray-200")}\n                ${E?"justify-center":""}`,onClick:()=>ae(t),whileHover:{x:E?0:-3},children:[(0,g.jsx)(r,{size:14,className:E?"":"mr-2"}),!E&&t]},t)})})]})}),(0,g.jsxs)("main",{className:"flex-1 space-y-8",children:[(0,g.jsx)("div",{className:"rounded-xl shadow p-6 border flex flex-col lg:flex-row items-center justify-between gap-6 "+(ee?"bg-gray-800 border-gray-700  text-white":"bg-white border-gray-200 text-gray-900"),children:(0,g.jsxs)("div",{className:"flex flex-col lg:flex-row items-center gap-4 w-full flex-wrap",children:[(0,g.jsx)("label",{className:"text-sm font-medium text-gray-700\n                 "+(ee?"bg-gray-800 border-gray-700  text-white":"bg-white border-gray-200 text-gray-900"),htmlFor:"search",children:"Search"}),(0,g.jsx)("input",{id:"search",type:"text",value:A,onChange:e=>T(e.target.value),placeholder:"Title, status, priority...",className:"border border-gray-300 text-sm rounded-lg p-2.5 w-64 focus:outline-none focus:ring-2 focus:ring-blue-400"}),(0,g.jsx)("label",{className:`text-sm font-medium   ${ee?"bg-gray-800 border-gray-700  text-white":"bg-white border-gray-200 text-gray-900"} `,htmlFor:"date-filter",children:"Filter by Date"}),(0,g.jsxs)("select",{id:"date-filter",className:`border border-gray-300 text-sm rounded-lg p-2.5 w-42 focus:outline-none focus:ring-2 focus:ring-blue-400\n                \n                 ${ee?"bg-gray-800 border-gray-700  text-white":"bg-white border-gray-200 text-gray-900"}\n                `,value:w,onChange:e=>v(e.target.value),children:[(0,g.jsx)("option",{children:"All"}),(0,g.jsx)("option",{children:"Last 30 days"}),(0,g.jsx)("option",{children:"Last 7 days"}),(0,g.jsx)("option",{children:"Today"})]}),(0,g.jsx)("label",{className:"text-sm font-medium text-gray-700 \n                 "+(ee?"bg-gray-800 border-gray-700  text-white":"bg-white border-gray-200 text-gray-900"),htmlFor:"from-date",children:"From"}),(0,g.jsx)("input",{type:"date",id:"from-date",value:j,onChange:e=>k(e.target.value),className:"border text-sm rounded-lg p-2.5 w-44 focus:outline-none focus:ring-2 focus:ring-blue-400\n    "+(ee?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-black")}),(0,g.jsx)("label",{className:"text-sm font-medium text-gray-700\n                 "+(ee?"bg-gray-800 border-gray-700  text-white":"bg-white border-gray-200 text-gray-900"),htmlFor:"to-date",children:"To"}),(0,g.jsx)("input",{type:"date",id:"to-date",value:N,onChange:e=>S(e.target.value),className:"border border-gray-300 text-sm rounded-lg p-2.5 w-44 focus:outline-none focus:ring-2 focus:ring-blue-400"}),(0,g.jsx)("div",{className:"flex gap-2 ml-4",children:Object.keys(se).map(e=>(0,g.jsxs)(c.P.button,{className:"flex items-center gap-1 px-3 py-2 rounded-lg text-sm font-medium transition-colors\n                      "+(D===e?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),onClick:()=>C(e),whileHover:{scale:1.05},children:[se[e],(0,g.jsx)("span",{children:re[e]})]},e))})]})}),(0,g.jsx)("div",{className:"sm:hidden flex gap-2 overflow-x-auto py-2 px-1",children:te.map(e=>{let{tab:t,icon:r}=e;return(0,g.jsxs)(c.P.button,{onClick:()=>ae(t),className:"flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap\n          "+(R===t?"bg-blue-600 text-white":""+(ee?"bg-gray-800 text-white hover:bg-gray-700":"bg-gray-100 text-black hover:bg-gray-200")),whileHover:{scale:1.02},children:[(0,g.jsx)(r,{size:16}),t]},t)})}),(0,g.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6 ",children:[(0,g.jsxs)("div",{className:"flex items-center gap-4 p-6 rounded-2xl shadow-lg border border-blue-200 \n               "+(ee?"bg-gray-800 border-gray-700  text-white":"bg-white border-gray-200 text-gray-900"),children:[(0,g.jsx)("div",{className:"bg-blue-100 text-blue-600 p-4 rounded-full\n                   "+(ee?"bg-gray-800 border-gray-700  text-white":"bg-white border-gray-200 text-gray-900"),children:(0,g.jsx)(o.A,{size:32})}),(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:"text-sm text-gray-500\n                   "+(ee?"bg-gray-800 border-gray-700  text-white":"bg-white border-gray-200 text-gray-900"),children:"Your Tickets"}),(0,g.jsx)("h3",{className:"text-4xl font-bold text-blue-700",children:ie})]})]}),(0,g.jsxs)("div",{className:"flex items-center gap-4 p-6 rounded-2xl shadow-lg border border-emerald-200  "+(ee?"bg-gray-800 border-gray-700  text-white":"bg-white border-gray-200 text-gray-900"),children:[(0,g.jsx)("div",{className:"bg-emerald-100 text-emerald-600 p-4 rounded-full",children:(0,g.jsx)(l.A,{size:32})}),(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:"text-sm text-gray-500",children:"Resolved"}),(0,g.jsx)("h3",{className:"text-4xl font-bold text-emerald-600",children:ne})]})]}),(0,g.jsxs)("div",{className:`flex items-center gap-4 p-6 rounded-2xl shadow-lg border border-red-200 \n               ${ee?"bg-gray-800 border-gray-700  text-white":"bg-white border-gray-200 text-gray-900"} `,children:[(0,g.jsx)("div",{className:"bg-red-100 text-red-600 p-4 rounded-full",children:(0,g.jsx)(i.A,{size:32})}),(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:"text-sm text-gray-500",children:"Unresolved"}),(0,g.jsx)("h3",{className:"text-4xl font-bold text-red-600",children:ce})]})]})]}),"history"===e&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{className:"flex justify-between items-center",children:[(0,g.jsx)("h2",{className:"text-2xl font-bold "+(ee?"text-blue-300":"text-blue-700"),children:"Ticket History"}),(0,g.jsx)("button",{onClick:()=>t("form"),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-full text-xl shadow hover:scale-105 transition",children:"+"})]}),(0,g.jsx)("div",{className:(ee?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-200 text-gray-900")+" p-6 rounded-2xl shadow-lg",children:(0,g.jsx)(b,{tickets:le,onTicketClick:e=>{f(e),t("chat")}})})]}),"form"===e&&(0,g.jsxs)("div",{className:"space-y-4",children:[(0,g.jsxs)("div",{className:"flex justify-between items-center",children:[(0,g.jsx)("h2",{className:"text-2xl font-bold text-blue-700",children:"Raise a Ticket"}),(0,g.jsx)("button",{onClick:()=>t("history"),className:"text-blue-600 hover:text-blue-800 border border-blue-600 hover:border-blue-800 px-4 py-1 rounded-full text-sm shadow",children:"\u2190 Back to History"})]}),(0,g.jsx)("div",{className:" p-6 rounded-2xl shadow-lg border border-gray-200",children:(0,g.jsx)(h,{onSubmit:async e=>{try{let r=Array.isArray(e.roles)?e.roles[0]:e.roles||"";if(!r)return;r=r.toUpperCase().startsWith("ROLE_")?r.toUpperCase():"ROLE_"+r.toUpperCase();const s={...e,status:"OPEN",employeeId:J,roles:r},o=await fetch("https://hrms.anasolconsultancyservices.com/api/ticket/employee/create",{method:"POST",headers:{Authorization:`Bearer ${X}`,"Content-Type":"application/json"},body:JSON.stringify(s)});if(!o.ok)throw new Error(`Failed to create ticket: ${o.status}`);const a=await o.json();m(e=>[a,...e]),q(e=>e+1),t("history")}catch(r){console.error(r),alert("Ticket creation failed.")}}})})]}),"chat"===e&&p&&(0,g.jsxs)("div",{className:"space-y-4",children:[(0,g.jsxs)("div",{className:"flex justify-between items-center",children:[(0,g.jsxs)("h2",{className:"text-2xl font-bold text-blue-700",children:["Chat with Admin (Ticket #",p.employeeId,")"]}),(0,g.jsx)("button",{onClick:()=>t("history"),className:"text-blue-600 hover:text-blue-800 border border-blue-600 hover:border-blue-800 px-4 py-1 rounded-full text-sm shadow",children:"\u2190 Back to History"})]}),(0,g.jsx)("div",{className:" p-6 rounded-2xl shadow-lg border border-gray-200",children:(0,g.jsx)(x,{userRole:"employee",ticketId:p.ticketId,ticketStatus:p.status})})]})]})]})})}},6833:(e,t,r)=>{r.d(t,{A:()=>s});const s=(0,r(7784).A)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},7719:(e,t,r)=>{r.d(t,{A:()=>s});const s=(0,r(7784).A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])}}]);
//# sourceMappingURL=327.a5001e3c.chunk.js.map