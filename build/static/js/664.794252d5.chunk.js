"use strict";(self.webpackChunktechlife=self.webpackChunktechlife||[]).push([[664],{9664:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var r=a(9379),s=a(5043),i=a(5439),l=a(9570),c=a(6446),n=a(7234),o=a(2397),d=a(184),x=a(9581),g=a(4399),m=a(4653),h=a(7589),y=a(579);const u=()=>{const[e,t]=(0,s.useState)(!1),[a,u]=(0,s.useState)("All"),[f,b]=(0,s.useState)(""),[p,v]=(0,s.useState)(!1),[j,N]=(0,s.useState)([]),[k,w]=(0,s.useState)(null),[C,z]=(0,s.useState)(null),P=(0,i.Zp)(),{gdata:A,setGdata:S,markAsRead:H,decrementUnreadCount:T,theme:M,notificationPageNumber:F,setNotificationPageNumber:R,notificationPageSize:D,hasMoreNotifications:L}=(0,s.useContext)(n.ob),[E,U]=(0,s.useState)(!1),O=(0,s.useRef)(null),_=(0,s.useRef)(null),G=(0,s.useRef)(null),K=(0,s.useCallback)(()=>{!E&&L&&(U(!0),R(e=>e+1))},[E,L,R]);(0,s.useEffect)(()=>{const e=O.current;if(!e)return;const t=()=>{const{scrollTop:t,scrollHeight:a,clientHeight:r}=e;t+r>=a-150&&K()};return e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)},[K]),(0,s.useEffect)(()=>{if(E){const e=setTimeout(()=>{U(!1)},100);return()=>clearTimeout(e)}},[A,L,E]);const q=a=>{u(a),v(!1),N([]),e&&t(!1)},I=()=>{v(!0),N([])},Q=()=>{v(!1),N([])},Y=()=>{w(null),z(null),b(""),u("All")},B=e=>({alert:(0,y.jsx)(d._Hm,{size:18,className:"text-red-500"}),warning:(0,y.jsx)(d.BS8,{size:18,className:"text-yellow-500"}),update:(0,y.jsx)(d.__w,{size:18,className:"text-blue-500"})}[e]||(0,y.jsx)(d.__w,{size:18,className:"text-gray-400"})),J=async e=>{if(p)return void Z(e);const t=[...A],a=A.map(t=>t.id===e?(0,r.A)((0,r.A)({},t),{},{stared:!t.stared}):t);S(a);try{A.find(t=>t.id===e).stared?await o.vx.put("/unStar/".concat(e)):await o.vx.put("/stared/".concat(e))}catch(s){S(t)}},X=async e=>{if(p)return void Z(e);const t=[...A],a=A.find(t=>t.id===e);S(A.filter(t=>t.id!==e)),a&&!a.read&&T();try{await o.vx.delete("/delete/".concat(e))}catch(r){S(t)}},Z=e=>{N(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},V=async()=>{const e=[...A],t=j,a=A.filter(e=>t.includes(e.id)&&!e.read).length;S(A.filter(e=>!t.includes(e.id))),v(!1),N([]);for(let s=0;s<a;s++)T();try{await Promise.all(t.map(e=>o.vx.delete("/delete/".concat(e))))}catch(r){S(e)}},W=e=>{try{return(0,g.m)((0,m.H)(e),{addSuffix:!0})}catch(t){return""}},$=e=>{try{return(0,h.qD)(e,"Asia/Kolkata","MMM d, h:mm a")}catch(t){return""}},ee=(0,s.useMemo)(()=>{let e=A||[];const t=f.toLowerCase();if("Unread"===a?e=e.filter(e=>!e.read):"Starred"===a&&(e=e.filter(e=>e.stared)),f&&(e=e.filter(e=>{var a,r,s;return(null===(a=e.message)||void 0===a?void 0:a.toLowerCase().includes(t))||(null===(r=e.subject)||void 0===r?void 0:r.toLowerCase().includes(t))||(null===(s=e.sender)||void 0===s?void 0:s.toLowerCase().includes(t))})),k){const t=(0,m.H)(k);e=e.filter(e=>(0,m.H)(e.createdAt)>=t)}if(C){const t=(0,m.H)(C),a=new Date(t);a.setDate(a.getDate()+1),e=e.filter(e=>(0,m.H)(e.createdAt)<a)}return e},[A,a,f,k,C]),te=(0,s.useMemo)(()=>""!==f||"All"!==a||null!==k||null!==C,[f,a,k,C]),ae={hover:{scale:1.05},tap:{scale:.95}};return(0,y.jsxs)("div",{className:"w-full h-[90vh] flex flex-col ".concat("dark"===M?"bg-gray-900":"bg-gray-50"),children:[(0,y.jsxs)(c.P.div,{className:"flex-shrink-0 shadow-sm border-b z-20 w-full ".concat("dark"===M?"bg-black border-gray-700":"bg-white border-gray-200"),initial:"hidden",animate:"visible",variants:{hidden:{y:-50,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:100,damping:10}}},children:[(0,y.jsxs)("div",{className:"sm:hidden py-2 flex items-center justify-between px-3 h-[50px] ".concat("dark"===M?"bg-black":"bg-white"),children:[(0,y.jsx)(c.P.button,{onClick:()=>t(!e),className:"".concat("dark"===M?"text-white hover:text-gray-300":"text-gray-600 hover:text-gray-800"),whileHover:{scale:1.1},whileTap:{scale:.95},children:(0,y.jsx)(d.OXb,{size:18})}),(0,y.jsxs)("div",{className:"relative flex-1 mx-3",children:[(0,y.jsx)(d.KSO,{className:"absolute left-3.5 top-1/2 transform -translate-y-1/2 ".concat("text-gray-400"),size:14}),(0,y.jsx)("input",{type:"text",placeholder:"Search...",className:"w-full pl-10 pr-4 py-2 text-sm rounded-full border focus:ring-2 focus:ring-indigo-200 h-[40px] ".concat("dark"===M?"border-gray-600 bg-gray-800 text-white placeholder-gray-400 focus:bg-gray-700 focus:border-indigo-500":"border-gray-200 bg-gray-50 text-black placeholder-gray-500 focus:bg-white focus:border-indigo-500"),value:f,onChange:e=>b(e.target.value)})]})]}),(0,y.jsxs)("div",{className:"hidden sm:flex items-center space-x-4 py-2 px-4 h-[60px]",children:[(0,y.jsx)("div",{className:"flex space-x-1 p-1 rounded-lg ".concat("dark"===M?"bg-gray-800":"bg-gray-100"),children:["All","Unread","Starred"].map(e=>(0,y.jsxs)(c.P.button,{style:{borderRadius:"20px"},onClick:()=>q(e),className:"py-1 px-3 text-sm font-medium flex items-center transition-colors ".concat(a===e?"bg-blue-600 text-white rounded-md":"dark"===M?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-800"),whileHover:{scale:1.03},whileTap:{scale:.97},children:["All"===e&&(0,y.jsx)(d.opL,{className:"mr-1.5",size:14}),"Unread"===e&&(0,y.jsx)(d.maD,{className:"mr-1.5",size:14}),"Starred"===e&&(0,y.jsx)(d.gt3,{className:"mr-1.5",size:14}),e]},e))}),(0,y.jsxs)("div",{className:"relative flex-1",children:[(0,y.jsx)(d.KSO,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 ".concat("text-gray-400"),size:15}),(0,y.jsx)("input",{type:"text",placeholder:"Search notifications...",className:"w-full h-[36px] pl-10 pr-4 text-sm rounded-lg border focus:ring-1 focus:ring-indigo-200 ".concat("dark"===M?"border-gray-600 bg-gray-800 text-white placeholder-gray-400 focus:bg-gray-700 focus:border-indigo-500":"border-gray-200 bg-white text-black placeholder-gray-500 focus:bg-white focus:border-indigo-500"),value:f,onChange:e=>b(e.target.value)})]}),(0,y.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,y.jsxs)("button",{onClick:()=>{var e;return null===(e=_.current)||void 0===e?void 0:e.showPicker()},className:"flex items-center space-x-2 h-[36px] px-3 text-sm rounded-lg border transition-colors ".concat("dark"===M?"border-gray-600 bg-gray-800 text-gray-300 hover:bg-gray-700":"border-gray-200 bg-white text-gray-600 hover:bg-gray-50"),children:[(0,y.jsx)("span",{children:"From"}),(0,y.jsx)(d.itz,{className:"".concat("text-gray-400"),size:14})]}),(0,y.jsx)("input",{ref:_,type:"date",className:"sr-only",value:k||"",onChange:e=>w(e.target.value)}),(0,y.jsxs)("button",{onClick:()=>{var e;return null===(e=G.current)||void 0===e?void 0:e.showPicker()},className:"flex items-center space-x-2 h-[36px] px-3 text-sm rounded-lg border transition-colors ".concat("dark"===M?"border-gray-600 bg-gray-800 text-gray-300 hover:bg-gray-700":"border-gray-200 bg-white text-gray-600 hover:bg-gray-50"),children:[(0,y.jsx)("span",{children:"To"}),(0,y.jsx)(d.itz,{className:"".concat("text-gray-400"),size:14})]}),(0,y.jsx)("input",{ref:G,type:"date",className:"sr-only",value:C||"",onChange:e=>z(e.target.value)}),(0,y.jsx)("button",{onClick:Y,className:"flex items-center justify-center h-[36px] w-[36px] text-sm rounded-lg border transition-colors ".concat("dark"===M?"border-gray-600 bg-gray-800 text-gray-400 hover:bg-gray-700 hover:text-red-400":"border-gray-200 bg-white text-gray-500 hover:bg-gray-50 hover:text-red-500"),title:"Clear Filters",children:(0,y.jsx)(d.QCr,{size:14})})]}),(0,y.jsx)("div",{className:"flex items-center",children:(0,y.jsx)("div",{className:"flex items-center space-x-2",children:p?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(c.P.button,{onClick:Q,style:{borderRadius:"10px"},className:"py-1.5 px-3 text-sm font-medium rounded-lg flex items-center ".concat("dark"===M?"text-gray-300 bg-gray-700 hover:bg-gray-600":"text-gray-700 bg-gray-200 hover:bg-gray-300"),variants:ae,whileHover:"hover",whileTap:"tap",children:"Cancel"}),(0,y.jsxs)(c.P.button,{onClick:V,style:{borderRadius:"10px"},className:"py-1.5 px-3 text-sm font-medium text-white bg-blue-600 hover:bg-red-700 rounded-lg flex items-center",variants:ae,whileHover:"hover",whileTap:"tap",children:[(0,y.jsx)(d.RCe,{className:"mr-1.5",size:12}),"Delete"]})]}):(0,y.jsxs)(c.P.button,{style:{borderRadius:"8px"},onClick:I,className:"py-1 px-2 text-xs font-medium text-red-700 bg-red-100 hover:bg-red-200 rounded-md flex items-center",variants:ae,whileHover:"hover",whileTap:"tap",children:[(0,y.jsx)(d.Gml,{className:"mr-1",size:12}),"Edit"]})})})]})]}),(0,y.jsx)("div",{ref:O,className:"flex-1 overflow-y-auto ".concat(E||0!==(null===ee||void 0===ee?void 0:ee.length)?"":"flex items-center justify-center"),children:(null===ee||void 0===ee?void 0:ee.length)>0?(0,y.jsxs)("div",{className:"p-2 notifications-list",children:[ee.map(e=>(0,y.jsxs)(c.P.div,{className:"rounded-lg shadow-sm border mb-1.5 cursor-pointer overflow-hidden relative ".concat(j.includes(e.id)?"border-indigo-400 ring-2 ring-indigo-200":"dark"===M?"border-gray-700":"border-gray-200"," ").concat(e.read?"dark"===M?"bg-gray-800":"bg-white":"dark"===M?"bg-gradient-to-r from-gray-800 to-gray-700":"bg-gradient-to-r from-indigo-50 to-purple-50"),onClick:()=>(e=>{p?Z(e.id):e.link&&(H(e.id),P(e.link))})(e),whileHover:{y:-2,boxShadow:"0 4px 10px rgba(0,0,0,0.08)"},transition:{duration:.15},children:[(0,y.jsxs)("div",{className:"sm:hidden flex flex-col p-2.5",children:[(0,y.jsxs)("div",{className:"flex items-start",children:[(0,y.jsx)("div",{className:"pr-3 pt-1",children:p?(0,y.jsx)(d.A7C,{size:18,className:j.includes(e.id)?"text-indigo-600":"text-gray-300"}):B(e.kind)}),(0,y.jsxs)("div",{className:"flex-1 overflow-hidden pr-8",children:[(0,y.jsx)("div",{className:"font-semibold text-sm truncate ".concat("dark"===M?"text-white":"text-gray-800"),children:e.subject}),(0,y.jsx)("div",{className:"text-xs mt-1 truncate ".concat("dark"===M?"text-gray-300":"text-gray-600"),children:e.message})]})]}),(0,y.jsxs)("div",{className:"flex justify-between items-center mt-2 pt-2 border-t ".concat("dark"===M?"border-gray-600":"border-gray-200/80"),children:[(0,y.jsxs)("div",{className:"flex flex-col items-start",children:[(0,y.jsx)("div",{className:"text-xs font-medium text-indigo-600 bg-indigo-100 px-2 py-0.5 rounded-full",children:e.category}),(0,y.jsx)("div",{className:"font-bold text-xs mt-1 ".concat("dark"===M?"text-gray-200":"text-gray-700"),children:e.sender})]}),(0,y.jsxs)("div",{className:"flex flex-col items-end text-xs",children:[(0,y.jsx)("span",{className:"font-semibold ".concat("dark"===M?"text-gray-300":"text-gray-600"),children:W(e.createdAt)}),(0,y.jsx)("span",{className:"mt-0.5 ".concat("dark"===M?"text-gray-500":"text-gray-400"),children:$(e.createdAt)})]})]}),(0,y.jsxs)("div",{className:"absolute top-2.5 right-2.5 flex flex-col items-center justify-center space-y-3",children:[(0,y.jsx)(d.gt3,{size:16,className:"cursor-pointer transition-colors ".concat(e.stared?"text-yellow-400":"text-gray-300 hover:text-yellow-400"),onClick:t=>{t.stopPropagation(),J(e.id)}}),(0,y.jsx)(d.RCe,{size:15,className:"cursor-pointer text-gray-300 hover:text-red-500 transition-colors",onClick:t=>{t.stopPropagation(),X(e.id)}})]})]}),(0,y.jsxs)("div",{className:"hidden sm:flex items-center w-full h-[90px] p-2",children:[(0,y.jsx)("div",{className:"px-2",children:p?(0,y.jsx)(d.A7C,{size:18,className:j.includes(e.id)?"text-indigo-600":"text-gray-300"}):B(e.kind)}),(0,y.jsxs)("div",{className:"flex-1 flex flex-col justify-center overflow-hidden h-full pl-3",children:[(0,y.jsx)("div",{className:"font-semibold text-sm truncate ".concat("dark"===M?"text-white":"text-gray-800"),children:e.subject}),(0,y.jsx)("div",{className:"text-xs mt-1 truncate ".concat("dark"===M?"text-gray-300":"text-gray-600"),children:e.message})]}),(0,y.jsxs)("div",{className:"flex flex-col items-start justify-center px-4 w-48 h-full shrink-0",children:[(0,y.jsx)("div",{className:"font-bold text-sm truncate w-full ".concat("dark"===M?"text-white":"text-gray-800"),children:e.sender}),(0,y.jsx)("div",{className:"text-xs font-medium text-indigo-600 mt-1",children:e.category})]}),(0,y.jsxs)("div",{className:"flex flex-col items-end justify-center px-4 w-40 text-right h-full shrink-0",children:[(0,y.jsx)("div",{className:"text-xs font-semibold ".concat("dark"===M?"text-gray-300":"text-gray-600"),children:W(e.createdAt)}),(0,y.jsx)("div",{className:"text-xs mt-1 ".concat("dark"===M?"text-gray-500":"text-gray-400"),children:$(e.createdAt)})]}),(0,y.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-3 px-4",children:[(0,y.jsx)(c.P.div,{whileHover:{scale:1.2},whileTap:{scale:.9},children:(0,y.jsx)(d.gt3,{size:16,className:"cursor-pointer transition-colors ".concat(e.stared?"text-yellow-400":"text-gray-300 hover:text-yellow-400"),onClick:t=>{t.stopPropagation(),J(e.id)}})}),(0,y.jsx)(c.P.div,{whileHover:{scale:1.2},whileTap:{scale:.9},children:(0,y.jsx)(d.RCe,{size:15,className:"cursor-pointer text-gray-300 hover:text-red-500 transition-colors",onClick:t=>{t.stopPropagation(),X(e.id)}})})]})]})]},e.id)),E&&(0,y.jsxs)("div",{className:"text-center py-4 flex justify-center items-center space-x-2 ".concat("dark"===M?"text-gray-400":"text-gray-600"),children:[(0,y.jsx)(d.DIg,{size:16,className:"text-blue-500 animate-spin",style:{animation:"spin 1s linear infinite"}}),(0,y.jsx)("span",{children:"Loading more..."})]}),!L&&(0,y.jsx)("div",{className:"text-center py-4 ".concat("text-gray-500"),children:"No more notifications."})]}):!E&&(0,y.jsx)("div",{className:"p-2 notifications-list w-full",children:(0,y.jsx)("div",{className:"flex flex-col items-center text-center p-4",children:te?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(d.KSO,{size:48,className:"mb-4 ".concat("dark"===M?"text-indigo-400":"text-indigo-600")}),(0,y.jsx)("h3",{className:"text-xl font-semibold ".concat("dark"===M?"text-gray-200":"text-gray-700"),children:"No Matches Found"}),(0,y.jsx)("p",{className:"mt-1 text-sm ".concat("dark"===M?"text-gray-400":"text-gray-500"),children:"Try adjusting your filters or clearing the search query."})]}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(d.A7C,{size:48,className:"mb-4 text-green-500"}),(0,y.jsx)("h3",{className:"text-xl font-semibold ".concat("dark"===M?"text-gray-200":"text-gray-700"),children:"You're All Caught Up!"}),(0,y.jsx)("p",{className:"mt-1 text-sm ".concat("dark"===M?"text-gray-400":"text-gray-500"),children:"No notifications to show."})]})})})}),(0,y.jsx)(l.N,{children:e&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(c.P.div,{className:"fixed inset-0 backdrop-blur-sm bg-opacity-50 z-30 sm:hidden",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>t(!1)},"overlay"),(0,y.jsxs)(c.P.div,{className:"fixed top-0 left-0 h-full w-3/4 max-w-sm z-40 sm:hidden flex flex-col ".concat("dark"===M?"bg-gray-800":"bg-white"),initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{type:"tween",ease:"easeInOut",duration:.3},children:[(0,y.jsxs)("div",{className:"flex items-center justify-between p-4 border-b ".concat("dark"===M?"border-gray-700":"border-gray-200"),children:[(0,y.jsx)("h5",{className:"font-bold text-lg ".concat("dark"===M?"text-white":"text-gray-800"),children:"Filters & Actions"}),(0,y.jsx)(c.P.button,{onClick:()=>t(!1),whileHover:{scale:1.1,rotate:90},whileTap:{scale:.9},children:(0,y.jsx)(d.QCr,{size:20,className:"".concat("dark"===M?"text-gray-300":"text-gray-600")})})]}),(0,y.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[(0,y.jsx)("div",{className:"flex border-b h-12 ".concat("dark"===M?"border-gray-700":"border-gray-200"),children:["All","Unread","Starred"].map(e=>(0,y.jsx)("button",{onClick:()=>q(e),className:"flex-1 h-full py-3 text-sm font-medium transition-colors ".concat(a===e?"bg-indigo-50 text-indigo-600":"dark"===M?"text-gray-300 hover:bg-gray-700":"text-gray-500 hover:bg-gray-50"),children:e},e))}),(0,y.jsxs)("div",{className:"p-4 space-y-4",children:[(0,y.jsxs)("div",{className:"flex justify-between items-center",children:[(0,y.jsxs)("h6",{className:"text-sm font-semibold flex items-center ".concat("dark"===M?"text-gray-300":"text-gray-500"),children:[(0,y.jsx)(d.YsJ,{className:"inline-block mr-2",size:12}),"Filters"]}),(0,y.jsx)("button",{onClick:Y,className:"py-1 px-3 text-xs font-medium rounded-md ".concat("dark"===M?"text-gray-300 bg-gray-700 hover:bg-gray-600":"text-gray-700 bg-gray-100 hover:bg-gray-200"),children:"Clear All"})]}),(0,y.jsxs)("div",{className:"grid grid-cols-2 gap-3 pt-2",children:[(0,y.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,y.jsx)("button",{onClick:()=>{var e;return null===(e=_.current)||void 0===e?void 0:e.showPicker()},className:"p-2 text-sm rounded-md border ".concat("dark"===M?"border-gray-600 bg-gray-700":"border-gray-300 bg-white"),children:(0,y.jsx)(d.itz,{className:"".concat("dark"===M?"text-gray-400":"text-gray-500"),size:14})}),(0,y.jsx)("span",{className:"text-xs w-20 ".concat("dark"===M?"text-gray-300":"text-gray-700"),children:k?(0,x.GP)((0,m.H)(k),"MMM d, yyyy"):"From Date"}),(0,y.jsx)("input",{ref:_,type:"date",className:"sr-only",value:k||"",onChange:e=>w(e.target.value)})]}),(0,y.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,y.jsx)("button",{onClick:()=>{var e;return null===(e=G.current)||void 0===e?void 0:e.showPicker()},className:"p-2 text-sm rounded-md border ".concat("dark"===M?"border-gray-600 bg-gray-700":"border-gray-300 bg-white"),children:(0,y.jsx)(d.itz,{className:"".concat("dark"===M?"text-gray-400":"text-gray-500"),size:14})}),(0,y.jsx)("span",{className:"text-xs w-20 ".concat("dark"===M?"text-gray-300":"text-gray-700"),children:C?(0,x.GP)((0,m.H)(C),"MMM d, yyyy"):"To Date"}),(0,y.jsx)("input",{ref:G,type:"date",className:"sr-only",value:C||"",onChange:e=>z(e.target.value)})]})]}),(0,y.jsx)("div",{className:"flex space-x-2 pt-4",children:p?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("button",{onClick:Q,className:"flex-1 py-2 px-3 text-sm font-medium rounded-lg ".concat("dark"===M?"bg-gray-600 hover:bg-gray-500 text-gray-300":"bg-gray-200 hover:bg-gray-300 text-gray-800"),children:"Cancel"}),(0,y.jsx)("button",{onClick:V,className:"flex-1 py-2 px-3 bg-red-600 hover:bg-red-700 text-white text-sm font-medium rounded-lg",children:"Delete"})]}):(0,y.jsx)("button",{onClick:I,className:"flex-1 py-2 px-3 text-sm font-medium rounded-lg ".concat("dark"===M?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-800"),children:"Edit"})})]})]})]},"sidebar")]})})]})}}}]);
//# sourceMappingURL=664.794252d5.chunk.js.map