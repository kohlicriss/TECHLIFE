/*! For license information please see 572.3adc6a50.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunktechlife=self.webpackChunktechlife||[]).push([[572],{4379:(e,t,s)=>{s.d(t,{A:()=>r});const r=(0,s(7784).A)("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]])},5244:(e,t,s)=>{s.d(t,{A:()=>r});const r=(0,s(7784).A)("ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]])},6833:(e,t,s)=>{s.d(t,{A:()=>r});const r=(0,s(7784).A)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},7719:(e,t,s)=>{s.d(t,{A:()=>r});const r=(0,s(7784).A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},8572:(e,t,s)=>{s.r(t),s.d(t,{default:()=>b});var r=s(5043),l=s(5244),o=s(4379),i=s(6833),a=s(7719),n=s(184),c=s(5440),d=s(3721),u=s(579);function x(e){let{onSubmit:t}=e;const[s,l]=(0,r.useState)({employeeId:"",ticketId:"",title:"",priority:"Low",description:"",roles:""}),[o,i]=(0,r.useState)(!1);(0,r.useEffect)(()=>{const e=localStorage.getItem("employeeId");if(e){const t=JSON.parse(e);l(e=>({...e,employeeId:t.employeeId||""}))}},[]);const a=e=>l(t=>({...t,[e.target.name]:e.target.value}));return(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsxs)("form",{onSubmit:e=>{e.preventDefault(),console.log("Form Submitted:",s),i(!0),setTimeout(()=>i(!1),3e3),t(s),l(e=>({...e,ticketId:"",title:"",priority:"Low",description:"",roles:""}))},className:"bg-white p-8 rounded-2xl shadow-lg space-y-6 border border-gray-200",children:[(0,u.jsx)("h2",{className:"text-3xl font-bold text-blue-700 text-center",children:"Fill the form"}),(0,u.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-1 gap-4",children:(0,u.jsx)("input",{name:"title",placeholder:"Issue Title",value:s.title,onChange:a,required:!0,className:"w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400"})}),(0,u.jsxs)("select",{name:"priority",value:s.priority,onChange:a,required:!0,className:"w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400",children:[(0,u.jsx)("option",{value:"Low",children:"Low"}),(0,u.jsx)("option",{value:"Medium",children:"Medium"}),(0,u.jsx)("option",{value:"High",children:"High"})]}),(0,u.jsxs)("select",{name:"roles",value:s.roles,onChange:a,required:!0,className:"w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400",children:[(0,u.jsx)("option",{value:"",children:"Select Role"}),(0,u.jsx)("option",{value:"ROLE_ADMIN",children:"Admin"}),(0,u.jsx)("option",{value:"ROLE_HR",children:"HR"}),(0,u.jsx)("option",{value:"ROLE_MANAGER",children:"Manager"}),(0,u.jsx)("option",{value:"ROLE_TEAM_LEAD",children:"Team Lead"})]}),(0,u.jsx)("textarea",{name:"description",placeholder:"Describe your issue in detail",value:s.description,onChange:a,required:!0,rows:"5",className:"w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400"}),(0,u.jsx)("div",{className:"flex justify-center",children:(0,u.jsx)("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg shadow-md transition",children:"Submit Ticket"})})]}),o&&(0,u.jsx)("div",{className:"absolute top-4 right-4 z-50 bg-green-500 text-white px-5 py-3 rounded-lg shadow-md",children:"\u2705 Ticket submitted successfully!"})]})}function h(e){let{userRole:t="employee",ticketId:s,ticketStatus:l}=e;const[o,i]=(0,r.useState)([]),[a,n]=(0,r.useState)(""),c=(0,r.useRef)(null),d=(0,r.useRef)(null),x=(0,r.useRef)(null),h=(0,r.useRef)(null),m="resolved"===(null===l||void 0===l?void 0:l.toLowerCase()),g=e=>{const t=new Map;return e.forEach(e=>{const s=e.id?String(e.id):`${e.repliedAt}-${e.replyText}`;t.set(s,e)}),Array.from(t.values()).sort((e,t)=>new Date(e.repliedAt)-new Date(t.repliedAt))},p=o.reduce((e,t)=>{const s=(e=>{const t=new Date(e),s=new Date,r=new Date;return r.setDate(s.getDate()-1),t.toDateString()===s.toDateString()?"Today":t.toDateString()===r.toDateString()?"Yesterday":t.toLocaleDateString([],{day:"numeric",month:"short",year:"numeric"})})(t.repliedAt);return e[s]||(e[s]=[]),e[s].push(t),e},{}),b=()=>{const e=new WebSocket(`ws://192.168.0.247:8088/ws-ticket?ticketId=${s}`);e.onopen=()=>console.log("\u2705 WebSocket connected"),e.onmessage=e=>{try{const t=JSON.parse(e.data);i(e=>g([...e,t]))}catch(t){console.error("\u274c Failed to parse WebSocket message:",t)}},e.onclose=()=>{console.warn("\u26a0\ufe0f WebSocket closed. Reconnecting..."),x.current=setTimeout(b,5e3)},e.onerror=e=>console.error("\u274c WebSocket error:",e),c.current=e},y=async()=>{if(!a.trim()||m)return;const e=localStorage.getItem("accessToken"),r={ticketId:s,replyText:a,repliedBy:t};try{await fetch(`http://192.168.0.247:8088/api/ticket/employee/tickets/${s}/messages`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(r)}),console.log("\ud83d\udce4 Message sent to backend, waiting for WebSocket...")}catch(l){console.error("\u274c Send failed:",l)}finally{n("")}};return(0,r.useEffect)(()=>{const e=h.current;if(!e)return;var t;e.scrollHeight-e.scrollTop-e.clientHeight<100&&(null===(t=d.current)||void 0===t||t.scrollIntoView({behavior:"smooth"}))},[o]),(0,r.useEffect)(()=>{var e;null===(e=d.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[o]),(0,r.useEffect)(()=>((async()=>{const e=localStorage.getItem("accessToken");try{const t=await fetch(`http://192.168.0.247:8088/api/ticket/employee/tickets/${s}/messages`,{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw new Error(`HTTP ${t.status}`);const r=await t.json();i(Array.isArray(r)?g(r):[])}catch(t){console.error("\u274c Fetch error:",t),i([])}})(),b(),()=>{c.current&&c.current.close(),clearTimeout(x.current)}),[s]),(0,u.jsxs)("div",{className:"flex flex-col h-[500px] bg-white rounded-xl border shadow",children:[(0,u.jsxs)("div",{ref:h,className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50",children:[Object.entries(p).map(e=>{let[s,r]=e;return(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"text-center text-xs text-gray-500 my-2",children:s}),r.map((e,s)=>(0,u.jsx)("div",{className:`flex ${e.repliedBy===t?"justify-end":"justify-start"} mb-2`,children:(0,u.jsxs)("div",{className:"px-4 py-2 rounded-lg shadow text-sm break-words "+(e.repliedBy===t?"bg-blue-600 text-white rounded-br-none":"bg-gray-200 text-gray-900 rounded-bl-none"),style:{maxWidth:"80%",width:"fit-content"},children:[(0,u.jsx)("p",{className:"whitespace-pre-wrap",children:e.replyText}),(0,u.jsx)("div",{className:"text-right text-xs mt-1 opacity-60",children:e.repliedAt?new Date(e.repliedAt).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit",hour12:!0}):""})]})},`${e.id||e.repliedAt}-${s}`))]},s)}),(0,u.jsx)("div",{ref:d})]}),(0,u.jsxs)("div",{className:"flex items-center gap-2 p-2 border-t",children:[(0,u.jsx)("input",{type:"text",value:a,onChange:e=>n(e.target.value),onKeyDown:e=>"Enter"===e.key&&y(),placeholder:m?"This ticket is resolved. You cannot send messages.":"Type your message",disabled:m,className:"flex-1 border rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 "+(m?"bg-gray-200 cursor-not-allowed text-red-500":"focus:ring-blue-400")}),(0,u.jsx)("button",{onClick:y,disabled:m,className:"px-4 py-2 rounded text-white "+(m?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"),children:"Send"})]})]})}function m(e){let{tickets:t,onTicketClick:s}=e;return t.length?(0,u.jsx)("div",{className:"space-y-4",children:t.map((e,t)=>(0,u.jsxs)("div",{onClick:()=>s(e),className:"cursor-pointer border border-gray-300 rounded-lg p-4 bg-white shadow-md hover:shadow-lg hover:border-blue-400 transition-all",children:[(0,u.jsxs)("h3",{className:"text-lg font-semibold text-blue-700 mb-2",children:["ticketID: ",e.ticketId]}),(0,u.jsxs)("p",{children:[(0,u.jsx)("strong",{children:"ID:"})," ",e.employeeId]}),(0,u.jsxs)("p",{children:[(0,u.jsx)("strong",{children:"Title:"})," ",e.title]}),(0,u.jsxs)("p",{children:[(0,u.jsx)("strong",{children:"Submitted:"})," ",e.sentAt]}),(0,u.jsxs)("p",{children:[(0,u.jsx)("strong",{children:"status:"})," ",e.status]}),(0,u.jsxs)("p",{children:[(0,u.jsx)("strong",{children:"description :"})," ",e.description]}),(0,u.jsxs)("p",{children:[(0,u.jsx)("strong",{children:"assigned to :"})," ",e.roles]})]},t))}):(0,u.jsx)("div",{className:"text-center text-gray-500 py-6",children:"No tickets submitted yet."})}var g=s(9910),p=s(6213);function b(){const[e,t]=(0,r.useState)("history"),[s,b]=(0,r.useState)([]),[y,f]=(0,r.useState)(null),[j,v]=(0,r.useState)("All"),[w,k]=(0,r.useState)(""),[N,A]=(0,r.useState)(""),[S,T]=(0,r.useState)(""),[C,E]=(0,r.useState)("all"),[L,I]=(0,r.useState)(!1),[R,D]=(0,r.useState)(!1),[O,$]=(0,r.useState)("My Tickets"),M=(0,d.Zp)(),{empID:z}=(0,d.g)(),{userData:H}=(0,r.useContext)(g.o),P=Array.isArray(null===H||void 0===H?void 0:H.roles)?H.roles[0]:(null===H||void 0===H?void 0:H.roles)||"";let F="";"string"===typeof P&&(F=P.toUpperCase().startsWith("ROLE_")?P.toUpperCase():"ROLE_"+P.toUpperCase());const _=localStorage.getItem("accessToken"),B=[{tab:"My Tickets",icon:l.A},..."ROLE_EMPLOYEE"!==F?[{tab:"Assigned Tickets",icon:l.A}]:[]],W={all:"All",resolved:"Resolved"},U={all:(0,u.jsx)(o.A,{size:20}),resolved:(0,u.jsx)(i.A,{size:20})};(0,r.useEffect)(()=>{if(!_||!z||!H)return;(async()=>{try{let t;"Assigned Tickets"===O||(t=`http://192.168.0.247:8088/api/ticket/admin/tickets/employee/${z}`);let s=(await p.A.get(t,{headers:{Authorization:`Bearer ${_}`}})).data;var e;if(!Array.isArray(s))s=(null===(e=s)||void 0===e?void 0:e.tickets)||[s];b(s),console.log("Fetched tickets:",s)}catch(t){console.error("Error fetching tickets:",t),b([])}})()},[O,z,F,_,H]);const q=e=>{$(e),D(!1),M("Assigned Tickets"===e&&F?`/tickets/role/${F}/${z}`:`/tickets/employee/${z}`)},Y=(()=>{let e=[...s];if(""!==S.trim()){const t=S.toLowerCase();e=e.filter(e=>(e.title||"").toLowerCase().includes(t)||(e.status||"").toLowerCase().includes(t)||(e.priority||"").toLowerCase().includes(t))}return"all"!==C&&(e=e.filter(e=>(e.status||"").toLowerCase()===C)),e.sort((e,t)=>new Date(t.sentAt||t.createdAt)-new Date(e.sentAt||e.createdAt)),e})(),J=Y.length,V=Y.filter(e=>"resolved"===(e.status||"").toLowerCase()).length,Z=J-V;return(0,u.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-100",children:(0,u.jsxs)("div",{className:"flex flex-row-reverse max-w-7xl mx-auto px-4 py-8 gap-4",children:[(0,u.jsxs)("aside",{className:`sm:flex flex-col bg-white border-l border-gray-200 transition-all duration-200 ${L?"w-[60px]":"w-[250px]"} hidden sm:flex sm:sticky sm:top-0 h-full`,children:[(0,u.jsx)("div",{className:"flex justify-start p-1.5 items-center",children:(0,u.jsx)(c.P.button,{onClick:()=>I(!L),className:"text-gray-500 hover:text-gray-700 focus:outline-none p-1.5 rounded-full hover:bg-gray-100",transition:{duration:.3},children:L?(0,u.jsx)(n.QVr,{size:14}):(0,u.jsx)(n.Z0P,{size:14})})}),(0,u.jsx)("nav",{className:"flex-1 space-y-1.5 px-1.5",children:B.filter(e=>{let{tab:t}=e;return"ROLE_EMPLOYEE"!==F||"Assigned Tickets"!==t}).map(e=>{let{tab:t,icon:s}=e;return(0,u.jsxs)(c.P.button,{className:`w-full text-left py-2 px-2 rounded-md font-medium flex items-center transition-colors\n                  ${O===t?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-200"}\n                  ${L?"justify-center":""}`,onClick:()=>q(t),whileHover:{x:L?0:-3},children:[(0,u.jsx)(s,{size:14,className:L?"":"mr-2"}),!L&&t]},t)})})]}),(0,u.jsxs)("div",{className:"sm:hidden flex flex-col w-full",children:[(0,u.jsx)("div",{className:"flex justify-start mb-2",children:(0,u.jsx)(c.P.button,{onClick:()=>D(!R),className:"text-gray-500 hover:text-gray-700 focus:outline-none p-2 rounded-full hover:bg-gray-100",transition:{duration:.3},children:(0,u.jsx)(n.OXb,{size:20})})}),R&&(0,u.jsx)("div",{className:"bg-white border rounded-lg shadow p-2 mb-4",children:B.filter(e=>{let{tab:t}=e;return"ROLE_EMPLOYEE"!==F||"Assigned Tickets"!==t}).map(e=>{let{tab:t,icon:s}=e;return(0,u.jsxs)(c.P.button,{onClick:()=>q(t),className:"flex w-full items-center gap-2 px-4 py-2 rounded-lg text-left text-sm font-medium\n                      "+(O===t?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),whileHover:{scale:1.02},children:[(0,u.jsx)(s,{size:16}),t]},t)})})]}),(0,u.jsxs)("main",{className:"flex-1 space-y-8",children:[(0,u.jsx)("div",{className:"bg-white rounded-xl shadow p-6 border flex flex-col lg:flex-row items-center justify-between gap-6",children:(0,u.jsxs)("div",{className:"flex flex-col lg:flex-row items-center gap-4 w-full flex-wrap",children:[(0,u.jsx)("label",{className:"text-sm font-medium text-gray-700",htmlFor:"date-filter",children:"Filter by Date"}),(0,u.jsxs)("select",{id:"date-filter",className:"border border-gray-300 text-sm rounded-lg p-2.5 w-42 focus:outline-none focus:ring-2 focus:ring-blue-400",value:j,onChange:e=>v(e.target.value),children:[(0,u.jsx)("option",{children:"All"}),(0,u.jsx)("option",{children:"Last 30 days"}),(0,u.jsx)("option",{children:"Last 7 days"}),(0,u.jsx)("option",{children:"Today"})]}),(0,u.jsx)("label",{className:"text-sm font-medium text-gray-700",htmlFor:"search",children:"Search"}),(0,u.jsx)("input",{id:"search",type:"text",value:S,onChange:e=>T(e.target.value),placeholder:"Title, status, priority...",className:"border border-gray-300 text-sm rounded-lg p-2.5 w-64 focus:outline-none focus:ring-2 focus:ring-blue-400"}),(0,u.jsx)("label",{className:"text-sm font-medium text-gray-700",htmlFor:"from-date",children:"From"}),(0,u.jsx)("input",{type:"date",id:"from-date",value:w,onChange:e=>k(e.target.value),className:"border border-gray-300 text-sm rounded-lg p-2.5 w-44 focus:outline-none focus:ring-2 focus:ring-blue-400"}),(0,u.jsx)("label",{className:"text-sm font-medium text-gray-700",htmlFor:"to-date",children:"To"}),(0,u.jsx)("input",{type:"date",id:"to-date",value:N,onChange:e=>A(e.target.value),className:"border border-gray-300 text-sm rounded-lg p-2.5 w-44 focus:outline-none focus:ring-2 focus:ring-blue-400"}),(0,u.jsx)("div",{className:"flex gap-2 ml-4",children:Object.keys(U).map(e=>(0,u.jsxs)(c.P.button,{className:"flex items-center gap-1 px-3 py-2 rounded-lg text-sm font-medium transition-colors \n                      "+(C===e?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),onClick:()=>E(e),whileHover:{scale:1.05},children:[U[e],(0,u.jsx)("span",{children:W[e]})]},e))})]})}),(0,u.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[(0,u.jsxs)("div",{className:"flex items-center gap-4 p-6 rounded-2xl shadow-lg border border-blue-200 bg-white",children:[(0,u.jsx)("div",{className:"bg-blue-100 text-blue-600 p-4 rounded-full",children:(0,u.jsx)(l.A,{size:32})}),(0,u.jsxs)("div",{children:[(0,u.jsx)("p",{className:"text-sm text-gray-500",children:"Your Tickets"}),(0,u.jsx)("h3",{className:"text-4xl font-bold text-blue-700",children:J})]})]}),(0,u.jsxs)("div",{className:"flex items-center gap-4 p-6 rounded-2xl shadow-lg border border-emerald-200 bg-white",children:[(0,u.jsx)("div",{className:"bg-emerald-100 text-emerald-600 p-4 rounded-full",children:(0,u.jsx)(i.A,{size:32})}),(0,u.jsxs)("div",{children:[(0,u.jsx)("p",{className:"text-sm text-gray-500",children:"Resolved"}),(0,u.jsx)("h3",{className:"text-4xl font-bold text-emerald-600",children:V})]})]}),(0,u.jsxs)("div",{className:"flex items-center gap-4 p-6 rounded-2xl shadow-lg border border-red-200 bg-white",children:[(0,u.jsx)("div",{className:"bg-red-100 text-red-600 p-4 rounded-full",children:(0,u.jsx)(a.A,{size:32})}),(0,u.jsxs)("div",{children:[(0,u.jsx)("p",{className:"text-sm text-gray-500",children:"Unresolved"}),(0,u.jsx)("h3",{className:"text-4xl font-bold text-red-600",children:Z})]})]})]}),"history"===e&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"flex justify-between items-center",children:[(0,u.jsx)("h2",{className:"text-2xl font-bold text-blue-700",children:"Ticket History"}),(0,u.jsx)("button",{onClick:()=>t("form"),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-full text-xl shadow hover:scale-105 transition",children:"+"})]}),(0,u.jsx)("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-200",children:(0,u.jsx)(m,{tickets:Y,onTicketClick:e=>{f(e),t("chat")}})})]}),"form"===e&&(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsxs)("div",{className:"flex justify-between items-center",children:[(0,u.jsx)("h2",{className:"text-2xl font-bold text-blue-700",children:"Raise a Ticket"}),(0,u.jsx)("button",{onClick:()=>t("history"),className:"text-blue-600 hover:text-blue-800 border border-blue-600 hover:border-blue-800 px-4 py-1 rounded-full text-sm shadow",children:"\u2190 Back to History"})]}),(0,u.jsx)("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-200",children:(0,u.jsx)(x,{onSubmit:async e=>{try{let s=Array.isArray(e.roles)?e.roles[0]:e.roles||"";if(!s)return void console.error("Role not provided!");s=s.toUpperCase().startsWith("ROLE_")?s.toUpperCase():"ROLE_"+s.toUpperCase();const r={title:e.title,description:e.description,status:"OPEN",priority:e.priority,employeeId:z,roles:s};console.log("Payload being sent:",r);const l=await fetch("http://192.168.0.247:8088/api/ticket/employee/create",{method:"POST",headers:{Authorization:`Bearer ${_}`,"Content-Type":"application/json"},body:JSON.stringify(r)});if(!l.ok){const e=await l.text();throw new Error(`Failed to create ticket: ${l.status} - ${e}`)}const o=await l.json();b(e=>[...e,o]),f(o),t("chat")}catch(s){console.error("Error creating ticket:",s),alert("Ticket creation failed. Check console for details.")}}})})]}),"chat"===e&&y&&(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsxs)("div",{className:"flex justify-between items-center",children:[(0,u.jsxs)("h2",{className:"text-2xl font-bold text-blue-700",children:["Chat with Admin (Ticket #",y.employeeId,")"]}),(0,u.jsx)("button",{onClick:()=>t("history"),className:"text-blue-600 hover:text-blue-800 border border-blue-600 hover:border-blue-800 px-4 py-1 rounded-full text-sm shadow",children:"\u2190 Back to History"})]}),(0,u.jsx)("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-200",children:(0,u.jsx)(h,{userRole:"employee",ticketId:y.ticketId,ticketStatus:y.status})})]})]})]})})}}}]);
//# sourceMappingURL=572.3adc6a50.chunk.js.map