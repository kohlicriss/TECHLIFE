{"version":3,"file":"static/js/89.5c3ddec6.chunk.js","mappings":"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","sources":["TechLife/HRMS/Components/Permissions/PermissionsPage.jsx"],"sourcesContent":["import React, { useState, useContext, useEffect, useCallback, useMemo, useRef } from 'react'; // Added missing hooks just in case, though not all might be used now\r\nimport Select from 'react-select';\r\nimport { FaCheckCircle, FaExclamationTriangle, FaInfoCircle, FaTimes, FaPlus, FaTrashAlt, FaEdit, FaSave, FaUndo } from 'react-icons/fa';\r\nimport { X, Edit3, Trash2 } from 'lucide-react'; // Using Lucide icons\r\nimport { Context } from '../HrmsContext'; // Ensure this path is correct\r\nimport { authApi } from '../../../../axiosInstance'; // Ensure this path is correct\r\n\r\n// Custom Notification Component\r\nconst CustomNotification = ({ isOpen, onClose, type, title, message, theme }) => {\r\n    const [isVisible, setIsVisible] = useState(false);\r\n\r\n    useEffect(() => {\r\n        let timer;\r\n        if (isOpen) {\r\n            setIsVisible(true);\r\n            // Auto-close for success/error after delay\r\n            if (type === 'success' || type === 'error') {\r\n                timer = setTimeout(() => {\r\n                    handleClose();\r\n                }, 3000); // Auto-close after 3 seconds\r\n            }\r\n        } else {\r\n             // Immediately start fade out if isOpen becomes false\r\n             setIsVisible(false);\r\n        }\r\n        // Cleanup timeout on unmount or if isOpen changes before timeout finishes\r\n        return () => clearTimeout(timer);\r\n    }, [isOpen, type]); // Rerun effect if isOpen or type changes\r\n\r\n    const handleClose = useCallback(() => { // Wrap in useCallback\r\n        setIsVisible(false);\r\n        // Delay onClose call to allow fade-out animation\r\n        setTimeout(() => onClose(), 300); // Match transition duration\r\n    }, [onClose]);\r\n\r\n    // Render immediately if isOpen is true, rely on isVisible for animations\r\n    if (!isOpen && !isVisible) return null; // Only return null if fully closed and animation finished\r\n\r\n    const getIcon = () => {\r\n        switch (type) {\r\n            case 'success': return <FaCheckCircle className=\"w-6 h-6 text-green-500\" />;\r\n            case 'error':   return <FaExclamationTriangle className=\"w-6 h-6 text-red-500\" />;\r\n            case 'info':    return <FaInfoCircle className=\"w-6 h-6 text-blue-500\" />;\r\n            default:        return null;\r\n        }\r\n    };\r\n    const getTitleClass = () => {\r\n        switch (type) {\r\n            case 'success': return 'text-green-600 dark:text-green-400';\r\n            case 'error':   return 'text-red-600 dark:text-red-400';\r\n            case 'info':    return 'text-blue-600 dark:text-blue-400';\r\n            default:        return theme === 'dark' ? 'text-white' : 'text-gray-800';\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className={`fixed inset-0 bg-black/60 backdrop-blur-sm flex justify-center items-center z-[200] transition-opacity duration-300 ${isVisible ? 'opacity-100' : 'opacity-0 pointer-events-none'}`}>\r\n            <div className={`p-6 rounded-2xl shadow-2xl w-full max-w-md m-4 border transform transition-all duration-300 ${isVisible ? 'scale-100 translate-y-0' : 'scale-95 translate-y-4'} ${theme === 'dark' ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'}`}>\r\n                <div className=\"flex items-start mb-4\"> {/* Changed items-center to items-start for long titles */}\r\n                    <div className=\"flex-shrink-0 pt-1\">{getIcon()}</div> {/* Added pt-1 for alignment */}\r\n                    <h3 className={`text-xl font-bold ml-3 flex-grow ${getTitleClass()}`}>{title}</h3>\r\n                    {/* Show close button only for info or non-auto-closing types */}\r\n                    {(type === 'info') && (\r\n                        <button onClick={handleClose} className=\"ml-2 p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 flex-shrink-0\">\r\n                            <X size={20} />\r\n                        </button>\r\n                    )}\r\n                </div>\r\n                <p className={`text-sm ${theme === 'dark' ? 'text-gray-300' : 'text-gray-600'}`}>{message}</p>\r\n                 {/* Explicit OK button only needed for info type */}\r\n                 {(type === 'info') && (\r\n                     <div className=\"mt-5 flex justify-end\"> {/* Increased margin top */}\r\n                         <button\r\n                             onClick={handleClose}\r\n                             className={`px-5 py-2 rounded-lg font-medium text-sm transition-colors bg-blue-500 hover:bg-blue-600 text-white`}\r\n                         >\r\n                             OK\r\n                         </button>\r\n                     </div>\r\n                 )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\n// Custom Confirmation Modal Component\r\nconst CustomConfirmModal = ({ isOpen, onClose, onConfirm, title, message, confirmText, isConfirming, theme, type = 'warning' }) => {\r\n    const [isVisible, setIsVisible] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (isOpen) {\r\n            setIsVisible(true);\r\n        } else {\r\n             setIsVisible(false);\r\n        }\r\n    }, [isOpen]);\r\n\r\n    const handleClose = useCallback(() => { // Wrap in useCallback\r\n        setIsVisible(false);\r\n        setTimeout(() => onClose(), 300); // Match transition duration\r\n    }, [onClose]);\r\n\r\n     // Render immediately if isOpen is true, rely on isVisible for animations\r\n     if (!isOpen && !isVisible) return null; // Only return null if fully closed and animation finished\r\n\r\n    const getIcon = () => {\r\n        switch (type) {\r\n             case 'danger':  return <FaExclamationTriangle className=\"w-6 h-6 text-red-500\" />;\r\n             case 'warning': return <FaExclamationTriangle className=\"w-6 h-6 text-yellow-500\" />;\r\n             case 'info':    return <FaInfoCircle className=\"w-6 h-6 text-blue-500\" />;\r\n             default:        return <FaExclamationTriangle className=\"w-6 h-6 text-yellow-500\" />; // Default to warning\r\n         }\r\n    };\r\n    const getTitleClass = () => {\r\n        switch (type) {\r\n             case 'danger':  return 'text-red-600 dark:text-red-400';\r\n             case 'warning': return 'text-yellow-600 dark:text-yellow-400';\r\n             case 'info':    return 'text-blue-600 dark:text-blue-400';\r\n             default:        return 'text-yellow-600 dark:text-yellow-400'; // Default to warning\r\n         }\r\n    };\r\n    const getConfirmButtonClass = () => {\r\n        switch (type) {\r\n             case 'danger':  return 'bg-red-600 hover:bg-red-700 focus-visible:outline-red-600';\r\n             case 'warning': return 'bg-yellow-500 hover:bg-yellow-600 focus-visible:outline-yellow-500 text-white'; // Yellow needs white text often\r\n             case 'info':    return 'bg-blue-600 hover:bg-blue-700 focus-visible:outline-blue-600';\r\n             default:        return 'bg-yellow-500 hover:bg-yellow-600 focus-visible:outline-yellow-500 text-white'; // Default to warning\r\n         }\r\n    };\r\n\r\n    return (\r\n        <div className={`fixed inset-0 bg-black/60 backdrop-blur-sm flex justify-center items-center z-[200] transition-opacity duration-300 ${isVisible ? 'opacity-100' : 'opacity-0 pointer-events-none'}`}>\r\n            <div className={`p-6 rounded-2xl shadow-2xl w-full max-w-md m-4 border transform transition-all duration-300 ${isVisible ? 'scale-100 translate-y-0' : 'scale-95 translate-y-4'} ${theme === 'dark' ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'}`}>\r\n                <div className=\"flex items-start mb-4\"> {/* Changed items-center to items-start */}\r\n                    <div className=\"flex-shrink-0 pt-1\">{getIcon()}</div> {/* Added pt-1 */}\r\n                    <h3 className={`text-xl font-bold ml-3 flex-grow ${getTitleClass()}`}>{title}</h3>\r\n                    <button onClick={handleClose} className=\"ml-2 p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 flex-shrink-0\">\r\n                        <X size={20} />\r\n                    </button>\r\n                </div>\r\n                <p className={`mb-6 text-sm ${theme === 'dark' ? 'text-gray-300' : 'text-gray-600'}`}>{message}</p>\r\n                <div className=\"flex justify-end space-x-3\">\r\n                    <button\r\n                        onClick={handleClose}\r\n                        className={`px-5 py-2 rounded-lg font-medium text-sm transition-colors ${theme === 'dark' ? 'bg-gray-600 hover:bg-gray-500 text-gray-200' : 'bg-gray-200 hover:bg-gray-300 text-gray-700'}`}\r\n                    >\r\n                        Cancel\r\n                    </button>\r\n                    <button\r\n                        onClick={onConfirm}\r\n                        disabled={isConfirming}\r\n                        className={`px-5 py-2 rounded-lg font-medium text-sm text-white transition-colors flex items-center justify-center focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 ${getConfirmButtonClass()} ${isConfirming ? 'opacity-75 cursor-not-allowed' : ''}`}\r\n                    >\r\n                        {isConfirming ? (\r\n                            <>\r\n                                <div className=\"h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2\"></div>\r\n                                Processing...\r\n                            </>\r\n                        ) : (\r\n                            confirmText\r\n                        )}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n// Main Permissions Page Component\r\nconst PermissionsPage = () => {\r\n    const { theme, permissionsdata = [], userData, setPermissionsData } = useContext(Context); // Default permissionsdata to empty array\r\n    const [permissions, setPermissions] = useState({});\r\n    const [loading, setLoading] = useState(true);\r\n    const [isSubmitting, setIsSubmitting] = useState(false);\r\n    const [matchedObject, setMatchedObject] = useState(null);\r\n    const [activeRoleTab, setActiveRoleTab] = useState(null);\r\n\r\n    // Notification state\r\n    const [notification, setNotification] = useState({ isOpen: false, type: '', title: '', message: '' });\r\n    // Confirmation modal state\r\n    const [confirmModal, setConfirmModal] = useState({ isOpen: false, title: '', message: '', confirmText: '', onConfirm: null, type: 'warning', isConfirming: false });\r\n\r\n    const userRole = useMemo(() => userData?.roles?.[0]?.toUpperCase(), [userData]); // Memoize userRole\r\n    const loggedinuserRole = userRole ? userRole : null;\r\n\r\n    // Find the permission object for the logged-in user (for UI control checks if needed later)\r\n    useEffect(() => {\r\n        if (loggedinuserRole && permissionsdata && permissionsdata.length > 0) {\r\n            const matched = permissionsdata.find(\r\n            role => role.roleName?.trim() === loggedinuserRole.trim()\r\n            );\r\n            setMatchedObject(matched || null);\r\n        } else {\r\n            setMatchedObject(null); // Reset if data/role changes\r\n        }\r\n    }, [loggedinuserRole, permissionsdata]);\r\n\r\n    const [newPermissionLabel, setNewPermissionLabel] = useState('');\r\n    const [allPermissionOptions, setAllPermissionOptions] = useState([]);\r\n\r\n    const [isAddRoleModalOpen, setIsAddRoleModalOpen] = useState(false);\r\n    const [newRoleName, setNewRoleName] = useState('');\r\n    const [isAddingRole, setIsAddingRole] = useState(false);\r\n\r\n    // Custom notification handlers\r\n    const showNotification = useCallback((type, title, message) => {\r\n        setNotification({ isOpen: true, type, title, message });\r\n    }, []);\r\n    const closeNotification = useCallback(() => {\r\n        setNotification({ isOpen: false, type: '', title: '', message: '' });\r\n    }, []);\r\n\r\n    // Custom confirmation handlers\r\n    const showConfirmModal = useCallback((title, message, confirmText, onConfirm, type = 'warning') => {\r\n        setConfirmModal({ isOpen: true, title, message, confirmText, onConfirm, type, isConfirming: false });\r\n    }, []);\r\n    const closeConfirmModal = useCallback(() => {\r\n        setConfirmModal({ isOpen: false, title: '', message: '', confirmText: '', onConfirm: null, type: 'warning', isConfirming: false });\r\n    }, []);\r\n\r\n    // --- Helper Functions ---\r\n    const formatPermissionLabel = useCallback((permission) => {\r\n        if (!permission) return '';\r\n        // Specific overrides first\r\n        if (permission === 'CREAT_USER') return 'Create User';\r\n        if (permission === 'DELETE_USER') return 'Delete User';\r\n        if (permission === 'CREATE_TASK') return 'Create Task';\r\n        if (permission === 'VIEW_TASKS') return 'View Tasks';\r\n        if (permission === 'VIEW_REPORTS') return 'View Reports';\r\n        if (permission === 'PERMISSIONS_BUTTENS') return 'Permissions Buttons'; // Check spelling if needed\r\n        if (permission === 'CREATE_HR') return 'Create HR';\r\n        // General formatting\r\n        return permission.replace(/_/g, ' ').toLowerCase().replace(/\\b\\w/g, l => l.toUpperCase());\r\n    }, []);\r\n\r\n    const mapAPIRoleToKey = useCallback((apiRoleName) => {\r\n        if (!apiRoleName) return null;\r\n        if (apiRoleName.startsWith('ROLE_')) {\r\n          return apiRoleName.substring(5).toLowerCase();\r\n        }\r\n        return apiRoleName.toLowerCase(); // Fallback if needed\r\n    }, []);\r\n\r\n\r\n    // Effect to initialize state when API data (permissionsdata) changes\r\n    useEffect(() => {\r\n        if (permissionsdata && Array.isArray(permissionsdata)) {\r\n            // Create Permission Options\r\n            const allApiPermissions = permissionsdata.flatMap(role => role.permissions || []);\r\n            const uniqueApiPermissions = [...new Set(allApiPermissions)];\r\n            const options = uniqueApiPermissions.map(p => ({ value: p, label: formatPermissionLabel(p) }))\r\n                                             .sort((a, b) => a.label.localeCompare(b.label));\r\n            setAllPermissionOptions(options);\r\n\r\n            // Initialize Permissions State & Active Tab\r\n            const initialPermissions = {};\r\n            let firstRoleKey = null;\r\n            const sortedApiData = [...permissionsdata].sort((a,b) => (a.roleName || \"\").localeCompare(b.roleName || \"\")); // Sort roles before processing\r\n\r\n            sortedApiData.forEach(apiRole => {\r\n                const roleKey = mapAPIRoleToKey(apiRole.roleName);\r\n                if (roleKey) {\r\n                    if (!firstRoleKey) firstRoleKey = roleKey; // Capture the first valid role key from sorted list\r\n                    initialPermissions[roleKey] = {\r\n                        id: apiRole.id,\r\n                        permissions: apiRole.permissions ? [...new Set(apiRole.permissions)] : []\r\n                    };\r\n                }\r\n            });\r\n            setPermissions(initialPermissions);\r\n\r\n             // Set active tab: use current if still valid, else first, else null\r\n            setActiveRoleTab(prevTab => {\r\n                if (prevTab && initialPermissions[prevTab]) {\r\n                    return prevTab; // Keep current active tab if it still exists\r\n                }\r\n                return firstRoleKey; // Otherwise, set to the first available role or null\r\n            });\r\n\r\n\r\n            setLoading(false);\r\n        } else {\r\n            // Handle case where permissionsdata is empty or invalid\r\n            setAllPermissionOptions([]);\r\n            setPermissions({});\r\n            setActiveRoleTab(null);\r\n            setLoading(false);\r\n        }\r\n    }, [permissionsdata, formatPermissionLabel, mapAPIRoleToKey]); // Added dependencies\r\n\r\n\r\n    // Add New Permission Option Handler\r\n    const handleAddPermission = useCallback(() => {\r\n        if (!newPermissionLabel.trim()) {\r\n            showNotification('error', 'Validation Error', 'Please enter a label for the new permission.');\r\n            return;\r\n        }\r\n        const newPermissionValue = newPermissionLabel.trim().toUpperCase().replace(/\\s+/g, '_');\r\n        if (allPermissionOptions.some(option => option.value === newPermissionValue)) {\r\n            showNotification('error', 'Duplicate Permission', 'A permission option with this value already exists.');\r\n            return;\r\n        }\r\n        const newPermission = { value: newPermissionValue, label: formatPermissionLabel(newPermissionValue) };\r\n        setAllPermissionOptions(prevOptions => [...prevOptions, newPermission].sort((a, b) => a.label.localeCompare(b.label)));\r\n        setNewPermissionLabel('');\r\n        showNotification('info', 'Permission Option Added', `\"${newPermission.label}\" option created. Assign it to roles and save.`);\r\n    }, [newPermissionLabel, allPermissionOptions, formatPermissionLabel, showNotification]);\r\n\r\n    // Handle permission selection change for the ACTIVE tab\r\n    const handleSelectionChange = useCallback((selectedOptions, roleKey) => {\r\n        if (!roleKey) return; // Should have an active role tab\r\n        const selectedValues = selectedOptions ? selectedOptions.map(option => option.value) : [];\r\n        setPermissions(prev => ({\r\n            ...prev,\r\n            [roleKey]: { ...prev[roleKey], permissions: selectedValues }\r\n        }));\r\n    }, []);\r\n\r\n    // Handle Add New Role (API call)\r\n    const handleAddNewRole = useCallback(async (e) => {\r\n        e.preventDefault();\r\n        const trimmedRoleName = newRoleName.trim().toUpperCase();\r\n        if (!trimmedRoleName || !trimmedRoleName.startsWith('ROLE_')) {\r\n            showNotification('error', 'Invalid Role Name', \"Role name must start with 'ROLE_' and cannot be empty.\");\r\n            return;\r\n        }\r\n        const roleKey = mapAPIRoleToKey(trimmedRoleName);\r\n        if (permissions[roleKey]) {\r\n            showNotification('error', 'Role Already Exists', 'This role already exists.');\r\n            return;\r\n        }\r\n        setIsAddingRole(true);\r\n        const newRoleDto = { roleName: trimmedRoleName, permissions: [] };\r\n\r\n        try {\r\n            await authApi.post('/role-access', newRoleDto);\r\n            const response = await authApi.get('/role-access/all'); // Refetch updated list\r\n            setPermissionsData(response.data); // Update context, triggers useEffect re-initialization\r\n            // The useEffect will handle setting the active tab correctly based on the new data\r\n            setIsAddRoleModalOpen(false);\r\n            setNewRoleName('');\r\n            showNotification('success', 'Role Created', `Role '${newRoleDto.roleName}' created. Assign permissions and save.`);\r\n        } catch (error) {\r\n            console.error(\"Failed to create new role:\", error);\r\n            const errorMessage = error.response?.data?.message || \"An error occurred.\";\r\n            showNotification('error', 'Role Creation Failed', `Error: ${errorMessage}`);\r\n        } finally {\r\n            setIsAddingRole(false);\r\n        }\r\n    }, [newRoleName, permissions, mapAPIRoleToKey, setPermissionsData, showNotification]);\r\n\r\n\r\n    // Handle Save Permissions (API call)\r\n    const handleSubmit = useCallback(async (e) => {\r\n        e.preventDefault();\r\n        setIsSubmitting(true);\r\n\r\n        const transformedPermissions = Object.keys(permissions).map(key => {\r\n            const apiRoleName = `ROLE_${key.toUpperCase()}`;\r\n            return {\r\n                id: permissions[key]?.id, // Include the ID from the state\r\n                roleName: apiRoleName,\r\n                permissions: permissions[key]?.permissions || [],\r\n            };\r\n        }).filter(p => p.id !== undefined); // Ensure we only send roles that were originally loaded (have an ID) or newly created roles might need a different endpoint? Check API.\r\n\r\n        if (transformedPermissions.length === 0) {\r\n            showNotification('info', 'No Changes', 'No permissions data found to save.');\r\n            setIsSubmitting(false);\r\n            return;\r\n        }\r\n\r\n\r\n        try {\r\n            await authApi.post('role-access/updateAll', transformedPermissions);\r\n            const response = await authApi.get('/role-access/all'); // Refetch to confirm\r\n            setPermissionsData(response.data);\r\n            showNotification('success', 'Permissions Saved', 'All changes have been saved successfully!');\r\n        } catch (error) {\r\n            console.error(\"Error saving permissions:\", error);\r\n            const errorMessage = error.response?.data?.message || \"An error occurred while saving permissions.\";\r\n            showNotification('error', 'Save Failed', `Error: ${errorMessage}`);\r\n        } finally {\r\n            setIsSubmitting(false);\r\n        }\r\n    }, [permissions, setPermissionsData, showNotification]);\r\n\r\n    // Handle Reset Permissions (Client-side reload from context data)\r\n    const handleReset = useCallback(() => {\r\n        if (permissionsdata && Array.isArray(permissionsdata)) {\r\n            // Re-run the initialization logic directly\r\n            const initialPermissions = {};\r\n            let firstRoleKey = null;\r\n            const sortedApiData = [...permissionsdata].sort((a,b) => (a.roleName || \"\").localeCompare(b.roleName || \"\"));\r\n\r\n            sortedApiData.forEach(apiRole => {\r\n                const roleKey = mapAPIRoleToKey(apiRole.roleName);\r\n                if (roleKey) {\r\n                    if (!firstRoleKey) firstRoleKey = roleKey;\r\n                    initialPermissions[roleKey] = {\r\n                        id: apiRole.id,\r\n                        permissions: apiRole.permissions ? [...new Set(apiRole.permissions)] : []\r\n                    };\r\n                }\r\n            });\r\n            setPermissions(initialPermissions);\r\n            // Reset active tab as well, if desired, or keep current if it still exists\r\n            setActiveRoleTab(prevTab => (initialPermissions[prevTab] ? prevTab : firstRoleKey));\r\n\r\n            showNotification('info', 'Changes Reset', 'Permissions reverted to last saved state.');\r\n        } else {\r\n             showNotification('error', 'Reset Failed', 'Original permissions data not available.');\r\n        }\r\n    }, [permissionsdata, mapAPIRoleToKey, showNotification]);\r\n\r\n\r\n    // Handle Delete Role (Triggered by 'X' icon)\r\n    const handleDeleteRole = useCallback((roleKeyToDelete) => {\r\n        if (!roleKeyToDelete) return;\r\n        if (roleKeyToDelete === 'admin') { // Basic protection\r\n            showNotification('error', 'Deletion Denied', 'The ADMIN role cannot be deleted.');\r\n            return;\r\n        }\r\n\r\n        const roleToDeleteName = `ROLE_${roleKeyToDelete.toUpperCase()}`;\r\n\r\n        showConfirmModal(\r\n            'Confirm Role Deletion',\r\n            `Are you sure you want to permanently delete the role: ${roleToDeleteName}? This action cannot be undone.`,\r\n            'Delete Role',\r\n            async () => {\r\n                setConfirmModal(prev => ({ ...prev, isConfirming: true }));\r\n                try {\r\n                    const callerRole = loggedinuserRole || 'ADMIN'; // Determine caller role appropriately\r\n                    await authApi.delete(`role-access/delete/${callerRole}/${roleToDeleteName}`);\r\n                    const response = await authApi.get('/role-access/all'); // Refetch updated list\r\n                    setPermissionsData(response.data); // Update context, triggers useEffect re-render\r\n                    // Active tab logic is handled by the main useEffect now\r\n                    closeConfirmModal();\r\n                    showNotification('success', 'Role Deleted', `Role '${roleToDeleteName}' has been successfully deleted.`);\r\n                } catch (error) {\r\n                    console.error(\"Failed to delete role:\", error);\r\n                    const errorMessage = error.response?.data?.message || \"An error occurred.\";\r\n                    closeConfirmModal(); // Close modal even on error\r\n                    showNotification('error', 'Delete Failed', `Error: ${errorMessage}`);\r\n                }\r\n                // No need to set isConfirming false here as modal closes\r\n            },\r\n            'danger' // Use danger type for deletion confirmation\r\n        );\r\n    }, [loggedinuserRole, setPermissionsData, showConfirmModal, closeConfirmModal, showNotification]);\r\n\r\n\r\n    // Custom styles for react-select\r\n    // Inside PermissionsPage component...\r\n\r\nconst customSelectStyles = useMemo(() => ({\r\n    control: (provided, state) => ({\r\n        ...provided,\r\n        backgroundColor: theme === 'dark' ? '#374151' : '#fff', // gray-700\r\n        borderColor: state.isFocused\r\n            ? (theme === 'dark' ? '#60A5FA' : '#3B82F6') // Brighter blue for focus (blue-400 / blue-500)\r\n            : (theme === 'dark' ? '#4B5563' : '#D1D5DB'), // gray-600 : gray-300\r\n        minHeight: '48px', // Maintain height for consistency\r\n        boxShadow: state.isFocused ? `0 0 0 2px ${theme === 'dark' ? 'rgba(96, 165, 250, 0.5)' : 'rgba(59, 130, 246, 0.4)'}` : null,\r\n        borderRadius: '0.5rem', // Slightly larger border-radius for the control\r\n        padding: '2px 4px', // Add slight padding inside control\r\n        '&:hover': {\r\n            borderColor: theme === 'dark' ? '#6B7280' : '#A1A1AA', // gray-500 : gray-400\r\n        },\r\n    }),\r\n    valueContainer: (provided) => ({\r\n        ...provided,\r\n        padding: '2px 6px', // Adjust padding inside value container for tags\r\n        gap: '4px', // Add gap between multi-value items\r\n    }),\r\n    input: (provided) => ({\r\n        ...provided,\r\n        color: theme === 'dark' ? '#F3F4F6' : '#1F2937',\r\n        margin: '0px',\r\n        paddingBlock: '2px',\r\n    }),\r\n    indicatorSeparator: () => ({ display: 'none' }),\r\n    dropdownIndicator: (provided) => ({ /* ... (keep previous styles) ... */ }),\r\n    clearIndicator: (provided) => ({ /* ... (keep previous styles) ... */ }),\r\n    placeholder: (provided) => ({ ...provided, color: theme === 'dark' ? '#9CA3AF' : '#6B7280' }),\r\n    menu: (provided) => ({ /* ... (keep previous styles) ... */ }),\r\n    option: (provided, state) => ({ /* ... (keep previous styles) ... */ }),\r\n\r\n    // --- Styling the Selected Permission Tags ---\r\n    multiValue: (provided) => ({\r\n        ...provided,\r\n        backgroundColor: theme === 'dark' ? 'rgba(59, 130, 246, 0.3)' : 'rgba(59, 130, 246, 0.15)', // Use theme-aware blue background (lighter)\r\n        // backgroundColor: theme === 'dark' ? '#4B5563' : '#E0E7FF', // Alternative: gray/indigo\r\n        borderRadius: '9999px', // Fully rounded pills\r\n        margin: '2px', // Minimal margin\r\n        border: `1px solid ${theme === 'dark' ? 'rgba(59, 130, 246, 0.5)' : 'rgba(59, 130, 246, 0.3)'}`, // Subtle border matching background\r\n        // border: `1px solid ${theme === 'dark' ? '#6B7280' : '#C7D2FE'}`, // Alternative border\r\n        overflow: 'hidden', // Ensure border radius clips remove button\r\n    }),\r\n    multiValueLabel: (provided) => ({\r\n        ...provided,\r\n        color: theme === 'dark' ? '#BFDBFE' : '#1E40AF', // Lighter blue text (dark) / Darker blue text (light)\r\n        // color: theme === 'dark' ? '#E5E7EB' : '#4338CA', // Alternative: gray/indigo text\r\n        padding: '3px', // Adjust padding inside label\r\n        paddingLeft: '10px', // More padding on the left\r\n        fontSize: '0.8rem', // Slightly smaller font size for pills\r\n        fontWeight: '500', // Medium weight\r\n    }),\r\n    multiValueRemove: (provided) => ({\r\n        ...provided,\r\n        color: theme === 'dark' ? '#93C5FD' : '#3B82F6', // Blueish color for 'x'\r\n        // color: theme === 'dark' ? '#9CA3AF' : '#6D28D9', // Alternative: gray/violet\r\n        backgroundColor: 'transparent',\r\n        borderRadius: '0 9999px 9999px 0',\r\n        padding: '4px', // Keep padding\r\n        marginLeft: '1px', // Minimal space\r\n        marginRight: '1px',\r\n        // Enhanced Hover/Focus for the 'x'\r\n        '&:hover, &:focus-visible': {\r\n            backgroundColor: theme === 'dark' ? '#DC2626' : '#EF4444', // Red background\r\n            color: 'white',\r\n            transform: 'scale(1.1)',\r\n            outline: 'none',\r\n        },\r\n        transition: 'all 150ms', // Apply transition to all properties\r\n        cursor: 'pointer',\r\n    }),\r\n    noOptionsMessage: (provided) => ({ /* ... (keep previous styles) ... */ }),\r\n}), [theme]); // Depend on theme\r\n\r\n\r\n    // --- Render Logic ---\r\n\r\n    if (loading) {\r\n        return <div className={`flex justify-center items-center h-screen ${theme === 'dark' ? 'bg-gray-900 text-white' : 'bg-gray-50'}`}>Loading Permissions...</div>;\r\n    }\r\n\r\n    const rolesToRender = Object.keys(permissions).sort((a, b) => {\r\n        if (a === 'admin') return -1;\r\n        if (b === 'admin') return 1;\r\n        return a.localeCompare(b);\r\n    });\r\n\r\n    const selectedPermissionsForActiveRole = activeRoleTab ? allPermissionOptions.filter(\r\n        option => permissions[activeRoleTab]?.permissions?.includes(option.value)\r\n    ) : [];\r\n\r\n\r\n    return (\r\n        <>\r\n            {/* Add Role Modal */}\r\n             {isAddRoleModalOpen && (\r\n                <div className=\"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[151]\">\r\n                  <div className={`p-6 rounded-2xl shadow-2xl w-full max-w-md m-4 border ${theme === 'dark' ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'}`}>\r\n                    <div className=\"flex items-center mb-4\">\r\n                      <FaPlus className=\"w-6 h-6 text-blue-500\" />\r\n                      <h2 className={`text-xl font-bold ml-3 ${theme === 'dark' ? 'text-white' : 'text-gray-800'}`}>Add New Role</h2>\r\n                      <button\r\n                        onClick={() => setIsAddRoleModalOpen(false)}\r\n                        className=\"ml-auto p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200\"\r\n                        aria-label=\"Close add role modal\" // Accessibility\r\n                      >\r\n                        <X size={20} />\r\n                      </button>\r\n                    </div>\r\n                    <form onSubmit={handleAddNewRole}>\r\n                      <label htmlFor=\"newRoleNameInput\" className={`block text-sm font-medium mb-1 ${theme === 'dark' ? 'text-gray-300' : 'text-gray-700'}`}>\r\n                        Role Name (must start with ROLE_)\r\n                      </label>\r\n                      <input\r\n                        id=\"newRoleNameInput\"\r\n                        type=\"text\"\r\n                        value={newRoleName}\r\n                        onChange={(e) => setNewRoleName(e.target.value)}\r\n                        placeholder=\"e.g., ROLE_MANAGER\"\r\n                        className={`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 mb-4 ${theme === 'dark' ? 'bg-gray-700 border-gray-600 text-white focus:ring-blue-500' : 'bg-white border-gray-300 focus:ring-blue-600'}`}\r\n                      />\r\n                      <div className=\"flex justify-end gap-3\"> {/* Reduced gap */}\r\n                        <button\r\n                          type=\"button\"\r\n                          onClick={() => setIsAddRoleModalOpen(false)}\r\n                          className={`px-4 py-2 rounded-lg font-medium text-sm transition-colors ${theme === 'dark' ? 'bg-gray-600 hover:bg-gray-500 text-gray-200' : 'bg-gray-200 hover:bg-gray-300 text-gray-700'}`}\r\n                          disabled={isAddingRole}\r\n                        >\r\n                          Cancel\r\n                        </button>\r\n                        <button\r\n                          type=\"submit\"\r\n                          className=\"px-4 py-2 bg-blue-600 text-white font-semibold text-sm rounded-lg hover:bg-blue-700 disabled:bg-blue-400 disabled:opacity-75 disabled:cursor-not-allowed flex items-center justify-center\"\r\n                          disabled={isAddingRole || !newRoleName.trim() || !newRoleName.toUpperCase().startsWith('ROLE_')}\r\n                        >\r\n                          {isAddingRole ? (\r\n                            <>\r\n                              <div className=\"h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2\"></div>\r\n                              Adding...\r\n                            </>\r\n                          ) : (\r\n                            'Add Role'\r\n                          )}\r\n                        </button>\r\n                      </div>\r\n                    </form>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n\r\n            {/* Main Page Content */}\r\n            <div className={`min-h-screen px-0 sm:px-4 md:px-6 lg:px-8 py-4 sm:py-6 ${theme === 'dark' ? 'bg-gray-900 text-white' : 'bg-gray-50 text-gray-800'}`}>\r\n                <div className=\"max-w-6xl mx-auto\">\r\n\r\n                    {/* Header */}\r\n                    <div className=\"mb-6 sm:mb-8 px-4 sm:px-0 flex justify-between items-center\">\r\n                        <div>\r\n                            <h1 className=\"text-2xl sm:text-3xl font-bold mb-1 sm:mb-2\"> {/* Reduced margin */}\r\n                            Permissions Management\r\n                            </h1>\r\n                            <p className={`text-sm ${theme === 'dark' ? 'text-gray-400' : 'text-gray-600'}`}>Configure role-based permissions</p>\r\n                        </div>\r\n                        {/* Removed Edit Button */}\r\n                    </div>\r\n\r\n                    {/* Add New Permission / Add Role Section */}\r\n                     <div className={`p-4 sm:p-6 rounded-lg shadow-md mb-6 sm:mb-8 mx-4 sm:mx-0 ${theme === 'dark' ? 'bg-gray-800 border border-gray-700' : 'bg-white border'}`}> {/* Added border */}\r\n                        <div className=\"flex flex-col md:flex-row justify-between items-start gap-4\">\r\n                            {/* Add New Permission Form */}\r\n                            <div className=\"w-full md:w-auto md:flex-grow mb-4 md:mb-0\">\r\n                                <label htmlFor=\"newPermissionInput\" className={`block text-sm font-medium mb-1 ${theme === 'dark' ? 'text-gray-300' : 'text-gray-700'}`}>\r\n                                    Add New Permission Option\r\n                                </label>\r\n                                <div className=\"flex flex-col sm:flex-row gap-2\">\r\n                                <input\r\n                                    id=\"newPermissionInput\"\r\n                                    type=\"text\"\r\n                                    value={newPermissionLabel}\r\n                                    onChange={(e) => setNewPermissionLabel(e.target.value)}\r\n                                    placeholder=\"Enter label (e.g., Edit Own Profile)\"\r\n                                    className={`flex-grow p-3 border rounded-lg focus:outline-none focus:ring-1 ${theme === 'dark' ? 'bg-gray-700 border-gray-600 text-white placeholder-gray-400 focus:ring-blue-500' : 'bg-white border-gray-300 text-gray-900 placeholder-gray-500 focus:ring-blue-600 focus:border-blue-600'}`}\r\n                                />\r\n                                <button\r\n                                    type=\"button\"\r\n                                    onClick={handleAddPermission}\r\n                                    className=\"px-4 py-3 bg-blue-600 text-white font-semibold text-sm rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\r\n                                    disabled={!newPermissionLabel.trim()}\r\n                                >\r\n                                    <FaPlus size={14}/> Add Option\r\n                                </button>\r\n                                </div>\r\n                                <p className={`text-xs mt-1 ${theme === 'dark' ? 'text-gray-500' : 'text-gray-400'}`}>Adds an option available for selection in all roles.</p>\r\n                            </div>\r\n                            {/* Add New Role Button */}\r\n                            <div className=\"flex-shrink-0 w-full md:w-auto\">\r\n                                <label className=\"block text-sm font-medium mb-1 invisible md:visible\">_</label> {/* Spacer - invisible on small screens */}\r\n                                <button\r\n                                    onClick={() => setIsAddRoleModalOpen(true)}\r\n                                    className=\"w-full px-4 py-3 bg-green-600 text-white font-semibold text-sm rounded-lg hover:bg-green-700 flex items-center justify-center gap-2\"\r\n                                >\r\n                                    <FaPlus size={14}/> Add New Role\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n                    {/* Horizontal Tabs for Roles */}\r\n                    <div className={`mb-6 sm:mb-8 border-b ${theme === 'dark' ? 'border-gray-700' : 'border-gray-200'}`}>\r\n                        <div className=\"flex space-x-1 overflow-x-auto pb-px -mb-px px-4 sm:px-0\"> {/* Added padding for scroll */}\r\n                            {rolesToRender.map((roleKey) => (\r\n                                <div key={roleKey} className=\"relative group flex items-center flex-shrink-0\"> {/* Added flex-shrink-0 */}\r\n                                    <button\r\n                                        onClick={() => setActiveRoleTab(roleKey)}\r\n                                        // Padding adjusted: more horizontal, less vertical for tabs\r\n                                        className={`flex items-center gap-2 pl-4 pr-9 py-2.5 text-sm sm:text-base font-medium border-b-2 whitespace-nowrap transition-colors duration-150 rounded-t-md\r\n                                            ${activeRoleTab === roleKey\r\n                                                ? `border-blue-500 text-blue-600 dark:text-blue-400 ${theme === 'dark' ? 'bg-gray-800' : 'bg-white'}` // Active tab background matches content area below\r\n                                                : `border-transparent hover:border-gray-400 dark:hover:border-gray-500 ${theme === 'dark' ? 'text-gray-400 hover:text-gray-200 hover:bg-gray-700/50' : 'text-gray-500 hover:text-gray-700 hover:bg-gray-100'}` // Subtle hover background\r\n                                            }\r\n                                        `}\r\n                                    >\r\n                                        <span className=\"capitalize\">{roleKey.replace(/_/g, ' ')}</span>\r\n                                    </button>\r\n                                    {/* Delete 'X' Icon - Adjusted positioning and visibility */}\r\n                                    {roleKey !== 'admin' && ( // Don't allow deleting admin\r\n                                        <button\r\n                                            onClick={(e) => { e.stopPropagation(); handleDeleteRole(roleKey); }}\r\n                                            // Position inside the button padding area, more intuitive\r\n                                            className={`absolute top-1/2 right-2 transform -translate-y-1/2 p-1 rounded-full text-gray-400 hover:text-red-500 hover:bg-red-100 dark:hover:bg-red-900/50 opacity-0 group-hover:opacity-100 focus:opacity-100 transition-opacity duration-150 ${activeRoleTab === roleKey ? 'opacity-100' : ''}`} // Visible on hover/focus or if active\r\n                                            title={`Delete ROLE_${roleKey.toUpperCase()}`}\r\n                                            aria-label={`Delete role ${roleKey}`} // Accessibility\r\n                                        >\r\n                                            <X size={14} />\r\n                                        </button>\r\n                                    )}\r\n                                </div>\r\n                            ))}\r\n                             {/* Add a filler div if no roles exist */}\r\n                             {rolesToRender.length === 0 && !loading && (\r\n                                <div className={`px-4 py-3 text-sm ${theme === 'dark' ? 'text-gray-500' : 'text-gray-400'}`}>\r\n                                    No roles found. Add a new role to begin.\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n                    {/* Active Role's Permission Selection Area */}\r\n                    {activeRoleTab && permissions[activeRoleTab] ? (\r\n                        <div className={`p-4 sm:p-6 md:p-8 rounded-lg shadow-md mx-4 sm:mx-0 ${theme === 'dark' ? 'bg-gray-800 border border-gray-700' : 'bg-white border'}`}> {/* Added border */}\r\n                            <h2 className={`text-lg sm:text-xl font-semibold capitalize mb-4 pb-2 border-b ${theme === 'dark' ? 'border-gray-700' : 'border-gray-200'}`}>\r\n                                Permissions for <span className='text-blue-600 dark:text-blue-400'>{activeRoleTab.replace(/_/g, ' ')}</span> Role\r\n                            </h2>\r\n                            <Select\r\n                                isMulti\r\n                                options={allPermissionOptions}\r\n                                value={selectedPermissionsForActiveRole}\r\n                                onChange={selectedOptions => handleSelectionChange(selectedOptions, activeRoleTab)}\r\n                                styles={customSelectStyles}\r\n                                placeholder=\"Select permissions for this role...\"\r\n                                closeMenuOnSelect={false}\r\n                                // isDisabled={isSubmitting} // Optionally disable while saving\r\n                                // className={isSubmitting ? 'opacity-70' : ''}\r\n                                aria-label={`Select permissions for ${activeRoleTab} role`} // Accessibility\r\n                            />\r\n                            <p className={`text-xs mt-3 ${theme === 'dark' ? 'text-gray-400' : 'text-gray-500'}`}>\r\n                                {selectedPermissionsForActiveRole.length} / {allPermissionOptions.length} permission(s) selected.\r\n                            </p>\r\n                        </div>\r\n                    ) : (\r\n                        // Show placeholder only if loading is finished and still no active tab\r\n                        !loading && rolesToRender.length > 0 && (\r\n                            <div className={`p-6 text-center rounded-lg mx-4 sm:mx-0 ${theme === 'dark' ? 'text-gray-500 bg-gray-800 border border-gray-700' : 'text-gray-600 bg-gray-100 border'}`}> {/* Added background/border */}\r\n                                Select a role tab above to view or edit its permissions.\r\n                            </div>\r\n                        )\r\n                    )}\r\n\r\n\r\n                    {/* Action Buttons (Save/Reset) - Show if roles exist */}\r\n                    {rolesToRender.length > 0 && (\r\n                        <div className=\"mt-6 sm:mt-8 pt-4 sm:pt-6 px-4 sm:px-0 border-t border-gray-200 dark:border-gray-700\">\r\n                            <div className=\"flex flex-col sm:flex-row justify-end gap-3 sm:gap-4\">\r\n                                <button\r\n                                    type=\"button\"\r\n                                    onClick={handleReset}\r\n                                    className={`w-full sm:w-auto px-5 py-2.5 border-2 rounded-lg text-sm font-semibold flex items-center justify-center gap-2 transition-colors ${theme === 'dark' ? 'border-gray-600 text-gray-200 hover:bg-gray-700' : 'border-gray-300 text-gray-700 hover:bg-gray-100'}`}\r\n                                    disabled={isSubmitting}\r\n                                >\r\n                                    <FaUndo size={14}/> Reset Changes\r\n                                </button>\r\n                                <button\r\n                                    type=\"button\"\r\n                                    onClick={handleSubmit}\r\n                                    disabled={isSubmitting}\r\n                                    className={`w-full sm:w-auto flex items-center justify-center gap-2 px-6 py-2.5 bg-gradient-to-r from-blue-600 to-indigo-600 text-white text-sm font-bold rounded-lg shadow-md transition-all ${isSubmitting ? 'cursor-not-allowed opacity-75' : 'hover:shadow-lg hover:from-blue-700 hover:to-indigo-700'}`}\r\n                                >\r\n                                    {isSubmitting ? (\r\n                                        <>\r\n                                            <div className=\"h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin\"></div>\r\n                                            Saving...\r\n                                        </>\r\n                                    ) : (\r\n                                        <><FaSave size={15}/> Save Permissions</>\r\n                                    )}\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                </div>\r\n            </div>\r\n\r\n            {/* Custom Notification */}\r\n            <CustomNotification\r\n                isOpen={notification.isOpen}\r\n                onClose={closeNotification}\r\n                type={notification.type}\r\n                title={notification.title}\r\n                message={notification.message}\r\n                theme={theme}\r\n            />\r\n\r\n            {/* Custom Confirmation Modal */}\r\n            <CustomConfirmModal\r\n                isOpen={confirmModal.isOpen}\r\n                onClose={closeConfirmModal}\r\n                onConfirm={confirmModal.onConfirm}\r\n                title={confirmModal.title}\r\n                message={confirmModal.message}\r\n                confirmText={confirmModal.confirmText}\r\n                isConfirming={confirmModal.isConfirming}\r\n                theme={theme}\r\n                type={confirmModal.type}\r\n            />\r\n        </>\r\n    );\r\n};\r\n\r\nexport default PermissionsPage;"],"names":["CustomNotification","_ref","isOpen","onClose","type","title","message","theme","isVisible","setIsVisible","useState","useEffect","timer","setTimeout","handleClose","clearTimeout","useCallback","_jsx","className","concat","children","_jsxs","getIcon","FaCheckCircle","FaExclamationTriangle","FaInfoCircle","getTitleClass","onClick","X","size","CustomConfirmModal","_ref2","onConfirm","confirmText","isConfirming","disabled","getConfirmButtonClass","_Fragment","PermissionsPage","permissionsdata","userData","setPermissionsData","useContext","Context","permissions","setPermissions","loading","setLoading","isSubmitting","setIsSubmitting","matchedObject","setMatchedObject","activeRoleTab","setActiveRoleTab","notification","setNotification","confirmModal","setConfirmModal","userRole","useMemo","_userData$roles","_userData$roles$","roles","toUpperCase","loggedinuserRole","length","matched","find","role","_role$roleName","roleName","trim","newPermissionLabel","setNewPermissionLabel","allPermissionOptions","setAllPermissionOptions","isAddRoleModalOpen","setIsAddRoleModalOpen","newRoleName","setNewRoleName","isAddingRole","setIsAddingRole","showNotification","closeNotification","showConfirmModal","arguments","undefined","closeConfirmModal","formatPermissionLabel","permission","replace","toLowerCase","l","mapAPIRoleToKey","apiRoleName","startsWith","substring","Array","isArray","allApiPermissions","flatMap","options","Set","map","p","value","label","sort","a","b","localeCompare","initialPermissions","firstRoleKey","forEach","apiRole","roleKey","id","prevTab","handleAddPermission","newPermissionValue","some","option","newPermission","prevOptions","handleSelectionChange","selectedOptions","selectedValues","prev","_objectSpread","handleAddNewRole","async","e","preventDefault","trimmedRoleName","newRoleDto","authApi","post","response","get","data","error","_error$response","_error$response$data","console","errorMessage","handleSubmit","transformedPermissions","Object","keys","key","_permissions$key","_permissions$key2","filter","_error$response2","_error$response2$data","handleReset","handleDeleteRole","roleKeyToDelete","roleToDeleteName","callerRole","delete","_error$response3","_error$response3$data","customSelectStyles","control","provided","state","backgroundColor","borderColor","isFocused","minHeight","boxShadow","borderRadius","padding","valueContainer","gap","input","color","margin","paddingBlock","indicatorSeparator","display","dropdownIndicator","clearIndicator","placeholder","menu","multiValue","border","overflow","multiValueLabel","paddingLeft","fontSize","fontWeight","multiValueRemove","marginLeft","marginRight","transform","outline","transition","cursor","noOptionsMessage","rolesToRender","selectedPermissionsForActiveRole","_permissions$activeRo","_permissions$activeRo2","includes","FaPlus","onSubmit","htmlFor","onChange","target","stopPropagation","Select","isMulti","styles","closeMenuOnSelect","FaUndo","FaSave"],"sourceRoot":""}