"use strict";(self.webpackChunktechlife=self.webpackChunktechlife||[]).push([[492],{492:(e,r,a)=>{a.r(r),a.d(r,{default:()=>B});var t=a(5043),l=a(9910),s=a(3721),o=a(5394),n=a(579);const i=()=>{const{theme:e}=(0,t.useContext)(l.o),{empID:r}=(0,s.g)(),a=(0,s.zy)(),i=new URLSearchParams(a.search),d="true"===i.get("fromContextMenu"),c=i.get("targetEmployeeId"),m=d&&c&&c!==r,[u,x]=(0,t.useState)(()=>{const e=localStorage.getItem("aboutResponses");return e?JSON.parse(e):{about:{text:"",isEditing:!1},jobLove:{text:"",isEditing:!1},interests:{text:"",isEditing:!1}}});(0,t.useEffect)(()=>{localStorage.setItem("aboutResponses",JSON.stringify(u))},[u]);const b=e=>{x(r=>({...r,[e]:{...r[e],isEditing:!0}}))},g=(r,a)=>{const{text:t,isEditing:l}=u[r];return t||l?l?(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("textarea",{className:"w-full p-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-purple-600 transition-colors duration-200 "+("dark"===e?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500"),rows:"4",defaultValue:t,id:`${r}-textarea`,placeholder:"Type your response here..."}),(0,n.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,n.jsx)("button",{onClick:()=>(e=>{x(r=>({...r,[e]:{...r[e],isEditing:!1}}))})(r),className:"px-4 py-2 rounded-md transition-colors duration-200 "+("dark"===e?"text-gray-300 hover:bg-gray-700":"text-gray-600 hover:bg-gray-100"),children:"Cancel"}),(0,n.jsx)("button",{onClick:()=>((e,r)=>{x(a=>({...a,[e]:{text:r,isEditing:!1}}))})(r,document.getElementById(`${r}-textarea`).value),className:"px-4 py-2 rounded-md transition-colors duration-200 bg-purple-600 text-white hover:bg-purple-700",children:"Save"})]})]}):(0,n.jsxs)("div",{className:"p-4 rounded-md relative group transition-colors duration-200 "+("dark"===e?"bg-gray-800 border border-gray-700":"bg-gray-50 border border-gray-200"),children:[(0,n.jsx)("p",{className:"whitespace-pre-wrap "+("dark"===e?"text-gray-200":"text-gray-700"),children:t}),(0,n.jsx)("button",{onClick:()=>b(r),className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-all duration-200\n            px-3 py-1 border rounded-md shadow-sm "+("dark"===e?"bg-gray-700 border-gray-600 text-gray-300 hover:text-gray-100 hover:border-gray-500":"bg-white border-gray-200 text-gray-600 hover:text-gray-800 hover:border-gray-300"),children:"Edit"})]}):(0,n.jsx)("button",{onClick:()=>b(r),className:"border rounded-md px-4 py-2 transition-colors duration-200 "+("dark"===e?"text-purple-400 border-purple-400 hover:bg-purple-900/20":"text-purple-600 border-purple-600 hover:bg-purple-50"),children:"Add your response"})};return(0,n.jsxs)("div",{className:"p-6 transition-colors duration-200 "+("dark"===e?"bg-gray-900":"bg-white"),children:[d&&(0,n.jsx)("div",{className:"mb-6 p-4 rounded-2xl border-l-4 border-blue-500 shadow-lg "+("dark"===e?"bg-blue-900/20 border-blue-400":"bg-blue-50 border-blue-500"),children:(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)(o.GNz,{className:"w-5 h-5 "+("dark"===e?"text-blue-400":"text-blue-600")}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"font-semibold "+("dark"===e?"text-blue-400":"text-blue-800"),children:"Viewing Employee About Details"}),(0,n.jsxs)("p",{className:"text-sm "+("dark"===e?"text-blue-300":"text-blue-700"),children:["Employee ID: ",c,m&&" \u2022 Read-only access"]})]})]})}),(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold "+("dark"===e?"text-white":"text-gray-900"),children:"About"}),(0,n.jsxs)("div",{className:"space-y-6",children:[g("about"),(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-lg font-medium mb-4 "+("dark"===e?"text-gray-200":"text-gray-900"),children:"What I love about my job?"}),g("jobLove")]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-lg font-medium mb-4 "+("dark"===e?"text-gray-200":"text-gray-900"),children:"My interests and hobbies"}),g("interests")]})]})]})]})]})};var d=a(2397);const c={relations:{fatherName:"Albert Smith",motherName:"Marry Smith",spouseName:"Jane Smith",children:"2",siblings:"1"}},m={primaryDetails:[{label:"First Name",name:"firstName",type:"text",required:!0},{label:"Middle Name",name:"middleName",type:"text"},{label:"Last Name",name:"lastName",type:"text",required:!0},{label:"Display Name",name:"displayName",type:"text",required:!0},{label:"Gender",name:"gender",type:"select",required:!0,options:["Male","Female","Other"]},{label:"Date of Birth",name:"dateOfBirth",type:"date",required:!0},{label:"Marital Status",name:"maritalStatus",type:"select",options:["Single","Married","Divorced"]},{label:"Blood Group",name:"bloodGroup",type:"select",required:!0,options:["O+ (O Positive)","A+","B+","AB+","O-","A-","B-","AB-"]},{label:"Physically Handicapped",name:"physicallyHandicapped",type:"select",required:!0,options:["Yes","No"]},{label:"Nationality",name:"nationality",type:"select",required:!0,options:["United States","India","Canada"]}],contactDetails:[{label:"Work Email",name:"workEmail",type:"email",required:!0},{label:"Personal Email",name:"personalEmail",type:"email"},{label:"Mobile Number",name:"mobileNumber",type:"text",required:!0},{label:"Work Number",name:"workNumber",type:"text"}],address:[{label:"Street",name:"street",type:"text",required:!0},{label:"City",name:"city",type:"text",required:!0},{label:"State",name:"state",type:"text",required:!0},{label:"Zip",name:"zip",type:"text",required:!0},{label:"Country",name:"country",type:"text",required:!0},{label:"District",name:"district",type:"text",required:!0}],relations:[{label:"Father Name",name:"fatherName",type:"text"},{label:"Mother Name",name:"motherName",type:"text"},{label:"Spouse Name",name:"spouseName",type:"text"},{label:"Children",name:"children",type:"number"},{label:"Siblings",name:"siblings",type:"number"}],education:[{label:"Degree Type",name:"degreeType",type:"text",required:!0},{label:"Institution",name:"universityOrCollege",type:"text",required:!0},{label:"Specialization",name:"branchOrSpecialization",type:"text",required:!0},{label:"Start Year",name:"startYear",type:"text",required:!0},{label:"End Year",name:"endYear",type:"text",required:!0},{label:"CGPA/Percentage",name:"cgpaOrPercentage",type:"text"},{label:"Degree Certificate",name:"addFiles",type:"file",required:!0}],experience:[{label:"Company Name",name:"companyName",type:"text",required:!0},{label:"Job Title",name:"jobTitle",type:"text",required:!0},{label:"Location",name:"location",type:"text"},{label:"Description",name:"description",type:"text"},{label:"Start Date",name:"startMonth",type:"text",required:!0},{label:"Start Year",name:"startYear",type:"text",required:!0},{label:"End Date",name:"endMonth",type:"text"},{label:"End Year",name:"endYear",type:"text"}]},u={primaryDetails:{icon:o.SNd,color:"from-blue-500 to-blue-700",bgColor:"bg-blue-50",darkBgColor:"bg-blue-900/20",borderColor:"border-blue-200",darkBorderColor:"border-blue-700",textColor:"text-blue-700",darkTextColor:"text-blue-400",title:"Primary Details",description:"Personal information and basic details"},contactDetails:{icon:o.SOx,color:"from-green-500 to-green-700",bgColor:"bg-green-50",darkBgColor:"bg-green-900/20",borderColor:"border-green-200",darkBorderColor:"border-green-700",textColor:"text-green-700",darkTextColor:"text-green-400",title:"Contact Details",description:"Email addresses and phone numbers"},address:{icon:o.o9J,color:"from-orange-500 to-orange-700",bgColor:"bg-orange-50",darkBgColor:"bg-orange-900/20",borderColor:"border-orange-200",darkBorderColor:"border-orange-700",textColor:"text-orange-700",darkTextColor:"text-orange-400",title:"Address Information",description:"Current residential address"},relations:{icon:o.IV3,color:"from-purple-500 to-purple-700",bgColor:"bg-purple-50",darkBgColor:"bg-purple-900/20",borderColor:"border-purple-200",darkBorderColor:"border-purple-700",textColor:"text-purple-700",darkTextColor:"text-purple-400",title:"Family Relations",description:"Family members and relationships"},education:{icon:o.tY3,color:"from-yellow-500 to-amber-700",bgColor:"bg-yellow-50",darkBgColor:"bg-yellow-900/20",borderColor:"border-yellow-200",darkBorderColor:"border-yellow-700",textColor:"text-yellow-700",darkTextColor:"text-yellow-400",title:"Education Details",description:"Academic qualifications and achievements"},experience:{icon:o.ZDc,color:"from-indigo-500 to-indigo-700",bgColor:"bg-indigo-50",darkBgColor:"bg-indigo-900/20",borderColor:"border-indigo-200",darkBorderColor:"border-indigo-700",textColor:"text-indigo-700",darkTextColor:"text-indigo-400",title:"Previous Experience",description:"Professional work history"}};const x=function(){var e,r,a,i,x,b,g;const[h,p]=(0,t.useState)(null),[y,f]=(0,t.useState)(null),[v,j]=(0,t.useState)(null),[N,w]=(0,t.useState)(null),[k,C]=(0,t.useState)([]),[E,A]=(0,t.useState)([]),{theme:D,userData:I}=(0,t.useContext)(l.o),[$,S]=(0,t.useState)({}),{empID:B}=(0,s.g)(),P=(0,s.zy)(),[T,q]=(0,t.useState)(!0),[O,L]=(0,t.useState)(!1),[F,M]=(0,t.useState)({}),[Y,R]=(0,t.useState)({completed:0,total:6}),[G,U]=(0,t.useState)(null),z=new URLSearchParams(P.search),V="true"===z.get("fromContextMenu"),J=z.get("targetEmployeeId"),Z=V&&J?J:B,W="ADMIN"===(null===I||void 0===I||null===(e=I.roles)||void 0===e||null===(r=e[0])||void 0===r?void 0:r.toUpperCase()),K=V&&J&&J!==B&&!W;(0,t.useEffect)(()=>{V&&J&&console.log("Viewing profile from context menu for employee:",J);Z&&(async()=>{try{const[e,r,a,t,l]=await Promise.all([d.yE.get(`employee/${Z}/primary/details`).catch(e=>({data:null})),d.yE.get(`employee/${Z}/contact`).catch(e=>({data:null})),d.yE.get(`employee/${Z}/address`).catch(e=>({data:null})),d.yE.get(`employee/${Z}/degreeDetails`).catch(e=>({data:[]})),d.yE.get(`employee/${Z}/previousExperience`).catch(e=>({data:[]}))]);f(e.data),j(r.data),w(a.data),C(t.data),A(l.data);const s=[e.data,r.data,a.data,t.data.length>0,l.data.length>0,c.relations].filter(Boolean).length;R({completed:s,total:6})}catch(e){console.error("Failed to fetch data:",e)}finally{q(!1)}})()},[Z,V,J]);const H=e=>{if(K)return void alert("You can only view this employee's profile. Editing is not allowed.");M({});let r={};"primaryDetails"===e?r=y:"contactDetails"===e?r=v:"address"===e?r=N:"relations"===e?r=c.relations:"education"===e?r=k&&k.length>0?k[0]:{}:"experience"===e&&(r=E&&E.length>0?E[0]:{}),S(r||{}),U(null),p({section:e})},_=(e,r)=>{S(a=>({...a,[e]:r})),F[e]&&M(r=>{const a={...r};return delete a[e],a})},X=async e=>{L(!0);let r=!1;try{switch(e){case"primaryDetails":r=await(async()=>{try{const e=`/employee/${Z}/primary/details`;await d.yE.put(e,$);const r=await d.yE.get(e);return f(r.data),R(e=>({...e,completed:[r.data,v,N,k.length>0,E.length>0,c.relations].filter(Boolean).length})),!0}catch(e){return e.response&&400===e.response.status?M(e.response.data):M({general:"An unexpected error occurred while updating Primary Details."}),!1}})();break;case"contactDetails":r=await(async()=>{try{const e=`/employee/${Z}/contact`;await d.yE.put(e,$);const r=await d.yE.get(e);return j(r.data),R(e=>({...e,completed:[y,r.data,N,k.length>0,E.length>0,c.relations].filter(Boolean).length})),!0}catch(e){return e.response&&400===e.response.status?M(e.response.data):M({general:"An unexpected error occurred while updating Contact Details."}),!1}})();break;case"address":r=await(async()=>{try{const e=`/employee/${Z}/address`;await d.yE.put(e,$);const r=await d.yE.get(e);return w(r.data),R(e=>({...e,completed:[y,v,r.data,k.length>0,E.length>0,c.relations].filter(Boolean).length})),!0}catch(e){return e.response&&400===e.response.status?M(e.response.data):M({general:"An unexpected error occurred while updating Address."}),!1}})();break;case"relations":console.error("Backend endpoint for updating relations does not exist in your controller."),alert("This section cannot be updated yet. A backend API endpoint is missing."),p(null);break;case"education":r=await(async()=>{try{const e=!(!$||!$.id),r=e?"put":"post",a=e?`/employee/${Z}/degreeDetails/${$.id}`:`/employee/${Z}/degreeDetails`,t=new FormData;G&&t.append("addFiles",G),t.append("degree",new Blob([JSON.stringify($)],{type:"application/json"})),await d.yE[r](a,t,{headers:{"Content-Type":"multipart/form-data"}});const l=await d.yE.get(`employee/${Z}/degreeDetails`);return C(l.data),R(e=>({...e,completed:[y,v,N,l.data.length>0,E.length>0,c.relations].filter(Boolean).length})),!0}catch(e){return console.error("Failed to update education details:",e),e.response&&400===e.response.status?M(e.response.data):M({general:"An unexpected error occurred while updating Education."}),!1}})();break;case"experience":r=await(async()=>{try{const e=!(!$||!$.id),r=`/employee/${Z}/previousExperience/${$.id}`;e?await d.yE.put(r,$):await d.yE.post(`/employee/${Z}/previousExperience`,$);const a=await d.yE.get(`employee/${Z}/previousExperience`);return A(a.data),R(e=>({...e,completed:[y,v,N,k.length>0,a.data.length>0,c.relations].filter(Boolean).length})),!0}catch(e){return console.error("Failed to update experience details:",e),e.response&&400===e.response.status?M(e.response.data):M({general:"An unexpected error occurred while updating Experience."}),!1}})();break;default:console.error("Unknown section:",e),M({general:"Unknown section selected for update."})}}finally{L(!1)}r&&(p(null),M({}))},Q=function(e,r){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",t=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];const s=F[r],i=$[r]||"";return"file"===a?(0,n.jsxs)("div",{className:"group relative",children:[(0,n.jsxs)("label",{className:"block text-sm font-semibold mb-3 flex items-center "+("dark"===D?"text-gray-200":"text-gray-800"),children:[e,t&&(0,n.jsx)("span",{className:"text-red-500 ml-1 text-base",children:"*"})]}),(0,n.jsxs)("div",{className:"relative border-2 border-dashed rounded-xl transition-all duration-300 \n              "+(s?"border-red-300 bg-red-50":"dark"===D?"border-gray-600 bg-gray-800 hover:border-blue-400 hover:bg-blue-900/20":"border-gray-300 bg-gray-50 hover:border-blue-400 hover:bg-blue-50"),children:[(0,n.jsx)("input",{type:"file",onChange:e=>{var r,a;return a=null===(r=e.target.files)||void 0===r?void 0:r[0],void U(a)},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",accept:".jpg,.jpeg,.png,.pdf",required:t}),(0,n.jsxs)("div",{className:"px-6 py-8 text-center",children:[(0,n.jsx)(o.xvb,{className:"mx-auto h-12 w-12 mb-4 "+("dark"===D?"text-gray-500":"text-gray-400")}),(0,n.jsxs)("p",{className:"text-sm font-medium mb-1 "+("dark"===D?"text-gray-300":"text-gray-700"),children:["Drop your file here, or ",(0,n.jsx)("span",{className:"text-blue-600",children:"browse"})]}),(0,n.jsx)("p",{className:"text-xs text-gray-500",children:"PNG, JPG, PDF up to 10MB"}),G&&(0,n.jsxs)("p",{className:"mt-2 text-sm font-medium "+("dark"===D?"text-green-400":"text-green-600"),children:["Selected: ",G.name]})]})]})]},r):(0,n.jsxs)("div",{className:"group relative",children:[(0,n.jsxs)("label",{className:"block text-sm font-semibold mb-3 flex items-center "+("dark"===D?"text-gray-200":"text-gray-800"),children:[e,t&&(0,n.jsx)("span",{className:"text-red-500 ml-1 text-base",children:"*"})]}),"select"===a?(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsxs)("select",{value:i,onChange:e=>_(r,e.target.value),className:"w-full px-5 py-4 border-2 rounded-xl transition-all duration-300 appearance-none \n                focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 focus:outline-none\n                "+(s?"border-red-300 bg-red-50 focus:border-red-500 focus:ring-red-500/20":"dark"===D?"border-gray-600 bg-gray-700 text-white hover:border-gray-500 group-hover:border-blue-400":"border-gray-200 bg-white hover:border-gray-300 group-hover:border-blue-300"),children:[(0,n.jsxs)("option",{value:"",children:["Choose ",e]}),l.map(e=>(0,n.jsx)("option",{value:e,children:e},e))]}),(0,n.jsx)("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2 pointer-events-none",children:(0,n.jsx)("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}):"date"===a?(0,n.jsx)("input",{type:"date",value:i,onChange:e=>_(r,e.target.value),className:"w-full px-5 py-4 border-2 rounded-xl transition-all duration-300\n              focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 focus:outline-none\n              "+(s?"border-red-300 bg-red-50 focus:border-red-500 focus:ring-red-500/20":"dark"===D?"border-gray-600 bg-gray-700 text-white hover:border-gray-500 group-hover:border-blue-400":"border-gray-200 bg-white hover:border-gray-300 group-hover:border-blue-300")}):(0,n.jsx)("input",{type:a,value:i,onChange:e=>_(r,e.target.value),className:"w-full px-5 py-4 border-2 rounded-xl transition-all duration-300\n              focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 focus:outline-none\n              "+(s?"border-red-300 bg-red-50 focus:border-red-500 focus:ring-red-500/20":"dark"===D?"border-gray-600 bg-gray-700 text-white hover:border-gray-500 group-hover:border-blue-400":"border-gray-200 bg-white hover:border-gray-300 group-hover:border-blue-300"),placeholder:`Enter ${e.toLowerCase()}...`,required:t}),s&&(0,n.jsxs)("div",{className:"mt-3 flex items-center space-x-2 text-red-600 animate-slideIn",children:[(0,n.jsx)(o.tr_,{className:"w-4 h-4 flex-shrink-0"}),(0,n.jsx)("p",{className:"text-sm font-medium",children:s})]})]},r)},ee=e=>{let{label:r,value:a}=e;return(0,n.jsx)("div",{className:"group p-4 rounded-xl border transition-all duration-300 hover:scale-105 "+("dark"===D?"bg-gradient-to-br from-gray-700 to-gray-800 border-gray-600 hover:shadow-md hover:shadow-blue-500/20":"bg-gradient-to-br from-gray-50 to-gray-100 border-gray-100 hover:shadow-md"),children:(0,n.jsx)("div",{className:"flex items-start justify-between",children:(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("span",{className:"text-xs font-bold uppercase tracking-wider block mb-2 "+("dark"===D?"text-gray-400":"text-gray-500"),children:r}),(0,n.jsx)("p",{className:"text-sm font-semibold leading-relaxed "+("dark"===D?"text-white":"text-gray-900"),children:a||(0,n.jsx)("span",{className:"italic "+("dark"===D?"text-gray-500":"text-gray-400"),children:"Not provided"})})]})})})},re=e=>{let{sectionKey:r,title:a,children:t,data:l}=e;const s=u[r],i=s.icon,m=Array.isArray(l)?l.length>0:!!l;return(0,n.jsxs)("div",{className:"border-2 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-500 \n                       overflow-hidden group hover:scale-[1.02] mb-8 "+("dark"===D?`bg-gray-800 ${s.darkBorderColor} hover:shadow-blue-500/20`:`bg-white ${s.borderColor}`),children:[(0,n.jsxs)("div",{className:"px-8 py-6 border-b-2 relative overflow-hidden "+("dark"===D?`${s.darkBgColor} ${s.darkBorderColor}`:`${s.bgColor} ${s.borderColor}`),children:[(0,n.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent to-white/30"}),(0,n.jsxs)("div",{className:"relative flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,n.jsx)("div",{className:"p-3 rounded-xl shadow-md transform group-hover:scale-110 transition-transform duration-300 "+("dark"===D?"bg-gray-700":"bg-white"),children:(0,n.jsx)(i,{className:`w-8 h-8 ${"dark"===D?s.darkTextColor:s.textColor}`})}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("h4",{className:`text-xl font-bold flex items-center space-x-2 ${"dark"===D?s.darkTextColor:s.textColor}`,children:[(0,n.jsx)("span",{children:a}),m&&(0,n.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,n.jsx)(o.G3G,{className:"w-5 h-5 text-green-500"}),(0,n.jsx)("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full font-medium",children:"Complete"})]})]}),(0,n.jsx)("p",{className:"text-sm mt-1 "+("dark"===D?"text-gray-400":"text-gray-600"),children:s.description})]})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[V&&W&&m&&!["education","experience","relations"].includes(r)&&(0,n.jsxs)("button",{onClick:()=>(async e=>{const r=u[e].title;if(window.confirm(`Are you sure you want to delete the ${r} for employee ${Z}? This action cannot be undone.`))try{let a="";switch(e){case"primaryDetails":a=`employee/${Z}/primary/details`;break;case"contactDetails":a=`employee/${Z}/contact`;break;case"address":a=`employee/${Z}/address`;break;case"education":return void alert("Education deletion should be done per entry. This feature needs backend support for bulk deletion.");case"experience":return void alert("Experience deletion should be done per entry. This feature needs backend support for bulk deletion.");case"relations":return void alert("Relations cannot be deleted as they are static data.");default:throw new Error("Invalid section for deletion")}switch(await d.yE.delete(a),alert(`${r} deleted successfully.`),e){case"primaryDetails":f(null);break;case"contactDetails":j(null);break;case"address":w(null)}const t=["primaryDetails"===e?null:y,"contactDetails"===e?null:v,"address"===e?null:N,k.length>0,E.length>0,c.relations].filter(Boolean).length;R({completed:t,total:6})}catch(a){console.error(`Failed to delete ${r}:`,a),alert(`Error deleting ${r}. You may not have the required permissions.`)}})(r),className:"flex items-center space-x-2 px-6 py-3 rounded-xl font-semibold transition-all duration-300 transform hover:scale-105 focus:ring-4 focus:ring-red-500/20 shadow-md hover:shadow-lg "+("dark"===D?"text-red-400 bg-gray-700 border-2 border-red-800 hover:bg-red-900/50":"text-red-600 bg-white border-2 border-red-200 hover:bg-red-50"),children:[(0,n.jsx)(o.dW_,{className:"w-4 h-4"}),(0,n.jsx)("span",{children:"Delete"})]}),(!K||W)&&(0,n.jsx)("button",{onClick:()=>H(r),className:"flex items-center space-x-2 px-6 py-3 cursor-pointer rounded-xl font-semibold transition-all duration-300 \n                              transform hover:scale-105 focus:ring-4 focus:ring-blue-500/20 shadow-md hover:shadow-lg\n                              "+(m?"dark"===D?`${s.darkTextColor} bg-gray-700 border-2 ${s.darkBorderColor} hover:bg-gray-600`:`${s.textColor} bg-white border-2 ${s.borderColor} hover:bg-gray-50`:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white hover:from-blue-600 hover:to-indigo-700"),children:m?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i,{className:"w-4 h-4"}),(0,n.jsx)("span",{children:"Edit Details"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.YHj,{className:"w-4 h-4"}),(0,n.jsx)("span",{children:"Add Information"})]})})]}),K&&!W&&(0,n.jsxs)("div",{className:"px-6 py-3 rounded-xl font-semibold "+("dark"===D?"bg-gray-700 text-gray-400 border-2 border-gray-600":"bg-gray-100 text-gray-500 border-2 border-gray-300"),children:[(0,n.jsx)(o.GNz,{className:"w-4 h-4 inline mr-2"}),(0,n.jsx)("span",{children:"View Only"})]})]})]}),(0,n.jsx)("div",{className:"p-8",children:m?(0,n.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:t}):(0,n.jsxs)("div",{className:"text-center py-12",children:[(0,n.jsx)("div",{className:`w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 ${"dark"===D?s.darkBgColor:s.bgColor}`,children:(0,n.jsx)(i,{className:`w-10 h-10 opacity-50 ${"dark"===D?s.darkTextColor:s.textColor}`})}),(0,n.jsxs)("h3",{className:"text-lg font-semibold mb-2 "+("dark"===D?"text-white":"text-gray-800"),children:["No ",a," Added"]}),(0,n.jsx)("p",{className:"text-sm mb-6 max-w-sm mx-auto "+("dark"===D?"text-gray-400":"text-gray-500"),children:K?`This employee hasn't added their ${a.toLowerCase()} information yet.`:`Add your ${a.toLowerCase()} to complete your profile information.`}),!K&&(0,n.jsxs)("button",{onClick:()=>H(r),className:"inline-flex items-center space-x-2 px-6 py-3 bg-gradient-to-r from-blue-500 to-indigo-600 \r text-white font-semibold rounded-xl hover:from-blue-600 hover:to-indigo-700 \r transform hover:scale-105 transition-all duration-300 shadow-lg",children:[(0,n.jsx)(o.YHj,{className:"w-4 h-4"}),(0,n.jsxs)("span",{children:["Add ",a]})]})]})})]})},ae=()=>{const e=[y,v,N,k.length>0,E.length>0],r=e.filter(Boolean).length,a=e.length,t=a>0?r/a*100:0;return(0,n.jsxs)("div",{className:"rounded-2xl p-6 shadow-lg border "+("dark"===D?"bg-gray-800 border-gray-700":"bg-white border-gray-200"),children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,n.jsx)("h3",{className:"text-lg font-bold "+("dark"===D?"text-white":"text-gray-800"),children:K?"Profile Status":"Profile Completion"}),(0,n.jsxs)("span",{className:"text-sm font-medium "+("dark"===D?"text-gray-400":"text-gray-600"),children:[r,"/",a," Sections"]})]}),(0,n.jsx)("div",{className:"w-full rounded-full h-3 mb-4 overflow-hidden "+("dark"===D?"bg-gray-700":"bg-gray-200"),children:(0,n.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-green-500 h-3 rounded-full transition-all duration-700 ease-out",style:{width:`${t}%`}})}),(0,n.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,n.jsxs)("span",{className:""+("dark"===D?"text-gray-400":"text-gray-600"),children:[t.toFixed(0),"% Complete"]}),100===t&&(0,n.jsxs)("span",{className:"text-green-600 font-semibold flex items-center",children:[(0,n.jsx)(o.G3G,{className:"w-4 h-4 mr-1"}),"All Set!"]})]})]})};return(0,n.jsxs)("div",{className:"min-h-screen "+("dark"===D?"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900":"bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100"),children:[T?(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-20 w-20 border-4 border-blue-500 border-t-transparent mx-auto mb-6"}),(0,n.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,n.jsx)(o.SNd,{className:"w-8 h-8 text-blue-500"})})]}),(0,n.jsx)("h2",{className:"text-2xl font-bold mb-2 "+("dark"===D?"text-white":"text-gray-800"),children:"Loading Profile"}),(0,n.jsx)("p",{className:""+("dark"===D?"text-gray-300":"text-gray-600"),children:"Fetching profile information..."}),(0,n.jsx)("div",{className:"flex justify-center space-x-2 mt-4",children:[...Array(4)].map((e,r)=>(0,n.jsx)("div",{className:"w-2 h-2 rounded-full bg-blue-500 animate-pulse",style:{animationDelay:.2*r+"s"}},r))})]})}):(0,n.jsxs)("div",{className:"max-w-8xl mx-auto px-6 sm:px-8 lg:px-12 py-12",children:[V&&(0,n.jsx)("div",{className:"mb-6 p-4 rounded-2xl border-l-4 border-blue-500 shadow-lg "+("dark"===D?"bg-blue-900/20 border-blue-400":"bg-blue-50 border-blue-500"),children:(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)(o.GNz,{className:"w-5 h-5 "+("dark"===D?"text-blue-400":"text-blue-600")}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"font-semibold "+("dark"===D?"text-blue-400":"text-blue-800"),children:"Viewing Employee Profile"}),(0,n.jsxs)("p",{className:"text-sm "+("dark"===D?"text-blue-300":"text-blue-700"),children:["Employee ID: ",J,K&&" \u2022 Read-only access"]})]})]})}),(0,n.jsx)("div",{className:"mb-12",children:(0,n.jsx)(ae,{})}),(0,n.jsx)("div",{className:"space-y-8",children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(re,{sectionKey:"primaryDetails",title:"Primary Details",data:y,children:[(0,n.jsx)(ee,{label:"First Name",value:null===y||void 0===y?void 0:y.firstName}),(0,n.jsx)(ee,{label:"Middle Name",value:null===y||void 0===y?void 0:y.middleName}),(0,n.jsx)(ee,{label:"Last Name",value:null===y||void 0===y?void 0:y.lastName}),(0,n.jsx)(ee,{label:"Display Name",value:null===y||void 0===y?void 0:y.displayName}),(0,n.jsx)(ee,{label:"Gender",value:null===y||void 0===y?void 0:y.gender}),(0,n.jsx)(ee,{label:"Date of Birth",value:null===y||void 0===y?void 0:y.dateOfBirth}),(0,n.jsx)(ee,{label:"Marital Status",value:null===y||void 0===y?void 0:y.maritalStatus}),(0,n.jsx)(ee,{label:"Blood Group",value:null===y||void 0===y?void 0:y.bloodGroup}),(0,n.jsx)(ee,{label:"Physically Handicapped",value:null===y||void 0===y?void 0:y.physicallyHandicapped}),(0,n.jsx)(ee,{label:"Nationality",value:null===y||void 0===y?void 0:y.nationality})]}),(0,n.jsxs)(re,{sectionKey:"contactDetails",title:"Contact Details",data:v,children:[(0,n.jsx)(ee,{label:"Work Email",value:null===v||void 0===v?void 0:v.workEmail}),(0,n.jsx)(ee,{label:"Personal Email",value:null===v||void 0===v?void 0:v.personalEmail}),(0,n.jsx)(ee,{label:"Mobile Number",value:null===v||void 0===v?void 0:v.mobileNumber}),(0,n.jsx)(ee,{label:"Work Number",value:null===v||void 0===v?void 0:v.workNumber})]}),(0,n.jsxs)(re,{sectionKey:"address",title:"Address Information",data:N,children:[(0,n.jsx)(ee,{label:"Street",value:null===N||void 0===N?void 0:N.street}),(0,n.jsx)(ee,{label:"City",value:null===N||void 0===N?void 0:N.city}),(0,n.jsx)(ee,{label:"State",value:null===N||void 0===N?void 0:N.state}),(0,n.jsx)(ee,{label:"Zip",value:null===N||void 0===N?void 0:N.zip}),(0,n.jsx)(ee,{label:"Country",value:null===N||void 0===N?void 0:N.country}),(0,n.jsx)(ee,{label:"District",value:null===N||void 0===N?void 0:N.district})]}),(0,n.jsxs)(re,{sectionKey:"relations",title:"Family Relations",data:c.relations,children:[(0,n.jsx)(ee,{label:"Father Name",value:null===(a=c.relations)||void 0===a?void 0:a.fatherName}),(0,n.jsx)(ee,{label:"Mother Name",value:null===(i=c.relations)||void 0===i?void 0:i.motherName}),(0,n.jsx)(ee,{label:"Spouse Name",value:null===(x=c.relations)||void 0===x?void 0:x.spouseName}),(0,n.jsx)(ee,{label:"Children",value:null===(b=c.relations)||void 0===b?void 0:b.children}),(0,n.jsx)(ee,{label:"Siblings",value:null===(g=c.relations)||void 0===g?void 0:g.siblings})]}),(0,n.jsx)(re,{sectionKey:"education",title:"Education Details",data:k,children:null===k||void 0===k?void 0:k.map((e,r)=>(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,n.jsx)(ee,{label:"Degree",value:e.degreeType}),(0,n.jsx)(ee,{label:"Institution",value:e.universityOrCollege}),(0,n.jsx)(ee,{label:"Specialization",value:e.branchOrSpecialization}),(0,n.jsx)(ee,{label:"Years",value:`${e.startYear} - ${e.endYear}`}),(0,n.jsx)(ee,{label:"CGPA/Percentage",value:e.cgpaOrPercentage}),e.addFiles&&(0,n.jsx)("div",{className:"md:col-span-2 lg:col-span-1",children:(0,n.jsxs)("a",{href:e.addFiles,target:"_blank",rel:"noopener noreferrer",className:"p-4 rounded-xl border flex items-center justify-center space-x-2 transition-all duration-300 hover:scale-105 "+("dark"===D?"bg-gradient-to-br from-gray-700 to-gray-800 border-gray-600 hover:shadow-md hover:shadow-blue-500/20":"bg-gradient-to-br from-gray-50 to-gray-100 border-gray-100 hover:shadow-md"),children:[(0,n.jsx)(o.G3G,{className:"w-5 h-5 text-green-500"}),(0,n.jsx)("span",{className:"font-semibold "+("dark"===D?"text-white":"text-gray-900"),children:"View Certificate"})]})})]},r))}),(0,n.jsx)(re,{sectionKey:"experience",title:"Previous Experience",data:E,children:null===E||void 0===E?void 0:E.map((e,r)=>(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,n.jsx)(ee,{label:"Company Name",value:e.companyName}),(0,n.jsx)(ee,{label:"Job Title",value:e.jobTitle}),(0,n.jsx)(ee,{label:"Location",value:e.location}),(0,n.jsx)(ee,{label:"Duration",value:`${e.startMonth} ${e.startYear} - ${e.endMonth?e.endMonth+" "+e.endYear:"Present"}`}),(0,n.jsx)(ee,{label:"Description",value:e.description})]},e.id||r))})]})}),(()=>{if(!h)return null;const{section:e}=h,r=m[e]||[],a=u[e],t=a.icon;return(0,n.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-[200] p-4 animate-fadeIn",children:(0,n.jsxs)("div",{className:"rounded-3xl w-full max-w-6xl max-h-[95vh] overflow-hidden shadow-2xl animate-slideUp flex flex-col "+("dark"===D?"bg-gray-800":"bg-white"),children:[(0,n.jsxs)("div",{className:`px-8 py-6 bg-gradient-to-r ${a.color} text-white relative overflow-hidden`,children:[(0,n.jsx)("div",{className:"absolute inset-0 bg-black/10"}),(0,n.jsxs)("div",{className:"relative flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,n.jsx)("div",{className:"p-3 bg-white/20 rounded-xl",children:(0,n.jsx)(t,{className:"w-8 h-8"})}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("h2",{className:"text-2xl font-bold",children:["Edit ",a.title]}),(0,n.jsx)("p",{className:"text-white/90 text-sm",children:a.description})]})]}),(0,n.jsx)("button",{onClick:()=>p(null),className:"p-3 hover:bg-white/20 rounded-full transition-all duration-200 group","aria-label":"Close",children:(0,n.jsx)(o.$8F,{className:"w-6 h-6 group-hover:rotate-90 transition-transform duration-200"})})]})]}),(0,n.jsx)("div",{className:"overflow-y-auto flex-grow",children:(0,n.jsxs)("form",{className:"p-8",onSubmit:r=>{r.preventDefault(),X(e)},children:[(0,n.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:r.map(e=>Q(e.label,e.name,e.type,e.required,e.options))}),F.general&&(0,n.jsx)("div",{className:"mt-6 p-5 border-l-4 border-red-400 rounded-r-xl animate-slideIn "+("dark"===D?"bg-red-900/20":"bg-red-50"),children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(o.tr_,{className:"w-6 h-6 text-red-400 mr-3"}),(0,n.jsx)("p",{className:"font-medium "+("dark"===D?"text-red-300":"text-red-800"),children:F.general})]})})]})}),(0,n.jsxs)("div",{className:"px-8 py-6 border-t flex justify-end space-x-4 "+("dark"===D?"bg-gray-700 border-gray-600":"bg-gray-50 border-gray-200"),children:[(0,n.jsx)("button",{type:"button",onClick:()=>p(null),className:"px-8 py-3 border-2 rounded-xl font-semibold transition-all duration-200 focus:ring-4 focus:ring-gray-500/20 "+("dark"===D?"border-gray-600 text-gray-300 hover:bg-gray-600 hover:border-gray-500":"border-gray-300 text-gray-700 hover:bg-gray-100 hover:border-gray-400"),children:"Cancel"}),(0,n.jsx)("button",{type:"button",onClick:()=>X(e),disabled:O,className:`px-10 py-3 bg-gradient-to-r ${a.color} text-white font-bold rounded-xl\n                          hover:shadow-lg transform hover:scale-105 transition-all duration-200 \n                          focus:ring-4 focus:ring-blue-500/30 flex items-center space-x-2\n                          ${O?"cursor-not-allowed opacity-75":""}`,children:O?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"h-5 w-5 border-4 border-white border-t-transparent rounded-full animate-spin-slow"}),(0,n.jsx)("span",{children:"Updating..."})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.G3G,{className:"w-5 h-5"}),(0,n.jsx)("span",{children:"Update Information"})]})})]})]})})})()]}),(0,n.jsx)("style",{jsx:!0,children:"\n        @keyframes fadeIn {\n          from { opacity: 0; }\n          to { opacity: 1; }\n        }\n        @keyframes slideUp {\n          from { transform: translateY(20px); opacity: 0; }\n          to { transform: translateY(0); opacity: 1; }\n        }\n        @keyframes slideIn {\n          from { transform: translateX(-10px); opacity: 0; }\n          to { transform: translateX(0); opacity: 1; }\n        }\n        .animate-fadeIn { animation: fadeIn 0.3s ease-out; }\n        .animate-slideUp { animation: slideUp 0.4s ease-out; }\n        .animate-slideIn { animation: slideIn 0.3s ease-out; }\n        .animate-spin-slow {\n            animation: spin 1s linear infinite;\n        }\n        @keyframes spin {\n            from { transform: rotate(0deg); }\n            to { transform: rotate(360deg); }\n        }\n      "})]})},b=[{label:"SHIFT",value:"10 AM - 8 PM"},{label:"WEEKLY OFF POLICY",value:"All Sat - Sun"},{label:"LEAVE PLAN",value:"Leave Plan"},{label:"HOLIDAY CALENDAR",value:"Anasol Holiday Plan"},{label:"ATTENDANCE NUMBER",value:"-"},{label:"PAYROLL TIME SOURCE",value:"Attendance"},{label:"ATTENDANCE CAPTURE SCHEME",value:"Capture Scheme Anasol"},{label:"ATTENDANCE PENALIZATION POLICY",value:"Anasol Penalization Policy"},{label:"SHIFT WEEKLY OFF RULE",value:"-Not Set-"},{label:"SHIFT ALLOWANCE POLICY",value:"-Not Set-"},{label:"OVERTIME",value:"-Not Set-"}],g=[{label:"EXPENSE POLICY",value:"-"},{label:"TIMESHEET POLICY",value:"-"},{label:"LOAN POLICY",value:"-"},{label:"AIR TICKET POLICY",value:"-"}],h=[{label:"BUSINESS UNIT",value:"-"},{label:"DEPARTMENT",value:"Software Development"},{label:"LOCATION",value:"ANASOL CONSULTANCY SERVICES PRIVATE..."},{label:"COST CENTER",value:"-Not Set-"},{label:"LEGAL ENTITY",value:"ANASOL PRIVATE LIMITED"},{label:"REPORTS TO",value:"-"},{label:"MANAGER OF MANAGER (L2 MANAGER)",value:"-"},{label:"DIRECT REPORTS",value:"0 Employees"}],p={jobDetails:{icon:o.ZDc,color:"from-blue-500 to-blue-700",bgColor:"bg-blue-50",darkBgColor:"bg-blue-900/20",borderColor:"border-blue-200",darkBorderColor:"border-blue-700",textColor:"text-blue-700",darkTextColor:"text-blue-400",title:"Job Details",description:"Employment information and job specifications"},employeeTime:{icon:o.YmN,color:"from-green-500 to-green-700",bgColor:"bg-green-50",darkBgColor:"bg-green-900/20",borderColor:"border-green-200",darkBorderColor:"border-green-700",textColor:"text-green-700",darkTextColor:"text-green-400",title:"Employee Time",description:"Work schedule and attendance policies"},otherPolicies:{icon:o.Zno,color:"from-orange-500 to-orange-700",bgColor:"bg-orange-50",darkBgColor:"bg-orange-900/20",borderColor:"border-orange-200",darkBorderColor:"border-orange-700",textColor:"text-orange-700",darkTextColor:"text-orange-400",title:"Other Policies",description:"Additional company policies and guidelines"},organizationDetails:{icon:o.JDl,color:"from-purple-500 to-purple-700",bgColor:"bg-purple-50",darkBgColor:"bg-purple-900/20",borderColor:"border-purple-200",darkBorderColor:"border-purple-700",textColor:"text-purple-700",darkTextColor:"text-purple-400",title:"Organization Details",description:"Departmental and reporting structure"}},y=e=>{let{label:r,value:a,note:t,status:l,theme:s}=e;return(0,n.jsx)("div",{className:"group p-4 rounded-xl border transition-all duration-300 hover:scale-105 "+("dark"===s?"bg-gradient-to-br from-gray-700 to-gray-800 border-gray-600 hover:shadow-md hover:shadow-blue-500/20":"bg-gradient-to-br from-gray-50 to-gray-100 border-gray-100 hover:shadow-md"),children:(0,n.jsx)("div",{className:"flex items-start justify-between",children:(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("span",{className:"text-xs font-bold uppercase tracking-wider block mb-2 "+("dark"===s?"text-gray-400":"text-gray-500"),children:r}),"active"===l?(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),(0,n.jsx)("span",{className:"text-sm font-semibold "+("dark"===s?"text-white":"text-gray-900"),children:a})]}),t&&(0,n.jsx)("span",{className:"text-xs px-2 py-1 rounded-full "+("dark"===s?"text-gray-400 bg-gray-700":"text-gray-500 bg-gray-100"),children:t})]}):(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm font-semibold leading-relaxed "+("dark"===s?"text-white":"text-gray-900"),children:a||(0,n.jsx)("span",{className:"italic "+("dark"===s?"text-gray-500":"text-gray-400"),children:"Not provided"})}),t&&(0,n.jsx)("p",{className:"text-xs mt-1 px-2 py-1 rounded-md inline-block "+("dark"===s?"bg-blue-900/40 text-blue-300":"bg-blue-50 text-blue-700"),children:t})]})]})})})},f=e=>{let{sectionKey:r,title:a,data:t,children:l,theme:s}=e;const i=p[r],d=i.icon,c=t&&t.length>0;return(0,n.jsxs)("div",{className:"border-2 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-500 \n                   overflow-hidden group hover:scale-[1.02] mb-8 "+("dark"===s?`bg-gray-800 ${i.darkBorderColor} hover:shadow-blue-500/20`:`bg-white ${i.borderColor}`),children:[(0,n.jsxs)("div",{className:"px-8 py-6 border-b-2 relative overflow-hidden "+("dark"===s?`${i.darkBgColor} ${i.darkBorderColor}`:`${i.bgColor} ${i.borderColor}`),children:[(0,n.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent to-white/30"}),(0,n.jsx)("div",{className:"relative flex items-center justify-between",children:(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,n.jsx)("div",{className:"p-3 rounded-xl shadow-md transform group-hover:scale-110 transition-transform duration-300 "+("dark"===s?"bg-gray-700":"bg-white"),children:(0,n.jsx)(d,{className:`w-8 h-8 ${"dark"===s?i.darkTextColor:i.textColor}`})}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("h4",{className:`text-xl font-bold flex items-center space-x-2 ${"dark"===s?i.darkTextColor:i.textColor}`,children:[(0,n.jsx)("span",{children:a}),c&&(0,n.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,n.jsx)(o.G3G,{className:"w-5 h-5 text-green-500"}),(0,n.jsx)("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full font-medium",children:"Active"})]})]}),(0,n.jsx)("p",{className:"text-sm mt-1 "+("dark"===s?"text-gray-400":"text-gray-600"),children:i.description})]})]})})]}),(0,n.jsx)("div",{className:"p-8",children:c?(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-2 gap-4",children:[t.map((e,r)=>(0,n.jsx)(y,{label:e.label,value:e.value,note:e.note,status:e.status,theme:s},r)),l]}):(0,n.jsxs)("div",{className:"text-center py-12",children:[(0,n.jsx)("div",{className:`w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 ${"dark"===s?i.darkBgColor:i.bgColor}`,children:(0,n.jsx)(d,{className:`w-10 h-10 opacity-50 ${"dark"===s?i.darkTextColor:i.textColor}`})}),(0,n.jsxs)("h3",{className:"text-lg font-semibold mb-2 "+("dark"===s?"text-white":"text-gray-800"),children:["No ",a," Available"]}),(0,n.jsxs)("p",{className:"text-sm mb-6 max-w-sm mx-auto "+("dark"===s?"text-gray-400":"text-gray-500"),children:[a," information is not currently available or configured."]})]})})]})},v=e=>{let{completedSections:r,totalSections:a,theme:t}=e;const l=r/a*100;return(0,n.jsxs)("div",{className:"rounded-2xl p-6 shadow-lg border "+("dark"===t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"),children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,n.jsx)("h3",{className:"text-lg font-bold "+("dark"===t?"text-white":"text-gray-800"),children:"Job Information"}),(0,n.jsxs)("span",{className:"text-sm font-medium "+("dark"===t?"text-gray-400":"text-gray-600"),children:[r,"/",a," Sections"]})]}),(0,n.jsx)("div",{className:"w-full rounded-full h-3 mb-4 overflow-hidden "+("dark"===t?"bg-gray-700":"bg-gray-200"),children:(0,n.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-green-500 h-3 rounded-full transition-all duration-700 ease-out",style:{width:`${l}%`}})}),(0,n.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,n.jsxs)("span",{className:""+("dark"===t?"text-gray-400":"text-gray-600"),children:[l.toFixed(0),"% Complete"]}),100===l&&(0,n.jsxs)("span",{className:"text-green-600 font-semibold flex items-center",children:[(0,n.jsx)(o.G3G,{className:"w-4 h-4 mr-1"}),"All Set!"]})]})]})},j=e=>{let{theme:r}=e;const[a,l]=(0,t.useState)(!1);return(0,n.jsxs)("div",{className:"col-span-2 p-6 rounded-xl border "+("dark"===r?"bg-gradient-to-br from-indigo-900/30 to-purple-900/30 border-indigo-700":"bg-gradient-to-br from-indigo-50 to-purple-50 border-indigo-200"),children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"text-sm font-semibold mb-1 "+("dark"===r?"text-white":"text-gray-800"),children:"Attendance Tracking"}),(0,n.jsx)("p",{className:"text-xs "+("dark"===r?"text-gray-400":"text-gray-600"),children:"Control automated attendance monitoring"})]}),(0,n.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer group",children:[(0,n.jsx)("input",{type:"checkbox",className:"sr-only peer",checked:a,onChange:e=>l(e.target.checked)}),(0,n.jsx)("div",{className:"w-14 h-8 rounded-full peer transition-all duration-300 \n                         peer-checked:after:translate-x-6 peer-checked:after:border-white \n                         after:content-[''] after:absolute after:top-1 after:left-1 \n                         after:bg-white after:border after:rounded-full \n                         after:h-6 after:w-6 after:transition-all after:shadow-md\n                         peer-checked:bg-gradient-to-r peer-checked:from-purple-500 peer-checked:to-indigo-600\n                         group-hover:shadow-lg "+("dark"===r?"bg-gray-600 after:border-gray-500":"bg-gray-200 after:border-gray-300")}),(0,n.jsx)("span",{className:"ml-3 text-sm font-medium "+("dark"===r?"text-gray-300":"text-gray-700"),children:a?"Disabled":"Enabled"})]})]}),a&&(0,n.jsx)("div",{className:"mt-3 p-3 border rounded-lg "+("dark"===r?"bg-yellow-900/30 border-yellow-700":"bg-yellow-50 border-yellow-200"),children:(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(o.tr_,{className:"w-4 h-4 text-yellow-600"}),(0,n.jsx)("p",{className:"text-xs "+("dark"===r?"text-yellow-300":"text-yellow-700"),children:"Attendance tracking is currently disabled for this employee"})]})})]})},N=()=>{const{empID:e}=(0,s.g)(),r=(0,s.zy)(),{theme:a}=(0,t.useContext)(l.o),[i,c]=(0,t.useState)(null),[m,u]=(0,t.useState)(null),[x,p]=(0,t.useState)(!0),[y,N]=(0,t.useState)({completed:0,total:4}),w=new URLSearchParams(r.search),k="true"===w.get("fromContextMenu"),C=w.get("targetEmployeeId"),E=k&&C?C:e,A=k&&C&&C!==e;return(0,t.useEffect)(()=>{(async()=>{try{let e=await d.yE.get(`employee/${E}/job/details`);console.log("job data : ",e.data),c(e.data)}catch(e){console.log("job error : ",e)}finally{p(!1)}})()},[E]),(0,t.useEffect)(()=>{if(i){const e=[{label:"EMPLOYEE NUMBER",value:i.employeeId},{label:"DATE OF JOINING",value:i.dateOfJoining},{label:"JOB TITLE - PRIMARY",value:i.jobTitlePrimary},{label:"JOB TITLE - SECONDARY",value:i.jobTitleSecondary||"-"},{label:"IN PROBATION?",value:`${i.inProbation} ${i.probationStartDate||"-"} - ${i.probationEndDate||"-"}`,note:i.probationPolicy||"Default Probation Policy"},{label:"NOTICE PERIOD",value:"-"},{label:"WORKER TYPE",value:i.workerType||"Intern"},{label:"TIME TYPE",value:i.timeType},{label:"CONTRACT STATUS",value:i.contractStatus,note:i.contractStartDate,status:"Active"===i.contractStatus?"active":""}];u(e);const r=[i,b,g,h].filter(e=>e&&e.length>0).length;N({completed:r||1,total:4})}},[i]),x?(0,n.jsx)("div",{className:"min-h-screen "+("dark"===a?"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900":"bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100"),children:(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-20 w-20 border-4 border-blue-500 border-t-transparent mx-auto mb-6"}),(0,n.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,n.jsx)(o.ZDc,{className:"w-8 h-8 text-blue-500"})})]}),(0,n.jsx)("h2",{className:"text-2xl font-bold mb-2 "+("dark"===a?"text-white":"text-gray-800"),children:"Loading Job Information"}),(0,n.jsx)("p",{className:""+("dark"===a?"text-gray-300":"text-gray-600"),children:"Fetching employment details and policies..."})]})})}):m?(0,n.jsx)("div",{className:"min-h-screen "+("dark"===a?"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900":"bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100"),children:(0,n.jsxs)("div",{className:"max-w-8xl mx-auto px-6 sm:px-8 lg:px-12 py-12",children:[k&&(0,n.jsx)("div",{className:"mb-6 p-4 rounded-2xl border-l-4 border-blue-500 shadow-lg "+("dark"===a?"bg-blue-900/20 border-blue-400":"bg-blue-50 border-blue-500"),children:(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)(o.GNz,{className:"w-5 h-5 "+("dark"===a?"text-blue-400":"text-blue-600")}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"font-semibold "+("dark"===a?"text-blue-400":"text-blue-800"),children:"Viewing Employee Job Details"}),(0,n.jsxs)("p",{className:"text-sm "+("dark"===a?"text-blue-300":"text-blue-700"),children:["Employee ID: ",C,A&&" \u2022 Read-only access"]})]})]})}),(0,n.jsx)("div",{className:"mb-12",children:(0,n.jsx)(v,{completedSections:y.completed,totalSections:y.total,theme:a})}),(0,n.jsx)("div",{className:"space-y-8",children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f,{sectionKey:"jobDetails",title:"Job Details",data:m,theme:a}),(0,n.jsx)(f,{sectionKey:"employeeTime",title:"Employee Time",data:b,theme:a,children:(0,n.jsx)(j,{theme:a})}),(0,n.jsx)(f,{sectionKey:"otherPolicies",title:"Other Policies",data:g,theme:a}),(0,n.jsx)(f,{sectionKey:"organizationDetails",title:"Organization Details",data:h,theme:a})]})})]})}):(0,n.jsx)("div",{className:"min-h-screen "+("dark"===a?"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900":"bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100"),children:(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 "+("dark"===a?"bg-red-900/30":"bg-red-100"),children:(0,n.jsx)(o.tr_,{className:"w-10 h-10 text-red-500"})}),(0,n.jsx)("h2",{className:"text-2xl font-bold mb-2 "+("dark"===a?"text-white":"text-gray-800"),children:"Unable to Load Job Details"}),(0,n.jsx)("p",{className:""+("dark"===a?"text-gray-300":"text-gray-600"),children:"Job information is not available for this employee."})]})})})},w={aadhaar:[{label:"Aadhaar Number",name:"aadhaarNumber",type:"text",required:!0,pattern:"^[2-9]{1}[0-9]{11}$",message:"Invalid Aadhaar number format"},{label:"Enrollment Number",name:"enrollmentNumber",type:"text",required:!0,pattern:"^[0-9]{4}/[0-9]{5}/[0-9]{7}$",message:"Invalid enrollment number format"},{label:"Date of Birth",name:"dateOfBirth",type:"date",required:!0},{label:"Name",name:"aadhaarName",type:"text",required:!0},{label:"Address",name:"address",type:"textarea",required:!0},{label:"Gender",name:"gender",type:"select",options:["Male","Female","Other"],required:!0},{label:"Aadhaar Image",name:"aadhaarImage",type:"file"}],pan:[{label:"PAN Number",name:"panNumber",type:"text",required:!0,pattern:"[A-Z]{5}[0-9]{4}[A-Z]{1}",message:"Invalid PAN format (e.g., ABCDE1234F)"},{label:"PAN Name",name:"panName",type:"text",required:!0},{label:"Date of Birth",name:"dateOfBirth",type:"date",required:!0},{label:"Parents Name",name:"parentsName",type:"text",required:!0},{label:"PAN Image",name:"panImage",type:"file"}],drivingLicense:[{label:"License Number",name:"licenseNumber",type:"text",required:!0},{label:"Name",name:"name",type:"text",required:!0},{label:"Date of Birth",name:"dateOfBirth",type:"date",required:!0},{label:"Blood Group",name:"bloodGroup",type:"select",options:["A+","A-","B+","B-","AB+","AB-","O+","O-"],required:!0},{label:"Father's Name",name:"fatherName",type:"text",required:!0},{label:"Issue Date",name:"issueDate",type:"date",required:!0},{label:"Expiry Date",name:"expiresOn",type:"date",required:!0},{label:"Address",name:"address",type:"textarea",required:!0},{label:"License Image",name:"licenseImage",type:"file"}],passport:[{label:"Passport Number",name:"passportNumber",type:"text",required:!0,pattern:"^[A-Z0-9]{6,9}$",message:"Invalid passport number format"},{label:"Country Code",name:"countryCode",type:"text",required:!0,size:[2,3]},{label:"Passport Type",name:"passportType",type:"text",required:!0},{label:"Date of Birth",name:"dateOfBirth",type:"date",required:!0},{label:"Name",name:"name",type:"text",required:!0},{label:"Gender",name:"gender",type:"select",options:["Male","Female","Other"],required:!0},{label:"Date of Issue",name:"dateOfIssue",type:"date",required:!0},{label:"Place of Issue",name:"placeOfIssue",type:"text",required:!0},{label:"Place of Birth",name:"placeOfBirth",type:"text",required:!0},{label:"Date of Expiration",name:"dateOfExpiration",type:"date",required:!0},{label:"Address",name:"address",type:"textarea",required:!0},{label:"Passport Image",name:"passportImage",type:"file"}],voter:[{label:"Voter ID Number",name:"voterIdNumber",type:"text",required:!0,pattern:"^[A-Z]{3}[0-9]{7}$",message:"Invalid Voter ID format (e.g., ABC1234567)"},{label:"Full Name",name:"fullName",type:"text",required:!0},{label:"Relation Name",name:"relationName",type:"text",required:!0},{label:"Gender",name:"gender",type:"select",options:["Male","Female","Other"],required:!0},{label:"Date of Birth",name:"dateOfBirth",type:"date",required:!0},{label:"Address",name:"address",type:"textarea",required:!0},{label:"Issued Date",name:"issuedDate",type:"date",required:!0},{label:"Voter Image",name:"uploadVoter",type:"file"}]},k={aadhaar:{icon:(0,n.jsx)(o.zo4,{}),color:"from-blue-500 to-blue-700",bgColor:"bg-blue-50",darkBgColor:"bg-blue-900/20",borderColor:"border-blue-200",darkBorderColor:"border-blue-700",textColor:"text-blue-700",darkTextColor:"text-blue-400",title:"Aadhaar Card",description:"Government issued identity document"},pan:{icon:(0,n.jsx)(o.zo4,{}),color:"from-green-500 to-green-700",bgColor:"bg-green-50",darkBgColor:"bg-green-900/20",borderColor:"border-green-200",darkBorderColor:"border-green-700",textColor:"text-green-700",darkTextColor:"text-green-400",title:"PAN Card",description:"Permanent Account Number for taxation"},drivingLicense:{icon:(0,n.jsx)(o.zo4,{}),color:"from-orange-500 to-orange-700",bgColor:"bg-orange-50",darkBgColor:"bg-orange-900/20",borderColor:"border-orange-200",darkBorderColor:"border-orange-700",textColor:"text-orange-700",darkTextColor:"text-orange-400",title:"Driving License",description:"Valid driving permit document"},passport:{icon:(0,n.jsx)(o.zo4,{}),color:"from-purple-500 to-purple-700",bgColor:"bg-purple-50",darkBgColor:"bg-purple-900/20",borderColor:"border-purple-200",darkBorderColor:"border-purple-700",textColor:"text-purple-700",darkTextColor:"text-purple-400",title:"Passport",description:"International travel document"},voter:{icon:(0,n.jsx)(o.zo4,{}),color:"from-red-500 to-red-700",bgColor:"bg-red-50",darkBgColor:"bg-red-900/20",borderColor:"border-red-200",darkBorderColor:"border-red-700",textColor:"text-red-700",darkTextColor:"text-red-400",title:"Voter ID Card",description:"Electoral identity verification"}},C=()=>{var e,r;const[a,i]=(0,t.useState)(null),[c,m]=(0,t.useState)({}),[u,x]=(0,t.useState)({}),{empID:b}=(0,s.g)(),g=(0,s.zy)(),{theme:h,userData:p}=(0,t.useContext)(l.o),[y,f]=(0,t.useState)(!0),[v,j]=(0,t.useState)({}),[N,C]=(0,t.useState)(""),[E,A]=(0,t.useState)({completed:0,total:5}),[D,I]=(0,t.useState)(!1),$=new URLSearchParams(g.search),S="true"===$.get("fromContextMenu"),B=$.get("targetEmployeeId"),P=S&&B?B:b,T=!1,q="ADMIN"===(null===p||void 0===p||null===(e=p.roles)||void 0===e||null===(r=e[0])||void 0===r?void 0:r.toUpperCase());(0,t.useEffect)(()=>{S&&B&&console.log("clicked user from context",B);P&&(async()=>{f(!0);try{const e=[d.yE.get(`employee/${P}/aadhaar`).catch(()=>({data:null})),d.yE.get(`employee/${P}/pan`).catch(()=>({data:null})),d.yE.get(`employee/${P}/driving`).catch(()=>({data:null})),d.yE.get(`employee/${P}/passport`).catch(()=>({data:null})),d.yE.get(`employee/${P}/voter`).catch(()=>({data:null}))],[r,a,t,l,s]=await Promise.all(e),o={aadhaar:r.data,pan:a.data,drivingLicense:t.data,passport:l.data,voter:s.data};m(o);const n=Object.values(o).filter(Boolean).length;A({completed:n,total:5})}catch(e){console.error("Failed to fetch identity data:",e)}finally{f(!1)}})()},[P,S,B]);const O=e=>{j({});const r=c[e]||{};x(r),i({subSection:e})},L=async e=>{I(!0);try{const r=((e,r)=>{switch(e){case"pan":return(e=>{const r={};return e.panNumber?/^[A-Z]{5}[0-9]{4}[A-Z]{1}$/.test(e.panNumber)||(r.panNumber="Invalid PAN format (e.g., ABCDE1234F)"):r.panNumber="PAN number is required",e.panName?(e.panName.length<3||e.panName.length>100)&&(r.panName="PAN name must be between 3 and 100 characters"):r.panName="PAN name is required",e.dateOfBirth?/^\d{4}-\d{2}-\d{2}$/.test(e.dateOfBirth)||(r.dateOfBirth="Date of birth must be in YYYY-MM-DD format"):r.dateOfBirth="Date of birth is required",e.parentsName||(r.parentsName="Parent's name is required"),r})(r);case"aadhaar":return(e=>{const r={};return e.aadhaarNumber?/^[2-9]{1}[0-9]{11}$/.test(e.aadhaarNumber)||(r.aadhaarNumber="Invalid Aadhaar number format"):r.aadhaarNumber="Aadhaar number is required",e.enrollmentNumber?/^[0-9]{4}\/[0-9]{5}\/[0-9]{7}$/.test(e.enrollmentNumber)||(r.enrollmentNumber="Invalid enrollment number format"):r.enrollmentNumber="Enrollment number is required",e.dateOfBirth||(r.dateOfBirth="Date of birth is required"),e.aadhaarName||(r.aadhaarName="Name is required"),e.address||(r.address="Address is required"),e.gender||(r.gender="Gender is required"),r})(r);case"drivingLicense":return(e=>{const r={};return e.licenseNumber||(r.licenseNumber="License number is required"),e.name||(r.name="Name is required"),e.dateOfBirth||(r.dateOfBirth="Date of birth is required"),e.bloodGroup||(r.bloodGroup="Blood group is required"),e.fatherName||(r.fatherName="Father's name is required"),e.issueDate||(r.issueDate="Issue date is required"),e.expiresOn||(r.expiresOn="Expiry date is required"),e.address||(r.address="Address is required"),r})(r);case"passport":return(e=>{const r={};return e.passportNumber?/^[A-Z0-9]{6,9}$/.test(e.passportNumber)||(r.passportNumber="Invalid passport number format"):r.passportNumber="Passport number is required",e.countryCode?(e.countryCode.length<2||e.countryCode.length>3)&&(r.countryCode="Country code must be 2-3 characters"):r.countryCode="Country code is required",e.passportType||(r.passportType="Passport type is required"),e.dateOfBirth||(r.dateOfBirth="Date of birth is required"),e.name||(r.name="Name is required"),e.gender||(r.gender="Gender is required"),e.dateOfIssue||(r.dateOfIssue="Date of issue is required"),e.placeOfIssue||(r.placeOfIssue="Place of issue is required"),e.placeOfBirth||(r.placeOfBirth="Place of birth is required"),e.dateOfExpiration||(r.dateOfExpiration="Date of expiration is required"),e.address||(r.address="Address is required"),r})(r);case"voter":return(e=>{const r={};return e.voterIdNumber?/^[A-Z]{3}[0-9]{7}$/.test(e.voterIdNumber)||(r.voterIdNumber="Invalid Voter ID format (e.g., ABC1234567)"):r.voterIdNumber="Voter ID number is required",e.fullName||(r.fullName="Full name is required"),e.relationName||(r.relationName="Relation name is required"),e.gender||(r.gender="Gender is required"),e.dateOfBirth||(r.dateOfBirth="Date of birth is required"),e.address||(r.address="Address is required"),e.issuedDate||(r.issuedDate="Issued date is required"),r})(r);default:return{}}})(e,u);if(Object.keys(r).length>0)return j(r),void I(!1);const a=c[e]?"put":"post",t=new FormData,l={aadhaar:"aadhaarImage",pan:"panImage",drivingLicense:"licenseImage",passport:"passportImage",voter:"voterImage"},s={aadhaar:"aadhaarImage",pan:"panImage",drivingLicense:"licenseImage",passport:"passportImage",voter:"uploadVoter"};let o;switch(e){case"pan":o="post"===a?"panDetails":"panDTO";break;case"voter":o="post"===a?"voterDetails":"voterDTO";break;case"aadhaar":o="aadhaar";break;case"drivingLicense":o="drivingLicense";break;case"passport":o="passportDetails";break;default:throw new Error("Invalid subsection for DTO part name")}const n=s[e],x=u[n];x&&x instanceof File&&t.append(l[e],x);const b={...u};delete b[n],t.append(o,new Blob([JSON.stringify(b)],{type:"application/json"}));const g=P;let h;switch(e){case"aadhaar":h="/employee/"+("put"===a?`${g}/aadhaar`:`aadhaar/${g}`);break;case"pan":h=`/employee/${g}/pan`;break;case"drivingLicense":h="/employee/"+("put"===a?`${g}/driving`:`driving/license/${g}`);break;case"passport":h="/employee/"+("put"===a?`${g}/passport`:`passport/details/${g}`);break;case"voter":h=`/employee/${g}/voter`;break;default:throw new Error("Invalid subsection for URL")}await d.yE[a](h,t,{headers:{"Content-Type":"multipart/form-data"}}),i(null),j({});const p="drivingLicense"===e?"driving":e,y=await d.yE.get(`employee/${P}/${p}`);m(r=>{const a={...r,[e]:y.data},t=Object.values(a).filter(Boolean).length;return A({completed:t,total:5}),a})}catch(r){if(console.error(`Update for ${e} failed:`,r),r.response){const{status:e,data:a}=r.response;if(400===e)if(a&&"object"===typeof a&&!a.timestamp)j(a);else{const e=a&&a.message?a.message:"Validation failed. Please check your input.";j({general:e})}else j({general:"An unexpected error occurred. Please try again."})}else j({general:"Network error. Please check your internet connection."})}finally{I(!1)}},F=async e=>{const r=k[e].title;if(window.confirm(`Are you sure you want to delete the ${r} for employee ${P}? This action cannot be undone.`))try{let a=e;"drivingLicense"===e&&(a="driving");const t=`employee/${P}/${a}`;await d.yE.delete(t),alert(`${r} deleted successfully.`),m(r=>{const a={...r,[e]:null},t=Object.values(a).filter(Boolean).length;return A({completed:t,total:5}),a})}catch(a){console.error(`Failed to delete ${r}:`,a),alert(`Error deleting ${r}. You may not have the required permissions.`)}},M=function(e,r){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",t=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const i=v[r],d=u[r]||"",c=e=>{((e,r)=>{x(a=>({...a,[e]:r})),v[e]&&j(r=>{const a={...r};return delete a[e],a})})(r,e),"panNumber"===r&&e?/^[A-Z]{5}[0-9]{4}[A-Z]{1}$/.test(e)||j(e=>({...e,[r]:"PAN format: 5 letters + 4 digits + 1 letter (e.g., ABCDE1234F)"})):"aadhaarNumber"===r&&e?/^[2-9]{1}[0-9]{11}$/.test(e)||j(e=>({...e,[r]:"Aadhaar must be 12 digits starting with 2-9"})):"voterIdNumber"===r&&e&&(/^[A-Z]{3}[0-9]{7}$/.test(e)||j(e=>({...e,[r]:"Voter ID format: 3 letters + 7 digits (e.g., ABC1234567)"})))};return(0,n.jsxs)("div",{className:"group relative",children:[(0,n.jsxs)("label",{className:"block text-sm font-semibold mb-3 flex items-center "+("dark"===h?"text-gray-200":"text-gray-800"),children:[e,t&&(0,n.jsx)("span",{className:"text-red-500 ml-1 text-base",children:"*"}),s&&(0,n.jsx)("span",{className:"ml-2 px-2 py-1 text-xs rounded-full "+("dark"===h?"bg-gray-700 text-gray-400":"bg-gray-100 text-gray-500"),children:"Read Only"})]}),"select"===a?(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsxs)("select",{value:d,onChange:e=>c(e.target.value),className:`w-full px-5 py-4 border-2 rounded-xl transition-all duration-300 appearance-none\n                                focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 focus:outline-none\n                                ${i?"border-red-300 bg-red-50 focus:border-red-500 focus:ring-red-500/20":"dark"===h?"border-gray-600 bg-gray-700 text-white hover:border-gray-500 group-hover:border-blue-400":"border-gray-200 bg-white hover:border-gray-300 group-hover:border-blue-300"}\n                                ${s?"dark"===h?"bg-gray-800 cursor-not-allowed opacity-60":"bg-gray-50 cursor-not-allowed opacity-60":""}`,disabled:s,children:[(0,n.jsxs)("option",{value:"",children:["Choose ",e]}),l.map(e=>(0,n.jsx)("option",{value:e,children:e},e))]}),(0,n.jsx)("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2 pointer-events-none",children:(0,n.jsx)("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}):"date"===a?(0,n.jsx)("input",{type:"date",value:d,onChange:e=>c(e.target.value),className:`w-full px-5 py-4 border-2 rounded-xl transition-all duration-300\n                            focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 focus:outline-none\n                            ${i?"border-red-300 bg-red-50 focus:border-red-500 focus:ring-red-500/20":"dark"===h?"border-gray-600 bg-gray-700 text-white hover:border-gray-500 group-hover:border-blue-400":"border-gray-200 bg-white hover:border-gray-300 group-hover:border-blue-300"}\n                            ${s?"dark"===h?"bg-gray-800 cursor-not-allowed opacity-60":"bg-gray-50 cursor-not-allowed opacity-60":""}`,disabled:s}):"file"===a?(0,n.jsxs)("div",{className:`relative border-2 border-dashed rounded-xl transition-all duration-300\n                        ${i?"border-red-300 bg-red-50":"dark"===h?"border-gray-600 bg-gray-800 hover:border-blue-400 hover:bg-blue-900/20":"border-gray-300 bg-gray-50 hover:border-blue-400 hover:bg-blue-50"}\n                        ${s?"opacity-60 cursor-not-allowed":"cursor-pointer"}`,children:[(0,n.jsx)("input",{type:"file",onChange:e=>{var a,t,l;return t=r,l=null===(a=e.target.files)||void 0===a?void 0:a[0],void x(e=>({...e,[t]:l}))},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:s,accept:".jpg,.jpeg,.png,.pdf"}),(0,n.jsxs)("div",{className:"px-6 py-8 text-center",children:[(0,n.jsx)(o.xvb,{className:"mx-auto h-12 w-12 mb-4 "+("dark"===h?"text-gray-500":"text-gray-400")}),(0,n.jsxs)("p",{className:"text-sm font-medium mb-1 "+("dark"===h?"text-gray-300":"text-gray-700"),children:["Drop your file here, or ",(0,n.jsx)("span",{className:"text-blue-600",children:"browse"})]}),(0,n.jsx)("p",{className:"text-xs text-gray-500",children:"PNG, JPG, PDF up to 10MB"})]})]}):"textarea"===a?(0,n.jsx)("textarea",{value:d,onChange:e=>c(e.target.value),className:`w-full px-5 py-4 border-2 rounded-xl transition-all duration-300 resize-none h-32\n                            focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 focus:outline-none\n                            ${i?"border-red-300 bg-red-50 focus:border-red-500 focus:ring-red-500/20":"dark"===h?"border-gray-600 bg-gray-700 text-white hover:border-gray-500 group-hover:border-blue-400":"border-gray-200 bg-white hover:border-gray-300 group-hover:border-blue-300"}\n                            ${s?"dark"===h?"bg-gray-800 cursor-not-allowed opacity-60":"bg-gray-50 cursor-not-allowed opacity-60":""}`,placeholder:`Enter ${e.toLowerCase()}...`,required:t,disabled:s}):(0,n.jsx)("input",{type:a,value:d,onChange:e=>c(e.target.value),className:`w-full px-5 py-4 border-2 rounded-xl transition-all duration-300\n                            focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 focus:outline-none\n                            ${i?"border-red-300 bg-red-50 focus:border-red-500 focus:ring-red-500/20":"dark"===h?"border-gray-600 bg-gray-700 text-white hover:border-gray-500 group-hover:border-blue-400":"border-gray-200 bg-white hover:border-gray-300 group-hover:border-blue-300"}\n                            ${s?"dark"===h?"bg-gray-800 cursor-not-allowed opacity-60":"bg-gray-50 cursor-not-allowed opacity-60":""}`,placeholder:`Enter ${e.toLowerCase()}...`,required:t,disabled:s}),i&&(0,n.jsxs)("div",{className:"mt-3 flex items-center space-x-2 text-red-600 animate-slideIn",children:[(0,n.jsx)(o.tr_,{className:"w-4 h-4 flex-shrink-0"}),(0,n.jsx)("p",{className:"text-sm font-medium",children:i})]})]},r)},Y=e=>{let{label:r,value:a}=e;return(0,n.jsx)("div",{className:"group p-4 rounded-xl border transition-all duration-300 hover:scale-105 "+("dark"===h?"bg-gradient-to-br from-gray-700 to-gray-800 border-gray-600 hover:shadow-md hover:shadow-blue-500/20":"bg-gradient-to-br from-gray-50 to-gray-100 border-gray-100 hover:shadow-md"),children:(0,n.jsx)("div",{className:"flex items-start justify-between",children:(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("span",{className:"text-xs font-bold uppercase tracking-wider block mb-2 "+("dark"===h?"text-gray-400":"text-gray-500"),children:r}),(0,n.jsx)("p",{className:"text-sm font-semibold leading-relaxed "+("dark"===h?"text-white":"text-gray-900"),children:a||(0,n.jsx)("span",{className:"italic "+("dark"===h?"text-gray-500":"text-gray-400"),children:"Not provided"})})]})})})},R=e=>{let{label:r,link:a}=e;return(0,n.jsx)("div",{className:"group p-4 rounded-xl border transition-all duration-300 hover:scale-105 "+("dark"===h?"bg-gradient-to-br from-blue-900/30 to-indigo-900/30 border-blue-700":"bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-100"),children:(0,n.jsx)("div",{className:"flex items-start justify-between",children:(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("span",{className:"text-xs font-bold uppercase tracking-wider block mb-2 "+("dark"===h?"text-blue-400":"text-blue-600"),children:r}),a?(0,n.jsxs)("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center space-x-2 text-sm font-semibold hover:underline transition-all duration-200 group "+("dark"===h?"text-blue-300 hover:text-blue-200":"text-blue-700 hover:text-blue-900"),children:[(0,n.jsx)(o.GNz,{className:"w-4 h-4"}),(0,n.jsx)("span",{children:"View Document"}),(0,n.jsx)("svg",{className:"w-3 h-3 group-hover:translate-x-1 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}):(0,n.jsx)("p",{className:"text-sm font-medium italic "+("dark"===h?"text-gray-500":"text-gray-400"),children:"Document not uploaded"})]})})})},G=e=>{let{title:r,data:a,onEdit:t,subSectionKey:l,onDelete:s,isAdmin:i}=e;const d=k[l],c=!!a;return(0,n.jsxs)("div",{className:"border-2 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-500 overflow-hidden group hover:scale-[1.02] "+("dark"===h?`bg-gray-800 ${d.darkBorderColor} hover:shadow-blue-500/20`:`bg-white ${d.borderColor}`),children:[(0,n.jsxs)("div",{className:"px-8 py-6 border-b-2 relative overflow-hidden "+("dark"===h?`${d.darkBgColor} ${d.darkBorderColor}`:`${d.bgColor} ${d.borderColor}`),children:[(0,n.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent to-white/30"}),(0,n.jsxs)("div",{className:"relative flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,n.jsx)("div",{className:"text-4xl transform group-hover:scale-110 transition-transform duration-300",children:d.icon}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("h4",{className:`text-xl font-bold flex items-center space-x-2 ${"dark"===h?d.darkTextColor:d.textColor}`,children:[(0,n.jsx)("span",{children:r}),c&&(0,n.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,n.jsx)(o.G3G,{className:"w-5 h-5 text-green-500"}),(0,n.jsx)("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full font-medium",children:"Verified"})]})]}),(0,n.jsx)("p",{className:"text-sm mt-1 "+("dark"===h?"text-gray-400":"text-gray-600"),children:d.description})]})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[S&&i&&c&&(0,n.jsxs)("button",{onClick:()=>s(l),className:"flex items-center space-x-2 px-6 py-3 rounded-xl font-semibold transition-all duration-300 transform hover:scale-105 focus:ring-4 focus:ring-red-500/20 shadow-md hover:shadow-lg "+("dark"===h?"text-red-400 bg-gray-700 border-2 border-red-800 hover:bg-red-900/50":"text-red-600 bg-white border-2 border-red-200 hover:bg-red-50"),children:[(0,n.jsx)(o.dW_,{className:"w-4 h-4"}),(0,n.jsx)("span",{children:"Delete"})]}),(0,n.jsx)("button",{onClick:()=>t(l),className:"flex items-center space-x-2 px-6 py-3 rounded-xl font-semibold transition-all duration-300 transform hover:scale-105 focus:ring-4 focus:ring-blue-500/20 shadow-md hover:shadow-lg "+(c?"dark"===h?`${d.darkTextColor} bg-gray-700 border-2 ${d.darkBorderColor} hover:bg-gray-600`:`${d.textColor} bg-white border-2 ${d.borderColor} hover:bg-gray-50`:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white hover:from-blue-600 hover:to-indigo-700"),children:c?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.zo4,{className:"w-4 h-4"}),(0,n.jsx)("span",{children:"Edit Details"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.YHj,{className:"w-4 h-4"}),(0,n.jsx)("span",{children:"Add Document"})]})})]})]})]}),(0,n.jsx)("div",{className:"p-8",children:c?(0,n.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:Object.keys(a).map(e=>"employee"===e?null:"uploadAadhaar"===e||"panImage"===e||"licenseImage"===e||"passportImage"===e||"uploadVoter"===e?(0,n.jsx)(R,{label:e.replace(/([A-Z])/g," $1"),link:a[e]},e):(0,n.jsx)(Y,{label:e.replace(/([A-Z])/g," $1"),value:a[e]},e))}):(0,n.jsxs)("div",{className:"text-center py-12",children:[(0,n.jsx)("div",{className:`w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 ${"dark"===h?d.darkBgColor:d.bgColor}`,children:(0,n.jsx)("div",{className:`text-3xl opacity-50 ${"dark"===h?d.darkTextColor:d.textColor}`,children:d.icon})}),(0,n.jsxs)("h3",{className:"text-lg font-semibold mb-2 "+("dark"===h?"text-white":"text-gray-800"),children:["No ",r," Added"]}),(0,n.jsx)("p",{className:"text-sm mb-6 max-w-sm mx-auto "+("dark"===h?"text-gray-400":"text-gray-500"),children:`Add your ${r.toLowerCase()} information to complete your profile and enhance security.`}),(0,n.jsxs)("button",{onClick:()=>t(l),className:"inline-flex items-center space-x-2 px-6 py-3 bg-gradient-to-r from-blue-500 to-indigo-600 text-white font-semibold rounded-xl hover:from-blue-600 hover:to-indigo-700 transform hover:scale-105 transition-all duration-300 shadow-lg",children:[(0,n.jsx)(o.YHj,{className:"w-4 h-4"}),(0,n.jsxs)("span",{children:["Add ",r]})]})]})})]})},U=()=>{const e=E.completed/E.total*100;return(0,n.jsxs)("div",{className:"rounded-2xl p-6 shadow-lg border "+("dark"===h?"bg-gray-800 border-gray-700":"bg-white border-gray-200"),children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,n.jsx)("h3",{className:"text-lg font-bold "+("dark"===h?"text-white":"text-gray-800"),children:"Profile Completion"}),(0,n.jsxs)("span",{className:"text-sm font-medium "+("dark"===h?"text-gray-400":"text-gray-600"),children:[E.completed,"/",E.total," Documents"]})]}),(0,n.jsx)("div",{className:"w-full rounded-full h-3 mb-4 overflow-hidden "+("dark"===h?"bg-gray-700":"bg-gray-200"),children:(0,n.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-green-500 h-3 rounded-full transition-all duration-700 ease-out",style:{width:`${e}%`}})}),(0,n.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,n.jsxs)("span",{className:""+("dark"===h?"text-gray-400":"text-gray-600"),children:[e.toFixed(0),"% Complete"]}),100===e&&(0,n.jsxs)("span",{className:"text-green-600 font-semibold flex items-center",children:[(0,n.jsx)(o.G3G,{className:"w-4 h-4 mr-1"}),"All Set!"]})]})]})},z=Object.keys(k).filter(e=>k[e].title.toLowerCase().includes(N.toLowerCase())||k[e].description.toLowerCase().includes(N.toLowerCase()));return(0,n.jsxs)("div",{className:"min-h-screen "+("dark"===h?"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900":"bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100"),children:[y?(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-20 w-20 border-4 border-blue-500 border-t-transparent mx-auto mb-6"}),(0,n.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,n.jsx)(o.zo4,{className:"w-8 h-8 text-blue-500"})})]}),(0,n.jsx)("h2",{className:"text-2xl font-bold mb-2 "+("dark"===h?"text-white":"text-gray-800"),children:"Loading Documents"}),(0,n.jsx)("p",{className:""+("dark"===h?"text-gray-300":"text-gray-600"),children:"Fetching identity information securely..."}),(0,n.jsx)("div",{className:"flex justify-center space-x-2 mt-4",children:[...Array(5)].map((e,r)=>(0,n.jsx)("div",{className:"w-2 h-2 rounded-full bg-blue-500 animate-pulse",style:{animationDelay:.2*r+"s"}},r))})]})}):(0,n.jsxs)("div",{className:"max-w-8xl mx-auto px-6 sm:px-8 lg:px-12 py-12",children:[S&&(0,n.jsx)("div",{className:"mb-6 p-4 rounded-2xl border-l-4 border-blue-500 shadow-lg "+("dark"===h?"bg-blue-900/20 border-blue-400":"bg-blue-50 border-blue-500"),children:(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)(o.GNz,{className:"w-5 h-5 "+("dark"===h?"text-blue-400":"text-blue-600")}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"font-semibold "+("dark"===h?"text-blue-400":"text-blue-800"),children:"Viewing Employee Documents"}),(0,n.jsxs)("p",{className:"text-sm "+("dark"===h?"text-blue-300":"text-blue-700"),children:["Employee ID: ",B,T]})]})]})}),(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-12",children:[(0,n.jsx)("div",{className:"lg:col-span-2",children:(0,n.jsx)(U,{})}),(0,n.jsx)("div",{className:"rounded-2xl p-6 shadow-lg border "+("dark"===h?"bg-gray-800 border-gray-700":"bg-white border-gray-200"),children:(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("input",{type:"text",placeholder:"Search documents...",value:N,onChange:e=>C(e.target.value),className:"w-full px-5 py-4 pl-12 border-2 rounded-xl focus:ring-4 focus:ring-blue-500/20 transition-all duration-300 "+("dark"===h?"border-gray-600 bg-gray-700 text-white placeholder-gray-400 focus:border-blue-500":"border-gray-200 bg-white text-black placeholder-gray-500 focus:border-blue-500")}),(0,n.jsx)("svg",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})})]}),(0,n.jsxs)("div",{className:"space-y-8",children:[z.map(e=>(0,n.jsx)(G,{title:k[e].title,data:c[e],onEdit:O,subSectionKey:e,onDelete:F,isAdmin:q},e)),0===z.length&&N&&(0,n.jsxs)("div",{className:"text-center py-16",children:[(0,n.jsx)("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 "+("dark"===h?"bg-gray-800":"bg-gray-100"),children:(0,n.jsx)("svg",{className:"w-8 h-8 "+("dark"===h?"text-gray-500":"text-gray-400"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,n.jsx)("h3",{className:"text-lg font-semibold mb-2 "+("dark"===h?"text-white":"text-gray-800"),children:"No documents found"}),(0,n.jsx)("p",{className:""+("dark"===h?"text-gray-400":"text-gray-500"),children:"Try adjusting your search terms"})]})]}),(()=>{if(!a)return null;const{subSection:e}=a,r=w[e]||[],t=!!c[e],l=k[e];return(0,n.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-[200] p-4 animate-fadeIn",children:(0,n.jsxs)("div",{className:"rounded-3xl w-full max-w-6xl max-h-[95vh] overflow-hidden shadow-2xl animate-slideUp "+("dark"===h?"bg-gray-800":"bg-white"),children:[(0,n.jsxs)("div",{className:`px-8 py-6 bg-gradient-to-r ${l.color} text-white relative overflow-hidden`,children:[(0,n.jsx)("div",{className:"absolute inset-0 bg-black/10"}),(0,n.jsxs)("div",{className:"relative flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,n.jsx)("div",{className:"text-4xl",children:l.icon}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("h2",{className:"text-2xl font-bold",children:[t?"Update":"Add"," ",l.title]}),(0,n.jsx)("p",{className:"text-white/90 text-sm",children:l.description})]})]}),(0,n.jsx)("button",{onClick:()=>i(null),className:"p-3 hover:bg-white/20 rounded-full transition-all duration-200 group","aria-label":"Close",children:(0,n.jsx)(o.$8F,{className:"w-6 h-6 group-hover:rotate-90 transition-transform duration-200"})})]})]}),(0,n.jsx)("div",{className:"overflow-y-auto max-h-[calc(95vh-200px)]",children:(0,n.jsxs)("form",{className:"p-8",onSubmit:r=>{r.preventDefault(),L(e)},children:[(0,n.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:r.map(e=>{const r=["aadhaarNumber","panNumber","licenseNumber","passportNumber","voterIdNumber"].includes(e.name),a=t&&r;return M(e.label,e.name,e.type,e.required,e.options,a)})}),v.general&&(0,n.jsx)("div",{className:"mt-6 p-5 border-l-4 border-red-400 rounded-r-xl animate-slideIn "+("dark"===h?"bg-red-900/20":"bg-red-50"),children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(o.tr_,{className:"w-6 h-6 text-red-400 mr-3"}),(0,n.jsx)("p",{className:"font-medium "+("dark"===h?"text-red-300":"text-red-800"),children:v.general})]})})]})}),(0,n.jsxs)("div",{className:"px-8 py-6 border-t flex justify-end space-x-4 "+("dark"===h?"bg-gray-700 border-gray-600":"bg-gray-50 border-gray-200"),children:[(0,n.jsx)("button",{type:"button",onClick:()=>i(null),className:"px-8 py-3 border-2 rounded-xl font-semibold transition-all duration-200 focus:ring-4 focus:ring-gray-500/20 "+("dark"===h?"border-gray-600 text-gray-300 hover:bg-gray-600 hover:border-gray-500":"border-gray-300 text-gray-700 hover:bg-gray-100 hover:border-gray-400"),children:"Cancel"}),(0,n.jsx)("button",{type:"button",onClick:()=>L(e),disabled:D,className:`px-10 py-3 bg-gradient-to-r ${l.color} text-white font-bold rounded-xl\n                                            hover:shadow-lg transform hover:scale-105 transition-all duration-200 \n                                            focus:ring-4 focus:ring-blue-500/30 flex items-center space-x-2\n                                            ${D?"cursor-not-allowed opacity-75":""}`,children:D?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"h-5 w-5 border-4 border-white border-t-transparent rounded-full animate-spin-slow"}),(0,n.jsx)("span",{children:"Updating..."})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.G3G,{className:"w-5 h-5"}),(0,n.jsx)("span",{children:t?"Update Document":"Save Document"})]})})]})]})})})()]}),(0,n.jsx)("style",{jsx:!0,children:"\n                @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }\n                @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }\n                @keyframes slideIn { from { transform: translateX(-10px); opacity: 0; } to { transform: translateX(0); opacity: 1; } }\n                .animate-fadeIn { animation: fadeIn 0.3s ease-out; }\n                .animate-slideUp { animation: slideUp 0.4s ease-out; }\n                .animate-slideIn { animation: slideIn 0.3s ease-out; }\n                .animate-spin-slow {\n                    animation: spin 1s linear infinite;\n                }\n                @keyframes spin {\n                    from { transform: rotate(0deg); }\n                    to { transform: rotate(360deg); }\n                }\n            "})]})};var E=a(184);const A=()=>{var e,r;const[a,o]=(0,t.useState)([]),[i,c]=(0,t.useState)(!0),[m,u]=(0,t.useState)(null),{empID:x}=(0,s.g)(),b=(0,s.zy)(),{userData:g,theme:h}=(0,t.useContext)(l.o),[p,y]=(0,t.useState)(!1),[f,v]=(0,t.useState)(null),[j,N]=(0,t.useState)(!1),w=new URLSearchParams(b.search),k="true"===w.get("fromContextMenu"),C=w.get("targetEmployeeId"),A=k&&C?C:x,D=null===g||void 0===g||null===(e=g.roles)||void 0===e||null===(r=e[0])||void 0===r?void 0:r.toUpperCase(),I=["ADMIN","MANAGER","HR"].includes(D),$=A===x,S=$||I;(0,t.useEffect)(()=>{(async()=>{if(A)try{c(!0);const e=await d.yE.get(`/employee/${A}/achievements`);console.log(`Fetching achievements for: ${A}`,e.data),o(e.data),u(null)}catch(e){u("Failed to fetch achievements. Please try again later."),console.error("Error fetching achievements:",e)}finally{c(!1)}})()},[A]);const B=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?(v(e),N(!0)):(v({certificationName:"",issuingAuthorityName:"",certificationURL:"",issueMonth:"",issueYear:"",expirationMonth:"",expirationYear:"",licenseNumber:""}),N(!1)),y(!0)},P=()=>{y(!1),v(null)};return i?(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center "+("dark"===h?"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900":"bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100"),children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-20 w-20 border-4 border-blue-500 border-t-transparent mx-auto mb-6"}),(0,n.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,n.jsx)(E.SBv,{className:"w-8 h-8 text-blue-500"})})]}),(0,n.jsx)("h2",{className:"text-2xl font-bold mb-2 "+("dark"===h?"text-white":"text-gray-800"),children:"Loading Achievements"}),(0,n.jsx)("p",{className:""+("dark"===h?"text-gray-300":"text-gray-600"),children:"Fetching certifications and achievements..."})]})}):m?(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center "+("dark"===h?"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900":"bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100"),children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 "+("dark"===h?"bg-red-900/30":"bg-red-100"),children:(0,n.jsx)(E.SBv,{className:"w-10 h-10 text-red-500"})}),(0,n.jsx)("h2",{className:"text-2xl font-bold mb-2 "+("dark"===h?"text-white":"text-gray-800"),children:"Error Loading Achievements"}),(0,n.jsx)("p",{className:""+("dark"===h?"text-red-300":"text-red-500"),children:m})]})}):(0,n.jsx)("div",{className:"min-h-screen "+("dark"===h?"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900":"bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100"),children:(0,n.jsxs)("div",{className:"max-w-8xl mx-auto px-6 sm:px-8 lg:px-12 py-12",children:[(0,n.jsx)("div",{className:"rounded-2xl p-6 shadow-lg border mb-8 "+("dark"===h?"bg-gray-800 border-gray-700":"bg-white border-gray-200"),children:(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,n.jsx)("div",{className:"p-3 rounded-xl shadow-md "+("dark"===h?"bg-gray-700":"bg-white"),children:(0,n.jsx)(E.SBv,{className:"w-8 h-8 "+("dark"===h?"text-yellow-400":"text-yellow-500")})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-2xl font-bold "+("dark"===h?"text-white":"text-gray-800"),children:"Achievements & Certifications"}),(0,n.jsx)("p",{className:"text-sm "+("dark"===h?"text-gray-400":"text-gray-600"),children:$?"Your professional certifications and achievements":"Professional certifications and achievements"})]})]}),S&&(0,n.jsxs)("button",{onClick:()=>B(),className:"px-6 py-3 rounded-xl font-semibold flex items-center space-x-2 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 "+("dark"===h?"bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700":"bg-gradient-to-r from-blue-500 to-purple-600 text-white hover:from-blue-600 hover:to-purple-700"),title:$?"Add your achievement":"Add achievement",children:[(0,n.jsx)(E.OiG,{className:"w-4 h-4"}),(0,n.jsx)("span",{children:$?"Add My Achievement":"Add Achievement"})]})]})}),0===a.length?(0,n.jsxs)("div",{className:"text-center py-16 px-6 rounded-2xl shadow-lg border "+("dark"===h?"bg-gray-800 border-gray-700":"bg-white border-gray-200"),children:[(0,n.jsx)("div",{className:"w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 "+("dark"===h?"bg-gray-700":"bg-gray-100"),children:(0,n.jsx)(E.SBv,{className:"w-10 h-10 "+("dark"===h?"text-gray-500":"text-gray-400")})}),(0,n.jsx)("h3",{className:"text-xl font-semibold mb-2 "+("dark"===h?"text-white":"text-gray-800"),children:$?"No Achievements Yet":"No Achievements Found"}),(0,n.jsx)("p",{className:"text-sm max-w-md mx-auto "+("dark"===h?"text-gray-400":"text-gray-500"),children:$?"No achievements have been recorded yet. Add your certifications and accomplishments to showcase your expertise.":"This employee has not added any achievements or certifications yet."}),S&&$&&(0,n.jsxs)("button",{onClick:()=>B(),className:"mt-6 px-6 py-3 rounded-xl font-semibold flex items-center space-x-2 mx-auto transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 "+("dark"===h?"bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700":"bg-gradient-to-r from-blue-500 to-purple-600 text-white hover:from-blue-600 hover:to-purple-700"),children:[(0,n.jsx)(E.OiG,{className:"w-4 h-4"}),(0,n.jsx)("span",{children:"Add Your First Achievement"})]})]}):(0,n.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-1 gap-6",children:a.map(e=>(0,n.jsxs)("div",{className:"p-6 rounded-2xl shadow-lg border hover:shadow-xl transition-all duration-300 transform hover:scale-[1.02] relative group "+("dark"===h?"bg-gray-800 border-gray-700 hover:shadow-blue-500/20":"bg-white border-gray-200"),children:[S&&(0,n.jsxs)("div",{className:"absolute top-6 right-6 flex space-x-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[(0,n.jsx)("button",{onClick:()=>B(e),className:"p-2 rounded-lg transition-all duration-200 transform hover:scale-110 "+("dark"===h?"text-gray-400 hover:text-blue-400 hover:bg-gray-700":"text-gray-500 hover:text-blue-600 hover:bg-blue-50"),title:$?"Edit your achievement":"Edit achievement",children:(0,n.jsx)(E.Mbp,{className:"w-4 h-4"})}),(0,n.jsx)("button",{onClick:()=>(async e=>{const r=I?"Are you sure you want to delete this achievement?":"Are you sure you want to delete your achievement?";if(window.confirm(r))try{await d.yE.delete(`/employee/${A}/${e}/achievements`),o(a.filter(r=>r.id!==e)),alert("Achievement deleted successfully!")}catch(t){console.error("Error deleting achievement:",t),alert("Failed to delete achievement. Please try again.")}})(e.id),className:"p-2 rounded-lg transition-all duration-200 transform hover:scale-110 "+("dark"===h?"text-gray-400 hover:text-red-400 hover:bg-gray-700":"text-gray-500 hover:text-red-600 hover:bg-red-50"),title:$?"Delete your achievement":"Delete achievement",children:(0,n.jsx)(E.qbC,{className:"w-4 h-4"})})]}),(0,n.jsxs)("div",{className:"flex items-start space-x-6",children:[(0,n.jsx)("div",{className:"p-4 rounded-xl shadow-md "+("dark"===h?"bg-gray-700":"bg-gradient-to-br from-blue-50 to-purple-50"),children:(0,n.jsx)(E.SBv,{className:"text-3xl "+("dark"===h?"text-yellow-400":"text-yellow-500")})}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("h3",{className:"text-xl font-bold mb-2 "+("dark"===h?"text-white":"text-gray-900"),children:e.certificationName}),(0,n.jsxs)("p",{className:"text-md flex items-center "+("dark"===h?"text-gray-300":"text-gray-600"),children:[(0,n.jsx)(E.ymh,{className:"mr-2"}),e.issuingAuthorityName]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[(0,n.jsxs)("div",{className:"p-3 rounded-lg "+("dark"===h?"bg-gray-700/50":"bg-gray-50"),children:[(0,n.jsxs)("div",{className:"flex items-center mb-1",children:[(0,n.jsx)(E.bfZ,{className:"mr-2 text-xs "+("dark"===h?"text-gray-400":"text-gray-500")}),(0,n.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide "+("dark"===h?"text-gray-400":"text-gray-500"),children:"Issued"})]}),(0,n.jsxs)("span",{className:"font-medium "+("dark"===h?"text-white":"text-gray-900"),children:[e.issueMonth," ",e.issueYear]})]}),(0,n.jsxs)("div",{className:"p-3 rounded-lg "+("dark"===h?"bg-gray-700/50":"bg-gray-50"),children:[(0,n.jsxs)("div",{className:"flex items-center mb-1",children:[(0,n.jsx)(E.bfZ,{className:"mr-2 text-xs "+("dark"===h?"text-gray-400":"text-gray-500")}),(0,n.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide "+("dark"===h?"text-gray-400":"text-gray-500"),children:"Expires"})]}),(0,n.jsx)("span",{className:"font-medium "+("dark"===h?"text-white":"text-gray-900"),children:e.expirationMonth&&e.expirationYear?`${e.expirationMonth} ${e.expirationYear}`:"No Expiration"})]}),(0,n.jsxs)("div",{className:"p-3 rounded-lg md:col-span-2 lg:col-span-1 "+("dark"===h?"bg-gray-700/50":"bg-gray-50"),children:[(0,n.jsxs)("div",{className:"flex items-center mb-1",children:[(0,n.jsx)(E.Wuj,{className:"mr-2 text-xs "+("dark"===h?"text-gray-400":"text-gray-500")}),(0,n.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide "+("dark"===h?"text-gray-400":"text-gray-500"),children:"License No"})]}),(0,n.jsx)("span",{className:"font-medium "+("dark"===h?"text-white":"text-gray-900"),children:e.licenseNumber||"N/A"})]})]}),e.certificationURL&&(0,n.jsx)("div",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:(0,n.jsxs)("a",{href:e.certificationURL,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 rounded-lg font-semibold transition-all duration-300 hover:scale-105 "+("dark"===h?"text-blue-400 bg-blue-900/20 hover:bg-blue-900/40 border border-blue-700":"text-blue-600 bg-blue-50 hover:bg-blue-100 border border-blue-200"),children:[(0,n.jsx)("span",{children:"View Credential"}),(0,n.jsx)(E.EQc,{className:"ml-2 w-4 h-4"})]})})]})]})]},e.id))}),p&&(0,n.jsx)("div",{className:"fixed inset-0 backdrop-blur-sm bg-black bg-opacity-50 flex justify-center items-center z-[200] p-4",children:(0,n.jsxs)("div",{className:"rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto "+("dark"===h?"bg-gray-800":"bg-white"),children:[(0,n.jsxs)("div",{className:"px-8 py-6 border-b "+("dark"===h?"border-gray-700":"border-gray-200"),children:[(0,n.jsx)("h2",{className:"text-2xl font-bold "+("dark"===h?"text-white":"text-gray-800"),children:j?$?"Edit Your Achievement":"Edit Achievement":$?"Add Your Achievement":"Add New Achievement"}),(0,n.jsx)("p",{className:"text-sm mt-1 "+("dark"===h?"text-gray-400":"text-gray-600"),children:j?"Update the achievement details below":"Fill in the details to add a new certification or achievement"})]}),(0,n.jsx)("div",{className:"p-8",children:(0,n.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const r=new FormData(e.target),t=Object.fromEntries(r.entries()),l=new FormData;l.append("achievementDTO",new Blob([JSON.stringify(t)],{type:"application/json"}));try{let e;if(j){const r=`/employee/${A}/${f.id}/achievements`;e=await d.yE.put(r,l,{headers:{"Content-Type":"multipart/form-data"}}),o(a.map(r=>r.id===f.id?e.data:r)),alert("Achievement updated successfully!")}else{const r=`/employee/achievements/${A}`;e=await d.yE.post(r,l,{headers:{"Content-Type":"multipart/form-data"}}),o([...a,e.data]),alert("Achievement added successfully!")}P()}catch(n){var s;console.error("Error saving achievement:",(null===(s=n.response)||void 0===s?void 0:s.data)||n.message),alert("Failed to save achievement. Please check your input and try again.")}},className:"space-y-6",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-semibold mb-2 "+("dark"===h?"text-gray-300":"text-gray-700"),children:"Certification Name *"}),(0,n.jsx)("input",{name:"certificationName",defaultValue:null===f||void 0===f?void 0:f.certificationName,placeholder:"e.g., AWS Certified Solutions Architect",className:`w-full p-3 rounded-lg border transition-colors ${"dark"===h?"bg-gray-700 border-gray-600 text-white placeholder-gray-400 focus:border-blue-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-500 focus:border-blue-500"} focus:outline-none focus:ring-2 focus:ring-blue-500/20`,required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-semibold mb-2 "+("dark"===h?"text-gray-300":"text-gray-700"),children:"Issuing Authority *"}),(0,n.jsx)("input",{name:"issuingAuthorityName",defaultValue:null===f||void 0===f?void 0:f.issuingAuthorityName,placeholder:"e.g., Amazon Web Services",className:`w-full p-3 rounded-lg border transition-colors ${"dark"===h?"bg-gray-700 border-gray-600 text-white placeholder-gray-400 focus:border-blue-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-500 focus:border-blue-500"} focus:outline-none focus:ring-2 focus:ring-blue-500/20`,required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-semibold mb-2 "+("dark"===h?"text-gray-300":"text-gray-700"),children:"Issue Month *"}),(0,n.jsxs)("select",{name:"issueMonth",defaultValue:null===f||void 0===f?void 0:f.issueMonth,className:`w-full p-3 rounded-lg border transition-colors ${"dark"===h?"bg-gray-700 border-gray-600 text-white focus:border-blue-500":"bg-white border-gray-300 text-gray-900 focus:border-blue-500"} focus:outline-none focus:ring-2 focus:ring-blue-500/20`,required:!0,children:[(0,n.jsx)("option",{value:"",children:"Select Month"}),["January","February","March","April","May","June","July","August","September","October","November","December"].map(e=>(0,n.jsx)("option",{value:e,children:e},e))]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-semibold mb-2 "+("dark"===h?"text-gray-300":"text-gray-700"),children:"Issue Year *"}),(0,n.jsx)("input",{name:"issueYear",type:"number",min:"1990",max:(new Date).getFullYear(),defaultValue:null===f||void 0===f?void 0:f.issueYear,placeholder:"e.g., 2023",className:`w-full p-3 rounded-lg border transition-colors ${"dark"===h?"bg-gray-700 border-gray-600 text-white placeholder-gray-400 focus:border-blue-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-500 focus:border-blue-500"} focus:outline-none focus:ring-2 focus:ring-blue-500/20`,required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-semibold mb-2 "+("dark"===h?"text-gray-300":"text-gray-700"),children:"Expiration Month"}),(0,n.jsxs)("select",{name:"expirationMonth",defaultValue:null===f||void 0===f?void 0:f.expirationMonth,className:`w-full p-3 rounded-lg border transition-colors ${"dark"===h?"bg-gray-700 border-gray-600 text-white focus:border-blue-500":"bg-white border-gray-300 text-gray-900 focus:border-blue-500"} focus:outline-none focus:ring-2 focus:ring-blue-500/20`,children:[(0,n.jsx)("option",{value:"",children:"Select Month (Optional)"}),["January","February","March","April","May","June","July","August","September","October","November","December"].map(e=>(0,n.jsx)("option",{value:e,children:e},e))]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-semibold mb-2 "+("dark"===h?"text-gray-300":"text-gray-700"),children:"Expiration Year"}),(0,n.jsx)("input",{name:"expirationYear",type:"number",min:(new Date).getFullYear(),max:"2050",defaultValue:null===f||void 0===f?void 0:f.expirationYear,placeholder:"e.g., 2026",className:`w-full p-3 rounded-lg border transition-colors ${"dark"===h?"bg-gray-700 border-gray-600 text-white placeholder-gray-400 focus:border-blue-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-500 focus:border-blue-500"} focus:outline-none focus:ring-2 focus:ring-blue-500/20`})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-semibold mb-2 "+("dark"===h?"text-gray-300":"text-gray-700"),children:"License Number"}),(0,n.jsx)("input",{name:"licenseNumber",defaultValue:null===f||void 0===f?void 0:f.licenseNumber,placeholder:"e.g., AWS-ASA-12345",className:`w-full p-3 rounded-lg border transition-colors ${"dark"===h?"bg-gray-700 border-gray-600 text-white placeholder-gray-400 focus:border-blue-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-500 focus:border-blue-500"} focus:outline-none focus:ring-2 focus:ring-blue-500/20`})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-semibold mb-2 "+("dark"===h?"text-gray-300":"text-gray-700"),children:"Certification URL"}),(0,n.jsx)("input",{name:"certificationURL",type:"url",defaultValue:null===f||void 0===f?void 0:f.certificationURL,placeholder:"https://...",className:`w-full p-3 rounded-lg border transition-colors ${"dark"===h?"bg-gray-700 border-gray-600 text-white placeholder-gray-400 focus:border-blue-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-500 focus:border-blue-500"} focus:outline-none focus:ring-2 focus:ring-blue-500/20`})]}),(0,n.jsxs)("div",{className:"flex justify-end space-x-4 pt-6",children:[(0,n.jsx)("button",{type:"button",onClick:P,className:"px-6 py-3 rounded-lg font-semibold transition-all duration-200 "+("dark"===h?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Cancel"}),(0,n.jsxs)("button",{type:"submit",className:"px-6 py-3 rounded-lg font-semibold transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 "+("dark"===h?"bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700":"bg-gradient-to-r from-blue-500 to-purple-600 text-white hover:from-blue-600 hover:to-purple-700"),children:[j?"Update":"Save"," Achievement"]})]})]})})]})})]})})};var D=a(3538),I=a(6720),$=a(3546),S=a(5440);const B=()=>{const e=(0,s.zy)(),r=(0,s.Zp)(),{empID:a}=(0,s.g)(),{userprofiledata:o,setUserProfileData:c,theme:m}=(0,t.useContext)(l.o),u=new URLSearchParams(e.search),b="true"===u.get("fromContextMenu"),g=u.get("targetEmployeeId"),h=b&&g?g:a,p=b&&g&&g!==a,[y,f]=(0,t.useState)(e.pathname),[v,j]=(0,t.useState)(!0),[w,k]=(0,t.useState)(null),[B,P]=(0,t.useState)(!1),[T,q]=(0,t.useState)({}),[O,L]=(0,t.useState)(null),[F,M]=(0,t.useState)(!1),Y=(0,t.useRef)(null);(0,t.useEffect)(()=>{if(!h)return;(async()=>{try{const e=await d.yE.get(`/employee/${h}`);b&&g&&g!==a?L(e.data):(c(e.data),q(e.data))}catch(e){console.error("\u274c Error fetching employee details:",e)}})()},[h,c,b,g,a]),(0,t.useEffect)(()=>{f(e.pathname)},[e.pathname]);const R=p?O:o,G=((null===R||void 0===R?void 0:R.displayName)||"  ").split(" ").map(e=>e[0]).join("").substring(0,2),U=[{name:"About",path:"about",icon:I.LTk},{name:"Profile",path:"profile",icon:D.WoZ},{name:"Job",path:"job",icon:I.r72},{name:"Documents",path:"documents",icon:I.YG2},{name:"Achievements",path:"achievements",icon:I.SeC}],z=e=>{q(r=>({...r,[e.target.name]:e.target.value}))};return(0,n.jsxs)("div",{className:"min-h-screen flex flex-col "+("dark"===m?"bg-gray-900":"bg-gray-50"),children:[(0,n.jsxs)("div",{className:"h-48 relative "+("dark"===m?"bg-gray-800":"bg-[#B7D4FF]"),children:[!p&&(0,n.jsx)("div",{className:"absolute top-4 right-8",children:(0,n.jsx)("button",{onClick:()=>{p||(q(R),P(!0))},className:"p-2 cursor-pointer rounded transition-colors "+("dark"===m?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-white hover:bg-gray-100 text-gray-600"),title:"Edit Profile",children:(0,n.jsx)(D.FT6,{className:"w-4 h-4"})})}),(0,n.jsxs)("div",{className:"flex items-start pt-4 px-8",children:[(0,n.jsxs)("div",{className:"relative group cursor-pointer",onClick:()=>!p&&M(!0),children:[w||null!==R&&void 0!==R&&R.employeeImage?(0,n.jsx)("img",{src:w||R.employeeImage,alt:"Profile",className:"w-32 h-32 rounded-full bg-white border-2 border-white shadow-lg object-cover"}):(0,n.jsx)("div",{className:"w-32 h-32 rounded-full border-2 border-white shadow-lg flex items-center justify-center text-2xl font-medium "+("dark"===m?"bg-gray-600 text-white":"bg-gray-200 text-gray-600"),children:G}),!p&&(0,n.jsx)("div",{className:"absolute inset-0 rounded-full bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 flex items-center justify-center transition-opacity",children:(0,n.jsx)(E.p5B,{className:"text-white text-2xl"})})]}),(0,n.jsxs)("div",{className:"ml-8 "+("dark"===m?"text-white":"text-gray-800"),children:[(0,n.jsx)("h1",{className:"text-3xl font-bold tracking-wide mb-4",children:null===R||void 0===R?void 0:R.displayName}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-x-12 gap-y-2 text-sm "+("dark"===m?"text-gray-300":"text-gray-700"),children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(D.WoZ,{className:"w-5 h-5"}),(0,n.jsx)("p",{children:null===R||void 0===R?void 0:R.employeeId})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(E.ymh,{className:"w-5 h-5"}),(0,n.jsx)("p",{children:null===R||void 0===R?void 0:R.location})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(I.r72,{className:"w-5 h-5"}),(0,n.jsx)("p",{children:null===R||void 0===R?void 0:R.jobTitlePrimary})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(I.mm2,{className:"w-5 h-5"}),(0,n.jsx)("p",{children:null===R||void 0===R?void 0:R.workEmail})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(E.Cab,{className:"w-5 h-5"}),(0,n.jsx)("p",{children:null===R||void 0===R?void 0:R.workNumber})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(I.LTk,{className:"w-5 h-5"}),(0,n.jsx)("p",{children:null===R||void 0===R?void 0:R.jobTitleSecondary})]})]})]})]})]}),(0,n.jsxs)("div",{className:"flex flex-1",children:[(0,n.jsx)("main",{className:"flex-1 p-6 "+("dark"===m?"bg-gray-900":"bg-gray-50"),children:(0,n.jsxs)(s.BV,{children:[(0,n.jsx)(s.qh,{index:!0,element:(0,n.jsx)(s.C5,{to:"profile",replace:!0})}),(0,n.jsx)(s.qh,{path:"about",element:(0,n.jsx)(i,{})}),(0,n.jsx)(s.qh,{path:"profile",element:(0,n.jsx)(x,{})}),(0,n.jsx)(s.qh,{path:"job",element:(0,n.jsx)(N,{})}),(0,n.jsx)(s.qh,{path:"documents",element:(0,n.jsx)(C,{})}),(0,n.jsx)(s.qh,{path:"achievements",element:(0,n.jsx)(A,{})})]})}),(0,n.jsxs)("div",{className:`transition-all duration-300 ${v?"w-64":"w-20"} border-l min-h-full relative ${"dark"===m?"bg-gray-900 border-gray-700":"bg-gray-50 border-gray-200"}`,children:[(0,n.jsx)("button",{onClick:()=>j(!v),className:"absolute -left-3 top-4 border rounded-full p-1 shadow z-10 "+("dark"===m?"bg-gray-800 border-gray-600 hover:bg-gray-700 text-white":"bg-white border-gray-300 hover:bg-gray-100 text-gray-600"),children:v?(0,n.jsx)(I.xVu,{}):(0,n.jsx)(I.E_E,{})}),(0,n.jsx)("nav",{className:"p-4 sticky top-0",children:(0,n.jsx)("div",{className:"space-y-1",children:U.map(t=>{const l=e.pathname.endsWith(t.path);return(0,n.jsxs)("div",{onClick:()=>(e=>{const t=`/profile/${a}/${e}`;r(b&&g?`${t}?fromContextMenu=true&targetEmployeeId=${g}`:t)})(t.path),className:"cursor-pointer flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors "+(l?"dark"===m?"bg-blue-600 text-white":"bg-black text-white":"dark"===m?"text-gray-300 hover:bg-gray-800":"text-gray-700 hover:bg-gray-100"),children:[(0,n.jsx)(t.icon,{className:"w-5 h-5 "+(l?"text-white":"dark"===m?"text-gray-400":"text-gray-500")}),v&&(0,n.jsx)("span",{className:"font-medium",children:t.name})]},t.path)})})})]})]}),(0,n.jsx)($.N,{children:F&&(0,n.jsx)(S.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 backdrop-blur-sm bg-opacity-75 flex items-center justify-center z-[200] p-4",onClick:()=>M(!1),children:(0,n.jsxs)(S.P.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"relative rounded-2xl shadow-xl p-8 text-center "+("dark"===m?"bg-gray-800":"bg-white"),onClick:e=>e.stopPropagation(),children:[(0,n.jsx)("button",{onClick:()=>M(!1),className:"absolute top-4 right-4 p-2 rounded-full "+("dark"===m?"text-gray-400 hover:bg-gray-700":"text-gray-500 hover:bg-gray-200"),children:(0,n.jsx)(E.QCr,{})}),(0,n.jsx)("h3",{className:"text-2xl font-bold mb-4 "+("dark"===m?"text-white":"text-gray-900"),children:"Profile Picture"}),(0,n.jsx)("div",{className:"mb-6",children:w||null!==R&&void 0!==R&&R.employeeImage?(0,n.jsx)("img",{src:w||R.employeeImage,alt:"Profile Preview",className:"w-48 h-48 rounded-full object-cover mx-auto shadow-lg"}):(0,n.jsx)("div",{className:"w-48 h-48 rounded-full mx-auto shadow-lg flex items-center justify-center text-5xl font-medium "+("dark"===m?"bg-gray-600 text-white":"bg-gray-200 text-gray-600"),children:G})}),(0,n.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,n.jsxs)("button",{onClick:()=>Y.current.click(),className:"flex items-center space-x-2 px-6 py-3 bg-blue-500 text-white font-semibold rounded-lg hover:bg-blue-600 transition-transform transform hover:scale-105",children:[(0,n.jsx)(E.p5B,{}),(0,n.jsx)("span",{children:"Change"})]}),(null===R||void 0===R?void 0:R.employeeImage)&&(0,n.jsxs)("button",{onClick:async()=>{if(window.confirm("Are you sure you want to delete your profile picture? This action cannot be undone."))try{await d.yE.delete(`/employee/${h}/deleteImage`),c({...o,employeeImage:null}),k(null),alert("Profile picture deleted successfully."),M(!1)}catch(e){console.error("Error deleting image:",e),alert("Failed to delete image. Please try again.")}},className:"flex items-center space-x-2 px-6 py-3 bg-red-500 text-white font-semibold rounded-lg hover:bg-red-600 transition-transform transform hover:scale-105",children:[(0,n.jsx)(E.qbC,{}),(0,n.jsx)("span",{children:"Delete"})]})]}),(0,n.jsx)("input",{type:"file",ref:Y,onChange:async e=>{const r=e.target.files[0];if(r){const e=new FileReader;e.onloadend=()=>k(e.result),e.readAsDataURL(r);const t=new FormData;t.append("employeeImage",r);try{const e=await d.yE.post(`/employee/${h}/upload`,t,{headers:{"Content-Type":"multipart/form-data"}});c(e.data),alert("Profile picture updated successfully!"),M(!1)}catch(a){console.error("Error uploading image:",a),alert("Failed to upload image. Please try again."),k(null)}}},accept:"image/*",className:"hidden"})]})})}),B&&!p&&(0,n.jsx)("div",{className:"fixed inset-0 backdrop-blur-sm bg-opacity-100 flex items-center justify-center z-[200]",children:(0,n.jsxs)("div",{className:"rounded-lg p-6 w-[500px] shadow-2xl "+("dark"===m?"bg-gray-800":"bg-white"),children:[(0,n.jsx)("h2",{className:"text-2xl font-bold mb-4 "+("dark"===m?"text-white":"text-gray-900"),children:"Edit Profile"}),(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault(),P(!1)},children:[(0,n.jsx)("div",{className:"space-y-4",children:["name","empId","company","department","email","contact","role"].map(e=>(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium capitalize "+("dark"===m?"text-gray-300":"text-gray-700"),children:e}),(0,n.jsx)("input",{type:"email"===e?"email":"text",name:e,value:T[e]||"",onChange:z,className:"mt-1 block w-full rounded-md shadow-sm focus:ring-blue-500 "+("dark"===m?"bg-gray-700 border-gray-600 text-white placeholder-gray-400 focus:border-blue-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500 focus:border-blue-500")})]},e))}),(0,n.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,n.jsx)("button",{type:"button",onClick:()=>P(!1),className:"px-4 py-2 border rounded-md transition-colors "+("dark"===m?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"),children:"Cancel"}),(0,n.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors",children:"Save Changes"})]})]})]})})]})}},2397:(e,r,a)=>{a.d(r,{Pt:()=>c,bI:()=>i,qB:()=>u,vx:()=>m,yE:()=>d});var t=a(6213);let l=!1,s=[];const o=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;s.forEach(a=>{e?a.reject(e):a.resolve(r)}),s=[]},n=e=>{const r=t.A.create({baseURL:e});return r.interceptors.request.use(e=>{const r=localStorage.getItem("accessToken");return r&&(e.headers.Authorization=`Bearer ${r}`),e},e=>Promise.reject(e)),r.interceptors.response.use(e=>e,async a=>{var i;const d=a.config;if(401===(null===(i=a.response)||void 0===i?void 0:i.status)&&!d._retry){if(l)return new Promise((e,r)=>{s.push({resolve:e,reject:r})}).then(e=>(d.headers.Authorization=`Bearer ${e}`,r(d))).catch(e=>Promise.reject(e));d._retry=!0,l=!0;const a=localStorage.getItem("accessToken");console.log(`\ud83d\udd34 Token expired for ${e}. Old Token:`,a);try{const r=await t.A.post("http://hrms.anasolconsultancyservices.com/api/auth/refresh-token",{},{withCredentials:!0}),{accessToken:a}=r.data;localStorage.setItem("accessToken",a),console.log(`\ud83d\udfe2 New Token for ${e}:`,a),d.data instanceof FormData&&(d.data=function(e){const r=new FormData;for(let[a,t]of e.entries())r.append(a,t);return r}(d.data)),o(null,a);const l=n(e);return d.headers.Authorization=`Bearer ${a}`,l(d)}catch(c){return console.error("Refresh token failed. Logging out.",c),localStorage.clear(),window.location.href="/login",o(c),Promise.reject(c)}finally{l=!1}}return Promise.reject(a)}),r};window.addEventListener("storage",e=>{"accessToken"===e.key&&console.log("\ud83d\udd04 Token updated in another tab:",e.newValue)});const i=n("http://hrms.anasolconsultancyservices.com/api"),d=n("http://hrms.anasolconsultancyservices.com/api"),c=n("http://hrms.anasolconsultancyservices.com/api"),m=n("http://hrms.anasolconsultancyservices.com/api/notification"),u=n("http://localhost:8088/api/ticket")}}]);
//# sourceMappingURL=492.c53c36de.chunk.js.map