"use strict";(self.webpackChunktechlife=self.webpackChunktechlife||[]).push([[404],{6404:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Se});var s=a(9379),n=a(5043),r=a(7234),l=a(3315),o=a(7012),i=a(7656),c=a(9002),d=a(6992),m=a(6102),x=a(7869),u=a(379),g=a(95),h=a(1474),p=a(2185),y=a(6026),f=a(1175),b=a(6446),v=a(9570),j=a(3895),N=a(9722),w=a(5439),k=a(184),D=a(1816),S=a(9804),A=a(3825),C=a(579);const T=[{title:"Total ClockIn",value:"104"},{title:"Not ClockIn ",value:"10"},{title:"On leave",value:"6"},{title:"Weekly Off",value:"5"},{title:"Holiday",value:"10"},{title:"ClockOut",value:"104"}],I=e=>{let{title:t,icontextcolor:a,icon:s,value:l,color:o}=e;const{theme:i}=(0,n.useContext)(r.ob);return(0,C.jsxs)(b.P.div,{className:" rounded-xl p-6 shadow-md border border-gray-200 hover:shadow-lg transition-shadow duration-300 h-full flex flex-col items-center justify-center text-center space-y-2 ".concat("dark"===i?"bg-gray-600 ":"bg-stone-100 "),initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeOut"},children:[(0,C.jsx)("div",{className:"w-16 h-16 flex items-center justify-center rounded-full mb-2 p-2 ".concat(o," ").concat(a),children:n.cloneElement(s,{className:"w-10 h-10 rounded-full "})}),(0,C.jsxs)("div",{children:[(0,C.jsx)("p",{className:"text-3xl font-bold mt-2 ".concat("dark"===i?"bg-gradient-to-br from-blue-100 to-blue-500 bg-clip-text text-transparent":"text-gray-800 "),children:l}),(0,C.jsx)("h3",{className:"text-sm  ".concat("dark"===i?"text-white ":"text-gray-800"," "),children:t})]})]})},M=()=>{const{theme:e}=(0,n.useContext)(r.ob);return(0,C.jsx)("div",{className:"p-2 h-full flex flex-col justify-between",children:(0,C.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-7 gap-6 h-full",children:[(0,C.jsx)(P,{}),T.map((e,t)=>{let a,s,n;switch(e.title){case"Total ClockIn":a=(0,C.jsx)(S.Aag,{className:"w-8 h-8 text-white"}),n="bg-orange-100",s="text-orange-400";break;case"Not ClockIn ":a=(0,C.jsx)(S.U0v,{className:"w-8 h-8 text-white"}),n="bg-red-100",s="text-red-400";break;case"On leave":a=(0,C.jsx)(S.W7G,{className:"w-8 h-8 text-white"}),n="bg-green-100",s="text-green-400";break;case"Weekly Off":a=(0,C.jsx)(S.V$M,{className:"w-8 h-8 text-white"}),n="bg-blue-100",s="text-blue-400";break;case"Holiday":a=(0,C.jsx)(A.H9N,{className:"w-8 h-8 text-white"}),n="bg-indigo-100",s="text-indigo-400";break;case"ClockOut":a=(0,C.jsx)(S.DLy,{className:"w-8 h-8 text-white"}),n="bg-yellow-100",s="text-yellow-400";break;default:a=(0,C.jsx)(D.A,{className:"w-10 h-10 text-white"}),n="#D3D3D3",s="text-gray-100"}return(0,C.jsx)(I,{icon:a,color:n,value:e.value,title:e.title,icontextcolor:s},t)})]})})},E=[{title:"Total ClockIn",value:104},{title:"Not ClockIn ",value:10},{title:"On leave",value:6},{title:"Weekly Off",value:5},{title:"Holiday",value:10},{title:"ClockOut",value:104}],H=["#3B82F6","#F59E0B","#EF4444","#84CC16","#6B7280","#22C55E"],P=()=>{const{theme:e}=(0,n.useContext)(r.ob),t=E.reduce((e,t)=>e+t.value,0),a="dark"===e?"white":"black";return(0,C.jsx)("div",{className:"flex justify-center items-center",children:(0,C.jsxs)(d.r,{width:160,height:160,children:[(0,C.jsx)(m.F,{data:E,dataKey:"value",nameKey:"title",cx:"50%",cy:"50%",innerRadius:55,outerRadius:80,children:E.map((e,t)=>(0,C.jsx)(x.f,{fill:H[t%H.length]},"cell-".concat(t)))}),(0,C.jsxs)("text",{x:"50%",y:"50%",textAnchor:"middle",dominantBaseline:"middle",stroke:a,className:"text-sm font-small ",children:["Total Employees",(0,C.jsx)("span",{className:" ".concat("dark"===e?"text-gray-200":"text-gray-800"," text-xl font-bold "),children:t})]}),(0,C.jsx)(u.m,{})]})})};const O=()=>{const{theme:e}=(0,n.useContext)(r.ob),t=(new Date).toISOString().slice(0,10),a=new Date(Date.now()-5184e5).toISOString().slice(0,10),[s,l]=(0,n.useState)(a),[i,c]=(0,n.useState)(t),[d,m]=(0,n.useState)([]),[x,u]=(0,n.useState)(!1),[g,h]=(0,n.useState)(null),[p,y]=(0,n.useState)("ontime"),f=e=>{if(!e||"string"!==typeof e)return"N/A";const t=e.match(/PT(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?/);if(!t)return e;const a=parseInt(t[1]||"0",10),s=parseInt(t[2]||"0",10),n=parseInt(t[3]||"0",10),r=a%24,l=[];return r&&l.push("".concat(r,"h")),s&&l.push("".concat(s,"m")),n&&l.push("".concat(n,"s")),l.length?l.join(" "):"0m"},j=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;u(!0),h(null);try{var n;const s="https://hrms.anasolconsultancyservices.com/api/attendance/top-ontime",r=await N.A.get(s,{params:{start:e,end:t,limit:a}}),l=null!==(n=null===r||void 0===r?void 0:r.data)&&void 0!==n?n:{};if(l&&"object"===typeof l&&!Array.isArray(l)){const e=Object.entries(l).map(e=>{let[t,a]=e;return{id:t,count:Number(a)||0}});e.sort((e,t)=>t.count-e.count),m(e)}else m([])}catch(c){var r,l,o;console.error("fetchTopOnTime error:",c),console.error("axios response:",null===c||void 0===c?void 0:c.response);const e=null===c||void 0===c||null===(r=c.response)||void 0===r?void 0:r.data,t=(null===c||void 0===c||null===(l=c.response)||void 0===l||null===(o=l.data)||void 0===o?void 0:o.message)||(e?JSON.stringify(e):null)||(null===c||void 0===c?void 0:c.message)||"Failed to load top on-time";h(t),m([])}finally{u(!1)}},w=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;u(!0),h(null);try{var n;const s="https://hrms.anasolconsultancyservices.com/api/attendance/top-overtime",r=await N.A.get(s,{params:{start:e,end:t,limit:a}}),l=null!==(n=null===r||void 0===r?void 0:r.data)&&void 0!==n?n:{};if(l&&"object"===typeof l&&!Array.isArray(l)){const e=Object.entries(l).map(e=>{let[t,a]=e;return{id:t,raw:String(a),durationReadable:f(String(a))}});e.sort((e,t)=>{const a=parseInt((e.raw.match(/PT(\d+)H/)||[0,0])[1],10)||0;return(parseInt((t.raw.match(/PT(\d+)H/)||[0,0])[1],10)||0)-a}),m(e)}else m([])}catch(c){var r,l,o;console.error("fetchTopOvertime error:",c),console.error("axios response:",null===c||void 0===c?void 0:c.response);const e=null===c||void 0===c||null===(r=c.response)||void 0===r?void 0:r.data,t=(null===c||void 0===c||null===(l=c.response)||void 0===l||null===(o=l.data)||void 0===o?void 0:o.message)||(e?JSON.stringify(e):null)||(null===c||void 0===c?void 0:c.message)||"Failed to load top overtime";h(t),m([])}finally{u(!1)}};return(0,n.useEffect)(()=>{"ontime"===p?j(s,i,5):w(s,i,5)},[s,i,p]),(0,C.jsxs)(b.P.div,{className:" rounded-xl shadow-md p-2 w-full h-96 font-sans border border-gray-200  flex flex-col ".concat("dark"===e?"bg-gray-600 text-gray-100":"bg-stone-100 text-gray-900"),initial:{opacity:0,y:50},animate:{opacity:1,y:.5,scale:1},transition:{duration:.5,delay:.2},children:[(0,C.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,C.jsxs)("h2",{className:"text-lg font-bold ".concat("dark"===e?"text-white":"text-gray-800"),children:[(0,C.jsx)(o.A,{className:"w-6 h-6 text-blue-500 inline-block mr-2"}),"ontime"===p?"Top On-Time":"Top OverTime"]}),(0,C.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,C.jsx)("button",{onClick:()=>y("ontime"),className:"px-3 py-1 rounded text-sm ".concat("ontime"===p?"bg-blue-500 text-white":"bg-gray-200 text-gray-800"),children:"Top On-Time"}),(0,C.jsx)("button",{onClick:()=>y("overtime"),className:"px-3 py-1 rounded text-sm ".concat("overtime"===p?"bg-blue-500 text-white":"bg-gray-200 text-gray-800"),children:"Top OverTime"})]})]}),(0,C.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center space-y-2 sm:space-y-0 sm:space-x-2 mt-2 mb-2",children:[(0,C.jsx)("input",{type:"date",value:s,onChange:e=>l(e.target.value),className:"p-1 border rounded"}),(0,C.jsx)("input",{type:"date",value:i,onChange:e=>c(e.target.value),className:"p-1 border rounded"}),(0,C.jsx)("button",{onClick:()=>{"ontime"===p?j(s,i,5):w(s,i,5)},className:"px-3 py-1 bg-blue-500 text-white rounded text-sm",disabled:x,children:"Apply"})]}),(0,C.jsx)("div",{className:"space-y-3 overflow-y-auto pr-2 flex-1",children:x?(0,C.jsx)("div",{className:"text-center py-6",children:"Loading\u2026"}):g?(0,C.jsxs)("div",{className:"text-red-600 text-center py-4",children:["Error: ",String(g)]}):0===d.length?(0,C.jsx)("div",{className:"text-gray-500 text-center py-6",children:"No data for selected range."}):(0,C.jsx)(v.N,{children:d.map((t,a)=>(0,C.jsxs)(b.P.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.2,delay:.03*a},className:"flex items-center justify-between rounded-lg p-2 border ".concat("dark"===e?"bg-gray-700 border-gray-600":"bg-white border-gray-200"),children:[(0,C.jsxs)("div",{className:"flex items-center",children:[(0,C.jsx)(b.P.img,{src:"https://ui-avatars.com/api/?name=".concat(encodeURIComponent(t.id),"&background=DDD&color=333"),alt:t.id,className:"w-10 h-10 rounded-full mr-3 object-cover"}),(0,C.jsxs)("div",{children:[(0,C.jsx)("p",{className:"font-semibold ".concat("dark"===e?"text-white":"text-gray-800"),children:t.id}),(0,C.jsx)("p",{className:"text-sm ".concat("dark"===e?"text-gray-300":"text-gray-600"),children:"ontime"===p?"On-time count":"Overtime: ".concat(t.durationReadable||t.raw)})]})]}),(0,C.jsx)("div",{className:"flex items-center space-x-2",children:(0,C.jsx)("div",{className:"px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800",children:"ontime"===p?t.count:t.durationReadable||"N/A"})})]},t.id))})})]})},L=()=>{const{theme:e}=(0,n.useContext)(r.ob),t=(new Date).toISOString().slice(0,10),a=new Date(Date.now()-5184e5).toISOString().slice(0,10),[s,l]=(0,n.useState)(a),[o,i]=(0,n.useState)(t),[d,m]=(0,n.useState)([]),[x,g]=(0,n.useState)(!1),[v,j]=(0,n.useState)(null),w="dark"===e?"#FFFFFF":"#000000",k=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o;g(!0),j(null);try{var a;const s="https://hrms.anasolconsultancyservices.com/api/attendance/numberOfOnTime",n=await N.A.get(s,{params:{stDate:e,enDate:t}}),r=null!==(a=null===n||void 0===n?void 0:n.data)&&void 0!==a?a:{};let l=[];r&&"object"===typeof r&&!Array.isArray(r)?l=Object.entries(r).map(e=>{let[t,a]=e;const s=new Date(t);return{date:t,label:isNaN(s.getTime())?t:s.toLocaleString("en-US",{day:"2-digit",month:"short"}),employees:Number(a)||0}}):Array.isArray(r)&&(l=r.map(e=>{var t,a,s;return{date:e.date||e.Date||"",label:e.date||e.Date||"",employees:Number(null!==(t=null!==(a=null!==(s=e.count)&&void 0!==s?s:e.NoofEmployee)&&void 0!==a?a:e.noOfEmployee)&&void 0!==t?t:e.value)||0}})),l.sort((e,t)=>new Date(e.date)-new Date(t.date)),m(l)}catch(c){var n,r,l,i;console.error("Failed to fetch on-time counts:",null!==(n=null===c||void 0===c?void 0:c.response)&&void 0!==n?n:c),j(null!==(r=null!==(l=null===c||void 0===c||null===(i=c.response)||void 0===i?void 0:i.data)&&void 0!==l?l:null===c||void 0===c?void 0:c.message)&&void 0!==r?r:"Failed to load data"),m([])}finally{g(!1)}};return(0,n.useEffect)(()=>{k(s,o)},[]),(0,C.jsxs)(b.P.div,{className:" rounded-xl shadow-md p-2 w-full h-96 font-sans border border-gray-200  flex flex-col ".concat("dark"===e?"bg-gray-700 text-gray-200 ":"bg-stone-100 text-gray-800"),initial:{opacity:0,y:50},animate:{opacity:1,y:.5,scale:1},transition:{duration:.5,delay:.2},children:[(0,C.jsx)("div",{className:"mb-1",children:(0,C.jsx)("h2",{className:"text-xl font-semibold",children:"On-Time Employees"})}),(0,C.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center space-y-2 sm:space-y-0 sm:space-x-2 mt-2 mb-2",children:[(0,C.jsx)("input",{type:"date",value:s,onChange:e=>l(e.target.value),className:"p-1 border rounded"}),(0,C.jsx)("input",{type:"date",value:o,onChange:e=>i(e.target.value),className:"p-1 border rounded"}),(0,C.jsx)("button",{onClick:()=>k(s,o),className:"px-3 py-1 bg-blue-500 text-white rounded text-sm",disabled:x,children:"Apply"})]}),(0,C.jsx)("div",{className:"flex-1",children:x?(0,C.jsx)("div",{className:"flex-1 flex items-center justify-center",children:"Loading\u2026"}):v?(0,C.jsxs)("div",{className:"flex-1 flex items-center justify-center text-red-600",children:["Error: ",String(v)]}):0===d.length?(0,C.jsx)("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:"No data for selected range."}):(0,C.jsx)(c.u,{width:"100%",height:"100%",children:(0,C.jsxs)(h.E,{data:d.map(e=>({name:e.label,employees:e.employees})),margin:{top:20,right:20,left:20,bottom:5},children:[(0,C.jsx)(p.W,{dataKey:"name",stroke:w,tick:{fill:w}}),(0,C.jsx)(y.h,{label:{value:"No. of Employees",angle:-90,position:"insideLeft"},stroke:w,tick:{fill:w},hide:!0}),(0,C.jsx)(u.m,{contentStyle:{backgroundColor:"dark"===e?"#63676cff":"#fff",border:e?"1px solid #4B5563":"1px solid #ccc"}}),(0,C.jsx)(f.y,{dataKey:"employees",fill:"#ADD8E6",barSize:40})]})})})]})},_=()=>{const{theme:e}=(0,n.useContext)(r.ob),t=(new Date).toISOString().slice(0,10),a=new Date(Date.now()-5184e5).toISOString().slice(0,10),[s,l]=(0,n.useState)(a),[o,i]=(0,n.useState)(t),[d,m]=(0,n.useState)([]),[x,g]=(0,n.useState)(!1),[v,j]=(0,n.useState)(null),w="dark"===e?"#FFFFFF":"#000000",k=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o;g(!0),j(null);try{var a;const s="https://hrms.anasolconsultancyservices.com/api/attendance/numberOfOvertime",n=await N.A.get(s,{params:{stDate:e,enDate:t}}),r=null!==(a=null===n||void 0===n?void 0:n.data)&&void 0!==a?a:{};let l=[];r&&"object"===typeof r&&!Array.isArray(r)?l=Object.entries(r).map(e=>{let[t,a]=e;const s=new Date(t);return{date:t,label:isNaN(s.getTime())?t:s.toLocaleString("en-US",{day:"2-digit",month:"short"}),employees:Number(a)||0}}):Array.isArray(r)&&(l=r.map(e=>{var t,a,s;return{date:e.date||e.Date||"",label:e.date||e.Date||"",employees:Number(null!==(t=null!==(a=null!==(s=e.count)&&void 0!==s?s:e.NoofEmployee)&&void 0!==a?a:e.noOfEmployee)&&void 0!==t?t:e.value)||0}})),l.sort((e,t)=>new Date(e.date)-new Date(t.date)),m(l)}catch(c){var n,r,l,i;console.error("Failed to fetch overtime counts:",null!==(n=null===c||void 0===c?void 0:c.response)&&void 0!==n?n:c),j(null!==(r=null!==(l=null===c||void 0===c||null===(i=c.response)||void 0===i?void 0:i.data)&&void 0!==l?l:null===c||void 0===c?void 0:c.message)&&void 0!==r?r:"Failed to load data"),m([])}finally{g(!1)}};return(0,n.useEffect)(()=>{k(s,o)},[]),(0,C.jsxs)(b.P.div,{className:" rounded-xl shadow-md p-2 w-full h-96 font-sans border border-gray-200  flex flex-col ".concat("dark"===e?"bg-gray-700 text-gray-200 ":"bg-stone-100 text-gray-800"),initial:{opacity:0,y:50},animate:{opacity:1,y:.5,scale:1},transition:{duration:.5,delay:.2},children:[(0,C.jsx)("div",{className:"mb-1",children:(0,C.jsx)("h2",{className:"text-xl font-semibold",children:"OverTime (No. of Employees)"})}),(0,C.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center space-y-2 sm:space-y-0 sm:space-x-2 mt-2",children:[(0,C.jsx)("input",{type:"date",value:s,onChange:e=>l(e.target.value),className:"p-1 border rounded"}),(0,C.jsx)("input",{type:"date",value:o,onChange:e=>i(e.target.value),className:"p-1 border rounded"}),(0,C.jsx)("button",{onClick:()=>k(s,o),className:"px-3 py-1 bg-blue-500 text-white rounded text-sm",disabled:x,children:"Apply"})]}),(0,C.jsx)("div",{className:"flex-1",children:x?(0,C.jsx)("div",{className:"flex-1 flex items-center justify-center",children:"Loading\u2026"}):v?(0,C.jsxs)("div",{className:"flex-1 flex items-center justify-center text-red-600",children:["Error: ",String(v)]}):0===d.length?(0,C.jsx)("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:"No data for selected range."}):(0,C.jsx)(c.u,{width:"100%",height:"100%",children:(0,C.jsxs)(h.E,{data:d.map(e=>({name:e.label,employees:e.employees})),margin:{top:20,right:20,left:20,bottom:5},children:[(0,C.jsx)(p.W,{dataKey:"name",stroke:w,tick:{fill:w}}),(0,C.jsx)(y.h,{label:{value:"No. of Employees",angle:-90,position:"insideLeft"},stroke:w,tick:{fill:w},hide:!0}),(0,C.jsx)(u.m,{contentStyle:{backgroundColor:"dark"===e?"#63676cff":"#fff",border:e?"1px solid #4B5563":"1px solid #ccc"}}),(0,C.jsx)(f.y,{dataKey:"employees",fill:"#B19CD9",barSize:40})]})})})]})},F=e=>{if(!e)return 0;const t=(""+e).match(/PT(?:(\d+)H)?(?:(\d+)M)?/);if(t){return 60*(t[1]?parseInt(t[1],10):0)+(t[2]?parseInt(t[2],10):0)}if(!isNaN(Number(e)))return Math.round(60*Number(e));const a=(""+e).match(/^(\d{1,2}):(\d{2})$/);return a?60*parseInt(a[1],10)+parseInt(a[2],10):0},B=e=>{const t=Math.floor(e/60),a=e%60;return"".concat(String(t).padStart(2,"0"),":").concat(String(a).padStart(2,"0"))},$=330,R=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e)return"N/A";const a=String(e).trim();if("N/A"===a)return"N/A";try{let e;if(/\d{4}-\d{2}-\d{2}T/.test(a)||a.includes("Z"))e=new Date(a);else if(/^\d{4}-\d{2}-\d{2}$/.test(a)&&null===t)e=new Date(a);else if(/^\d{2}:\d{2}(:\d{2})?$/.test(a)){const s=t||(new Date).toISOString().slice(0,10);e=new Date("".concat(s,"T").concat(a).concat(a.includes("Z")?"":"Z"))}else e=new Date(a);if(isNaN(e.getTime()))return a;return new Date(e.getTime()+198e5).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit",hour12:!0})}catch(s){return a}},z=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e)return null;const a=String(e).trim();try{let e;if(/\d{4}-\d{2}-\d{2}T/.test(a)||a.includes("Z"))e=new Date(a);else if(/^\d{4}-\d{2}-\d{2}$/.test(a)&&null===t)e=new Date(a);else if(/^\d{2}:\d{2}(:\d{2})?$/.test(a)){const s=t||(new Date).toISOString().slice(0,10);e=new Date("".concat(s,"T").concat(a).concat(a.includes("Z")?"":"Z"))}else e=new Date(a);return isNaN(e.getTime())?null:new Date(e.getTime()+198e5)}catch(s){return null}},W=e=>{let{onBack:t}=e;const[a,l]=(0,n.useState)("Recantly Added"),[o,i]=(0,n.useState)(""),[c,d]=(0,n.useState)(""),{theme:m,userData:x}=(0,n.useContext)(r.ob),[u,g]=(0,n.useState)([]),[h,p]=(0,n.useState)(!1),[y,f]=(0,n.useState)(null),[b,v]=(0,n.useState)(1),[j,w]=(0,n.useState)(12);(0,n.useEffect)(()=>{let e=!1;return(async()=>{p(!0),f(null);try{var t,a,n;const r={date:c||(new Date).toISOString().slice(0,10)},l=await N.A.post("https://hrms.anasolconsultancyservices.com/api/attendance/graphql",{query:"\n  query GetAllEmployeeDetailsOnDates($date: Date!) {\n    getAllEmployeeDetailsOnDates(date: $date) {\n      date\n      event\n      employeeId\n      isPresent\n      login\n      logout\n      effectiveHours\n      grossHours\n      holiday\n      mode\n    }\n  }\n",variables:r},{headers:{"Content-Type":"application/json"}});if(e)return;if(null!==l&&void 0!==l&&null!==(t=l.data)&&void 0!==t&&t.errors&&l.data.errors.length)throw new Error(l.data.errors.map(e=>e.message).join("; "));const o=((null===l||void 0===l||null===(a=l.data)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.getAllEmployeeDetailsOnDates)||[]).map(e=>{const t=/^\d{4}-\d{2}-\d{2}$/.test(e.date)?e.date:(()=>{const t=(e.date||"").split("-");return 3===t.length?"".concat(t[2],"-").concat(t[1],"-").concat(t[0]):(new Date).toISOString().slice(0,10)})(),a=z(e.login,t),n=z(e.logout,t);let r=0;r=a&&n&&!isNaN(a.getTime())&&!isNaN(n.getTime())?Math.max(0,Math.floor((n-a)/6e4)):F(e.effectiveHours||"")||0,r=Math.max(0,r+$);const l=F(e.effectiveHours||""),o=l?Math.max(0,l+$):0,i=F(e.grossHours||""),c=i?Math.max(0,i+$):0;return(0,s.A)((0,s.A)({},e),{},{date:e.date,loginDisplay:a&&!isNaN(a.getTime())?a.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit",hour12:!0}):R(e.login,t),logoutDisplay:n&&!isNaN(n.getTime())?n.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit",hour12:!0}):R(e.logout,t),effectiveHoursDisplay:o>0?B(o):"N/A",grossHoursDisplay:c>0?B(c):"N/A",totalDurationMinutes:r,totalDurationHHMM:r>0?B(r):"N/A",attended:(()=>{const t=e.isPresent;if(null==t)return!1;const a=String(t).toLowerCase();return["present","p","yes","true","1"].includes(a)})()})});g(o),v(1)}catch(r){console.error(r),f(r.message||"Failed to load attendance"),g([])}finally{e||p(!1)}})(),()=>{e=!0}},[c,x]);const k=(0,n.useMemo)(()=>{let e=[...u];switch(a){case"Ascending":e.sort((e,t)=>(e.employeeId||"").localeCompare(t.employeeId||""));break;case"Descending":e.sort((e,t)=>(t.employeeId||"").localeCompare(e.employeeId||""));break;case"Last Month":case"This Month":break;default:e.sort((e,t)=>new Date(t.date)-new Date(e.date))}return e},[u,a]),D=Math.max(1,Math.ceil(k.length/j)),S=k.slice((b-1)*j,b*j),A=(0,n.useMemo)(()=>new Set(u.map(e=>e.employeeId)).size,[u]);return(0,C.jsxs)("div",{className:"p-4 sm:p-8 ".concat("dark"===m?"bg-gray-800":"bg-gray-50"," min-h-screen"),children:[(0,C.jsxs)("h1",{className:"text-3xl font-extrabold text-indigo-800 mb-6 border-b pb-2",children:[(0,C.jsx)("span",{role:"img","aria-label":"clock",children:"\u23f0"})," Employee Attendance Tracker"]}),(0,C.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 p-4 ".concat("dark"===m?"bg-gray-700":"bg-white"," rounded-xl shadow-lg border-l-4 border-indigo-500"),children:[(0,C.jsxs)("div",{className:"text-lg font-semibold ".concat("dark"===m?"text-gray-100":"text-gray-700"," mb-4 sm:mb-0"),children:["Total Employees: ",(0,C.jsx)("span",{className:"text-indigo-600 text-2xl",children:A})]}),(0,C.jsxs)("div",{className:"flex flex-wrap gap-4 items-center",children:[(0,C.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,C.jsx)("input",{type:"date",value:c,onChange:e=>{d(e.target.value)},className:"p-2 border border-gray-300 rounded-lg"}),(0,C.jsx)("button",{onClick:()=>d(""),className:"px-3 py-2 bg-gray-200 rounded",children:"Clear"})]}),(0,C.jsxs)("select",{value:o,onChange:e=>i(e.target.value),className:"p-2 border border-gray-300 rounded-lg text-sm ".concat("dark"===m?"bg-gray-700 text-gray-50":"bg-white"),children:[(0,C.jsx)("option",{value:"",children:"Select Month: All"}),["January","February","March","April","May","June","July","August","September","October","November","December"].map(e=>(0,C.jsx)("option",{value:e,children:e},e))]}),(0,C.jsxs)("select",{value:a,onChange:e=>l(e.target.value),className:"p-2 border border-gray-300 rounded-lg text-sm ".concat("dark"===m?"bg-gray-700 text-gray-50":"bg-white"),children:[(0,C.jsx)("option",{value:"Recantly Added",children:"Sorted By: Recently Added"}),(0,C.jsx)("option",{value:"Ascending",children:"EmployeeId: Ascending"}),(0,C.jsx)("option",{value:"Descending",children:"EmployeeId: Descending"}),(0,C.jsx)("option",{value:"This Month",children:"Date: This Month"}),(0,C.jsx)("option",{value:"Last Month",children:"Date: Last Month"}),(0,C.jsx)("option",{value:"Last 7 days",children:"Date: Last 7 days"})]}),(0,C.jsxs)("select",{value:j,onChange:e=>{w(Number(e.target.value)),v(1)},className:"p-2 border border-gray-300 rounded-lg text-sm bg-white",children:[(0,C.jsx)("option",{value:6,children:"6 / page"}),(0,C.jsx)("option",{value:12,children:"12 / page"}),(0,C.jsx)("option",{value:24,children:"24 / page"})]})]})]}),(0,C.jsx)("div",{className:"overflow-x-auto shadow-2xl rounded-xl",children:(0,C.jsxs)("table",{className:"min-w-full bg-white border-collapse",children:[(0,C.jsx)("thead",{className:"bg-indigo-600 text-white sticky top-0",children:(0,C.jsxs)("tr",{children:[(0,C.jsx)("th",{className:"py-3 px-4 text-left text-sm font-semibold uppercase tracking-wider border-b border-indigo-500 hidden sm:table-cell",children:"EmployeeId"}),(0,C.jsx)("th",{className:"py-3 px-4 text-left text-sm font-semibold uppercase tracking-wider border-b border-indigo-500 hidden sm:table-cell",children:"Date"}),(0,C.jsx)("th",{className:"py-3 px-4 text-left text-sm font-semibold uppercase tracking-wider border-indigo-500 hidden sm:table-cell",children:"Mode"}),(0,C.jsx)("th",{className:"py-3 px-4 text-left text-sm font-semibold uppercase tracking-wider border-indigo-500 hidden sm:table-cell",children:"Login"}),(0,C.jsx)("th",{className:"py-3 px-4 text-left text-sm font-semibold uppercase tracking-wider border-indigo-500 hidden sm:table-cell",children:"Logout"}),(0,C.jsx)("th",{className:"py-3 px-4 text-left text-sm font-semibold uppercase tracking-wider border-indigo-500 hidden sm:table-cell",children:"Total Duration"}),(0,C.jsx)("th",{className:"py-3 px-4 text-left text-sm font-semibold uppercase tracking-wider border-indigo-500 hidden sm:table-cell",children:"Gross Hours"}),(0,C.jsx)("th",{className:"py-3 px-4 text-left text-sm font-semibold uppercase tracking-wider border-indigo-500 hidden sm:table-cell",children:"Effective Hours"}),(0,C.jsx)("th",{className:"py-3 px-4 text-left text-sm font-semibold uppercase tracking-wider border-indigo-500 hidden sm:table-cell",children:"Status"}),(0,C.jsx)("th",{className:"py-3 px-4 text-left text-sm font-semibold uppercase tracking-wider border-indigo-500 sm:hidden",children:"Employee Details"})]})}),(0,C.jsx)("tbody",{children:h?(0,C.jsx)("tr",{children:(0,C.jsx)("td",{colSpan:10,className:"text-center py-8",children:"Loading\u2026"})}):y?(0,C.jsx)("tr",{children:(0,C.jsx)("td",{colSpan:10,className:"text-center py-8 text-red-600",children:y})}):0===S.length?(0,C.jsx)("tr",{children:(0,C.jsx)("td",{colSpan:10,className:"text-center py-6 text-gray-500",children:"No attendance records found for the selected filters."})}):S.map(e=>{const t=e.totalDurationHHMM||"N/A",a=e.effectiveHoursDisplay||"N/A",s=e.grossHoursDisplay||"N/A",n=e.attended?"bg-green-100 text-green-800":"bg-red-100 text-red-800";return(0,C.jsxs)("tr",{className:"border-b transition-colors duration-200 ".concat("dark"===m?"bg-gray-700 hover:bg-gray-600":"hover:bg-gray-200"),children:[(0,C.jsx)("td",{className:"py-4 px-4 ".concat("dark"===m?" text-gray-50":"text-gray-700"," font-medium hidden sm:table-cell"),children:e.employeeId}),(0,C.jsx)("td",{className:"py-4 px-4 text-sm ".concat("dark"===m?" text-gray-50":"text-gray-700"," hidden sm:table-cell"),children:e.date}),(0,C.jsx)("td",{className:"py-4 px-4 text-sm text-gray-600 hidden sm:table-cell",children:(0,C.jsx)("span",{className:"px-3 py-1 text-xs font-semibold rounded-full ".concat("Office"===e.mode?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"),children:e.mode})}),(0,C.jsx)("td",{className:"py-4 px-4 text-sm ".concat("dark"===m?" text-gray-50":"text-gray-700"," hidden sm:table-cell"),children:e.loginDisplay}),(0,C.jsx)("td",{className:"py-4 px-4 text-sm ".concat("dark"===m?" text-gray-50":"text-gray-700"," hidden sm:table-cell"),children:e.logoutDisplay}),(0,C.jsx)("td",{className:"py-4 px-4 text-sm font-semibold ".concat("dark"===m?" text-indigo-500":"text-indigo-700"," hidden sm:table-cell"),children:t}),(0,C.jsx)("td",{className:"py-4 px-4 text-sm ".concat("dark"===m?" text-purple-300":"text-purple-700"," hidden sm:table-cell"),children:s}),(0,C.jsx)("td",{className:"py-4 px-4 text-sm font-bold ".concat("dark"===m?" text-green-300":"text-green-700"," hidden sm:table-cell"),children:a}),(0,C.jsx)("td",{className:"py-4 px-4 text-sm hidden sm:table-cell",children:(0,C.jsx)("span",{className:"px-3 py-1 text-xs font-semibold rounded-full ".concat(n),children:e.attended?"Present":"Absent"})}),(0,C.jsx)("td",{className:"py-4 px-4 sm:hidden",children:(0,C.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,C.jsx)("span",{className:"text-base font-bold ".concat("dark"===m?" text-indigo-300":"text-indigo-700"),children:e.employeeId}),(0,C.jsxs)("span",{className:"text-sm ".concat("dark"===m?" text-gray-100":"text-gray-600"),children:["Date: ",e.date," (",e.mode,")"]}),(0,C.jsxs)("span",{className:"text-sm ".concat("dark"===m?" text-gray-100":"text-gray-600"),children:[e.loginDisplay," - ",e.logoutDisplay]}),(0,C.jsx)("div",{className:"text-xs font-medium mt-1",children:(0,C.jsxs)("span",{className:"".concat("dark"===m?" text-green-400":"text-green-700"),children:["Effective: ",a]})})]})})]},"".concat(e.employeeId,"-").concat(e.date))})})]})}),(0,C.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,C.jsxs)("div",{className:"text-sm text-gray-600",children:["Showing ",S.length," of ",k.length," records"]}),(0,C.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,C.jsx)("button",{onClick:()=>v(e=>Math.max(1,e-1)),disabled:b<=1,className:"px-3 py-1 bg-gray-200 rounded disabled:opacity-50",children:"Prev"}),(0,C.jsxs)("span",{className:"px-3 py-1",children:["Page ",b," / ",D]}),(0,C.jsx)("button",{onClick:()=>v(e=>Math.min(D,e+1)),disabled:b>=D,className:"px-3 py-1 bg-gray-200 rounded disabled:opacity-50",children:"Next"})]})]}),(0,C.jsxs)("p",{className:"text-sm ".concat("dark"===m?" text-gray-50":"text-gray-700"," mt-6 text-center"),children:["Data is displayed for ",(0,C.jsx)("strong",{children:k.length})," attendance record(s) based on current filters."]})]})};const U=function(e){let{onBack:t}=e;return(0,C.jsxs)("div",{className:"p-2 sm:p-4 min-h-screen font-sans",children:[(0,C.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,C.jsx)("button",{onClick:t,className:"mb-4 px-4 py-2 bg-indigo-100 text-blue-600 rounded-lg font-semibold shadow hover:bg-indigo-200 transition",children:"\u2190 Back to Dashboard"})}),(0,C.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-1 gap-6 mb-2",children:(0,C.jsx)(M,{})}),(0,C.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3  gap-6 mb-8",children:[(0,C.jsx)(O,{}),(0,C.jsx)(L,{}),(0,C.jsx)(_,{})]}),(0,C.jsx)("div",{className:"w-full",children:(0,C.jsx)(W,{})})]})};var Y=a(2397),q=a(5394),Z=a(1024),J=a(8877),K=a(8646),G=a(614),Q=a(5088),X=a(2054),V=a(7719),ee=a(6533),te=a(9463),ae=a(8326);const se=["#4F46E5","#F97316"],ne="#4F46E5",re="#F97316",le=e=>String(e).padStart(2,"0"),oe=e=>{if(!e||"string"!==typeof e)return null;if(/[AP]M$/i.test(e.trim())){const t=new Date("2000-01-01 ".concat(e));return isNaN(t)?null:"".concat(le(t.getHours()),":").concat(le(t.getMinutes()))}const t=e.match(/^(\d{1,2}):(\d{2})(?::\d{2})?$/);if(t)return"".concat(le(Number(t[1])),":").concat(le(Number(t[2])));const a=new Date(e);return isNaN(a)?null:"".concat(le(a.getHours()),":").concat(le(a.getMinutes()))},ie=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:330;const a=oe(e);if(!a)return e;const[s,n]=a.split(":").map(Number),r=(60*s+n+t+1440)%1440,l=Math.floor(r/60),o=r%60;return"".concat(le(l),":").concat(le(o))},ce=e=>{if(!e||"string"!==typeof e)return e;const t=e.split(" - ").map(e=>e.trim());if(2!==t.length)return e;const a=ie(t[0]),s=ie(t[1]);return"".concat(a," - ").concat(s)},de=e=>{if(!e)return 0;const t=String(e).trim(),a=t.match(/PT(?:(\d+)H)?(?:(\d+)M)?/);if(a){return 60*(a[1]?parseInt(a[1],10):0)+(a[2]?parseInt(a[2],10):0)}if(!isNaN(Number(t)))return Math.round(60*Number(t));const s=t.match(/^(\d{1,2}):(\d{2})$/);return s?60*parseInt(s[1],10)+parseInt(s[2],10):0},me=e=>{const t=Math.floor(e/60),a=e%60;return"".concat(String(t).padStart(2,"0"),":").concat(String(a).padStart(2,"0"))},xe=e=>{const t=de(e||"");return t>0?me(t):"N/A"},ue=["January","February","March","April","May","June","July","August","September","October","November","December"],ge=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],he=e=>{if(!e)return"";const t=e.split("-");return 3===t.length?"".concat(t[2],"-").concat(t[1],"-").concat(t[0]):e},pe=e=>{if(!e)return"";const t=e.split("-");return 3===t.length?"".concat(t[2],"-").concat(t[1],"-").concat(t[0]):e},ye={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_HRMS_GRAPHQL_URL||"https://hrms.anasolconsultancyservices.com/api/attendance/graphql",fe=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=ye;try{var s,n,r;const l=Y.HN&&"function"===typeof Y.HN.post?Y.HN:N.A,o=(()=>{try{return localStorage.getItem("accessToken")}catch(e){return null}})(),i={"Content-Type":"application/json"};o&&(i.Authorization="Bearer ".concat(o));const c=await l.post(a,{query:e,variables:t},{headers:i});if(null!==c&&void 0!==c&&null!==(s=c.data)&&void 0!==s&&s.errors&&c.data.errors.length){const e=c.data.errors.map(e=>e.message).join("; "),t=new Error(e);throw t.graphql=c.data.errors,console.error("GraphQL response errors:",c.data.errors),t}return null!==(n=null===c||void 0===c||null===(r=c.data)||void 0===r?void 0:r.data)&&void 0!==n?n:null}catch(o){var l;throw console.error("Error executing GraphQL operation:",(null===o||void 0===o?void 0:o.message)||o,{url:a,query:"string"===typeof e?e.replace(/\s+/g," ").slice(0,200)+"...":e,variables:t,responseData:null===o||void 0===o||null===(l=o.response)||void 0===l?void 0:l.data}),o}},be=e=>{var t;let{dayData:a,eventsOnThisDay:l=[],onClose:o}=e;const{userData:i,theme:c}=(0,n.useContext)(r.ob),d=null===i||void 0===i?void 0:i.employeeId,[m,x]=(0,n.useState)(null),[u,g]=(0,n.useState)(l),[h,p]=(0,n.useState)(!0),[y,f]=(0,n.useState)(null),b=(null===a||void 0===a?void 0:a.dateString)||"",v=e=>{try{const t=de(e||"");if(!t)return"N/A";return me(t)}catch(t){return"N/A"}},j=function(e){if(!e||"N/A"===e)return"N/A";const t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)||(new Date).toISOString().slice(0,10);let a=new Date("".concat(t,"T").concat(e));if(isNaN(a.getTime()))try{const s=e.split(":");let n=parseInt(s[0],10)||0,r=parseInt(s[1],10)||0;a=new Date(t),a.setHours(n,r,0,0)}catch(s){return e}return a.setMinutes(a.getMinutes()+330),a.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit",hour12:!0})};if((0,n.useEffect)(()=>{let e=!0;if(!b||!d){var t;const e=null!==(t=null===a||void 0===a?void 0:a.attendance)&&void 0!==t?t:null;if(e){var n,r,o,i,c,m;const t=he(b)||void 0,a=j(null!==(n=null!==(r=e.login)&&void 0!==r?r:e.loginTime)&&void 0!==n?n:"N/A",t),l=j(null!==(o=null!==(i=e.logout)&&void 0!==i?i:e.logoutTime)&&void 0!==o?o:"N/A",t),d=v(null!==(c=null!==(m=e.effectiveHour)&&void 0!==m?m:e.effectiveHours)&&void 0!==c?c:e.effectiveHour);x((0,s.A)((0,s.A)({},e),{},{login:a,logout:l,effectiveHour:d}))}else x(null);return g(l||[]),void p(!1)}return(async()=>{p(!0);try{const p=he(b),w={employeeId:d,startDate:p,endDate:p},k=await fe("\n     query getDetailsBetweenDates($employeeId: String!, $startDate: Date!, $endDate: Date!) {\n        getDetailsBetweenDates(employeeId: $employeeId, startDate: $startDate, endDate: $endDate) {\n          date\n          event\n          description\n          employeeId\n          isPresent\n          login\n          logout\n          effectiveHours\n          grossHours\n          holiday\n          mode\n        }\n      }\n    ",w);if(!e)return;const D=(null===k||void 0===k?void 0:k.getDetailsBetweenDates)||[],S=D.find(e=>e.date===b||e.date===p)||null;if(S){var t,n,r,o,i,c;const e=j(null!==(t=S.login)&&void 0!==t?t:"N/A",p),a=j(null!==(n=S.logout)&&void 0!==n?n:"N/A",p),s=v(null!==(r=S.effectiveHours)&&void 0!==r?r:S.effectiveHour);x({employeeId:S.employeeId||d,date:S.date||b,effectiveHour:s,isPresent:null!==(o=S.isPresent)&&void 0!==o?o:"N/A",login:e,logout:a,holiday:null!==(i=S.holiday)&&void 0!==i&&i,mode:null!==(c=S.mode)&&void 0!==c?c:null})}else{var m,u,h,y,N;const e=null!==(m=null===a||void 0===a?void 0:a.attendance)&&void 0!==m?m:{isPresent:"N/A",login:"N/A",logout:"N/A",date:b},t=he(e.date||b);x((0,s.A)((0,s.A)({},e),{},{login:j(null!==(u=e.login)&&void 0!==u?u:"N/A",t),logout:j(null!==(h=e.logout)&&void 0!==h?h:"N/A",t),effectiveHour:v(null!==(y=e.effectiveHour)&&void 0!==y?y:e.effectiveHours),holiday:null!==(N=e.holiday)&&void 0!==N&&N}))}const A=D.filter(e=>e.event||e.description||"undefined"!==typeof e.holiday).map(e=>({event:e.event||"Event",description:e.description||"",startDate:e.startDate||e.date,endDate:e.endDate||e.date,holiday:Boolean(e.holiday)})),C=l||[],T=A.some(e=>e.holiday),I=C.some(e=>e&&(!0===e.holiday||"true"===String(e.holiday).toLowerCase()));T||I?(g(A.length?A:C),x(e=>(0,s.A)((0,s.A)({},e||{}),{},{holiday:!0,isPresent:e&&e.isPresent?e.isPresent:"Holiday"}))):g(A.length?A:C),f(null)}catch(A){var w;console.error("DayDetailsModal fetch failed:",A),f(A.message||"Failed to load details");const e=null!==(w=null===a||void 0===a?void 0:a.attendance)&&void 0!==w?w:null;if(e){var k,D,S;const t=he(e.date||b);x((0,s.A)((0,s.A)({},e),{},{login:j(null!==(k=e.login)&&void 0!==k?k:"N/A",t),logout:j(null!==(D=e.logout)&&void 0!==D?D:"N/A",t),effectiveHour:v(null!==(S=e.effectiveHour)&&void 0!==S?S:e.effectiveHours)}))}else x(null);g(l||[])}finally{e&&p(!1)}})(),()=>{e=!1}},[b,null===i||void 0===i?void 0:i.employeeId]),!a||"blank"===a.type)return null;if(h)return(0,C.jsx)("div",{className:"absolute inset-0 flex justify-center items-center z-50 p-4 bg-white/50 bg-opacity-40 backdrop-blur-sm",children:(0,C.jsx)("div",{className:"".concat("dark"===c?"bg-gray-800 text-white":"bg-white text-indigo-700"," px-6 py-4 rounded-lg shadow-lg font-semibold"),children:"Loading Day Details\u2026"})});const N=m||(null!==(t=null===a||void 0===a?void 0:a.attendance)&&void 0!==t?t:{isPresent:"N/A",login:"N/A",logout:"N/A",date:b});return(0,C.jsxs)("div",{role:"dialog","aria-modal":"true","aria-label":"Details for ".concat((null===N||void 0===N?void 0:N.date)||b),className:"absolute inset-0 flex justify-center items-center z-50 p-4 bg-white/50 bg-opacity-40 backdrop-blur-sm",children:[(0,C.jsx)("div",{className:"absolute inset-0 bg-black/30 backdrop-blur-sm",onClick:o}),(0,C.jsxs)("div",{className:"relative w-full max-w-4xl mx-auto rounded-xl shadow-2xl overflow-hidden grid grid-cols-1 md:grid-cols-2 gap-0 ".concat("dark"===c?"bg-gray-900 text-white":"bg-white text-gray-900"),children:[(0,C.jsxs)("div",{className:"md:col-span-2 flex items-center justify-between px-5 py-4 border-b",children:[(0,C.jsxs)("div",{className:"flex items-center gap-3",children:[(0,C.jsx)(K.A,{className:"w-6 h-6 text-indigo-600"}),(0,C.jsxs)("div",{children:[(0,C.jsxs)("h3",{className:"text-lg font-bold text-indigo-700",children:["Details \u2014 ",ue?ue[(new Date).getMonth()]:""," ",(0,C.jsxs)("span",{className:"text-base font-medium text-gray-600",children:[" ",(null===N||void 0===N?void 0:N.date)||b]})]}),(0,C.jsxs)("p",{className:"text-xs text-gray-500 ".concat("dark"===c?"text-gray-400":""),children:[" Employee: ",(0,C.jsx)("span",{className:"font-medium text-gray-700",children:(null===N||void 0===N?void 0:N.employeeId)||d||"N/A"})]})]})]}),(0,C.jsx)("button",{onClick:o,"aria-label":"Close details",className:"p-2 rounded-full hover:bg-gray-100",children:(0,C.jsx)(G.A,{className:"w-5 h-5 text-gray-600"})})]}),(0,C.jsxs)("section",{className:"p-5 border-r md:border-r md:border-gray-100 ",children:[(0,C.jsx)("h4",{className:"text-sm font-semibold text-indigo-600 mb-3",children:"Attendance"}),(0,C.jsxs)("div",{className:"space-y-3 text-sm text-gray-700",children:[(0,C.jsxs)("div",{className:"flex justify-between items-center",children:[(0,C.jsx)("span",{className:"".concat("dark"===c?"text-gray-300":"text-gray-500"),children:"Status"}),(()=>{const e=null===N||void 0===N?void 0:N.isPresent,t=!0===(null===N||void 0===N?void 0:N.holiday)||String(e||"").toLowerCase().includes("holiday"),a=String(e||"").trim().toLowerCase(),s=["present","p","yes","true","1"].includes(a),n=["absent","a","no","false","0"].includes(a),r=t?"bg-yellow-100 text-yellow-800":s?"bg-green-100 text-green-800":n?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800",l=t?"Holiday":s?"Present":n?"Absent":(null===N||void 0===N?void 0:N.isPresent)||"N/A";return(0,C.jsx)("span",{className:"ml-2 font-semibold px-2 py-0.5 rounded-full text-xs ".concat(r),children:l})})()]}),(0,C.jsxs)("div",{className:"flex justify-between",children:[(0,C.jsx)("span",{className:"text-gray-500 ".concat("dark"===c?"text-gray-300":""),children:"Login"}),(0,C.jsx)("span",{className:"font-medium",children:(null===N||void 0===N?void 0:N.login)||"N/A"})]}),(0,C.jsxs)("div",{className:"flex justify-between",children:[(0,C.jsx)("span",{className:"text-gray-500 ".concat("dark"===c?"text-gray-300":""),children:"Logout"}),(0,C.jsx)("span",{className:"font-medium",children:(null===N||void 0===N?void 0:N.logout)||"N/A"})]}),(0,C.jsxs)("div",{className:"flex justify-between",children:[(0,C.jsx)("span",{className:"text-gray-500 ".concat("dark"===c?"text-gray-300":""),children:"Effective Hours"}),(0,C.jsx)("span",{className:"font-medium",children:(null===N||void 0===N?void 0:N.effectiveHour)||"N/A"})]}),(0,C.jsxs)("div",{className:"flex justify-between",children:[(0,C.jsx)("span",{className:"text-gray-500 ".concat("dark"===c?"text-gray-300":""),children:"Mode"}),(0,C.jsx)("span",{className:"font-medium",children:(null===N||void 0===N?void 0:N.mode)||"-"})]}),(0,C.jsxs)("div",{className:"mt-2",children:[(0,C.jsx)("p",{className:"text-xs ".concat("dark"===c?"text-gray-300":"text-gray-500"),children:"Notes"}),y?(0,C.jsx)("p",{className:"text-xs text-red-600 mt-1",children:y}):(0,C.jsx)("p",{className:"text-xs mt-1 ".concat("dark"===c?"text-gray-300":"text-gray-500"),children:"This view shows converted IST times and any event notes for the selected day."})]})]}),(0,C.jsx)("div",{className:"mt-6",children:(0,C.jsx)("button",{onClick:o,className:"w-full inline-flex items-center justify-center gap-2 px-3 py-2 bg-indigo-600 text-white rounded-lg text-sm hover:bg-indigo-700",children:"Got it"})})]}),(0,C.jsxs)("aside",{className:"p-5 ".concat("dark"===c?"bg-gray-800":"bg-gray-50"),children:[(0,C.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,C.jsxs)("h4",{className:"text-sm font-semibold text-teal-700",children:["Events (",u.length,")"]}),(0,C.jsx)("span",{className:"text-xs ".concat("dark"===c?"text-gray-300":"text-gray-500"),children:u.length>0?"".concat(Math.min(u.length,99)):"\u2014"})]}),0===u.length?(0,C.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-center py-6",children:[(0,C.jsx)("p",{className:"text-sm ".concat("dark"===c?"text-gray-300":"text-gray-500"," italic"),children:"No events scheduled for this day."}),(0,C.jsx)("p",{className:"text-xs ".concat("text-gray-400"," mt-2"),children:"You can add events from the calendar."})]}):(0,C.jsx)("ul",{className:"space-y-3 max-h-[260px] overflow-y-auto pr-2",children:u.map((e,t)=>(0,C.jsx)("li",{className:"p-3 rounded-lg border border-gray-100 shadow-sm ".concat("dark"===c?"bg-gray-800":"bg-white"),children:(0,C.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,C.jsxs)("div",{className:"flex-1",children:[(0,C.jsxs)("div",{className:"flex items-center gap-2",children:[(0,C.jsx)("span",{className:"text-sm font-semibold ".concat("dark"===c?"text-gray-300":"text-gray-800"),children:e.event}),e.holiday&&(0,C.jsx)("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full",children:"Holiday"})]}),(0,C.jsx)("p",{className:"text-xs ".concat("dark"===c?"text-gray-400":"text-gray-500"," mt-1 truncate"),children:e.description||"No description"}),e.startDate!==e.endDate&&(0,C.jsxs)("p",{className:"text-xs ".concat("dark"===c?"text-teal-500":"text-teal-600"," mt-2"),children:["Multi-day: ",e.startDate," \u2014 ",e.endDate]})]}),(0,C.jsx)("div",{className:"flex-shrink-0 text-xs ".concat("dark"===c?"text-gray-400":"text-gray-500"," ml-3"),children:(0,C.jsx)("span",{children:e.startDate})})]})},t))})]})]})]})},ve=e=>{let{onSubmit:t,selectedDate:a,onClose:s}=e;const{userData:l,theme:o}=(0,n.useContext)(r.ob),[i,c]=(null===l||void 0===l||l.employeeId,(0,n.useState)("")),[d,m]=(0,n.useState)(""),[x,u]=(0,n.useState)(he(a.start)||""),[g,h]=(0,n.useState)(he(a.end)||""),[p,y]=(0,n.useState)(!1),[f,b]=(0,n.useState)(!1);return(0,C.jsx)("div",{className:"absolute inset-0 flex justify-center items-center z-50 p-4 bg-white/50 bg-opacity-40 backdrop-blur-sm",children:(0,C.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),b(!0);try{const e={input:{startDate:x,endDate:g,event:i,description:d,holiday:!!p}},a=await fe("\n\n    mutation AddCalendarEntries($input: CalendarInput!) {\n\n      addCalendarEntries(input: $input) {\n\n        date\n\n        description\n\n        holiday\n\n      }\n\n    }\n\n  ",e),n=((null===a||void 0===a?void 0:a.addCalendarEntries)||[]).map(e=>{var t;return{event:i,description:e.description||d,startDate:pe(e.date||x),endDate:pe(e.date||g),holiday:null!==(t=e.holiday)&&void 0!==t?t:p}});t(n.length?n[0]:{event:i,description:d,startDate:pe(x),endDate:pe(g),holiday:p}),s()}catch(l){var a,n,r;console.error("EventFormModal mutation failed:",l);const e=null!==l&&void 0!==l&&null!==(a=l.graphql)&&void 0!==a&&a.length?l.graphql.map(e=>e.message).join("; "):null,t=(null===l||void 0===l||null===(n=l.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.message)||(null===l||void 0===l?void 0:l.message);alert("Failed to save event: "+(e||t||"Unknown error"))}finally{b(!1)}},className:"p-4 rounded-lg shadow-2xl w-full max-w-md transform transition-all duration-300 scale-100 ".concat("dark"===o?"bg-gray-800":"bg-white"),children:[(0,C.jsxs)("h2",{className:"text-2xl font-bold text-indigo-700 mb-3 border-b pb-2 flex items-center",children:[(0,C.jsx)(K.A,{className:"mr-2"})," ",f?"Saving...":"Add/Edit Event"]}),(0,C.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[(0,C.jsxs)("div",{className:"mb-2",children:[(0,C.jsx)("label",{className:"block font-medium mb-2 ".concat("dark"===o?"text-gray-300":"text-gray-700"),htmlFor:"startDate",children:"Start Date"}),(0,C.jsx)("input",{id:"startDate",name:"startDate",type:"date",required:!0,value:x,onChange:e=>u(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),(0,C.jsxs)("div",{className:"mb-2",children:[(0,C.jsx)("label",{className:"block font-medium mb-2 ".concat("dark"===o?"text-gray-300":"text-gray-700"),htmlFor:"endDate",children:"End Date"}),(0,C.jsx)("input",{id:"endDate",name:"endDate",type:"date",required:!0,value:g,onChange:e=>h(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]})]}),(0,C.jsxs)("div",{className:"mb-2",children:[(0,C.jsx)("label",{className:"block font-medium mb-2 ".concat("dark"===o?"text-gray-300":"text-gray-700"),htmlFor:"eventTitle",children:"Event Title"}),(0,C.jsx)("input",{id:"eventTitle",name:"event",type:"text",placeholder:"e.g., Team Meeting",value:i,onChange:e=>c(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),(0,C.jsxs)("div",{className:"flex items-center pt-6 mb-2",children:[(0,C.jsx)("input",{id:"holiday",type:"checkbox",checked:p,onChange:e=>y(e.target.checked),className:"h-5 w-5 rounded border-gray-300 text-blue-600"}),(0,C.jsx)("label",{htmlFor:"holiday",className:"ml-2 block text-sm font-medium cursor-pointer ".concat("dark"===o?"text-gray-300":"text-gray-700"),children:"Is Holiday?"})]}),(0,C.jsxs)("div",{className:"mb-3",children:[(0,C.jsx)("label",{className:"block font-medium mb-2 ".concat("dark"===o?"text-gray-300":"text-gray-700"),htmlFor:"description",children:"Description"}),(0,C.jsx)("textarea",{id:"description",name:"description",rows:"3",placeholder:"Details about the event...",value:d,onChange:e=>m(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),(0,C.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,C.jsx)("button",{type:"button",onClick:s,className:"px-4 py-2 rounded-lg ".concat("dark"===o?"bg-gray-700 text-gray-300":"bg-gray-300 text-gray-800"),children:"Cancel"}),(0,C.jsx)("button",{type:"submit",className:"px-6 py-2 font-semibold rounded-lg ".concat(f?"bg-indigo-500":"bg-indigo-600"," text-white"),children:f?"Submitting...":"Submit"})]})]})})},je=e=>{let{currentYear:t,currentMonth:a,onClose:s}=e;const{userData:l,theme:o}=(0,n.useContext)(r.ob),i=null===l||void 0===l?void 0:l.employeeId,[c,d]=(0,n.useState)([]),[m,x]=(0,n.useState)(!0),[u,g]=(0,n.useState)(null),[h,p]=(0,n.useState)(1);(0,n.useEffect)(()=>{let e=!0;return(async()=>{x(!0);try{const s=new Date(t,a,1),n=new Date(t,a+1,0),r=s.toISOString().slice(0,10),l=n.toISOString().slice(0,10),o={employeeId:i,startDate:r,endDate:l},c=await fe(" query getDetailsBetweenDates($employeeId: String!, $startDate: Date!, $endDate: Date!) { getDetailsBetweenDates(employeeId: $employeeId, startDate: $startDate, endDate: $endDate) { date description holiday event } }",o);if(!e)return;const m=((null===c||void 0===c?void 0:c.getDetailsBetweenDates)||[]).map(e=>{var t;return{event:e.event||"Event",description:e.description||"",startDate:e.startDate||e.date,endDate:e.endDate||e.date,holiday:null!==(t=e.holiday)&&void 0!==t&&t}});d(m),g(null),p(1)}catch(s){console.error("EventListModal fetch failed:",s),g(s.message||"Failed to fetch event list"),d([])}finally{e&&x(!1)}})(),()=>{e=!1}},[t,a,null===l||void 0===l?void 0:l.employeeId]);const y=Math.max(1,Math.ceil(c.length/3)),f=3*(h-1),b=c.slice(f,f+3);return m?(0,C.jsx)("div",{className:"p-4 absolute inset-0 flex justify-center items-center z-50 bg-white/50 bg-opacity-40 backdrop-blur-sm",children:(0,C.jsxs)("div",{className:"text-center py-6",children:[(0,C.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-4 border-teal-400 border-t-transparent mx-auto mb-3"}),(0,C.jsx)("div",{className:"text-lg font-semibold text-teal-700",children:"Loading Events..."})]})}):(0,C.jsx)("div",{className:" absolute inset-0 flex justify-center items-center z-50 bg-white/50 bg-opacity-40 backdrop-blur-sm",children:(0,C.jsxs)("div",{className:"max-h-[60vh] overflow-y-auto w-full max-w-4xl mx-auto bg-white shadow-2xl rounded-xl p-2 sm:p-6 relative ".concat("dark"===o?"bg-gray-800":"bg-white"),children:[(0,C.jsxs)("div",{className:"flex justify-between items-center border-b-4 border-teal-300 pb-3 mb-4",children:[(0,C.jsxs)("h2",{className:"text-2xl font-extrabold text-teal-600 flex items-center",children:[(0,C.jsx)(K.A,{className:"mr-3 w-6 h-6"})," Events for ",ue[a]," ",t]}),(0,C.jsx)("button",{onClick:s,className:"p-1 rounded-full text-gray-500 hover:bg-gray-200 transition",children:(0,C.jsx)(G.A,{className:"w-6 h-6"})})]}),u?(0,C.jsx)("p",{className:"text-red-600 text-center py-6",children:u}):0===c.length?(0,C.jsx)("p",{className:"text-lg text-center py-10 ".concat("dark"===o?"text-gray-300":"text-gray-700"),children:"No events added for this month yet. \ud83c\udf89"}):(0,C.jsxs)("div",{className:"space-y-4",children:[b.map((e,t)=>(0,C.jsxs)("div",{className:"border border-teal-200 rounded-xl p-4 shadow-sm transition duration-200 bg-teal-50",children:[(0,C.jsxs)("p",{className:"text-lg font-bold text-teal-700 mb-1 border-b border-teal-100 pb-1",children:[(0,C.jsx)(Q.A,{className:"inline w-4 h-4 mr-2"}),"Date: ",e.startDate," ",e.startDate!==e.endDate&&"- ".concat(e.endDate)]}),(0,C.jsx)("p",{className:"text-xl font-semibold mb-2 ".concat("dark"===o?"text-gray-300":"text-gray-800"),children:e.event}),(0,C.jsx)("p",{className:"text-gray-600 italic border-l-4 border-teal-400 pl-3 ".concat("dark"===o?"text-gray-300":"text-gray-600"),children:e.description})]},"".concat(e.startDate,"-").concat(f+t))),(0,C.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,C.jsxs)("div",{className:"text-sm ".concat("dark"===o?"text-gray-300":"text-gray-600"),children:["Showing ",f+1," - ",Math.min(f+3,c.length)," of ",c.length]}),(0,C.jsxs)("div",{className:"flex items-center gap-2",children:[(0,C.jsx)("button",{onClick:()=>p(e=>Math.max(1,e-1)),disabled:h<=1,className:"px-3 py-1 rounded ".concat("dark"===o?"bg-gray-700 text-gray-300":"bg-gray-200 text-gray-800"," disabled:opacity-50"),children:"Prev"}),(0,C.jsxs)("span",{className:"text-sm",children:["Page ",h," / ",y]}),(0,C.jsx)("button",{onClick:()=>p(e=>Math.min(y,e+1)),disabled:h>=y,className:"px-3 py-1 rounded ".concat("dark"===o?"bg-gray-700 text-gray-300":"bg-gray-200 text-gray-800"," disabled:opacity-50"),children:"Next"})]})]})]}),(0,C.jsx)("div",{className:"flex justify-end mt-6",children:(0,C.jsx)("button",{onClick:s,className:"px-6 py-2 font-semibold rounded-lg hover:bg-teal-700 transition duration-150 ".concat("dark"===o?"bg-teal-600 text-white":"bg-teal-500 text-white"),children:"Close"})})]})})};function Ne(e){let{attendanceRecords:t=[]}=e;const[a,l]=(0,n.useState)(new Date),[o,i]=(0,n.useState)([]),[c,d]=(0,n.useState)({start:null,end:null}),[m,x]=(0,n.useState)(!1),[u,g]=(0,n.useState)(!1),[h,p]=(0,n.useState)(null),[y,f]=(0,n.useState)(!1),{theme:b}=(0,n.useContext)(r.ob),v=a.getFullYear(),j=a.getMonth(),N=(0,n.useCallback)(e=>{const t=new Date(e.split("-").reverse().join("-"));return t.setHours(0,0,0,0),o.filter(e=>{const a=new Date(e.startDate.split("-").reverse().join("-")),s=new Date(e.endDate.split("-").reverse().join("-"));return a.setHours(0,0,0,0),s.setHours(0,0,0,0),t>=a&&t<=s})},[o]),w=(0,n.useMemo)(()=>{const e=new Date(v,j+1,0).getDate();const a=((e,t)=>new Date(e,t,1).getDay())(v,j),s=[];for(let t=0;t<a;t++)s.push({key:"blank-".concat(t),type:"blank"});for(let y=1;y<=e;y++){const e="".concat(String(y).padStart(2,"0"),"-").concat(String(j+1).padStart(2,"0"),"-").concat(v),a=(t||[]).find(t=>{if(!t||!t.date)return!1;if(/^\d{2}-\d{2}-\d{4}$/.test(t.date)&&t.date===e)return!0;if(/^\d{4}-\d{2}-\d{2}$/.test(t.date)){return pe(t.date)===e}return String(t.date)===e});let f={isPresent:"N/A",login:"N/A",logout:"N/A",effectiveHour:"N/A",date:e};var n,r,l,o,i,c,d,m,x,u,g,h,p;if(a)f={date:e,employeeId:null!==(n=null!==(r=a.employeeId)&&void 0!==r?r:a.employee_id)&&void 0!==n?n:a.employeeId,login:null!==(l=null!==(o=null!==(i=a.loginDisplay)&&void 0!==i?i:a.login)&&void 0!==o?o:a.login_time)&&void 0!==l?l:"N/A",logout:null!==(c=null!==(d=null!==(m=a.logoutDisplay)&&void 0!==m?m:a.logout)&&void 0!==d?d:a.logout_time)&&void 0!==c?c:"N/A",effectiveHour:null!==(x=null!==(u=a.effectiveHoursDisplay)&&void 0!==u?u:a.effectiveHour)&&void 0!==x?x:a.effectiveMinutes?me(a.effectiveMinutes):"N/A",isPresent:null!==(g=a.isPresent)&&void 0!==g?g:a.attended?"Present":a.holiday?"Holiday":"Absent",holiday:null!==(h=a.holiday)&&void 0!==h&&h,mode:null!==(p=a.mode)&&void 0!==p?p:null};s.push({date:e,type:"day",day:y,dateString:e,attendance:f})}return s},[v,j,t]),k=(0,n.useCallback)(e=>{l(t=>new Date(t.getFullYear(),t.getMonth()+e,1)),p(null),x(!1),g(!1)},[]),D=e=>{let{dayData:t}=e;if("blank"===t.type)return(0,C.jsx)("div",{className:"p-2 border border-gray-100 min-h-[20px] sm:min-h-[40px] ".concat("dark"===b?"bg-gray-800":"bg-gray-50")});const{day:a,dateString:n,attendance:r}=t,l=N(n),o=l.length>0,i=l.some(e=>e&&(!0===e.holiday||"true"===String(e.holiday).toLowerCase()))?"holiday":(e=>{if(!e)return"unknown";if(!0===e.holiday||"true"===String(e.holiday).toLowerCase())return"holiday";let t=[e.isPresent,e.status,e.present,e.attended].find(e=>"undefined"!==typeof e&&null!==e);if("boolean"===typeof t)return t?"present":"absent";if(null==t){var a,s;const t=de(null!==(a=null!==(s=e.effectiveHour)&&void 0!==s?s:e.effectiveHours)&&void 0!==a?a:"");return t&&t>0?"present":"unknown"}const n=String(t).trim().toLowerCase();return n?["present","p","yes","true","1"].includes(n)?"present":["absent","a","no","false","0"].includes(n)?"absent":n.includes("holiday")||"h"===n?"holiday":"unknown":"unknown"})(r),c=n===(new Date).toLocaleDateString("en-GB").replace(/\//g,"-");let m=["".concat("dark"===b?"bg-gray-800":"bg-gray-50")],u="border-gray-300",g=null,h="text-gray-900";"present"===i?(m="bg-green-50 hover:bg-green-200",u="border-green-500 border-2",g=(0,C.jsx)(X.A,{className:"w-2 h-2 text-green-700"}),h="text-green-800"):"absent"===i?(m="bg-red-50 hover:bg-red-200",u="border-red-500 border-2",g=(0,C.jsx)(V.A,{className:"w-2 h-2 text-red-700"}),h="text-red-800"):"holiday"===i?(m="bg-yellow-50 hover:bg-yellow-200",u="border-yellow-500 border-2",g=(0,C.jsx)(K.A,{className:"w-2 h-2 text-yellow-700"}),h="text-yellow-800"):(m="bg-gray-50 hover:bg-gray-100",u=o?"border-indigo-500 border-2":"border-gray-300");const v=c?"ring-4 ring-indigo-400 font-bold":"",j=y?"cursor-crosshair ring-2 ring-pink-500":"";return(0,C.jsxs)("div",{className:"relative group p-2 sm:p-3 border transition-all duration-200 cursor-pointer ".concat(m," ").concat(u," ").concat(v," ").concat(j," shadow-sm min-h-[50px] sm:min-h-[70px] flex flex-col justify-start"),onClick:()=>(e=>{if("blank"!==e.type)if(y)d({start:e.dateString,end:e.dateString}),x(!0),f(!1);else{const t=N(e.dateString);p((0,s.A)((0,s.A)({},e),{},{eventsOnThisDay:t}))}})(t),children:[(0,C.jsxs)("div",{className:"flex justify-between items-start mb-1",children:[(0,C.jsx)("span",{className:"text-lg sm:text-xl ".concat(c?"text-indigo-700":h),children:a}),(0,C.jsx)("div",{className:"flex-shrink-0",children:g})]}),o&&(0,C.jsx)("div",{className:"mt-auto",children:(0,C.jsxs)("p",{className:"text-xs text-indigo-700 font-semibold truncate ".concat(l.length>1?"border-t border-indigo-300 pt-1":""),children:[l.length," ",l.length>1?"Events":"Event"]})})]})};return(0,C.jsx)("div",{className:"p-4 sm:p-8",children:(0,C.jsxs)("div",{className:"w-full max-w-4xl mx-auto shadow-2xl rounded-xl p-4 sm:p-6 relative ".concat("dark"===b?"bg-gray-800":"bg-white"),children:[m&&(0,C.jsx)(ve,{onSubmit:e=>{i(t=>[...t,e]),x(!1)},selectedDate:c,onClose:()=>x(!1)}),u&&(0,C.jsx)(je,{onClose:()=>g(!1),currentYear:v,currentMonth:j,setEvents:i}),h&&(0,C.jsx)(be,{dayData:h,eventsOnThisDay:h.eventsOnThisDay,onClose:()=>p(null)}),(0,C.jsxs)("div",{className:"".concat(m||u||h?"pointer-events-none opacity-50":""),children:[(0,C.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6 border-b pb-4",children:[(0,C.jsxs)("h1",{className:"text-2xl sm:text-3xl font-extrabold mb-4 sm:mb-0 ".concat("dark"===b?"text-gray-300":"text-gray-800"),children:[ue[j]," ",(0,C.jsx)("span",{className:"text-indigo-600",children:v})]}),(0,C.jsxs)("div",{className:"flex space-x-2 sm:space-x-4",children:[(0,C.jsxs)("button",{onClick:()=>f(e=>!e),className:"flex items-center px-3 py-2 sm:px-4 sm:py-2 text-white font-semibold text-sm rounded-lg shadow-md transition duration-150 transform hover:scale-105 ".concat(y?"bg-indigo-700 hover:bg-indigo-800 ring-2 ring-pink-300":"bg-indigo-500 hover:bg-indigo-600"),children:[(0,C.jsx)(ee.A,{className:"w-4 h-4 mr-1 sm:mr-2"})," ",y?"Cancel Edit":"Edit "]}),(0,C.jsxs)("button",{onClick:()=>g(!0),className:"flex items-center px-3 py-2 sm:px-4 sm:py-2 bg-pink-500 text-white font-semibold text-sm rounded-lg shadow-md hover:bg-pink-600 transition duration-150 transform hover:scale-105",children:[(0,C.jsx)(K.A,{className:"w-4 h-4 mr-1 sm:mr-2"})," Events"]}),(0,C.jsx)("button",{onClick:()=>k(-1),className:"p-2 bg-gray-200 text-gray-600 rounded-full hover:bg-gray-300 transition duration-150",children:(0,C.jsx)(te.A,{className:"w-5 h-5"})}),(0,C.jsx)("button",{onClick:()=>k(1),className:"p-2 bg-gray-200 text-gray-600 rounded-full hover:bg-gray-300 transition duration-150",children:(0,C.jsx)(ae.A,{className:"w-5 h-5"})})]})]}),(0,C.jsx)("div",{className:"grid grid-cols-7 gap-1 mb-1",children:ge.map(e=>(0,C.jsx)("div",{className:"text-center font-semibold text-xs sm:text-sm text-indigo-700 p-2 bg-indigo-100 rounded",children:e},e))}),(0,C.jsx)("div",{className:"grid grid-cols-7 gap-1",children:w.map((e,t)=>(0,C.jsx)(D,{dayData:e},e.key||e.dateString||"day-".concat(t)))})]})]})})}const we=e=>{const t=String(e.getHours()).padStart(2,"0"),a=String(e.getMinutes()).padStart(2,"0"),s=String(e.getSeconds()).padStart(2,"0");return"".concat(t,":").concat(a,":").concat(s)},ke=e=>{let{Data:t,selectedMetricDate:a}=e;const[l,o]=(0,n.useState)(null),{theme:i}=(0,n.useContext)(r.ob),c=(0,n.useCallback)(e=>{const[t,a]=e.split(" - "),[s,n]=t.split(":").map(Number),[r,l]=a.split(":").map(Number);return{start:s+n/60,end:r+l/60}},[]),d=e=>{const t=Math.floor(e/3600),a=Math.floor(e%3600/60),s=Math.floor(e%60);let n="";return t>0&&(n+="".concat(String(t).padStart(2,"0"),"h ")),a>0&&(n+="".concat(String(a).padStart(2,"0"),"m ")),s>0&&(n+="".concat(String(s).padStart(2,"0"),"s")),n.trim()||"0s"},m=(0,n.useMemo)(()=>{if(!t||"All"===a)return null;const e=t.find(e=>"".concat(e.Date,"-").concat(e.Month,"-").concat(e.Year)===a);if(!e||!e.End_time||!e.Start_time)return null;const s=(new Date("2000/01/01 ".concat(e.End_time))-new Date("2000/01/01 ".concat(e.Start_time)))/1e3;let n=0;e.Break_hour&&e.Break_hour.forEach(e=>{const[t,a]=e.Time.split(" - ");n+=(new Date("2000/01/01 ".concat(a))-new Date("2000/01/01 ".concat(t)))/1e3});const r=s-n,l=Math.max(0,r-28800);return{totalWorkingHours:d(s),productiveHours:d(r),breakHours:d(n),overtime:d(l)}},[a,t]),x=(0,n.useCallback)(e=>(e-10)/10*100,[]),u=(0,n.useCallback)(()=>{if(!t||"All"===a)return(0,C.jsx)(b.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"text-center py-4 italic ".concat("dark"===i?"text-white":"text-gray-600"),children:"Select a specific day to view the timeline."});const e=t.find(e=>"".concat(e.Date,"-").concat(e.Month,"-").concat(e.Year)===a);if(!e)return(0,C.jsxs)(b.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"text-gray-500 text-center py-4 italic ".concat("dark"===i?"text-white":"text-gray-600"),children:["No schedule available for ",a,"."]});const n=(e=>{if(!e)return e;const t=(0,s.A)({},e);return t.Start_time&&(t.Start_time=ie(t.Start_time)),t.End_time&&(t.End_time=ie(t.End_time)),Array.isArray(t.Break_hour)?t.Break_hour=t.Break_hour.map(e=>{if(!e)return e;const t=(0,s.A)({},e);return t.Time&&(t.Time=ce(t.Time)),t}):t.Break_hour&&"string"===typeof t.Break_hour&&(t.Break_hour=ce(t.Break_hour)),t})(e),r=new Set;n.Start_time&&r.add(n.Start_time),n.End_time&&r.add(n.End_time),n.Break_hour&&n.Break_hour.forEach(e=>{if(e.Time){const[t,a]=e.Time.split(" - ");t&&r.add(t),a&&r.add(a)}});const d=Array.from(r).sort((e,t)=>new Date("2000/01/01 ".concat(e))-new Date("2000/01/01 ".concat(t))),m=e=>{if(!e)return console.error("formatTimelineTime received a null or empty time string."),"Invalid Time";const[t,a]=e.split(":").map(Number),s=t>=12?"PM":"AM";return"".concat(t%12===0?12:t%12).concat(a>0?":".concat(a):""," ").concat(s)};var u,g;const h=[{type:"working",time:"".concat(n.Start_time," - ").concat(n.End_time),duration:(u=n.Start_time,g=n.End_time,(new Date("2000/01/01 ".concat(g))-new Date("2000/01/01 ".concat(u)))/36e5)},...(n.Break_hour||[]).map(e=>({type:"break",time:e.Time,duration:e.hour}))].sort((e,t)=>c(e.time).start-c(t.time).start);return(0,C.jsxs)("div",{children:[(0,C.jsx)(b.P.div,{className:"w-full  h-10 bg-gray-200 relative rounded-xl overflow-hidden border border-gray-300",initial:{opacity:0,scaleX:0},animate:{opacity:1,scaleX:1},transition:{duration:.8,ease:"easeOut"},style:{transformOrigin:"left"},children:h.map((e,t)=>{const{start:a,end:s}=c(e.time),n=x(a),r=x(s)-x(a),i="working"===e.type?"bg-green-300":"bg-yellow-300";return(0,C.jsx)(b.P.div,{className:"absolute h-full cursor-pointer transition-all duration-300 ".concat(i),style:{left:"".concat(n,"%"),width:"".concat(r,"%")},onMouseEnter:()=>o(e),onMouseLeave:()=>o(null),initial:{opacity:0,scaleY:0},animate:{opacity:1,scaleY:1},transition:{delay:.3+.1*t,duration:.5},children:l===e&&(0,C.jsxs)("div",{className:"absolute bottom-full mb-2 p-2 rounded-md shadow-lg bg-gray-800 text-white text-xs whitespace-nowrap",style:{left:"50%",transform:"translateX(-50%)"},children:[(0,C.jsx)("p",{children:"working"===e.type?"Working":"Break"}),(0,C.jsxs)("p",{children:["Time: ",e.time]}),(0,C.jsxs)("p",{children:["Duration: ",e.duration.toFixed(2)," hours"]})]})},t)})}),(0,C.jsx)("div",{className:"flex justify-between text-xs sm:text-sm  mt-2  ".concat("dark"===i?"text-white":"text-gray-600"),children:d.map((e,t)=>(0,C.jsx)(b.P.span,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.8+.1*t,duration:.3},children:m(e)},t))})]})},[a,t,l,c,x]);return(0,C.jsxs)(b.P.div,{className:"p-4",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[(0,C.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[(0,C.jsxs)(b.P.div,{className:"flex flex-col items-center p-2 rounded-lg bg-gray-50 border border-gray-200 shadow-sm",whileHover:{scale:1.05},transition:{type:"spring",stiffness:300},children:[(0,C.jsxs)("div",{className:"flex items-center text-gray-500 mb-2",children:[(0,C.jsx)("span",{className:"w-3 h-3 bg-gray-500 rounded-full mr-2"}),(0,C.jsx)("span",{className:"text-sm font-medium",children:"Total"})]}),(0,C.jsx)("span",{className:"text-lg sm:text-xl font-bold text-gray-800",children:(null===m||void 0===m?void 0:m.totalWorkingHours)||"N/A"})]}),(0,C.jsxs)(b.P.div,{className:"flex flex-col items-center p-2 rounded-lg bg-green-50 border border-green-200 shadow-sm",whileHover:{scale:1.05},transition:{type:"spring",stiffness:300},children:[(0,C.jsxs)("div",{className:"flex items-center text-green-700 mb-2",children:[(0,C.jsx)("span",{className:"w-3 h-3 bg-green-500 rounded-full mr-2"}),(0,C.jsx)("span",{className:"text-sm font-medium",children:"Productive"})]}),(0,C.jsx)("span",{className:"text-lg sm:text-xl font-bold text-green-800",children:(null===m||void 0===m?void 0:m.productiveHours)||"N/A"})]}),(0,C.jsxs)(b.P.div,{className:"flex flex-col items-center p-2 rounded-lg bg-yellow-50 border border-yellow-200 shadow-sm",whileHover:{scale:1.05},transition:{type:"spring",stiffness:300},children:[(0,C.jsxs)("div",{className:"flex items-center text-yellow-700 mb-2",children:[(0,C.jsx)("span",{className:"w-3 h-3 bg-yellow-500 rounded-full mr-2"}),(0,C.jsx)("span",{className:"text-sm font-medium",children:"Break"})]}),(0,C.jsx)("span",{className:"text-lg sm:text-xl font-bold text-yellow-800",children:(null===m||void 0===m?void 0:m.breakHours)||"N/A"})]}),(0,C.jsxs)(b.P.div,{className:"flex flex-col items-center p-2 rounded-lg bg-blue-50 border border-blue-200 shadow-sm",whileHover:{scale:1.05},transition:{type:"spring",stiffness:300},children:[(0,C.jsxs)("div",{className:"flex items-center text-blue-700 mb-2",children:[(0,C.jsx)("span",{className:"w-3 h-3 bg-blue-500 rounded-full mr-2"}),(0,C.jsx)("span",{className:"text-sm font-medium",children:"Overtime"})]}),(0,C.jsx)("span",{className:"text-lg sm:text-xl font-bold text-blue-800",children:(null===m||void 0===m?void 0:m.overtime)||"N/A"})]})]}),u()]})},De=e=>{let{theme:t,todayAttendance:a,isLoggedIn:s,loading:n}=e;const r="dark"===t,l=(new Date).toISOString().slice(0,10);if(n)return(0,C.jsx)("div",{className:"text-center p-3",children:(0,C.jsx)("p",{className:"text-sm text-indigo-400 animate-pulse",children:"Loading attendance data..."})});if(!a)return(0,C.jsx)("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:(0,C.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["No attendance record found for today (",l,")."]})});const{login:o,logout:i,isPresent:c,mode:d,effectiveHours:m,grossHours:x}=a,u=r?"bg-gray-800 text-white border-gray-700":"bg-white border-gray-200",g="p-4 rounded-xl shadow-md ".concat(r?"bg-gray-700":"bg-gray-50");return(0,C.jsxs)("div",{className:"p-4 rounded-2xl shadow-xl ".concat(u),children:[(0,C.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,C.jsxs)("div",{className:"flex items-center gap-3",children:[(0,C.jsx)("span",{className:"px-3 py-1 text-xs font-semibold rounded-full ".concat((e=>{const t=String(e||"").toUpperCase();return"TRUE"===t||"PRESENT"===t?"bg-green-100 text-green-700":"FALSE"===t||"ABSENT"===t?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/40 dark:text-yellow-300"})(c)),children:String(c||"N/A").toUpperCase()}),(0,C.jsxs)("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:["Mode: ",d||"Office"]})]})}),(0,C.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,C.jsxs)("div",{className:g,children:[(0,C.jsx)("div",{className:"text-lg font-bold text-indigo-500",children:o?o.split(".")[0]:"N/A"}),(0,C.jsx)("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mt-1",children:"First Login"})]}),(0,C.jsxs)("div",{className:g,children:[(0,C.jsx)("div",{className:"text-lg font-bold text-indigo-500",children:i?i.split(".")[0]:"N/A"}),(0,C.jsx)("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mt-1",children:"Last Logout"})]})]})]})},Se=e=>{var t;let{onBack:a,currentUser:N,employeeId:D,startDate:S=null,endDate:A=null}=e;const{empID:T}=(0,w.g)(),{userData:I,theme:M}=(0,n.useContext)(r.ob),E=D||(null===I||void 0===I?void 0:I.employeeId)||"ACS00000001",H=((null===I||void 0===I||null===(t=I.roles)||void 0===t?void 0:t[0])||"").toUpperCase(),[P,O]=(0,n.useState)(!1),[L,_]=(0,n.useState)(null),[F,B]=(0,n.useState)(!1),$=["TEAM_LEAD","HR","MANAGER","ADMIN"].includes(H),[R,z]=(0,n.useState)("All"),[W,K]=(0,n.useState)("All"),[G,Q]=(0,n.useState)("All"),[X,V]=(0,n.useState)(""),[ee,le]=(0,n.useState)(""),ce=(0,j.A)("(max-width:768px)"),[ue,ge]=(0,n.useState)(!1),[he,pe]=(0,n.useState)(null),[ye,be]=(0,n.useState)(null),[ve,je]=(0,n.useState)("office"),[Se,Ae]=(0,n.useState)(new Date),[Ce,Te]=(0,n.useState)(0),[Ie,Me]=(0,n.useState)(0),[Ee,He]=(0,n.useState)(null),[Pe,Oe]=(0,n.useState)(!1),[Le,_e]=(0,n.useState)(()=>Date.now()),[Fe,Be]=(0,n.useState)(!1),[$e,Re]=(0,n.useState)(!1),[ze,We]=(0,n.useState)(()=>{try{return localStorage.getItem("currentAttendanceId")||null}catch(e){return null}}),[Ue,Ye]=(0,n.useState)("Recantly Added"),[qe,Ze]=(0,n.useState)([]),[Je,Ke]=(0,n.useState)(!1),[Ge,Qe]=(0,n.useState)(null),[Xe,Ve]=(0,n.useState)(1),[et,tt]=(0,n.useState)(12),at=(new Date).toISOString().slice(0,10),st=(new Date).toISOString().slice(0,10),nt=(0,n.useCallback)(async()=>{Oe(!0);try{const t={employeeId:E,startDate:st,endDate:st},a=await fe("\n  query getDetailsBetweenDates($employeeId: String!, $startDate: Date!, $endDate: Date!) {\n    getDetailsBetweenDates(employeeId: $employeeId, startDate: $startDate, endDate: $endDate) {\n      date\n      employeeId\n      isPresent\n      login\n      logout\n      effectiveHours\n      grossHours\n      mode\n    }\n  }\n    ",t),s=((null===a||void 0===a?void 0:a.getDetailsBetweenDates)||[])[0]||null;if(He(s),_e(Date.now()),Ct.current&&(clearInterval(Ct.current),Ct.current=null),Tt.current&&(clearInterval(Tt.current),Tt.current=null),s){var e;const t=!(!s.login||s.logout);ge(t);const a=de(null!==(e=s.effectiveHours)&&void 0!==e?e:s.effectiveHour)||0;if(Tt.current=setInterval(()=>Ae(new Date),1e3),t){const[e,t,n]=s.login.split(":"),r=new Date;r.setHours(e,t,parseFloat(n),0),clearInterval(Tt.current),Tt.current=null,Ct.current=setInterval(()=>{const e=(Le-r)/1e3;!isNaN(e)&&e>=0&&(Te(e),Me(60*a)),Ae(new Date)},1e3)}else if(s.logout){const[e,t,n]=s.login.split(":"),[r,l,o]=s.logout.split(":"),i=new Date,c=new Date;i.setHours(e,t,parseFloat(n),0),c.setHours(r,l,parseFloat(o),0);const d=(c-i)/1e3;!isNaN(d)&&d>=0&&(Te(d),Me(60*a))}}}catch(t){console.error("Error fetching attendance:",t)}finally{Oe(!1)}},[E,st]);async function rt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{const t=Intl.DateTimeFormat().resolvedOptions().timeZone,a=navigator.userAgent,s=await new Promise((e,t)=>{navigator.geolocation.getCurrentPosition(e,t)}),n=s.coords.latitude;return{timeZone:t,mode:e,latitude:n,longitude:s.coords.longitude,device:a}}catch(Ge){return console.error("Error fetching location or device info:",Ge),{timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone,mode:e,latitude:null,longitude:null,device:navigator.userAgent}}}(0,n.useEffect)(()=>{const e=JSON.parse(localStorage.getItem("emppayload")),t=localStorage.getItem("loggedInUserImage"),a=((null===e||void 0===e?void 0:e.displayName)||"  ").split(" ").map(e=>e[0]).join("").substring(0,2);At({image:t,initials:a})},[I]),(0,n.useEffect)(()=>{nt(),console.log(["TEAM_LEAD","HR","MANAGER","ADMIN"].includes(H));const e=null===I||void 0===I?void 0:I.employeeId,t=ze,a=async function(){let a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!ue||!e||!t)return;const s=await rt(ve),n="https://hrms.anasolconsultancyservices.com/api/attendance/employee/".concat(e,"/").concat(t,"/disconnected");try{const e=JSON.stringify({timestamp:(new Date).toISOString()});if(a&&navigator.sendBeacon){const t=new Blob([e],{type:"application/json"});navigator.sendBeacon(n,t),console.log("Disconnected (beacon) sent:",n)}else await fetch(n,{method:"PUT",headers:{"Content-Type":"application/json"},body:s,keepalive:!0}),console.log("Disconnected (fetch) done:",n)}catch(r){console.error("Disconnected API call failed:",r)}},s=e=>{ue&&a(!0)},n=()=>{ue&&(async()=>{if(!ue||!e||!t)return;const a=await rt(ve),s="https://hrms.anasolconsultancyservices.com/api/attendance/employee/".concat(e,"/").concat(t,"/connected");try{const e=await fetch(s,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});e.ok?console.log("Connected endpoint hit successfully:",s):console.warn("Connected endpoint returned non-OK:",e.status)}catch(n){console.error("Connected API call failed:",n)}})()};return window.addEventListener("beforeunload",s),window.addEventListener("focus",n),window.triggerManualDisconnect=async()=>{if(!ue)return;window.confirm("You are being disconnected. Are you sure?")&&(await a(!1),alert("You have been disconnected."))},()=>{clearInterval(Tt.current),Tt.current=null,window.removeEventListener("beforeunload",s),window.removeEventListener("focus",n)}},[ue,he,ze]);const lt=async e=>{try{Be(!1);const t=await rt(e),a="https://hrms.anasolconsultancyservices.com/api/attendance/employee/".concat(null===I||void 0===I?void 0:I.employeeId,"/clock-in");await Y.HN.put(a,t,{headers:{"Content-Type":"application/json",Accept:"*/*"}}),await(async(e,t)=>{try{var a;if(null===I||void 0===I||!I.employeeId)return null;const s=new Date,n=s.getDate(),r=s.getMonth()+1,l=s.getFullYear(),o="https://hrms.anasolconsultancyservices.com/api/attendance/employee/".concat(null===I||void 0===I?void 0:I.employeeId,"/profile/").concat(n,"/").concat(r,"/").concat(l),i=await Y.HN.put(o,{[e]:t},{headers:{"Content-Type":"application/json"}});return null!==(a=null===i||void 0===i?void 0:i.data)&&void 0!==a?a:null}catch(s){return console.error('Error updating profile field "'.concat(e,'":'),s),null}})("mode",e),je(e)}catch(t){console.error("Failed to change mode:",t),alert("Unable to change mode. Please try again.")}},[ot,it]=(0,n.useState)([]),[ct,dt]=(0,n.useState)([]),[mt,xt]=(0,n.useState)([]),[ut,gt]=(0,n.useState)([]),[ht,pt]=(0,n.useState)([]),[yt,ft]=(0,n.useState)(0),bt="attendanceId_".concat(E);(0,n.useEffect)(()=>{if(!mt||mt.length<=1)return;if(G&&"All"!==G)return;const e=mt.find(e=>"All"!==e);if(!e)return;const t=ct.find(t=>t.Date===e),a=ot.find(t=>t.Date===e),s=t||a?"".concat((t||a).Date,"-").concat((t||a).Month,"-").concat((t||a).Year):e;Q(s);const n=mt.indexOf(e);if(n>=0){const e=Math.floor(n/Dt)*Dt;ft(e)}},[mt,ct,ot]),(0,n.useEffect)(()=>{const e="https://hrms.anasolconsultancyservices.com/api/attendance/employee/".concat(null===I||void 0===I?void 0:I.employeeId,"/bar-chart?page=0&size=5");Y.HN.get(e).then(e=>{const t=e.data.map(e=>({Date:e.date,Month:e.month,Year:e.year,Work_Hours:e.working_hour,Break_Hours:e.break_hour}));it(t);const a=["All",...t.map(e=>e.Date)];xt(a)}).catch(e=>console.error("Error fetching bar chart data:",e))},[T]),(0,n.useEffect)(()=>{const e="https://hrms.anasolconsultancyservices.com/api/attendance/employee/".concat(null===I||void 0===I?void 0:I.employeeId,"/attendance?page=0&size=").concat(Et[Et.length-1]);Y.HN.get(e).then(e=>{Mt(e.data);const t=["All",...e.map(e=>e.Date)];xt(t)}).catch(e=>console.error("Error fetching attendance data:",e))},[T]),(0,n.useEffect)(()=>{const e="https://hrms.anasolconsultancyservices.com/api/attendance/employee/".concat(null===I||void 0===I?void 0:I.employeeId,"/pie-chart");Y.HN.get(e).then(e=>{const t=e.data.map(e=>({Date:e.date,Month:e.month,Year:e.year,Working_hour:e.working_hour,Break_hour:e.break_hour,EmployeeId:e.employeeId}));dt(t);const a=["All",...t.map(e=>e.Date)];xt(a)}).catch(e=>console.error("Error fetching pie chart data:",e))},[T]),(0,n.useEffect)(()=>{const e="https://hrms.anasolconsultancyservices.com/api/attendance/employee/".concat(null===I||void 0===I?void 0:I.employeeId,"/line-graph?page=0&size=5");Y.HN.get(e).then(e=>{const t=e.data.map(e=>({EmployeeId:e.employeeId,Date:e.date,Month:e.month,Year:e.year,Start_time:e.start_time,End_time:e.end_time,Break_hour:e.breaks.map(e=>({Time:e.time,hour:e.hour}))}));gt(t);const a=["All",...t.map(e=>e.Date)];xt(a)}).catch(e=>console.error("Error fetching line graph data:",e))},[T]);const vt=e=>{const t=Math.max(0,Math.floor(Number(e)||0)),a=Math.floor(t/3600),s=Math.floor(t%3600/60),n=t%60;return"".concat(String(a).padStart(2,"0"),":").concat(String(s).padStart(2,"0"),":").concat(String(n).padStart(2,"0"))},jt=ue?Math.floor((Se.getTime()-Le)/1e3):0,Nt=ue?(Number(Ie)||0)+jt:Number(Ie)||0,wt=vt(ue?(Number(Ce)||0)+jt:Number(Ce)||0),kt=vt(Nt),Dt=5,[St,At]=(0,n.useState)({image:null,initials:"  "}),Ct=(0,n.useRef)(null),Tt=(0,n.useRef)(null),[It,Mt]=(0,n.useState)([]),Et=[10,25,50,100],Ht="dark"===M?"#FFFFFF":"#000000",[Pt,Ot]=(0,n.useState)([]),[Lt,_t]=(0,n.useState)(null),Ft=null!==I&&void 0!==I&&I.roles[0]?"ROLE_".concat(null===I||void 0===I?void 0:I.roles[0]):null;(0,n.useEffect)(()=>{(async()=>{let e=await Y.ZQ.get("role-access/".concat(Ft));console.log("from Projects :",e.data),Ot(e.data)})()},[]),(0,n.useEffect)(()=>{Pt&&_t(null===Pt||void 0===Pt?void 0:Pt.permissions)},[Pt]);const[Bt,$t]=(0,n.useState)([]);(0,n.useEffect)(()=>{$t(null===I||void 0===I?void 0:I.permissions)},[I]),(0,n.useEffect)(()=>{let e=!1;return(async()=>{Ke(!0),Qe(null);try{const t=(null===I||void 0===I?void 0:I.employeeId)||"ACS00000001",{startISO:a,endISO:n}=(()=>{const e=new Date;let t=e.getFullYear(),a=e.getMonth(),s=X||"",n=ee||"";const r=e=>{if(!e)return"";try{return e>at?at:e}catch(t){return""}};if(s=r(s),n=r(n),s&&!n&&(n=at),!s&&n){const e=n.split("-");s=new Date(e[0],Number(e[1])-1,1).toISOString().slice(0,10)}if(!s&&!n){if(R){const e=new Date("".concat(R," 1, ").concat(t));isNaN(e)||(a=e.getMonth())}const e=new Date(t,a,1),r=new Date(t,a+1,0);s=e.toISOString().slice(0,10),n=r.toISOString().slice(0,10)}if(s||(s=n||at),n||(n=s||at),s>n){const e=s;s=n,n=e}return n>at&&(n=at),s>at&&(s=at),{startISO:s,endISO:n}})(),r={employeeId:t,startDate:a,endDate:n},l=await fe("\n  query getDetailsBetweenDates($employeeId: String!, $startDate: Date!, $endDate: Date!) {\n    getDetailsBetweenDates(employeeId: $employeeId, startDate: $startDate, endDate: $endDate) {\n      date\n      employeeId\n      isPresent\n      login\n      logout\n      effectiveHours\n      grossHours\n      mode\n    }\n  }\n",r);if(e)return;const o=((null===l||void 0===l?void 0:l.getDetailsBetweenDates)||[]).map(e=>{var t,a,n,r;const l=/^\d{4}-\d{2}-\d{2}$/.test(e.date)?e.date:(()=>{const t=(e.date||"").split("-");return 3===t.length?"".concat(t[2],"-").concat(t[1],"-").concat(t[0]):(new Date).toISOString().slice(0,10)})(),o=e=>{if(!e)return null;const t=String(e).trim();if(!t||/^(-|n\/a|null)$/i.test(t))return null;if(/\d{4}-\d{2}-\d{2}T/.test(t)||/[Zz]|[+\-]\d{2}:\d{2}$/.test(t)){const e=new Date(t);return isNaN(e.getTime())?null:e}const a=new Date(t);if(!isNaN(a.getTime()))return a;const s=oe(t);if(s){const e=new Date("".concat(l,"T").concat(s,":00Z"));return isNaN(e.getTime())?null:e}const n=t.replace(" ","T");if(/\d{4}-\d{2}-\d{2}T/.test(n)){const e=n.endsWith("Z")||/[+\-]\d{2}:\d{2}$/.test(n)?new Date(n):new Date("".concat(n,"Z"));if(!isNaN(e.getTime()))return e}return null},i=null!==(t=null!==(a=e.login)&&void 0!==a?a:e.loginTime)&&void 0!==t?t:null,c=null!==(n=null!==(r=e.logout)&&void 0!==r?r:e.logoutTime)&&void 0!==n?n:null,d=i?o(i):null,m=c?o(c):null,x=(e,t)=>{if(!t)return"N/A";try{let a=e&&!isNaN(e.getTime())?e:null;if(!a){const e=oe(String(t));e&&(a=new Date("".concat(l,"T").concat(e,":00Z")))}if(!a){const e=new Date(String(t));isNaN(e.getTime())||(a=e)}if(!a||isNaN(a.getTime()))return String(t);const s=a.getTime()+198e5,n=new Date(s);return new Intl.DateTimeFormat("en-IN",{hour:"2-digit",minute:"2-digit",hour12:!0,timeZone:"UTC"}).format(n)}catch(a){return String(t)}},u=x(d,i),g=x(m,c);let h=0;if(d&&m&&!isNaN(d.getTime())&&!isNaN(m.getTime()))h=Math.max(0,Math.floor((m.getTime()-d.getTime())/6e4));else{const t=de(e.effectiveHours||""),a=de(e.grossHours||"");h=t||a||0}const p=de(e.effectiveHours||""),y=de(e.grossHours||"");return(0,s.A)((0,s.A)({},e),{},{date:e.date,loginDisplay:u,logoutDisplay:g,effectiveHoursDisplay:xe(e.effectiveHours),grossHoursDisplay:xe(e.grossHours),totalDurationMinutes:h,totalDurationHHMM:h>0?me(h):"N/A",effectiveMinutes:p,grossMinutes:y,attended:(()=>{const t=e.isPresent;if(null==t)return!1;const a=String(t).toLowerCase();return["present","p","yes","true","1"].includes(a)})()})});Ze(o),Ve(1)}catch(l){var t,a,n,r;console.error("Attendance fetch failed:",l);const e=null!==l&&void 0!==l&&null!==(t=l.graphql)&&void 0!==t&&t.length?l.graphql.map(e=>e.message).join("; "):null,s=(null===l||void 0===l||null===(a=l.response)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.message)||(null===l||void 0===l?void 0:l.message);401===(null===l||void 0===l||null===(r=l.response)||void 0===r?void 0:r.status)?Qe("Unauthorized (401). Please login to continue."):Qe(e||s||"Failed to load attendance"),Ze([])}finally{e||Ke(!1)}})(),()=>{e=!0}},[R,I,X,ee]);const Rt=(0,n.useMemo)(()=>{let e=[...qe];switch(Ue){case"Ascending":e.sort((e,t)=>(e.employeeId||"").localeCompare(t.employeeId||""));break;case"Descending":e.sort((e,t)=>(t.employeeId||"").localeCompare(e.employeeId||""));break;default:e.sort((e,t)=>new Date(t.date)-new Date(e.date))}return e},[qe,Ue]),zt=Math.max(1,Math.ceil(Rt.length/et)),Wt=Rt.slice((Xe-1)*et,Xe*et),Ut=((0,n.useMemo)(()=>{const e=Rt.reduce((e,t)=>e+(t.totalDurationMinutes||0),0),t=Rt.reduce((e,t)=>e+(t.grossMinutes||0),0);return{totalDurationMinutes:e,totalDurationHHMM:e>0?me(e):"00:00",totalGrossMinutes:t,totalGrossHHMM:t>0?me(t):"00:00"}},[Rt]),(0,n.useMemo)(()=>{const e="All"===W?ct:ct.filter(e=>"".concat(e.Date,"-").concat(e.Month,"-").concat(e.Year)===W);return[{name:"Working Hours",value:e.reduce((e,t)=>e+t.Working_hour,0)},{name:"Break Hours",value:e.reduce((e,t)=>e+t.Break_hour,0)}]},[W,ct])),Yt=(0,n.useMemo)(()=>"All"===W?ot:ot.filter(e=>"".concat(e.Date,"-").concat(e.Month,"-").concat(e.Year)===W),[W,ot]);return Je?(0,C.jsx)("div",{className:"min-h-screen ".concat("dark"===M?"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900":"bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100"),children:(0,C.jsx)("div",{className:"min-h-screen flex items-center justify-center px-4",children:(0,C.jsxs)("div",{className:"text-center",children:[(0,C.jsxs)("div",{className:"relative",children:[(0,C.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 sm:h-16 sm:w-16 border-4 border-blue-500 border-t-transparent mx-auto mb-4"}),(0,C.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,C.jsx)(q.SNd,{className:"w-5 h-5 sm:w-6 sm:h-6 text-blue-500"})})]}),(0,C.jsx)("h2",{className:"text-lg sm:text-xl font-bold mb-2 ".concat("dark"===M?"text-white":"text-gray-800"),children:"Loading Employee Attendance"}),(0,C.jsx)("p",{className:"text-sm ".concat("dark"===M?"text-gray-300":"text-gray-600"),children:"Discovering your colleagues..."})]})})}):(0,C.jsxs)("div",{className:"min-h-screen ".concat("dark"===M?"bg-gray-900":"bg-gray-50"," font-sans text-gray-800 relative"),children:[(0,C.jsxs)(v.N,{children:[(Lt||[]).includes("VIEW_ATTENDANCE_REPORTS")&&!P&&(0,C.jsx)(b.P.button,{onClick:()=>O(!0),className:"fixed right-0 top-1/2 transform -translate-y-1/2 bg-indigo-600 text-white p-2 rounded-l-lg shadow-lg z-50 hover:bg-indigo-700 transition-colors","aria-label":"Open Sidebar",children:(0,C.jsx)(te.A,{})}),$&&P&&(0,C.jsxs)(b.P.div,{className:"fixed inset-y-0 right-0 w-80 ".concat("dark"===M?"bg-gray-900":"bg-stone-100"," shadow-xl z-40 p-4 flex flex-col"),children:[(0,C.jsxs)(b.P.h3,{className:"text-lg font-bold mt-20  cursor-pointer mb-1 p-2 rounded-md  hover:bg-blue-100 transition-colors duration-200 ".concat("dark"===M?"text-white hover:bg-gray-900":"text-gray-800"),onClick:()=>{_("attendance"),O(!1)},whileHover:{scale:1.05},whileTap:{scale:.95},children:[(0,C.jsx)(J.Qak,{className:"w-5 h-5 inline-block mr-2"}),"Total Employee Attendance"]}),(0,C.jsxs)(b.P.h3,{className:"text-lg font-bold   cursor-pointer mb-4 p-2 rounded-md  hover:bg-blue-100 transition-colors duration-200 ".concat("dark"===M?"text-white hover:bg-gray-900":"text-gray-800"),onClick:()=>{_("attendanceReport"),O(!1)},whileHover:{scale:1.05},whileTap:{scale:.95},children:[(0,C.jsx)(l.A,{className:"w-5 h-5 inline-block mr-2"})," Attendance Reports"]}),(0,C.jsx)("button",{onClick:()=>O(!1),className:"absolute left-0 top-1/2 -translate-x-1/2 -translate-y-1/2 p-2 rounded-full bg-indigo-600 text-white shadow-lg hover:bg-indigo-700 transition-colors z-50","aria-label":"Close Sidebar",children:(0,C.jsx)(ae.A,{})})]},"sidebar")]}),(0,C.jsxs)("div",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 lg:p-8",children:[P&&(0,C.jsx)("div",{className:"md:hidden fixed inset-0 bg-black opacity-50 z-30",onClick:()=>O(!1)}),(0,C.jsxs)("main",{className:"p-2 sm:p-2 lg:p-4 ".concat(P&&$?"filter blur-sm":""),children:[(0,C.jsx)("header",{className:"flex items-center justify-between mb-1",children:(0,C.jsx)(b.P.h1,{className:"text-2xl sm:text-4xl font-extrabold ".concat("dark"===M?"text-white":"text-gray-900"),initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},children:F?"Attendance Reports":""})}),(0,C.jsxs)(v.N,{mode:"wait",children:["attendance"===L&&(0,C.jsx)(b.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:(0,C.jsx)(Z.A,{onBack:()=>_(null)})},"attendance"),"attendanceReport"===L&&(0,C.jsx)(b.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"",children:(0,C.jsx)(U,{rawTableData:It,role:H.toLowerCase(),onBack:()=>_(null)})},"reports"),null===L&&(0,C.jsxs)(b.P.div,{children:[(0,C.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-1 xl:grid-cols-2 gap-3 mb-2",children:[(0,C.jsx)(b.P.div,{className:"p-2 flex items-center justify-center w-full",animate:{opacity:1,scale:1},children:(0,C.jsxs)("div",{className:"rounded-3xl shadow-2xl p-4 w-full max-w-lg md:max-w-3xl transition-all hover:shadow-3xl duration-300 relative overflow-hidden \n                ".concat("dark"===M?"bg-gray-800 border border-indigo-500/50":"bg-white border border-gray-200"),children:[(0,C.jsx)("div",{className:"absolute -top-12 -right-12 w-50 h-50 rounded-full bg-gradient-to-tr from-purple-100 via-pink-200 to-red-300 opacity-30 z-0 animate-pulse-slow"}),(0,C.jsx)("div",{className:"absolute -bottom-10 -left-10 w-24 h-24 rounded-full bg-gradient-to-tr from-green-100 via-blue-200 to-purple-300 opacity-30 z-0 animate-pulse-slow-reverse"}),(0,C.jsxs)("div",{className:"flex flex-row items-start justify-between mb-2 relative z-10",children:[(0,C.jsxs)("div",{className:"flex items-start space-x-3 md:space-x-4",children:[(0,C.jsxs)("div",{className:"relative mt-1",children:[" ",(0,C.jsx)(b.P.div,{className:"w-14 h-14 md:w-16 md:h-16 rounded-full overflow-hidden border-4 flex items-center justify-center shadow-xl cursor-pointer \n                                ".concat("dark"===M?"border-gray-700 bg-gray-600":"border-white bg-indigo-500"),transition:{type:"spring",stiffness:400,damping:10},children:St.image?(0,C.jsx)("img",{src:St.image,alt:"Profile",className:"w-full h-full object-cover"}):(0,C.jsx)("span",{className:"text-lg md:text-xl font-bold ".concat("text-white"," flex items-center justify-center w-full h-full"),children:St.initials})}),(0,C.jsx)(b.P.div,{className:"absolute bottom-0 right-0 w-4 h-4 md:w-5 md:h-5 rounded-full flex items-center justify-center border-2 \n                                ".concat("dark"===M?"border-gray-800":"border-white"," transition-colors \n                                ").concat("office"===ve?"bg-blue-500":"bg-green-500"),initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500,damping:20},children:"office"===ve?(0,C.jsx)(k.ymh,{className:"text-white text-xs"}):(0,C.jsx)(k.rQ8,{className:"text-white text-xs"})})]}),(0,C.jsxs)(b.P.div,{className:"text-start mt-2",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1,duration:.5},children:[(0,C.jsx)("p",{className:"text-xs md:text-sm font-semibold mb-0 ".concat("dark"===M?"text-gray-400":"text-gray-500"),children:"Welcome Back!"}),(0,C.jsxs)("h2",{className:"text-lg md:text-xl font-bold ".concat("dark"===M?"text-white":"text-gray-900"),children:["".concat((null===I||void 0===I?void 0:I.fullName)||"Employee")," \ud83d\udc4b"]})]})]}),(0,C.jsxs)("div",{className:"flex space-x-1 md:space-x-2 mt-1",children:[(0,C.jsxs)(b.P.button,{onClick:async()=>{await nt()},className:"p-2 rounded-full hover:shadow-lg flex items-center justify-center text-sm font-medium transition-transform duration-300 \n                            ".concat("dark"===M?"bg-gray-700 text-indigo-400 border border-gray-600":"bg-gray-100 text-indigo-600 border border-gray-300"),whileTap:{scale:.9},"aria-label":"Refresh Timer",children:[(0,C.jsx)(b.P.svg,{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 md:h-5 md:w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,initial:{rotate:0},animate:{rotate:Fe?180:0},children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.001 8.001 0 01-15.357-2m15.357 2H15"})}),(0,C.jsx)("span",{className:"hidden sm:inline ml-1 text-xs",children:"Refresh"})," "]}),(0,C.jsxs)("div",{className:"relative",children:[(0,C.jsxs)(b.P.button,{onClick:()=>Be(!Fe),className:"px-2 py-1.5 md:px-4 md:py-2 rounded-full flex items-center justify-center gap-1 md:gap-2 text-sm font-medium shadow-md transition-transform duration-300 \n                                ".concat("dark"===M?"bg-indigo-600 text-white":"bg-gradient-to-br from-indigo-100 to-indigo-200 text-indigo-700 border border-indigo-300"),whileTap:{scale:.9},children:["office"===ve?(0,C.jsx)(b.P.div,{className:"w-4 h-4 md:w-5 md:h-5 rounded-full bg-blue-500 flex items-center justify-center",whileHover:{rotate:360},children:(0,C.jsx)(k.ymh,{className:"text-white text-xs"})}):(0,C.jsx)(b.P.div,{className:"w-4 h-4 md:w-5 md:h-5 rounded-full bg-green-500 flex items-center justify-center",whileHover:{rotate:360},children:(0,C.jsx)(k.rQ8,{className:"text-white text-xs"})}),(0,C.jsx)("span",{className:"capitalize hidden sm:inline text-sm",children:ve})," ",(0,C.jsx)(b.P.svg,{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 md:h-4 md:w-4 ml-0.5 transition-transform duration-200 hidden sm:block",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",initial:{rotate:0},animate:{rotate:Fe?180:0},children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),(0,C.jsx)(v.N,{children:Fe&&(0,C.jsxs)(b.P.div,{className:"absolute top-full right-0 mt-2 w-48 p-3 border rounded-xl shadow-xl z-30 \n                                        ".concat("dark"===M?"bg-gray-700 text-white border-gray-600":"bg-white text-gray-800 border-gray-300"),initial:{opacity:0,y:-20,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.9},transition:{type:"spring",stiffness:300,damping:20},children:[(0,C.jsxs)("p",{className:"".concat("dark"===M?"text-gray-200":"text-gray-700"," font-medium text-xs mb-3 text-center"),children:["Switch to ","office"===ve?"Remote":"Office"," mode?"]}),(0,C.jsxs)("div",{className:"flex space-x-2",children:[(0,C.jsx)(b.P.button,{onClick:()=>lt("office"===ve?"home":"office"),className:"flex-1 px-3 py-1.5 bg-gradient-to-r from-indigo-600 to-indigo-700 text-white rounded-lg hover:from-indigo-700 hover:to-indigo-800 transition-colors font-semibold text-sm",whileTap:{scale:.95},children:"Confirm"}),(0,C.jsx)(b.P.button,{onClick:()=>Be(!1),className:"flex-1 px-3 py-1.5 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors font-medium text-sm",whileTap:{scale:.95},children:"Cancel"})]})]})})]})]})]}),(0,C.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-1",children:(0,C.jsx)(De,{theme:M,todayAttendance:Ee,isLoggedIn:ue,loading:Pe})}),(0,C.jsxs)("div",{className:"relative my-2 w-full flex justify-center",children:[(0,C.jsx)("div",{className:"absolute inset-0 flex items-center","aria-hidden":"true",children:(0,C.jsx)(b.P.div,{className:"w-full border-t ".concat("dark"===M?"border-gray-600":"border-gray-300"),initial:{scaleX:0},animate:{scaleX:1},transition:{delay:.6,duration:.8},style:{transformOrigin:"left"}})}),(0,C.jsx)("span",{className:"px-2 text-xs font-semibold z-10 ".concat("dark"===M?"bg-gray-800 text-indigo-400":"bg-white text-indigo-600"),children:"CURRENT CLOCK"})]}),(0,C.jsxs)("div",{className:"w-full flex flex-col items-center text-center mb-4 relative z-10",children:[(0,C.jsxs)("div",{className:"mb-4",children:[(0,C.jsxs)(b.P.div,{className:"flex items-center justify-center gap-2 text-indigo-600 font-medium mb-1",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.8,duration:.5},children:[(0,C.jsx)(o.A,{className:"w-5 h-5 text-indigo-500"})," ",(0,C.jsx)("span",{className:"text-sm",children:"Current Time"})]}),(0,C.jsx)(b.P.p,{className:"text-3xl md:text-3xl lg:text-3xl font-extrabold tracking-tight mb-1 ".concat("dark"===M?"text-white":"text-gray-900"),initial:{opacity:0},animate:{opacity:1},transition:{delay:1,duration:.5},children:we(Se)}),(0,C.jsx)(b.P.p,{className:"text-sm md:text-base font-medium ".concat("dark"===M?"text-gray-400":"text-gray-600"),initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:1.2,duration:.5},children:Se.toLocaleDateString(void 0,{weekday:"long",month:"long",day:"numeric",year:"numeric"})})]}),Pe?(0,C.jsx)("p",{className:"text-sm text-indigo-400 animate-pulse",children:"Fetching today's hours..."}):(0,C.jsxs)("div",{className:"grid grid-cols-2 gap-3 w-full max-w-xs md:max-w-md",children:[(0,C.jsxs)(b.P.div,{className:"rounded-xl p-2 shadow-sm text-center flex flex-col items-center justify-center ".concat("dark"===M?"bg-gray-700 text-white border border-indigo-500/50":"bg-indigo-50 border border-indigo-200"),transition:{type:"spring",stiffness:300},children:[(0,C.jsx)("div",{className:"text-xl font-bold text-indigo-500",children:kt}),(0,C.jsx)("div",{className:"text-xs font-semibold mt-1 text-gray-500",children:"Effective Hours"})]}),(0,C.jsxs)(b.P.div,{className:"rounded-xl p-2 shadow-sm text-center flex flex-col items-center justify-center ".concat("dark"===M?"bg-gray-700 text-white border border-pink-500/50":"bg-pink-50 border border-pink-200"),transition:{type:"spring",stiffness:300},children:[(0,C.jsx)("div",{className:"text-xl font-bold text-pink-500",children:wt}),(0,C.jsx)("div",{className:"text-xs font-semibold mt-1 text-gray-500",children:"Gross Hours"})]})]})]}),(0,C.jsx)("div",{className:"w-full flex justify-center mt-4 relative z-10",children:ue?(0,C.jsx)("div",{className:"flex flex-col sm:flex-row gap-3 justify-center w-full max-w-sm",children:(0,C.jsx)(v.N,{mode:"wait",children:$e?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(b.P.button,{onClick:async()=>{const e=new Date,t=await rt(ve);try{const e="https://hrms.anasolconsultancyservices.com/api/attendance/employee/".concat(null===I||void 0===I?void 0:I.employeeId,"/clock-out"),a=(()=>{try{return localStorage.getItem("accessToken")}catch(e){return null}})(),s={"Content-Type":"application/json",Accept:"*/*"};a&&(s.Authorization="Bearer ".concat(a));const n=await fetch(e,{method:"PUT",headers:s,body:JSON.stringify(t)});if(n.ok)console.log("Clock-out recorded successfully on server");else{const e=await n.text();console.error("Clock-out API call failed:",n.status,e),alert("Failed to record clock-out time on the server. Please try again or contact support.")}}catch(Ge){console.error("Error during clock-out API call:",Ge),alert("A network error occurred while clocking out. You have been logged out locally, but the server record might be missing.")}finally{We(null),localStorage.removeItem(bt),ge(!1),Re(!1),be(e),Mt(t=>{if(0===t.length)return t;const a=t.length-1,n=t[a];if(n.date===e.toLocaleDateString()&&!n.logout_time){const r=ie(n.login_time),l=new Date("2000-01-01T".concat(r,":00")),o=(e-l)/36e5,i=(0,s.A)((0,s.A)({},n),{},{logout_time:we(e),login_hours:o>0?o:0,barWidth:"".concat(o/8*100,"%")});return[...t.slice(0,a),i]}return t}),nt()}},className:"flex-1 items-center justify-center py-1 bg-gradient-to-r from-red-600 to-red-700 text-white rounded-xl shadow-md hover:shadow-lg transition-all duration-300 font-semibold text-sm",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},whileTap:{scale:.95},children:"Confirm Logout"},"confirm"),(0,C.jsx)(b.P.button,{onClick:()=>{Re(!1)},className:"flex-1 items-center justify-center py-1 rounded-xl shadow-sm transition-all duration-200 font-medium text-sm \n                                            ".concat("dark"===M?"bg-gray-600 text-gray-300 hover:bg-gray-500":"bg-gray-200 text-gray-700 hover:bg-gray-300"),initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},whileTap:{scale:.95},children:"Cancel"},"cancel")]}):(0,C.jsxs)(b.P.button,{onClick:()=>{Re(!0)},className:"flex items-center justify-center w-36 py-1.5 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:from-red-600 hover:to-red-700 font-bold text-lg",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},whileTap:{scale:.95},children:[(0,C.jsx)(o.A,{className:"w-5 h-5 mr-1.5"}),"Clock Out"]},"logout")})}):(0,C.jsxs)(b.P.button,{onClick:async()=>{try{const t=await rt(ve),a="https://hrms.anasolconsultancyservices.com/api/attendance/employee/".concat(E,"/clock-in"),s=(()=>{try{return localStorage.getItem("accessToken")}catch(e){return null}})(),n={Accept:"*/*","Content-Type":"application/json"};s&&(n.Authorization="Bearer ".concat(s));const r=await fetch(a,{method:"PUT",headers:n,body:JSON.stringify(t)});if(!r.ok){const e=await r.text();throw console.error("Clock-in API error:",e),alert("Error: ".concat(r.status," - ").concat(e)),new Error("".concat(r.status))}const l=await r.json().catch(()=>null);console.log("Clock-in successful:",l);const o=(null===l||void 0===l?void 0:l.attendanceId)||(null===l||void 0===l?void 0:l.id)||(null===l||void 0===l?void 0:l.attendance_id);o?We(o):console.warn("Attendance ID not received in clock-in response.");const i=(null===l||void 0===l?void 0:l.accessToken)||(null===l||void 0===l?void 0:l.token)||(null===l||void 0===l?void 0:l.jwt);if(i)try{localStorage.setItem("accessToken",i),console.log("Stored accessToken from server")}catch(e){console.warn("Failed to store accessToken:",e)}}catch(Ge){console.error("Clock-in failed:",Ge),ge(!1),pe(null)}await nt()},className:"flex items-center justify-center w-36 py-1.5 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:from-green-600 hover:to-green-700 font-bold text-lg",whileTap:{scale:.95},initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[(0,C.jsx)(o.A,{className:"w-5 h-5 mr-1.5"}),"Clock In"]})})]})}),(0,C.jsx)(Ne,{attendanceRecords:qe})]}),(0,C.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[(0,C.jsxs)(b.P.section,{className:"rounded-xl shadow-lg p-6 border border-gray-200 flex flex-col justify-between min-h-[450px] ".concat("dark"===M?"bg-gray-700 text-white":"bg-stone-100 text-gray-800"),initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.5,delay:.6},children:[(0,C.jsxs)("h2",{className:"text-xl sm:text-2xl font-bold  mb-4 text-center ".concat("dark"===M?"bg-gradient-to-br from-blue-200 to-blue-600 bg-clip-text text-transparent":"text-gray-800"),children:[(0,C.jsx)(i.A,{className:"w-6 h-6 inline-block mr-2 text-indigo-600"})," Daily Activity Breakdown"]}),(0,C.jsx)("div",{className:"mb-6 flex justify-center gap-2 flex-wrap",children:(0,C.jsxs)("div",{className:"mb-6 flex justify-center gap-2 flex-wrap",children:[yt>0&&(0,C.jsx)(b.P.button,{onClick:()=>ft(e=>Math.max(0,e-Dt)),className:"w-10 h-10 sm:w-12 sm:h-12 rounded-full text-base sm:text-sm font-small flex items-center justify-center bg-gray-200 text-gray-700 ".concat("dark"===M?"bg-gray-400 text-gray-300":""," cursor-pointer hover:bg-indigo-500 hover:text-white transition-colors duration-200 ease-in-out"),whileHover:{scale:1.1},whileTap:{scale:.9},"aria-label":"Previous dates",children:(0,C.jsx)(te.A,{className:"w-5 h-5"})}),mt.filter(e=>"All"!==e).slice(yt,yt+Dt).map(e=>{const t=ct.find(t=>t.Date===e),a=ot.find(t=>t.Date===e),s=t||a,n=s?"".concat(s.Date,"-").concat(s.Month,"-").concat(s.Year):e;return(0,C.jsx)(b.P.button,{onClick:()=>Q(n),className:"w-10 h-10 sm:w-12 sm:h-12 rounded-full text-base sm:text-sm font-small flex items-center justify-center bg-gray-200 text-gray-700 ".concat("dark"===M?"bg-gray-400 text-gray-300":""," cursor-pointer hover:bg-indigo-500 hover:text-white transition-colors duration-200 ease-in-out"),whileHover:{scale:1.1},whileTap:{scale:.9},children:e},e)}),yt+Dt<mt.length&&(0,C.jsx)(b.P.button,{onClick:()=>ft(e=>e+Dt),className:"w-10 h-10 sm:w-12 sm:h-12 rounded-full text-base sm:text-sm font-small flex items-center justify-center bg-gray-200 text-gray-700 ".concat("dark"===M?"bg-gray-400 text-gray-300":""," cursor-pointer hover:bg-indigo-500 hover:text-white transition-colors duration-200 ease-in-out"),whileHover:{scale:1.1},whileTap:{scale:.9},"aria-label":"Next dates",children:(0,C.jsx)(ae.A,{className:"w-5 h-5"})})]})}),(0,C.jsx)(ke,{Data:ut,selectedMetricDate:G}),(0,C.jsx)("div",{className:"flex-grow flex items-center justify-center",children:(0,C.jsx)(c.u,{width:"100%",height:ce?180:200,children:(0,C.jsxs)(d.r,{children:[(0,C.jsx)(m.F,{data:Ut,dataKey:"value",nameKey:"name",outerRadius:ce?60:80,label:e=>{let{percent:t}=e;return"".concat((100*t).toFixed(0),"%")},paddingAngle:2,children:Ut.map((e,t)=>(0,C.jsx)(x.f,{fill:se[t%se.length]},"cell-".concat(t)))}),(0,C.jsx)(u.m,{formatter:e=>"".concat(e.toFixed(1)," hours")}),(0,C.jsx)(g.s,{iconType:"circle",wrapperStyle:{paddingTop:"10px"}})]})})})]}),(0,C.jsxs)(b.P.section,{className:"rounded-xl shadow-lg p-6 border border-gray-200 flex flex-col justify-between min-h-[450px] ".concat("dark"===M?"bg-gray-700 text-white":"bg-stone-100 text-gray-800"),initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{duration:.5,delay:.8},children:[(0,C.jsxs)("h2",{className:"text-xl sm:text-2xl font-bold  mb-4 text-center ".concat("dark"===M?"bg-gradient-to-br from-pink-200 to-pink-600 bg-clip-text text-transparent":"text-gray-800"),children:[(0,C.jsx)(l.A,{className:"w-6 h-6 inline-block mr-2 text-indigo-600"})," Weekly Login & Break Hours"]}),(0,C.jsx)("div",{className:"flex-grow flex items-center justify-center",children:(0,C.jsx)(c.u,{width:"100%",height:ce?300:400,children:(0,C.jsxs)(h.E,{data:Yt,margin:{top:20,right:10,left:5,bottom:5},children:[(0,C.jsx)(p.W,{dataKey:"Date",stroke:Ht,axisLine:!1,tickLine:!1,padding:{left:10,right:10},tickFormatter:(e,t)=>Yt[t]?"".concat(Yt[t].Date,"-").concat(Yt[t].Month):e,className:"text-sm ".concat("dark"===M?"text-white":"text-gray-500")}),(0,C.jsx)(y.h,{allowDecimals:!1,hide:!0}),(0,C.jsx)(u.m,{cursor:{fill:"rgba(0,0,0,0.05)"}}),(0,C.jsx)(g.s,{wrapperStyle:{paddingTop:"10px"}}),(0,C.jsx)(f.y,{dataKey:"Work_Hours",stackId:"a",fill:ne,name:"Work Hours"}),(0,C.jsx)(f.y,{dataKey:"Break_Hours",stackId:"a",fill:re,name:"Break Hours"})]})})})]})]}),(0,C.jsx)("div",{className:"p-4 sm:p-8 ".concat("dark"===M?"bg-gray-900":"bg-gray-50"," min-h-screen"),children:(0,C.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,C.jsxs)("div",{className:"mb-8",children:[(0,C.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold mb-2 ".concat("dark"===M?"text-white":"text-gray-900"),children:"Employee Attendance Tracker"}),(0,C.jsx)("p",{className:"text-sm ".concat("dark"===M?"text-gray-300":"text-gray-600"),children:"Monitor and manage employee attendance records"})]}),(0,C.jsx)("div",{className:"mb-6 p-4 ".concat("dark"===M?"bg-gray-800":"bg-white"," rounded-xl border border-gray-200"),children:(0,C.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[(0,C.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 flex-wrap",children:[(0,C.jsxs)("select",{value:R,onChange:e=>z(e.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm min-w-[140px] ".concat("dark"===M?"bg-gray-700 text-gray-100":"bg-white text-gray-900"),children:[(0,C.jsx)("option",{value:"",children:"All Months"}),["January","February","March","April","May","June","July","August","September","October","November","December"].map(e=>(0,C.jsx)("option",{value:e,children:e},e))]}),(0,C.jsxs)("div",{className:"flex items-center gap-3 flex-wrap",children:[(0,C.jsxs)("div",{className:"flex items-center gap-2",children:[(0,C.jsx)("label",{className:"text-sm whitespace-nowrap ".concat("dark"===M?"text-gray-400":"text-gray-600"),children:"From"}),(0,C.jsx)("input",{type:"date",value:X,max:at,onChange:e=>V(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm ".concat("dark"===M?"bg-gray-700 text-gray-100":"bg-white text-gray-900")})]}),(0,C.jsxs)("div",{className:"flex items-center gap-2",children:[(0,C.jsx)("label",{className:"text-sm whitespace-nowrap ".concat("dark"===M?"text-gray-400":"text-gray-600"),children:"To"}),(0,C.jsx)("input",{type:"date",value:ee,max:at,onChange:e=>le(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm ".concat("dark"===M?"bg-gray-700 text-gray-100":"bg-white text-gray-900")})]})]}),(0,C.jsxs)("div",{className:"flex items-center gap-2",children:[(0,C.jsx)("button",{onClick:()=>{Ve(1)},className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors",children:"Apply"}),(0,C.jsx)("button",{onClick:()=>{V(""),le(""),Ve(1)},className:"px-4 py-2 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200 rounded-lg text-sm font-medium transition-colors",children:"Clear"})]})]}),(0,C.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,C.jsxs)("select",{value:Ue,onChange:e=>Ye(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm min-w-[160px] ".concat("dark"===M?"bg-gray-700 text-gray-100":"bg-white text-gray-900"),children:[(0,C.jsx)("option",{value:"Recantly Added",children:"Recently Added"}),(0,C.jsx)("option",{value:"Ascending",children:"Employee ID: Ascending"}),(0,C.jsx)("option",{value:"Descending",children:"Employee ID: Descending"}),(0,C.jsx)("option",{value:"This Month",children:"This Month"}),(0,C.jsx)("option",{value:"Last Month",children:"Last Month"}),(0,C.jsx)("option",{value:"Last 7 days",children:"Last 7 Days"})]}),(0,C.jsxs)("select",{value:et,onChange:e=>{tt(Number(e.target.value)),Ve(1)},className:"px-3 py-2 border border-gray-300 rounded-lg text-sm ".concat("dark"===M?"bg-gray-700 text-gray-100":"bg-white text-gray-900"),children:[(0,C.jsx)("option",{value:6,children:"6 per page"}),(0,C.jsx)("option",{value:12,children:"12 per page"}),(0,C.jsx)("option",{value:24,children:"24 per page"})]})]})]})}),(0,C.jsxs)("div",{className:"rounded-lg shadow-sm border border-gray-200 overflow-hidden ".concat("dark"===M?"bg-gray-800 text-gray-100":"bg-white text-gray-900"),children:[(0,C.jsx)("div",{className:"overflow-x-auto",children:(0,C.jsxs)("table",{className:"w-full",children:[(0,C.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200 ".concat("dark"===M?"bg-gray-800 text-gray-100":"bg-white text-gray-900"),children:(0,C.jsxs)("tr",{children:[(0,C.jsx)("th",{className:"py-3 px-4 text-left text-xs font-medium uppercase tracking-wider hidden sm:table-cell ".concat("dark"===M?"text-gray-300":"text-gray-800"," "),children:"Date"}),(0,C.jsx)("th",{className:"py-3 px-4 text-left text-xs font-medium uppercase tracking-wider hidden sm:table-cell ".concat("dark"===M?"text-gray-300":"text-gray-800"," "),children:"Mode"}),(0,C.jsx)("th",{className:"py-3 px-4 text-left text-xs font-medium uppercase tracking-wider hidden sm:table-cell ".concat("dark"===M?"text-gray-300":"text-gray-800"," "),children:"Login"}),(0,C.jsx)("th",{className:"py-3 px-4 text-left text-xs font-medium uppercase tracking-wider hidden sm:table-cell ".concat("dark"===M?"text-gray-300":"text-gray-800"," "),children:"Logout"}),(0,C.jsx)("th",{className:"py-3 px-4 text-left text-xs font-medium uppercase tracking-wider hidden sm:table-cell ".concat("dark"===M?"text-gray-300":"text-gray-800"," "),children:"Total Duration"}),(0,C.jsx)("th",{className:"py-3 px-4 text-left text-xs font-medium uppercase tracking-wider hidden sm:table-cell ".concat("dark"===M?"text-gray-300":"text-gray-800"," "),children:"Effective Hours"}),(0,C.jsx)("th",{className:"py-3 px-4 text-left text-xs font-medium uppercase tracking-wider hidden sm:table-cell ".concat("dark"===M?"text-gray-300":"text-gray-800"," "),children:"Status"}),(0,C.jsx)("th",{className:"py-3 px-4 text-left text-xs font-medium uppercase tracking-wider sm:hidden ".concat("dark"===M?"text-gray-300":"text-gray-800"," "),children:"Attendance Details"})]})}),(0,C.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-600",children:Je?(0,C.jsx)("tr",{children:(0,C.jsx)("td",{colSpan:8,className:"py-8 px-4 text-center",children:(0,C.jsxs)("div",{className:"flex justify-center items-center",children:[(0,C.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),(0,C.jsx)("span",{className:"ml-2 ".concat("dark"===M?"text-gray-300":"text-gray-600"),children:"Loading attendance data..."})]})})}):Ge?(0,C.jsx)("tr",{children:(0,C.jsxs)("td",{colSpan:8,className:"py-8 px-4 text-center",children:[(0,C.jsx)("div",{className:"font-medium ".concat("dark"===M?"text-red-400":"text-red-600"),children:"Error loading attendance records"}),(0,C.jsx)("div",{className:"text-sm ".concat("dark"===M?"text-gray-400":"text-gray-600"," mt-1"),children:Ge})]})}):0===Wt.length?(0,C.jsx)("tr",{children:(0,C.jsx)("td",{colSpan:8,className:"py-8 px-4 text-center",children:(0,C.jsx)("div",{className:"".concat("dark"===M?"text-gray-400":"text-gray-600"),children:"No attendance records found for the selected filters"})})}):Wt.map(e=>{const t=e.totalDurationHHMM||"N/A",a=e.effectiveHoursDisplay||"N/A",s=e.attended?"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100":"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100";return(0,C.jsxs)("tr",{className:"transition-colors",children:[(0,C.jsx)("td",{className:"py-4 px-4 text-sm hidden sm:table-cell ".concat("dark"===M?"text-gray-200":"text-gray-900"),children:e.date}),(0,C.jsx)("td",{className:"py-4 px-4 hidden sm:table-cell",children:(0,C.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("Office"===e.mode?"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100":"bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100"),children:e.mode})}),(0,C.jsx)("td",{className:"py-4 px-4 text-sm hidden sm:table-cell ".concat("dark"===M?"text-gray-200":"text-gray-900"),children:e.loginDisplay}),(0,C.jsx)("td",{className:"py-4 px-4 text-sm hidden sm:table-cell ".concat("dark"===M?"text-gray-200":"text-gray-900"),children:e.logoutDisplay}),(0,C.jsx)("td",{className:"py-4 px-4 text-sm font-medium hidden sm:table-cell ".concat("dark"===M?"text-blue-300":"text-blue-700"),children:t}),(0,C.jsx)("td",{className:"py-4 px-4 text-sm font-semibold hidden sm:table-cell ".concat("dark"===M?"text-green-300":"text-green-700"),children:a}),(0,C.jsx)("td",{className:"py-4 px-4 hidden sm:table-cell",children:(0,C.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(s),children:e.attended?"Present":"Absent"})}),(0,C.jsx)("td",{className:"py-4 px-4 sm:hidden",children:(0,C.jsxs)("div",{className:"space-y-2",children:[(0,C.jsxs)("div",{className:"flex justify-between items-start",children:[(0,C.jsx)("span",{className:"font-semibold ".concat("dark"===M?"text-blue-300":"text-blue-700"),children:e.employeeId}),(0,C.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ".concat(s),children:e.attended?"Present":"Absent"})]}),(0,C.jsxs)("div",{className:"text-sm space-y-1",children:[(0,C.jsxs)("div",{className:"flex justify-between",children:[(0,C.jsx)("span",{className:"".concat("dark"===M?"text-gray-400":"text-gray-600"),children:"Date:"}),(0,C.jsx)("span",{className:"dark"===M?"text-gray-200":"text-gray-900",children:e.date})]}),(0,C.jsxs)("div",{className:"flex justify-between",children:[(0,C.jsx)("span",{className:"".concat("dark"===M?"text-gray-400":"text-gray-600"),children:"Mode:"}),(0,C.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs ".concat("Office"===e.mode?"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100":"bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100"),children:e.mode})]}),(0,C.jsxs)("div",{className:"flex justify-between",children:[(0,C.jsx)("span",{className:"".concat("dark"===M?"text-gray-400":"text-gray-600"),children:"Time:"}),(0,C.jsxs)("span",{className:"dark"===M?"text-gray-200":"text-gray-900",children:[e.loginDisplay," - ",e.logoutDisplay]})]}),(0,C.jsxs)("div",{className:"flex justify-between",children:[(0,C.jsx)("span",{className:"".concat("dark"===M?"text-gray-400":"text-gray-600"),children:"Total Hours:"}),(0,C.jsx)("span",{className:"dark"===M?"text-blue-300":"text-blue-700",children:t})]}),(0,C.jsxs)("div",{className:"flex justify-between",children:[(0,C.jsx)("span",{className:"".concat("dark"===M?"text-gray-400":"text-gray-600"),children:"Effective:"}),(0,C.jsx)("span",{className:"dark"===M?"text-green-300":"text-green-700",children:a})]})]})]})})]},"".concat(e.employeeId,"-").concat(e.date))})})]})}),(0,C.jsx)("div",{className:"px-4 py-3 border-t border-gray-200 flex items-center justify-between ".concat("dark"===M?"bg-gray-800":"bg-white"),children:(0,C.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[(0,C.jsxs)("div",{className:"text-sm ".concat("dark"===M?"text-gray-400":"text-gray-700"),children:["Showing ",(0,C.jsx)("span",{className:"font-medium",children:Wt.length})," of"," ",(0,C.jsx)("span",{className:"font-medium",children:Rt.length})," records"]}),(0,C.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,C.jsx)("button",{onClick:()=>Ve(e=>Math.max(1,e-1)),disabled:Xe<=1,className:"px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50  transition-colors ".concat("dark"===M?"bg-gray-600 text-gray-200 hover:bg-gray-500":"bg-white text-gray-700 hover:bg-gray-100"),children:"Previous"}),(0,C.jsxs)("span",{className:"px-3 py-1 text-sm ".concat("dark"===M?"text-gray-300":"text-gray-700"),children:["Page ",(0,C.jsx)("span",{className:"font-medium",children:Xe})," of"," ",(0,C.jsx)("span",{className:"font-medium",children:zt})]}),(0,C.jsx)("button",{onClick:()=>Ve(e=>Math.min(zt,e+1)),disabled:Xe>=zt,className:"px-3 py-1 text-sm border border-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors ".concat("dark"===M?"bg-gray-600 text-gray-200 hover:bg-gray-500":"bg-white text-gray-700 hover:bg-gray-100"),children:"Next"})]})]})})]}),(0,C.jsx)("div",{className:"mt-4 text-center",children:(0,C.jsxs)("p",{className:"text-sm ".concat("dark"===M?"text-gray-400":"text-gray-600"),children:["Displaying ",(0,C.jsx)("strong",{children:Rt.length})," attendance record(s) based on current filters"]})})]})})]},"dashboard")]})]})]})]})}}}]);
//# sourceMappingURL=404.28ae9a84.chunk.js.map