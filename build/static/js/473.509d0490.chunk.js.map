{"version":3,"file":"static/js/473.509d0490.chunk.js","mappings":"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","sources":["TechLife/HRMS/Components/Employees/EmployeeProfile.jsx","TechLife/HRMS/Components/Employees/EmployeeApp.jsx","TechLife/HRMS/Components/Employees/Employees.jsx"],"sourcesContent":["import React, { useEffect, useState, useContext } from \"react\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport { Context } from \"../HrmsContext\";\r\nimport { motion } from \"framer-motion\";\r\nimport {\r\n  FiMail,\r\n  FiMapPin,\r\n  FiBriefcase,\r\n  FiArrowLeft,\r\n  FiPhone,\r\n  FiHash,\r\n  FiAward,\r\n} from \"react-icons/fi\";\r\nimport { publicinfoApi } from \"../../../../axiosInstance\";\r\n\r\n// Helper function to generate initials\r\nconst generateInitials = (name) => {\r\n  if (!name) return \"\";\r\n  const nameParts = name.split(\" \");\r\n  if (nameParts.length > 1) {\r\n    return (nameParts[0][0] + nameParts[nameParts.length - 1][0]).toUpperCase();\r\n  }\r\n  return nameParts[0][0].toUpperCase();\r\n};\r\n\r\nconst EmployeeProfile = () => {\r\n  const { empID, employeeID } = useParams();\r\n  const navigate = useNavigate();\r\n  const { theme } = useContext(Context);\r\n\r\n  const [employee, setEmployee] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (!employeeID) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    const fetchEmployee = async () => {\r\n      setLoading(true);\r\n      try {\r\n        let response = await publicinfoApi.get(\r\n          `employee/public/${employeeID}/details`\r\n        );\r\n        console.log(\"Employee details:\", response.data);\r\n        setEmployee(response.data);\r\n      } catch (error) {\r\n        console.error(\"Failed to fetch employee details:\", error);\r\n        setEmployee(null);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchEmployee();\r\n  }, [employeeID]);\r\n\r\n  // Loading state\r\n  if (loading) {\r\n    return (\r\n      <div className={`min-h-screen flex items-center justify-center px-4 ${\r\n        theme === 'dark' ? 'bg-gray-900' : 'bg-white'\r\n      }`}>\r\n        <p className={`text-base sm:text-lg md:text-xl font-mono animate-pulse text-center ${\r\n          theme === 'dark' ? 'text-white' : 'text-gray-800'\r\n        }`}>LOADING...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Not found state\r\n  if (!employee) {\r\n    return (\r\n      <div className={`min-h-screen flex items-center justify-center p-4 sm:p-8 ${\r\n        theme === 'dark' ? 'bg-gray-900' : 'bg-white'\r\n      }`}>\r\n        <div className=\"text-center max-w-sm sm:max-w-md\">\r\n          <h2 className={`text-xl sm:text-2xl md:text-3xl font-bold font-mono mb-4 break-words ${\r\n            theme === 'dark' ? 'text-white' : 'text-gray-900'\r\n          }`}>\r\n            EMPLOYEE NOT FOUND\r\n          </h2>\r\n          <p className={`mb-4 sm:mb-6 font-mono text-sm sm:text-base break-words ${\r\n            theme === 'dark' ? 'text-gray-300' : 'text-gray-600'\r\n          }`}>Data unavailable for this employee ID.</p>\r\n          <button\r\n            onClick={() => navigate(-1)}\r\n            className={`w-full sm:w-auto inline-flex items-center justify-center px-4 sm:px-6 py-2 sm:py-3 border-2 text-sm sm:text-base font-bold font-mono transition-colors rounded-lg ${\r\n              theme === 'dark'\r\n                ? 'border-white text-white hover:bg-white hover:text-gray-900'\r\n                : 'border-gray-900 text-gray-900 hover:bg-gray-900 hover:text-white'\r\n            }`}\r\n          >\r\n            <FiArrowLeft className=\"mr-2 w-4 h-4 sm:w-5 sm:h-5\" /> BACK TO DIRECTORY\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Employee profile view\r\n  return (\r\n    <motion.div\r\n      initial={{ opacity: 0 }}\r\n      animate={{ opacity: 1 }}\r\n      exit={{ opacity: 0 }}\r\n      className={`min-h-screen font-sans px-0 sm:px-4 md:px-6 lg:px-8 py-4 sm:py-6 md:py-8 ${\r\n        theme === 'dark' ? 'bg-gray-900 text-white' : 'bg-white text-gray-900'\r\n      }`}\r\n    >\r\n      <div className=\"max-w-7xl mx-auto\">\r\n        <motion.button\r\n         onClick={() => navigate(-1)}\r\n          className={`mb-6 sm:mb-8 inline-flex items-center cursor-pointer transition-colors px-4 sm:px-0 text-sm sm:text-base ${\r\n            theme === 'dark' \r\n              ? 'text-gray-300 hover:text-white' \r\n              : 'text-gray-600 hover:text-gray-900'\r\n          }`}\r\n          whileHover={{ x: -10 }}\r\n        >\r\n          <FiArrowLeft className=\"mr-2 w-4 h-4 sm:w-5 sm:h-5\" /> BACK\r\n        </motion.button>\r\n\r\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 sm:gap-8 md:gap-12\">\r\n          {/* Profile Section */}\r\n          <div className={`col-span-1 border-b-2 md:border-b-0 md:border-r-2 pb-6 md:pb-0 md:pr-8 lg:pr-12 ${\r\n            theme === 'dark' ? 'border-gray-600' : 'border-gray-300'\r\n          }`}>\r\n            <motion.div\r\n              initial={{ y: 20, opacity: 0 }}\r\n              animate={{ y: 0, opacity: 1 }}\r\n              transition={{ duration: 0.6 }}\r\n              className={`w-32 h-32 sm:w-36 sm:h-36 md:w-40 md:h-40 rounded-full overflow-hidden mx-auto md:mx-0 mb-4 sm:mb-6 border-4 ${\r\n                theme === 'dark' ? 'border-white' : 'border-gray-900'\r\n              }`}\r\n            >\r\n              {employee.employeeImage ? (\r\n                <img\r\n                  src={employee.employeeImage}\r\n                  alt={`${employee.displayName || employee.name}'s profile picture`}\r\n                  className=\"w-full h-full object-cover\"\r\n                />\r\n              ) : (\r\n                <div className={`w-full h-full flex items-center justify-center text-2xl sm:text-3xl md:text-4xl font-bold ${\r\n                  theme === 'dark' \r\n                    ? 'bg-gray-700 text-white' \r\n                    : 'bg-gray-200 text-gray-900'\r\n                }`}>\r\n                  {generateInitials(employee.displayName || employee.name)}\r\n                </div>\r\n              )}\r\n            </motion.div>\r\n            <motion.div\r\n              initial={{ y: 20, opacity: 0 }}\r\n              animate={{ y: 0, opacity: 1 }}\r\n              transition={{ duration: 0.6, delay: 0.2 }}\r\n              className=\"px-4 md:px-0\"\r\n            >\r\n              <h1 className={`text-2xl sm:text-3xl md:text-4xl font-extrabold text-center md:text-left break-words ${\r\n                theme === 'dark' ? 'text-white' : 'text-gray-900'\r\n              }`}>\r\n                {employee.displayName || employee.name || 'N/A'}\r\n              </h1>\r\n              <p className=\"text-base sm:text-lg font-medium text-red-500 text-center md:text-left mt-2 break-words\">\r\n                {employee.jobTitlePrimary || 'N/A'}\r\n              </p>\r\n            </motion.div>\r\n          </div>\r\n\r\n          {/* Details Section */}\r\n          <div className=\"col-span-1 md:col-span-2 px-4 md:px-0\">\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-6 sm:gap-8\">\r\n              <motion.div\r\n                initial={{ opacity: 0, y: 20 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                transition={{ duration: 0.6, delay: 0.4 }}\r\n              >\r\n                <h2 className={`text-lg sm:text-xl md:text-2xl font-bold mb-4 ${\r\n                  theme === 'dark' ? 'text-white' : 'text-gray-900'\r\n                }`}>DETAILS</h2>\r\n                <div className=\"space-y-4 sm:space-y-6\">\r\n                  <InfoItem \r\n                    icon={<FiHash />} \r\n                    label=\"Employee ID\" \r\n                    value={employee.employeeId} \r\n                    theme={theme}\r\n                  />\r\n                  <InfoItem \r\n                    icon={<FiBriefcase />} \r\n                    label=\"Department\" \r\n                    value={employee.departmentId} \r\n                    theme={theme}\r\n                  />\r\n                  <InfoItem \r\n                    icon={<FiMapPin />} \r\n                    label=\"Location\" \r\n                    value={employee.location} \r\n                    theme={theme}\r\n                  />\r\n                </div>\r\n              </motion.div>\r\n              <motion.div\r\n                initial={{ opacity: 0, y: 20 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                transition={{ duration: 0.6, delay: 0.6 }}\r\n              >\r\n                <h2 className={`text-lg sm:text-xl md:text-2xl font-bold mb-4 ${\r\n                  theme === 'dark' ? 'text-white' : 'text-gray-900'\r\n                }`}>CONTACT</h2>\r\n                <div className=\"space-y-4 sm:space-y-6\">\r\n                  <InfoItem \r\n                    icon={<FiMail />} \r\n                    label=\"Email\" \r\n                    value={employee.workEmail} \r\n                    isMail={true} \r\n                    theme={theme}\r\n                  />\r\n                  <InfoItem \r\n                    icon={<FiPhone />} \r\n                    label=\"Contact\" \r\n                    value={employee.contact} \r\n                    theme={theme}\r\n                  />\r\n                </div>\r\n              </motion.div>\r\n            </div>\r\n\r\n            {/* Achievements Section */}\r\n            <motion.div\r\n              initial={{ opacity: 0, y: 20 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              transition={{ duration: 0.6, delay: 0.8 }}\r\n              className={`mt-8 sm:mt-12 pt-6 sm:pt-8 border-t-2 ${\r\n                theme === 'dark' ? 'border-gray-600' : 'border-gray-300'\r\n              }`}\r\n            >\r\n              <h2 className={`text-lg sm:text-xl md:text-2xl font-bold mb-4 sm:mb-6 ${\r\n                theme === 'dark' ? 'text-white' : 'text-gray-900'\r\n              }`}>ACHIEVEMENTS</h2>\r\n              <div className=\"space-y-4 sm:space-y-6 max-h-80 sm:max-h-96 overflow-y-auto pr-2\">\r\n                {employee.achievements?.length > 0 ? (\r\n                  employee.achievements.map((achievement, index) => (\r\n                    <motion.div\r\n                      key={index}\r\n                      initial={{ opacity: 0, x: -20 }}\r\n                      animate={{ opacity: 1, x: 0 }}\r\n                      transition={{ delay: 0.1 * index }}\r\n                      className={`border-2 p-3 sm:p-4 flex flex-col sm:flex-row items-start sm:items-center space-y-3 sm:space-y-0 sm:space-x-4 rounded-lg ${\r\n                        theme === 'dark' ? 'border-gray-600' : 'border-gray-300'\r\n                      }`}\r\n                    >\r\n                      <FiAward className=\"text-lg sm:text-xl text-yellow-500 flex-shrink-0\" />\r\n                      <div className=\"min-w-0 flex-1\">\r\n                        <h3 className={`text-base sm:text-lg font-bold break-words ${\r\n                          theme === 'dark' ? 'text-white' : 'text-gray-900'\r\n                        }`}>{achievement.certificationName || 'N/A'}</h3>\r\n                        <p className={`mt-1 text-xs sm:text-sm break-words ${\r\n                          theme === 'dark' ? 'text-gray-300' : 'text-gray-600'\r\n                        }`}>\r\n                          <span className=\"font-semibold\">Issuing Authority:</span> {achievement.issuingAuthorityName || 'N/A'}\r\n                        </p>\r\n                      </div>\r\n                    </motion.div>\r\n                  ))\r\n                ) : (\r\n                  <p className={`italic text-sm sm:text-base ${\r\n                    theme === 'dark' ? 'text-gray-400' : 'text-gray-500'\r\n                  }`}>No achievements available</p>\r\n                )}\r\n              </div>\r\n            </motion.div>\r\n\r\n            {/* Projects Section */}\r\n            <motion.div\r\n              initial={{ opacity: 0, y: 20 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              transition={{ duration: 0.6, delay: 1.0 }}\r\n              className={`mt-8 sm:mt-12 pt-6 sm:pt-8 border-t-2 ${\r\n                theme === 'dark' ? 'border-gray-600' : 'border-gray-300'\r\n              }`}\r\n            >\r\n              <h2 className={`text-lg sm:text-xl md:text-2xl font-bold mb-4 sm:mb-6 ${\r\n                theme === 'dark' ? 'text-white' : 'text-gray-900'\r\n              }`}>PROJECTS</h2>\r\n              <div className=\"space-y-4 sm:space-y-6 max-h-80 sm:max-h-96 overflow-y-auto pr-2\">\r\n                {employee.projects?.length > 0 ? (\r\n                  employee.projects.map((project, index) => (\r\n                    <motion.div\r\n                      key={index}\r\n                      initial={{ opacity: 0, x: -20 }}\r\n                      animate={{ opacity: 1, x: 0 }}\r\n                      transition={{ delay: 0.1 * index }}\r\n                      className={`border-2 p-3 sm:p-4 rounded-lg ${\r\n                        theme === 'dark' ? 'border-gray-600' : 'border-gray-300'\r\n                      }`}\r\n                    >\r\n                      <h3 className={`text-base sm:text-lg font-bold break-words ${\r\n                        theme === 'dark' ? 'text-white' : 'text-gray-900'\r\n                      }`}>{project.projectName || 'N/A'}</h3>\r\n                      <p className={`mt-2 text-xs sm:text-sm break-words ${\r\n                        theme === 'dark' ? 'text-gray-300' : 'text-gray-600'\r\n                      }`}>{project.projectDescription || 'N/A'}</p>\r\n                    </motion.div>\r\n                  ))\r\n                ) : (\r\n                  <p className={`italic text-sm sm:text-base ${\r\n                    theme === 'dark' ? 'text-gray-400' : 'text-gray-500'\r\n                  }`}>No projects available</p>\r\n                )}\r\n              </div>\r\n            </motion.div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </motion.div>\r\n  );\r\n};\r\n\r\nconst InfoItem = ({ icon, label, value, isMail = false, theme }) => (\r\n  <motion.div\r\n    initial={{ opacity: 0, x: -10 }}\r\n    animate={{ opacity: 1, x: 0 }}\r\n    transition={{ duration: 0.4 }}\r\n    className=\"flex items-start space-x-3 sm:space-x-4\"\r\n  >\r\n    <div className={`mt-1 text-base sm:text-lg flex-shrink-0 ${\r\n      theme === 'dark' ? 'text-gray-400' : 'text-gray-600'\r\n    }`}>{icon}</div>\r\n    <div className=\"flex-grow min-w-0\">\r\n      <p className={`text-xs uppercase break-words ${\r\n        theme === 'dark' ? 'text-gray-400' : 'text-gray-500'\r\n      }`}>{label}</p>\r\n      {isMail ? (\r\n        <a \r\n          href={`mailto:${value}`} \r\n          className={`font-semibold text-sm sm:text-base transition-colors break-words ${\r\n            theme === 'dark' \r\n              ? 'text-white hover:text-red-400' \r\n              : 'text-gray-900 hover:text-red-500'\r\n          }`}\r\n        >\r\n          {value || 'N/A'}\r\n        </a>\r\n      ) : (\r\n        <p className={`font-semibold text-sm sm:text-base break-words ${\r\n          theme === 'dark' ? 'text-white' : 'text-gray-900'\r\n        }`}>{value || 'N/A'}</p>\r\n      )}\r\n    </div>\r\n  </motion.div>\r\n);\r\n\r\nexport default EmployeeProfile;\r\n","import React, { useState, useEffect, useContext, useRef, useCallback } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { Context } from '../HrmsContext';\r\nimport { authApi, publicinfoApi, payroll, attendanceApi } from '../../../../axiosInstance';\r\nimport {\r\n    IoSearchOutline,\r\n    IoLockClosed,\r\n    IoMailOutline,\r\n    IoLocationOutline,\r\n    IoBriefcaseOutline,\r\n    IoPersonOutline,\r\n    IoBusinessOutline,\r\n    IoFilterOutline,\r\n    IoChatbubbleOutline,\r\n    IoChevronDownOutline,\r\n    IoGridOutline,\r\n    IoListOutline,\r\n    IoRefreshOutline,\r\n    IoDocumentsOutline,\r\n    IoInformationCircleOutline,\r\n    IoAddCircleOutline,\r\n    IoCloseCircleOutline,\r\n    IoClose,\r\n    IoArrowBack,\r\n    IoArrowForward,\r\n    IoWarning,\r\n    IoCheckmarkCircle,\r\n    IoIdCardOutline,\r\n    IoPeopleOutline,\r\n    IoTrashOutline,\r\n    IoCloudUpload,\r\n    IoCalendarOutline,\r\n    IoFitness,\r\n    IoGlobe,\r\n    IoKeyOutline,\r\n} from 'react-icons/io5';\r\n\r\n// --- Reusable Modal Component ---\r\nconst Modal = ({ children, onClose, title, type, theme }) => {\r\n    let titleClass = \"\";\r\n    let icon = null;\r\n\r\n    if (type === \"success\") {\r\n        titleClass = \"text-green-600\";\r\n        icon = <IoCheckmarkCircle className=\"h-5 w-5 sm:h-6 sm:w-6 text-green-500\" />;\r\n    } else if (type === \"error\") {\r\n        titleClass = \"text-red-600\";\r\n        icon = <IoWarning className=\"h-5 w-5 sm:h-6 sm:w-6 text-red-500\" />;\r\n    } else if (type === \"confirm\") {\r\n        titleClass = \"text-yellow-600\";\r\n        icon = <IoWarning className=\"h-5 w-5 sm:h-6 sm:w-6 text-yellow-500\" />;\r\n    } else if (type === \"default\") {\r\n        titleClass = theme === 'dark' ? \"text-white\" : \"text-gray-900\";\r\n        icon = <IoInformationCircleOutline className=\"h-5 w-5 sm:h-6 sm:w-6 text-blue-500\" />;\r\n    }\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 sm:p-6 z-[1000]\">\r\n            <div className={`w-full max-w-md rounded-2xl sm:rounded-3xl shadow-2xl ${\r\n                theme === 'dark' ? 'bg-gray-800 border border-gray-700' : 'bg-white border border-gray-200'\r\n            }`}>\r\n                <div className=\"p-4 sm:p-6\">\r\n                    <div className=\"flex items-center space-x-3 sm:space-x-4 mb-4 sm:mb-6\">\r\n                        {icon && <span className=\"mr-2 sm:mr-3\">{icon}</span>}\r\n                        <h3 className={`text-lg sm:text-xl font-bold ${titleClass} ${\r\n                            theme === 'dark' ? 'text-white' : 'text-gray-800'\r\n                        }`}>\r\n                            {title}\r\n                        </h3>\r\n                        {onClose && (\r\n                            <button\r\n                                onClick={onClose}\r\n                                className={`ml-auto p-1 rounded-full ${theme === 'dark' ? 'text-gray-400 hover:bg-gray-700' : 'text-gray-500 hover:bg-gray-100'}`}\r\n                            >\r\n                                <IoClose className=\"w-5 h-5\" />\r\n                            </button>\r\n                        )}\r\n                    </div>\r\n                    <div className=\"space-y-4 sm:space-y-6\">\r\n                        {children}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n// --- Reusable Input Field Component ---\r\nconst InputField = ({\r\n    name,\r\n    label,\r\n    type = 'text',\r\n    required = false,\r\n    hint,\r\n    placeholder,\r\n    value,\r\n    onChange,\r\n    onBlur,\r\n    isError,\r\n    options = [],\r\n    multiple = false,\r\n    accept,\r\n    theme,\r\n    maxLength,\r\n    disabled = false\r\n}) => {\r\n    const normalizedValue = value === null || value === undefined ? '' : value;\r\n\r\n    const baseInputClass = `w-full px-4 sm:px-5 py-3 sm:py-4 border-2 rounded-lg sm:rounded-xl focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 focus:outline-none ${\r\n        isError\r\n            ? 'border-red-300 bg-red-50 focus:border-red-500 focus:ring-red-500/20'\r\n            : theme === 'dark'\r\n            ? 'border-gray-600 bg-gray-700 text-white'\r\n            : 'border-gray-200 bg-white'\r\n    } disabled:bg-gray-100 dark:disabled:bg-gray-700 dark:disabled:text-gray-400 disabled:cursor-not-allowed`;\r\n\r\n    const textareaClass = `w-full px-4 sm:px-5 py-3 sm:py-4 border-2 rounded-lg sm:rounded-xl resize-none h-24 sm:h-32 focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 focus:outline-none ${\r\n        isError\r\n            ? 'border-red-300 bg-red-50 focus:border-red-500 focus:ring-red-500/20'\r\n            : theme === 'dark'\r\n            ? 'border-gray-600 bg-gray-700 text-white'\r\n            : 'border-gray-200 bg-white'\r\n    } disabled:bg-gray-100 dark:disabled:bg-gray-700 dark:disabled:text-gray-400 disabled:cursor-not-allowed`;\r\n\r\n    const selectClass = `w-full px-4 sm:px-5 py-3 sm:py-4 border-2 rounded-lg sm:rounded-xl appearance-none focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 focus:outline-none ${\r\n        isError\r\n            ? 'border-red-300 bg-red-50 focus:border-red-500 focus:ring-red-500/20'\r\n            : theme === 'dark'\r\n            ? 'border-gray-600 bg-gray-700 text-white'\r\n            : 'border-gray-200 bg-white'\r\n    } disabled:bg-gray-100 dark:disabled:bg-gray-700 dark:disabled:text-gray-400 disabled:cursor-not-allowed`;\r\n\r\n    return (\r\n        <div className=\"group relative\" key={name}>\r\n            <label className={`block text-xs sm:text-sm font-semibold mb-2 sm:mb-3 flex items-center ${\r\n                theme === 'dark' ? 'text-gray-200' : 'text-gray-800'\r\n            }`}>\r\n                {label}\r\n                {required && <span className=\"text-red-500 ml-1 text-sm sm:text-base\">*</span>}\r\n            </label>\r\n\r\n            {hint && (\r\n                <p className={`text-xs mb-2 ${\r\n                    theme === 'dark' ? 'text-gray-400' : 'text-gray-500'\r\n                }`}>\r\n                    {hint}\r\n                </p>\r\n            )}\r\n\r\n            {type === 'select' ? (\r\n                <div className=\"relative\">\r\n                    <select\r\n                        name={name}\r\n                        value={normalizedValue}\r\n                        onChange={onChange}\r\n                        onBlur={onBlur}\r\n                        className={selectClass}\r\n                        required={required}\r\n                        disabled={disabled}\r\n                    >\r\n                        <option value=\"\">Select {label.toLowerCase()}</option>\r\n                        {options.map((option, index) => (\r\n                            <option key={index} value={option.value || option}>\r\n                                {option.label || option}\r\n                            </option>\r\n                        ))}\r\n                    </select>\r\n                    <div className={`absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none ${\r\n                        theme === 'dark' ? 'text-gray-400' : 'text-gray-500'\r\n                    }`}>\r\n                        <svg className=\"w-4 h-4 fill-current\" viewBox=\"0 0 20 20\">\r\n                            <path d=\"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z\" />\r\n                        </svg>\r\n                    </div>\r\n                </div>\r\n            ) : type === 'textarea' ? (\r\n                <textarea\r\n                    name={name}\r\n                    value={normalizedValue}\r\n                    onChange={onChange}\r\n                    onBlur={onBlur}\r\n                    placeholder={placeholder}\r\n                    className={textareaClass}\r\n                    required={required}\r\n                    rows={4}\r\n                    maxLength={maxLength}\r\n                    disabled={disabled}\r\n                />\r\n            ) : type === 'file' ? (\r\n                <div className={`relative border-2 border-dashed rounded-lg sm:rounded-xl ${\r\n                    isError\r\n                        ? 'border-red-300 bg-red-50'\r\n                        : theme === 'dark'\r\n                        ? 'border-gray-600 bg-gray-800'\r\n                        : 'border-gray-300 bg-gray-50'\r\n                } ${disabled ? 'cursor-not-allowed opacity-60' : 'cursor-pointer'}`}>\r\n                    <input\r\n                        type=\"file\"\r\n                        name={name}\r\n                        accept={accept}\r\n                        multiple={multiple}\r\n                        onChange={onChange}\r\n                        className=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10\"\r\n                        disabled={disabled}\r\n                    />\r\n                    <div className=\"px-4 sm:px-6 py-6 sm:py-8 text-center\">\r\n                        <IoCloudUpload className={`mx-auto h-10 w-10 sm:h-12 sm:w-12 mb-3 sm:mb-4 ${\r\n                            theme === 'dark' ? 'text-gray-500' : 'text-gray-400'\r\n                        }`} />\r\n                        <p className={`text-xs sm:text-sm font-medium mb-1 ${\r\n                            theme === 'dark' ? 'text-gray-300' : 'text-gray-600'\r\n                        }`}>\r\n                            Drop your file here, or <span className=\"text-blue-600\">browse</span>\r\n                        </p>\r\n                        <p className={`text-xs ${\r\n                            theme === 'dark' ? 'text-gray-500' : 'text-gray-400'\r\n                        }`}>\r\n                            {accept || 'All file types supported'}\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            ) : (\r\n                <input\r\n                    type={type}\r\n                    name={name}\r\n                    value={normalizedValue}\r\n                    onChange={onChange}\r\n                    onBlur={onBlur}\r\n                    placeholder={placeholder}\r\n                    className={baseInputClass}\r\n                    required={required}\r\n                    maxLength={maxLength}\r\n                    disabled={disabled}\r\n                />\r\n            )}\r\n\r\n            {isError && (\r\n                <div className=\"mt-2 sm:mt-3 flex items-center space-x-2 text-red-600\">\r\n                    <IoWarning className=\"w-4 h-4 flex-shrink-0\" />\r\n                    <p className=\"text-xs sm:text-sm font-medium\">{isError}</p>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\n// --- Field Definitions (UPDATED with Step 4) ---\r\nconst credentialsFormFields = [\r\n    { label: \"Full Name\", name: \"fullName\", type: \"text\", required: true, hint: \"Enter the full name for the user account.\" },\r\n    { label: \"Username\", name: \"username\", type: \"text\", required: true, hint: \"Must start with 'ACS' and match Employee ID (8-30 chars).\", maxLength: 30 },\r\n    { label: \"Password\", name: \"password\", type: \"password\", required: true, hint: \"Temporary password (8-30 characters).\", maxLength: 30 },\r\n    { label: \"Role\", name: \"role\", type: \"select\", required: true, options: [\"ROLE_HR\", \"ROLE_MANAGER\", \"ROLE_EMPLOYEE\", \"ROLE_ADMIN\", \"ROLE_TEAM_LEAD\"], hint: \"Select the role for the user account.\" },\r\n    // RE-ADDED: Email and Phone Number to Step 1\r\n    { label: \"Email\", name: \"email\", type: \"email\", required: true, hint: \"Employee email address.\" },\r\n    { label: \"Phone Number\", name: \"phoneNumber\", type: \"text\", required: false, hint: \"Contact phone number.\" },\r\n];\r\n\r\nconst employeeFormFields = [\r\n    { label: \"Employee ID\", name: \"employeeId\", type: \"text\", required: true, hint: \"Must start with 'ACS' and match Username (8-30 chars).\", maxLength: 30 },\r\n    { label: \"First Name\", name: \"firstName\", type: \"text\", required: true, hint: \"Enter employee's first name.\" },\r\n    { label: \"Display Name\", name: \"displayName\", type: \"text\", required: false, hint: \"Name to display in the system (optional).\" },\r\n    { label: \"Marital Status\", name: \"maritalStatus\", type: \"select\", required: true, options: [\"Single\", \"Married\", \"Divorced\", \"Widowed\"], hint: \"Select employee's marital status.\" },\r\n    { label: \"Department ID\", name: \"departmentId\", type: \"department-dropdown\", required: true, hint: \"Select department from the list.\" },\r\n    {\r\n        label: \"Employee Role\",\r\n        name: \"employeeRole\",\r\n        type: \"text\",\r\n        required: false,\r\n        disabled: true,\r\n        hint: \"This is set automatically from the User Credentials role.\",\r\n    },\r\n];\r\n\r\nconst payrollFormFields = [\r\n    { label: \"Employee Name\", name: \"empNameDisplay\", type: \"text\", required: true, disabled: true, hint: \"Auto-filled from Employee Form.\" },\r\n    { label: \"Employee ID\", name: \"employeeIdDisplay\", type: \"text\", required: true, disabled: true, hint: \"Auto-filled from Employee Form.\" },\r\n    // Email and Phone fields are disabled in Step 3 but rely on Step 1 values\r\n    { label: \"Email\", name: \"email\", type: \"email\", required: true, disabled: true, hint: \"Employee email address.\" }, \r\n    { label: \"Phone Number\", name: \"phoneNumber\", type: \"text\", required: false, disabled: true, hint: \"Contact phone number.\" }, \r\n    { label: \"Annual Salary\", name: \"annualSalary\", type: \"number\", required: true, hint: \"Annual salary amount.\" },\r\n    { label: \"Account Number\", name: \"accountNumber\", type: \"text\", required: true, hint: \"Bank account number.\" },\r\n    { label: \"IFSC Code\", name: \"ifsccode\", type: \"text\", required: true, hint: \"IFSC code for bank.\" },\r\n    { label: \"Bank Name\", name: \"bankName\", type: \"text\", required: true, hint: \"Name of the bank.\" },\r\n    { label: \"PF Number\", name: \"pfnum\", type: \"text\", required: false, hint: \"Provident Fund number.\" },\r\n    { label: \"PAN Number\", name: \"panNumber\", type: \"text\", required: true, hint: \"Permanent Account Number.\" },\r\n    { label: \"Aadhar Number\", name: \"aadharNumber\", type: \"text\", required: true, hint: \"Aadhar ID number.\" },\r\n    { label: \"UAN Number\", name: \"uanNumber\", type: \"text\", required: false, hint: \"Universal Account Number.\" },\r\n    // CHANGED: Department is now a DepartmentDropdown (same as Step 2)\r\n    { label: \"Department\", name: \"department\", type: \"department-dropdown\", required: true, hint: \"Select department from the list.\" },\r\n    { label: \"Designation\", name: \"designation\", type: \"text\", required: true, hint: \"Job designation.\" },\r\n    // UPDATED: Added 'Intern' option\r\n    { label: \"Job Type\", name: \"JobType\", type: \"select\", required: true, options: [\"Full-time\", \"Part-time\", \"Contract\", \"Temporary\", \"Intern\"], hint: \"Select job type.\" },\r\n    // CHANGED: Level is now a dropdown\r\n    { label: \"Level\", name: \"Level\", type: \"select\", required: true, options: [\"Senior\", \"Junior\", \"Medium\"], hint: \"Select job level.\" },\r\n    { label: \"Start Date\", name: \"startDate\", type: \"date\", required: true, hint: \"Employment start date.\" },\r\n];\r\n\r\n// NEW: Step 4 Fields (Leaves/Attendance)\r\nconst leavesFormFields = [\r\n    { label: \"Employee ID\", name: \"employeeIdDisplay4\", type: \"text\", required: true, disabled: true, hint: \"Auto-filled.\" },\r\n    // NEW: Shift Name is a dynamic dropdown\r\n    { label: \"Shift Name\", name: \"shiftName\", type: \"shift-dropdown\", required: true, hint: \"Select the employee's shift.\" },\r\n    { label: \"Month\", name: \"month\", type: \"number\", required: true, hint: \"1 (Jan) to 12 (Dec).\", min: 1, max: 12 },\r\n    { label: \"Year\", name: \"year\", type: \"number\", required: true, hint: \"E.g., 2024.\", min: 2020 },\r\n    { label: \"Paid Leaves\", name: \"paid\", type: \"number\", required: true, hint: \"Total paid leave days.\", min: 0 },\r\n    { label: \"Sick Leaves\", name: \"sick\", type: \"number\", required: true, hint: \"Total sick leave days.\", min: 0 },\r\n    { label: \"Casual Leaves\", name: \"casual\", type: \"number\", required: true, hint: \"Total casual leave days.\", min: 0 },\r\n    { label: \"Unpaid Leaves\", name: \"unpaid\", type: \"number\", required: true, hint: \"Total unpaid leave days.\", min: 0 },\r\n    // ADDED: Visible and Disabled Geolocation fields\r\n    { name: \"latitude\", type: \"text\", label: \"Latitude\", required: true, disabled: true, hint: \"Auto-filled from location.\" },\r\n    { name: \"longitude\", type: \"text\", label: \"Longitude\", required: true, disabled: true, hint: \"Auto-filled from location.\" },\r\n    { name: \"timezone\", type: \"text\", label: \"Timezone\", required: true, disabled: true, hint: \"Auto-filled ('Asia/Kolkata').\" },\r\n];\r\n\r\nconst generateInitials = (name) => {\r\n    if (!name) return \"\";\r\n    const nameParts = name.split(\" \");\r\n    if (nameParts.length > 1) {\r\n        return (nameParts[0][0] + nameParts[nameParts.length - 1][0]).toUpperCase();\r\n    }\r\n    return nameParts[0][0].toUpperCase();\r\n};\r\n\r\n// --- Department Dropdown Component (Needed for both Step 2 and Step 3) ---\r\nconst DepartmentDropdown = ({ value, onChange, theme, isError, hint, name }) => {\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const [departments, setDepartments] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [hasMore, setHasMore] = useState(true);\r\n    const [currentPage, setCurrentPage] = useState(0);\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n    const dropdownRef = useRef(null);\r\n    const PAGE_SIZE = 10;\r\n\r\n    const loadDepartments = useCallback(async (page = 0, reset = false) => {\r\n        if (loading || (!hasMore && !reset)) return;\r\n\r\n        setLoading(true);\r\n        try {\r\n            const response = await publicinfoApi.get(`employee/${page}/${PAGE_SIZE}/departmentId/asc/all/departments`);\r\n            const newDepartments = response.data.content || [];\r\n\r\n            setDepartments(prev => reset ? newDepartments : [...prev, ...newDepartments]);\r\n            setCurrentPage(page);\r\n            setHasMore(newDepartments.length === PAGE_SIZE);\r\n        } catch (error) {\r\n            console.error(\"Error fetching departments:\", error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [loading, hasMore]);\r\n\r\n    useEffect(() => {\r\n        if (isOpen && departments.length === 0) {\r\n            loadDepartments(0, true);\r\n        }\r\n    }, [isOpen, loadDepartments, departments.length]);\r\n\r\n    const handleScroll = (e) => {\r\n        const { scrollTop, scrollHeight, clientHeight } = e.target;\r\n        if (scrollHeight - scrollTop <= clientHeight + 50 && hasMore && !loading) {\r\n            loadDepartments(currentPage + 1);\r\n        }\r\n    };\r\n\r\n    const filteredDepartments = departments.filter(dept => {\r\n        if (!searchTerm) return true;\r\n        const searchLower = searchTerm.toLowerCase();\r\n        return (\r\n            dept.departmentId.toLowerCase().includes(searchLower) ||\r\n            dept.departmentName.toLowerCase().includes(searchLower)\r\n        );\r\n    });\r\n\r\n    useEffect(() => {\r\n        const handleClickOutside = (event) => {\r\n            if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {\r\n                setIsOpen(false);\r\n            }\r\n        };\r\n        document.addEventListener('mousedown', handleClickOutside);\r\n        return () => document.removeEventListener('mousedown', handleClickOutside);\r\n    }, []);\r\n\r\n    const getDisplayText = () => {\r\n        if (!value) return 'Choose Department ID';\r\n        const selectedDept = departments.find(dept => dept.departmentId === value);\r\n        return selectedDept ? `${selectedDept.departmentId}(${selectedDept.departmentName})` : value;\r\n    };\r\n\r\n    return (\r\n        <div className=\"group relative\" ref={dropdownRef}>\r\n            <label className={`block text-xs sm:text-sm font-semibold mb-2 sm:mb-3 flex items-center ${\r\n                theme === 'dark' ? 'text-gray-200' : 'text-gray-800'\r\n            }`}>\r\n                Department\r\n                <span className=\"text-red-500 ml-1 text-sm sm:text-base\">*</span>\r\n            </label>\r\n\r\n            {hint && (\r\n                <p className={`text-xs mb-2 ${\r\n                    theme === 'dark' ? 'text-gray-400' : 'text-gray-500'\r\n                }`}>\r\n                    {hint}\r\n                </p>\r\n            )}\r\n\r\n            <div className=\"relative\">\r\n                <button\r\n                    type=\"button\"\r\n                    onClick={() => setIsOpen(!isOpen)}\r\n                    className={`w-full px-4 sm:px-5 py-3 sm:py-4 border-2 rounded-lg sm:rounded-xl text-left focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 focus:outline-none\r\n                        ${isError\r\n                            ? 'border-red-300 bg-red-50 focus:border-red-500 focus:ring-red-500/20'\r\n                            : theme === 'dark'\r\n                            ? 'border-gray-600 bg-gray-700 text-white'\r\n                            : 'border-gray-200 bg-white'\r\n                        }`}\r\n                >\r\n                    <span className={value ? '' : 'text-gray-500'}>\r\n                        {getDisplayText()}\r\n                    </span>\r\n                </button>\r\n\r\n                <div className=\"absolute right-4 sm:right-5 top-1/2 transform -translate-y-1/2 pointer-events-none\">\r\n                    <IoChevronDownOutline className={`w-4 h-4 sm:w-5 sm:h-5 ${\r\n                        isOpen ? 'rotate-180' : ''\r\n                    } ${theme === 'dark' ? 'text-gray-400' : 'text-gray-400'}`} />\r\n                </div>\r\n\r\n                {isOpen && (\r\n                    <div className={`absolute z-50 w-full mt-1 border rounded-lg sm:rounded-xl shadow-lg max-h-64 ${\r\n                        theme === 'dark'\r\n                            ? 'bg-gray-700 border-gray-600'\r\n                            : 'bg-white border-gray-300'\r\n                    }`}>\r\n                        <div className=\"p-2 border-b border-gray-200 dark:border-gray-600\">\r\n                            <div className=\"relative\">\r\n                                <IoSearchOutline className={`absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 ${\r\n                                    theme === 'dark' ? 'text-gray-400' : 'text-gray-500'\r\n                                }`} />\r\n                                <input\r\n                                    type=\"text\"\r\n                                    placeholder=\"Search departments...\"\r\n                                    value={searchTerm}\r\n                                    onChange={(e) => setSearchTerm(e.target.value)}\r\n                                    className={`w-full pl-10 pr-4 py-2 border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 focus:outline-none ${\r\n                                        theme === 'dark'\r\n                                            ? 'bg-gray-600 border-gray-500 text-white placeholder-gray-400'\r\n                                            : 'bg-gray-50 border-gray-300 text-gray-800 placeholder-gray-500'\r\n                                    }`}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div\r\n                            className=\"overflow-y-auto max-h-48\"\r\n                            onScroll={handleScroll}\r\n                        >\r\n                            {filteredDepartments.length > 0 ? (\r\n                                filteredDepartments.map((dept, index) => (\r\n                                    <button\r\n                                        key={`${dept.departmentId}-${index}`}\r\n                                        type=\"button\"\r\n                                        onClick={() => {\r\n                                            onChange(dept.departmentId, name);\r\n                                            setIsOpen(false);\r\n                                        }}\r\n                                        className={`w-full px-4 py-3 text-left text-sm ${\r\n                                            value === dept.departmentId\r\n                                                ? theme === 'dark'\r\n                                                    ? 'bg-blue-700 text-white'\r\n                                                    : 'bg-blue-100 text-blue-800'\r\n                                                : theme === 'dark'\r\n                                                ? 'text-gray-200'\r\n                                                : 'text-gray-800'\r\n                                        }`}\r\n                                    >\r\n                                        <div className=\"flex flex-col\">\r\n                                            <span className=\"font-semibold\">\r\n                                                {dept.departmentId}({dept.departmentName})\r\n                                            </span>\r\n                                            <span className={`text-xs mt-1 ${\r\n                                                theme === 'dark' ? 'text-gray-400' : 'text-gray-500'\r\n                                            }`}>\r\n                                                {dept.departmentDescription}\r\n                                            </span>\r\n                                        </div>\r\n                                    </button>\r\n                                ))\r\n                            ) : !loading ? (\r\n                                <div className={`px-4 py-8 text-center text-sm ${\r\n                                    theme === 'dark' ? 'text-gray-400' : 'text-gray-500'\r\n                                }`}>\r\n                                    {searchTerm ? 'No departments found matching your search.' : 'No departments available.'}\r\n                                </div>\r\n                            ) : null}\r\n\r\n                            {loading && (\r\n                                <div className=\"flex justify-center items-center py-4\">\r\n                                    <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500\"></div>\r\n                                    <span className={`ml-2 text-sm ${\r\n                                        theme === 'dark' ? 'text-gray-400' : 'text-gray-500'\r\n                                    }`}>Loading departments...</span>\r\n                                </div>\r\n                            )}\r\n\r\n                            {!hasMore && departments.length > 0 && (\r\n                                <div className=\"text-center py-2 text-xs text-gray-500 dark:text-gray-500\">\r\n                                     End of results ({departments.length} departments) \r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {isError && (\r\n                <div className=\"mt-2 sm:mt-3 flex items-center space-x-2 text-red-600\">\r\n                    <IoWarning className=\"w-4 h-4 flex-shrink-0\" />\r\n                    <p className=\"text-xs sm:text-sm font-medium\">{isError}</p>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\n// --- Shift Dropdown Component ---\r\nconst ShiftDropdown = ({ value, onChange, theme, isError, hint, name }) => {\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const [shifts, setShifts] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const dropdownRef = useRef(null);\r\n\r\n    const getShifts = useCallback(async () => {\r\n        setLoading(true);\r\n        try {\r\n            // Hitting the required endpoint to fetch shift data\r\n            const response = await attendanceApi.get('/shifts');\r\n            const shiftNames = (response.data || []).map(shift => shift.name);\r\n            setShifts(shiftNames);\r\n        } catch (error) {\r\n            console.error(\"Error fetching shifts:\", error);\r\n            // Optionally, set an error state here if needed\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (isOpen && shifts.length === 0) {\r\n            getShifts();\r\n        }\r\n    }, [isOpen, shifts.length, getShifts]);\r\n\r\n    useEffect(() => {\r\n        const handleClickOutside = (event) => {\r\n            if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {\r\n                setIsOpen(false);\r\n            }\r\n        };\r\n        document.addEventListener('mousedown', handleClickOutside);\r\n        return () => document.removeEventListener('mousedown', handleClickOutside);\r\n    }, []);\r\n\r\n    const getDisplayText = () => {\r\n        if (!value) return 'Select Shift';\r\n        return value;\r\n    };\r\n\r\n    return (\r\n        <div className=\"group relative\" ref={dropdownRef}>\r\n            <label className={`block text-xs sm:text-sm font-semibold mb-2 sm:mb-3 flex items-center ${\r\n                theme === 'dark' ? 'text-gray-200' : 'text-gray-800'\r\n            }`}>\r\n                Shift Name\r\n                <span className=\"text-red-500 ml-1 text-sm sm:text-base\">*</span>\r\n            </label>\r\n\r\n            {hint && (\r\n                <p className={`text-xs mb-2 ${\r\n                    theme === 'dark' ? 'text-gray-400' : 'text-gray-500'\r\n                }`}>\r\n                    {hint}\r\n                </p>\r\n            )}\r\n\r\n            <div className=\"relative\">\r\n                <button\r\n                    type=\"button\"\r\n                    onClick={() => setIsOpen(!isOpen)}\r\n                    disabled={loading}\r\n                    className={`w-full px-4 sm:px-5 py-3 sm:py-4 border-2 rounded-lg sm:rounded-xl text-left focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 focus:outline-none\r\n                        ${isError\r\n                            ? 'border-red-300 bg-red-50 focus:border-red-500 focus:ring-red-500/20'\r\n                            : theme === 'dark'\r\n                            ? 'border-gray-600 bg-gray-700 text-white'\r\n                            : 'border-gray-200 bg-white'\r\n                        } ${loading ? 'opacity-70' : ''}`}\r\n                >\r\n                    <span className={value ? '' : 'text-gray-500'}>\r\n                        {loading ? 'Loading Shifts...' : getDisplayText()}\r\n                    </span>\r\n                </button>\r\n\r\n                <div className=\"absolute right-4 sm:right-5 top-1/2 transform -translate-y-1/2 pointer-events-none\">\r\n                    <IoChevronDownOutline className={`w-4 h-4 sm:w-5 sm:h-5 ${\r\n                        isOpen ? 'rotate-180' : ''\r\n                    } ${theme === 'dark' ? 'text-gray-400' : 'text-gray-400'}`} />\r\n                </div>\r\n\r\n                {isOpen && (\r\n                    <div className={`absolute z-50 w-full mt-1 border rounded-lg sm:rounded-xl shadow-lg max-h-64 overflow-y-auto ${\r\n                        theme === 'dark'\r\n                            ? 'bg-gray-700 border-gray-600'\r\n                            : 'bg-white border-gray-300'\r\n                    }`}>\r\n                        {shifts.length > 0 ? (\r\n                            shifts.map((shiftName, index) => (\r\n                                <button\r\n                                    key={index}\r\n                                    type=\"button\"\r\n                                    onClick={() => {\r\n                                        onChange({ target: { name: name, value: shiftName } });\r\n                                        setIsOpen(false);\r\n                                    }}\r\n                                    className={`w-full px-4 py-3 text-left text-sm ${\r\n                                        value === shiftName\r\n                                            ? theme === 'dark'\r\n                                                ? 'bg-blue-700 text-white'\r\n                                                : 'bg-blue-100 text-blue-800'\r\n                                            : theme === 'dark'\r\n                                            ? 'text-gray-200'\r\n                                            : 'text-gray-800'\r\n                                    }`}\r\n                                >\r\n                                    {shiftName}\r\n                                </button>\r\n                            ))\r\n                        ) : loading ? (\r\n                            <div className=\"flex justify-center items-center py-4\">\r\n                                <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500\"></div>\r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"px-4 py-3 text-sm text-gray-500\">No shifts found.</div>\r\n                        )}\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {isError && (\r\n                <div className=\"mt-2 sm:mt-3 flex items-center space-x-2 text-red-600\">\r\n                    <IoWarning className=\"w-4 h-4 flex-shrink-0\" />\r\n                    <p className=\"text-xs sm:text-sm font-medium\">{isError}</p>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nfunction EmployeeApp() {\r\n    const navigate = useNavigate();\r\n    const [employeeData, setEmployeeData] = useState(null);\r\n    const [dynamicFilters, setDynamicFilters] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [viewMode, setViewMode] = useState('grid');\r\n    const { userprofiledata, theme, userData } = useContext(Context);\r\n    const { empID } = useParams();\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n    const [selectedFilters, setSelectedFilters] = useState({});\r\n    const [loggedPermissiondata, setLoggedPermissionData] = useState([]);\r\n    const [matchedArray, setMatchedArray] = useState(null);\r\n    const LoggedUserRole = userData?.roles[0] ? `ROLE_${userData?.roles[0]}` : null;\r\n\r\n    const [flippedCard, setFlippedCard] = useState(null);\r\n    const [contextMenu, setContextMenu] = useState({ visible: false, x: 0, y: 0, employee: null });\r\n\r\n    const [isAddEmployeeModalOpen, setIsAddEmployeeModalOpen] = useState(false);\r\n    const [isUpdating, setIsUpdating] = useState(false);\r\n    const [submissionStatus, setSubmissionStatus] = useState('');\r\n\r\n    // Multi-step form states\r\n    const [terminatedSearchTerm, setTerminatedSearchTerm] = useState(''); \r\n    const [currentStep, setCurrentStep] = useState(1); // 1: Credentials, 2: Employee, 3: Payroll, 4: Leaves (NEW)\r\n\r\n    // NEW: Function to get current location\r\n    const getCurrentLocation = useCallback(() => {\r\n        if (navigator.geolocation) {\r\n            navigator.geolocation.getCurrentPosition(\r\n                (position) => {\r\n                    const latitude = position.coords.latitude;\r\n                    const longitude = position.coords.longitude;\r\n                    \r\n                    setFormData(prev => ({\r\n                        ...prev,\r\n                        // Ensure latitude and longitude are stored as strings for input value (which is expected to be a string type input)\r\n                        latitude: String(latitude), \r\n                        longitude: String(longitude),\r\n                        timezone: Intl.DateTimeFormat().resolvedOptions().timeZone || 'Asia/Kolkata',\r\n                    }));\r\n                },\r\n                (error) => {\r\n                    console.error(\"Geolocation error:\", error);\r\n                    // Default to 0, 0 (as strings) if permission is denied or location is unavailable\r\n                    setFormData(prev => ({ ...prev, latitude: '0', longitude: '0' }));\r\n                }\r\n            );\r\n        } else {\r\n            console.error(\"Geolocation is not supported by this browser.\");\r\n            setFormData(prev => ({ ...prev, latitude: '0', longitude: '0' }));\r\n        }\r\n    }, []);\r\n\r\n\r\n    const initialFormData = {\r\n        // User Credentials\r\n        fullName: '',\r\n        username: '',\r\n        password: '',\r\n        role: '',\r\n        email: '',\r\n        phoneNumber: '',\r\n        // Employee Information\r\n        employeeId: '',\r\n        firstName: '',\r\n        displayName: '',\r\n        maritalStatus: '',\r\n        departmentId: '',\r\n        employeeRole: '',\r\n        // Payroll/Job Details\r\n        empNameDisplay: '',\r\n        employeeIdDisplay: '',\r\n        annualSalary: '',\r\n        accountNumber: '',\r\n        ifsccode: '',\r\n        bankName: '',\r\n        pfnum: '',\r\n        panNumber: '',\r\n        aadharNumber: '',\r\n        uanNumber: '',\r\n        department: '',\r\n        designation: '',\r\n        jobType: 'Full-time', // Default to existing option\r\n        level: 'Junior', // Default to an option\r\n        startDate: '',\r\n        empName: '',\r\n        // NEW LEAVES FIELDS (Step 4)\r\n        employeeIdDisplay4: '',\r\n        month: new Date().getMonth() + 1, \r\n        year: new Date().getFullYear(), \r\n        paid: 0,\r\n        sick: 0,\r\n        casual: 0,\r\n        unpaid: 0,\r\n        shiftName: '',\r\n        latitude: '0', // DTO default\r\n        longitude: '0', // DTO default\r\n        timezone: 'Asia/Kolkata', // DTO default\r\n    };\r\n\r\n    const [formData, setFormData] = useState(initialFormData);\r\n    const [formErrors, setFormErrors] = useState({});\r\n\r\n    const [popup, setPopup] = useState({ show: false, message: '', type: '' });\r\n    const [deleteConfirmation, setDeleteConfirmation] = useState({ show: false, employee: null });\r\n\r\n    const [pageNumber, setPageNumber] = useState(0);\r\n    const [pageSize, setPageSize] = useState(15);\r\n    const [sortBy, setSortBy] = useState('employeeId');\r\n    const [sortOrder, setSortOrder] = useState('asc');\r\n\r\n    const [isTerminatedEmployeesModalOpen, setIsTerminatedEmployeesModalOpen] = useState(false);\r\n    const [terminatedEmployeesData, setTerminatedEmployeesData] = useState([]);\r\n    const [terminatedLoading, setTerminatedLoading] = useState(false);\r\n    const [terminatedHasMore, setTerminatedHasMore] = useState(true);\r\n    const [terminatedCurrentPage, setTerminatedCurrentPage] = useState(0);\r\n    const terminatedScrollRef = useRef(null);\r\n    const [hasAccess, setHasAccess] = useState([]);\r\n\r\n    const TERMINATED_PAGE_SIZE = 15;\r\n\r\n    const userRole = userData?.roles?.[0]?.toUpperCase();\r\n    const hasManagementAccess = ['ADMIN', 'MANAGER', 'HR'].includes(userRole);\r\n\r\n    // useEffect to fetch Geolocation on mount/when modal opens\r\n    useEffect(() => {\r\n        if (isAddEmployeeModalOpen) {\r\n            getCurrentLocation();\r\n        }\r\n    }, [isAddEmployeeModalOpen, getCurrentLocation]);\r\n\r\n\r\n    useEffect(() => {\r\n        let fetchedData = async () => {\r\n            try {\r\n                let response = await authApi.get(`role-access/${LoggedUserRole}`);\r\n                setLoggedPermissionData(response.data);\r\n            } catch(error) {\r\n                console.error(\"Error fetching role access data:\", error);\r\n            }\r\n        }\r\n        fetchedData();\r\n    }, [LoggedUserRole]);\r\n\r\n    useEffect(() => {\r\n        if(loggedPermissiondata){\r\n            setMatchedArray(loggedPermissiondata?.permissions)\r\n        }\r\n    }, [loggedPermissiondata]);\r\n\r\n    useEffect(() => {\r\n        setHasAccess(userData?.permissions)\r\n    }, [userData])\r\n\r\n    useEffect(() => {\r\n        const handleOutsideClick = () => {\r\n            if (contextMenu.visible) {\r\n                setContextMenu({ ...contextMenu, visible: false });\r\n            }\r\n            if (flippedCard) {\r\n                setFlippedCard(null);\r\n            }\r\n        };\r\n        window.addEventListener('click', handleOutsideClick);\r\n        return () => window.removeEventListener('click', handleOutsideClick);\r\n    }, [contextMenu, flippedCard]);\r\n\r\n    const handleViewTeamsClick = (employee) => {\r\n        if (employee) {\r\n            navigate(`/my-teams/${empID}?fromContextMenu=true&targetEmployeeId=${employee.employeeId}`);\r\n            setContextMenu({ ...contextMenu, visible: false });\r\n            setFlippedCard(null);\r\n        }\r\n    };\r\n\r\n    const handleChatClick = async (employee) => {\r\n        if (employee) {\r\n            navigate(`/chat/${empID}/with?id=${employee.employeeId}`, {\r\n                state: {\r\n                    newChatTarget: {\r\n                        chatId: employee.employeeId,\r\n                        name: employee.displayName,\r\n                        profile: employee.employeeImage,\r\n                        type: 'private',\r\n                        isOnline: null,\r\n                        lastMessage: '',\r\n                        unreadMessageCount: 0,\r\n                    }\r\n                }\r\n            });\r\n            if (contextMenu.visible) {\r\n                setContextMenu({ ...contextMenu, visible: false });\r\n            }\r\n            if (flippedCard) {\r\n                setFlippedCard(null);\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleViewProfileClick = (employee) => {\r\n        if (employee) {\r\n            navigate(`/employees/${empID}/public/${employee.employeeId}`);\r\n            setContextMenu({ ...contextMenu, visible: false });\r\n            setFlippedCard(null);\r\n        }\r\n    };\r\n\r\n    const handleDocumentsClick = (employee) => {\r\n        if (employee) {\r\n            navigate(`/profile/${empID}/documents?fromContextMenu=true&targetEmployeeId=${employee.employeeId}`);\r\n            setContextMenu({ ...contextMenu, visible: false });\r\n            setFlippedCard(null);\r\n        }\r\n    };\r\n\r\n    const handlePayRollClick = (employee) => {\r\n        if (employee) {\r\n            navigate(`/payroll/employee/${employee.employeeId}`);\r\n            setContextMenu({ ...contextMenu, visible: false });\r\n            setFlippedCard(null);\r\n        }\r\n    };\r\n\r\n    const handleAboutClick = (employee) => {\r\n        if (employee) {\r\n            navigate(`/profile/${empID}/about?fromContextMenu=true&targetEmployeeId=${employee.employeeId}`);\r\n            setContextMenu({ ...contextMenu, visible: false });\r\n            setFlippedCard(null);\r\n        }\r\n    };\r\n\r\n    const handleDeleteClick = (employee) => {\r\n        setDeleteConfirmation({ show: true, employee });\r\n    };\r\n\r\n    const confirmDelete = async () => {\r\n        const { employee } = deleteConfirmation;\r\n        if (!employee) return;\r\n        const employeeIdToDelete = employee.employeeId.toLowerCase();\r\n\r\n        try {\r\n            await publicinfoApi.delete(`employee/${employee.employeeId}`);\r\n            await authApi.delete(`delete/${employeeIdToDelete}`);\r\n\r\n            setEmployeeData(prevData => prevData.filter(emp => emp.employeeId !== employee.employeeId));\r\n            setPopup({\r\n                show: true,\r\n                message: `Employee ${employee.displayName} and associated user credentials have been successfully deleted.`,\r\n                type: 'success'\r\n            });\r\n\r\n        } catch (err) {\r\n            console.error(\"Error deleting employee and user:\", err);\r\n\r\n            const errorMessage = err.response?.data?.message || 'The user service may have failed to delete credentials. Please verify the backend logs.';\r\n\r\n            setPopup({\r\n                show: true,\r\n                message: `Failed to complete full deletion. ${errorMessage}`,\r\n                type: 'error'\r\n            });\r\n\r\n        } finally {\r\n            setDeleteConfirmation({ show: false, employee: null });\r\n            setFlippedCard(null);\r\n        }\r\n    };\r\n\r\n    const fetchAllEmployees = useCallback(async () => {\r\n        try {\r\n            setLoading(true);\r\n            const response = await publicinfoApi.get(`employee/${pageNumber}/${pageSize}/${sortBy}/${sortOrder}/employees`);\r\n            setEmployeeData(response.data.content);\r\n        } catch (err) {\r\n            console.error(\"Error fetching employees:\", err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [pageNumber, pageSize, sortBy, sortOrder]);\r\n\r\n    useEffect(() => {\r\n        fetchAllEmployees();\r\n    }, [fetchAllEmployees]);\r\n\r\n    useEffect(() => {\r\n        if (employeeData) {\r\n            const roles = [...new Set(employeeData.map(e => e.jobTitlePrimary).filter(Boolean))];\r\n            const departments = [...new Set(employeeData.map(e => e.departmentId).filter(Boolean))];\r\n            const locations = [...new Set(employeeData.map(e => e.location).filter(Boolean))];\r\n\r\n            const newFilters = [\r\n                { name: 'Role', options: ['All Roles', ...roles], icon: IoBriefcaseOutline },\r\n                { name: 'Department', options: ['All Departments', ...departments], icon: IoBusinessOutline },\r\n                { name: 'Location', options: ['All Locations', ...locations], icon: IoLocationOutline },\r\n            ];\r\n            setDynamicFilters(newFilters);\r\n\r\n            const initialFilters = newFilters.reduce((acc, filter) => ({\r\n                ...acc,\r\n                [filter.name]: filter.options[0]\r\n            }), {});\r\n            setSelectedFilters(initialFilters);\r\n        }\r\n    }, [employeeData]);\r\n\r\n    const filteredEmployees = employeeData ? employeeData.filter(employee => {\r\n        const lowercasedSearchTerm = searchTerm.toLowerCase();\r\n        const matchesSearch =\r\n            (employee.displayName && employee.displayName.toLowerCase().includes(lowercasedSearchTerm)) ||\r\n            (employee.workEmail && employee.workEmail.toLowerCase().includes(lowercasedSearchTerm)) ||\r\n            (employee.employeeId && employee.employeeId.toLowerCase().includes(lowercasedSearchTerm));\r\n\r\n        const matchesFilters = Object.entries(selectedFilters).every(([filterName, value]) => {\r\n            if (!value || value.startsWith('All')) return true;\r\n            switch (filterName) {\r\n                case 'Role': return employee.jobTitlePrimary === value;\r\n                case 'Department': return employee.departmentId === value;\r\n                case 'Location': return employee.location === value;\r\n                default: return true;\r\n            }\r\n        });\r\n\r\n        return matchesSearch && matchesFilters;\r\n    }) : [];\r\n\r\n    const clearFilters = () => {\r\n        setSearchTerm('');\r\n        const clearedFilters = dynamicFilters.reduce((acc, filter) => ({\r\n            ...acc,\r\n            [filter.name]: filter.options[0]\r\n        }), {});\r\n        setSelectedFilters(clearedFilters);\r\n    };\r\n\r\n    const handleFormChange = (e) => {\r\n        const { name, value } = e.target;\r\n\r\n        setFormData(prev => {\r\n            const updatedData = { ...prev, [name]: value };\r\n\r\n            if (name === 'fullName') {\r\n                updatedData.firstName = value.split(' ')[0] || '';\r\n                updatedData.displayName = value;\r\n                updatedData.empName = value;\r\n                updatedData.empNameDisplay = value;\r\n            }\r\n\r\n            if (name === 'employeeId') {\r\n                updatedData.employeeIdDisplay = value;\r\n                updatedData.employeeIdDisplay4 = value; // NEW: Update for step 4\r\n            }\r\n\r\n            if (name === 'role') {\r\n                updatedData.employeeRole = value;\r\n            }\r\n\r\n            // Ensure numeric fields are stored as numbers if possible, especially for leaves\r\n            if (['month', 'year', 'paid', 'sick', 'casual', 'unpaid', 'annualSalary', 'latitude', 'longitude'].includes(name)) {\r\n                // Parse float for all numeric fields (including the new latitude/longitude)\r\n                updatedData[name] = value === '' ? '' : (name === 'month' || name === 'year' ? parseInt(value) : parseFloat(value));\r\n            }\r\n\r\n\r\n            return updatedData;\r\n        });\r\n\r\n        if (formErrors[name]) {\r\n            setFormErrors(prev => {\r\n                const newErrors = { ...prev };\r\n                delete newErrors[name];\r\n                return newErrors;\r\n            });\r\n        }\r\n    };\r\n\r\n    const handleDepartmentChange = (value, name) => {\r\n        // This handler is used by the DepartmentDropdown which passes the name of the DTO field being updated.\r\n        setFormData(prev => ({ ...prev, [name]: value }));\r\n        \r\n        // Clear validation errors for both department fields in Step 2 and Step 3\r\n        if (formErrors.departmentId || formErrors.department) {\r\n            setFormErrors(prev => {\r\n                const newErrors = { ...prev };\r\n                delete newErrors.departmentId;\r\n                delete newErrors.department;\r\n                return newErrors;\r\n            });\r\n        }\r\n    };\r\n\r\n    const handleBlurValidation = (e) => {\r\n        // Validation on blur is kept to provide instant feedback for the user\r\n        const { name, value } = e.target;\r\n        let error = '';\r\n\r\n        // Strict validation rules (kept as per previous requirement)\r\n        if (name === 'fullName') {\r\n            if (!value.trim()) {\r\n                error = \"Full name is required.\";\r\n            } else if (value.trim().length < 2) {\r\n                error = \"Full name must be at least 2 characters.\";\r\n            } else if (!/^[a-zA-Z\\s\\'-]+$/.test(value)) {\r\n                error = \"Full name can only contain letters, spaces, hyphens, and apostrophes.\";\r\n            }\r\n        }\r\n\r\n        if (name === 'username' || name === 'employeeId') {\r\n            if (value && !value.startsWith('ACS')) {\r\n                error = \"Incorrect format. Must start with 'ACS'.\";\r\n            } else if (value && (value.length < 8 || value.length > 30)) {\r\n                error = \"Must be between 8 and 30 characters.\";\r\n            } else if (value && !/^[A-Z0-9_]+$/.test(value)) {\r\n                error = \"Can only contain uppercase letters, numbers, and underscores.\";\r\n            }\r\n        }\r\n\r\n        if (name === 'password') {\r\n            if (value && (value.length < 8 || value.length > 30)) {\r\n                error = \"Password must be 8-30 characters.\";\r\n            } else if (value && !/^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)/.test(value)) {\r\n                error = \"Password must contain uppercase, lowercase, and numbers.\";\r\n            }\r\n        }\r\n\r\n        if (name === 'email') {\r\n            const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n            if (value && !emailRegex.test(value)) {\r\n                error = \"Invalid email format.\";\r\n            }\r\n        }\r\n\r\n        if (name === 'annualSalary') {\r\n            if (value && (isNaN(value) || parseFloat(value) <= 0)) {\r\n                error = \"Annual salary must be a positive number.\";\r\n            }\r\n        }\r\n\r\n        if (name === 'panNumber') {\r\n            if (value && !/^[A-Z]{5}[0-9]{4}[A-Z]{1}$/.test(value)) {\r\n                error = \"Invalid PAN format (e.g., ABCDE1234F).\";\r\n            }\r\n        }\r\n\r\n        if (name === 'aadharNumber') {\r\n            if (value && (!/^[0-9]{12}$/.test(value))) {\r\n                error = \"Aadhar must be 12 digits.\";\r\n            }\r\n        }\r\n\r\n        if (name === 'phoneNumber') {\r\n            if (value && (!/^[0-9]{10}$/.test(value))) {\r\n                error = \"Phone number must be 10 digits.\";\r\n            }\r\n        }\r\n        \r\n        // NEW LEAVES/ATTENDANCE VALIDATION (Step 4)\r\n        if (name === 'month') {\r\n            const month = parseInt(value);\r\n            if (value && (isNaN(month) || month < 1 || month > 12)) error = \"Month must be between 1 and 12.\";\r\n        }\r\n        if (name === 'year') {\r\n            const year = parseInt(value);\r\n            if (value && (isNaN(year) || year < 2020 || year > new Date().getFullYear() + 1)) error = \"Invalid year.\";\r\n        }\r\n        if (['paid', 'sick', 'casual', 'unpaid'].includes(name)) {\r\n            const leaves = parseFloat(value);\r\n            if (value && (isNaN(leaves) || leaves < 0)) error = \"Leave days must be zero or a positive number.\";\r\n        }\r\n\r\n\r\n        setFormErrors(prev => {\r\n            const newErrors = { ...prev };\r\n            if (error) {\r\n                newErrors[name] = error;\r\n            } else {\r\n                delete newErrors[name];\r\n            }\r\n            return newErrors;\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Executes ALL validation rules for a specific step (1, 2, or 3, 4)\r\n     */\r\n    const validateStep = (step) => {\r\n        const errors = {};\r\n        let fieldsToValidate = [];\r\n\r\n        if (step === 1) {\r\n            fieldsToValidate = [...credentialsFormFields.map(f => f.name)];\r\n        } else if (step === 2) {\r\n            fieldsToValidate = [...employeeFormFields.map(f => f.name).filter(name => name !== 'employeeRole')];\r\n        } else if (step === 3) {\r\n            fieldsToValidate = [...payrollFormFields.map(f => f.name).filter(name => !name.endsWith('Display'))];\r\n        } else if (step === 4) { // NEW STEP 4\r\n            // FIXED: Filtering the leavesFormFields array to get non-hidden and non-display field names for validation\r\n            fieldsToValidate = leavesFormFields\r\n                .filter(f => !f.hidden && !f.name.endsWith('Display4'))\r\n                .map(f => f.name);\r\n             // Also include the hidden fields for DTO validation if they are technically required, even if auto-filled (latitude, longitude, timezone)\r\n             // We include them here just in case validation logic needs to check their formatted (numeric/string) state.\r\n             fieldsToValidate.push('latitude', 'longitude', 'timezone');\r\n        }\r\n\r\n        const runValidation = (name, value, required = false) => {\r\n            if (required && (!value && value !== 0 && value !== '0')) { // Check if value is truly empty for required fields\r\n                return `${name} is required.`;\r\n            }\r\n            // All specific validation logic from handleBlurValidation is duplicated here for submission checks\r\n            if (name === 'fullName') {\r\n                if (value && value.trim().length < 2) return \"Full name must be at least 2 characters.\";\r\n                if (value && !/^[a-zA-Z\\s\\'-]+$/.test(value)) return \"Full name can only contain letters, spaces, hyphens, and apostrophes.\";\r\n            }\r\n            if (name === 'username' || name === 'employeeId') {\r\n                if (value && !value.startsWith('ACS')) return \"Incorrect format. Must start with 'ACS'.\";\r\n                if (value && (value.length < 8 || value.length > 30)) return \"Must be between 8 and 30 characters.\";\r\n                if (value && !/^[A-Z0-9_]+$/.test(value)) return \"Can only contain uppercase letters, numbers, and underscores.\";\r\n            }\r\n            if (name === 'password') {\r\n                if (value && (value.length < 8 || value.length > 30)) return \"Password must be 8-30 characters.\";\r\n                if (value && !/^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)/.test(value)) return \"Password must contain uppercase, lowercase, and numbers.\";\r\n            }\r\n            if (name === 'email') {\r\n                const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n                if (value && !emailRegex.test(value)) return \"Invalid email format.\";\r\n            }\r\n            if (name === 'annualSalary') {\r\n                if (value && (isNaN(parseFloat(value)) || parseFloat(value) <= 0)) return \"Annual salary must be a positive number.\";\r\n            }\r\n            if (name === 'accountNumber') {\r\n                if (value && value.length < 10) return \"Account number must be at least 10 digits.\";\r\n            }\r\n            if (name === 'ifsccode') {\r\n                if (value && !/^[A-Z]{4}0[A-Z0-9]{6}$/.test(value)) return \"Invalid IFSC format.\";\r\n            }\r\n            if (name === 'panNumber') {\r\n                if (value && !/^[A-Z]{5}[0-9]{4}[A-Z]{1}$/.test(value)) return \"Invalid PAN format (e.g., ABCDE1234F).\";\r\n            }\r\n            if (name === 'aadharNumber') {\r\n                if (value && (!/^[0-9]{12}$/.test(value))) return \"Aadhar must be 12 digits.\";\r\n            }\r\n            if (name === 'phoneNumber') {\r\n                if (value && (!/^[0-9]{10}$/.test(value))) return \"Phone number must be 10 digits.\";\r\n            }\r\n\r\n            // NEW LEAVES/ATTENDANCE VALIDATION (Step 4)\r\n            if (name === 'month') {\r\n                const month = parseInt(value);\r\n                if (value && (isNaN(month) || month < 1 || month > 12)) return \"Month must be between 1 and 12.\";\r\n            }\r\n            if (name === 'year') {\r\n                const year = parseInt(value);\r\n                if (value && (isNaN(year) || year < 2020 || year > new Date().getFullYear() + 1)) return \"Invalid year.\";\r\n            }\r\n            if (['paid', 'sick', 'casual', 'unpaid'].includes(name)) {\r\n                const leaves = parseFloat(value);\r\n                if ((value !== '' && value !== null) && (isNaN(leaves) || leaves < 0)) return \"Leave days must be zero or a positive number.\";\r\n            }\r\n            \r\n            if (name === 'shiftName') {\r\n                if (!value.trim()) return \"Shift Name is required.\";\r\n            }\r\n            \r\n            // Validation for Geo fields (though they are disabled/auto-filled, ensure they are present for DTO)\r\n            if ((name === 'latitude' || name === 'longitude')) {\r\n                 if (value === '' || isNaN(parseFloat(value))) {\r\n                     // Since they are auto-filled and disabled, an error here means Geolocation failed\r\n                     return `${name} could not be determined. Please contact support.`;\r\n                 }\r\n            }\r\n            if (name === 'timezone' && !value) {\r\n                return \"Timezone is required (auto-filled).\";\r\n            }\r\n\r\n\r\n            return '';\r\n        };\r\n\r\n        const allFields = [...credentialsFormFields, ...employeeFormFields, ...payrollFormFields, ...leavesFormFields];\r\n\r\n        fieldsToValidate.forEach(name => {\r\n            const field = allFields.find(f => f.name === name);\r\n            // Treat auto-filled fields as required if they should be in the DTO\r\n            const requiredCheck = field?.required || ['latitude', 'longitude', 'timezone'].includes(name); \r\n            const value = formData[name];\r\n            const error = runValidation(name, value, requiredCheck);\r\n            if (error) {\r\n                errors[name] = error;\r\n            }\r\n        });\r\n\r\n        // Cross-field validation (only applies if both fields are non-empty)\r\n        if (formData.username && formData.employeeId && formData.username !== formData.employeeId) {\r\n            errors.employeeId = \"Employee ID must match Username from Step 1.\";\r\n        }\r\n        \r\n        return errors;\r\n    };\r\n\r\n    /**\r\n     * Handles navigation when clicking the \"Next\" button.\r\n     */\r\n    const handleNextStep = async () => {\r\n        // Auto-fill Employee ID if moving from Step 1 to Step 2\r\n        if (currentStep === 1) {\r\n             // Autopopulate Employee ID if username is filled and employeeId is empty\r\n            if (formData.username && !formData.employeeId) {\r\n                setFormData(prev => ({\r\n                    ...prev,\r\n                    employeeId: prev.username,\r\n                    employeeIdDisplay: prev.username,\r\n                    employeeIdDisplay4: prev.username, // NEW: Update for step 4\r\n                }));\r\n            }\r\n        }\r\n        \r\n        setCurrentStep(prev => prev + 1);\r\n    };\r\n\r\n    /**\r\n     * @description Enables direct jumping to any step without validation checks on forward movement.\r\n     * @param {number} stepNumber - The target step number.\r\n     */\r\n    const handleStepClick = (stepNumber) => {\r\n        setFormErrors({});\r\n        setCurrentStep(stepNumber);\r\n        \r\n        // Auto-fill Employee ID if the user jumps to step 2 or 3 or 4 while on step 1\r\n        if (stepNumber > 1 && currentStep === 1 && formData.username && !formData.employeeId) {\r\n            setFormData(prev => ({\r\n                ...prev,\r\n                employeeId: prev.username,\r\n                employeeIdDisplay: prev.username,\r\n                employeeIdDisplay4: prev.username, // NEW: Update for step 4\r\n            }));\r\n        }\r\n    }\r\n\r\n    const handlePreviousStep = () => {\r\n        setCurrentStep(prev => prev - 1);\r\n        setFormErrors({});\r\n    };\r\n\r\n    const fetchTerminatedEmployeeIds = async () => {\r\n        let allIds = new Set();\r\n        let page = 0;\r\n        let hasMorePages = true;\r\n        const pageSize = 1000;\r\n\r\n        while (hasMorePages) {\r\n            try {\r\n                const response = await publicinfoApi.get(`employee/${page}/${pageSize}/employeeId/asc/terminated/employees`);\r\n                const newEmployees = response.data.content || [];\r\n\r\n                newEmployees.forEach(emp => {\r\n                    if (emp.employeeId) {\r\n                        allIds.add(emp.employeeId);\r\n                    }\r\n                });\r\n\r\n                if (newEmployees.length < pageSize || response.data.last === true) {\r\n                    hasMorePages = false;\r\n                } else {\r\n                    page++;\r\n                }\r\n            } catch (error) {\r\n                console.error(\"Error fetching all terminated employee IDs:\", error);\r\n                hasMorePages = false;\r\n            }\r\n        }\r\n        return allIds;\r\n    };\r\n\r\n    /**\r\n     * Handles the final form submission. Runs validation for ALL steps.\r\n     */\r\n    const handleFormSubmit = async (e) => {\r\n        e.preventDefault();\r\n\r\n        let allErrors = {};\r\n\r\n        // Run validation for ALL four steps here\r\n        const step1Errors = validateStep(1);\r\n        const step2Errors = validateStep(2);\r\n        const step3Errors = validateStep(3);\r\n        const step4Errors = validateStep(4); // NEW STEP 4 VALIDATION\r\n\r\n        allErrors = { ...step1Errors, ...step2Errors, ...step3Errors, ...step4Errors }; // COMBINE ALL ERRORS\r\n\r\n        // Additional check for terminated IDs (must be done on final submit)\r\n        if (Object.keys(allErrors).length === 0) {\r\n            const terminatedIds = await fetchTerminatedEmployeeIds();\r\n            const idToCheck = formData.employeeId || formData.username;\r\n\r\n            if (terminatedIds.has(idToCheck)) {\r\n                allErrors.employeeId = \"ID already in use by a terminated employee.\";\r\n                setPopup({ show: true, message: `Employee ID ${idToCheck} is already in use.`, type: 'error' });\r\n                setCurrentStep(2); // Jump back to the affected step\r\n            }\r\n        }\r\n\r\n        if (Object.keys(allErrors).length > 0) {\r\n            setFormErrors(allErrors);\r\n            // Optional: Jump to the first step with an error for better UX\r\n            if (Object.keys(step1Errors).length > 0) setCurrentStep(1);\r\n            else if (Object.keys(step2Errors).length > 0) setCurrentStep(2);\r\n            else if (Object.keys(step3Errors).length > 0) setCurrentStep(3);\r\n            else if (Object.keys(step4Errors).length > 0) setCurrentStep(4); // NEW STEP 4 JUMP\r\n\r\n            return;\r\n        }\r\n\r\n        // --- SUBMISSION LOGIC (Only runs if NO errors found) ---\r\n        setIsUpdating(true);\r\n        setFormErrors({});\r\n        setSubmissionStatus('Creating User...');\r\n\r\n        try {\r\n            // Step 1: Create User Credentials\r\n            const credentialsDto = {\r\n                fullName: formData.fullName,\r\n                username: formData.username,\r\n                password: formData.password,\r\n                role: formData.role.toUpperCase(),\r\n                email: formData.email, // Passed from Step 1\r\n                phoneNumber: formData.phoneNumber, // Passed from Step 1\r\n            };\r\n\r\n            await authApi.post(\"/register\", credentialsDto);\r\n\r\n            // Step 2: Create Employee\r\n            setSubmissionStatus('Creating Employee...');\r\n            const employeeDto = {\r\n                employeeId: formData.employeeId,\r\n                firstName: formData.firstName,\r\n                displayName: formData.displayName || formData.fullName,\r\n                maritalStatus: formData.maritalStatus,\r\n                departmentId: formData.departmentId,\r\n                role: formData.role.toUpperCase(),\r\n            };\r\n\r\n            await publicinfoApi.post('employee', employeeDto);\r\n\r\n            // Step 3: Create Payroll/Job Details\r\n            setSubmissionStatus('Creating Payroll Details...');\r\n            const payrollDto = {\r\n                employeeId: formData.employeeId,\r\n                empName: formData.empName,\r\n                email: formData.email, // Used from Step 1\r\n                phoneNumber: formData.phoneNumber, // Used from Step 1\r\n                annualSalary: parseFloat(formData.annualSalary),\r\n                accountNumber: formData.accountNumber,\r\n                ifsccode: formData.ifsccode,\r\n                bankName: formData.bankName,\r\n                pfnum: formData.pfnum,\r\n                panNumber: formData.panNumber,\r\n                aadharNumber: formData.aadharNumber,\r\n                uanNumber: formData.uanNumber,\r\n                department: formData.department,\r\n                designation: formData.designation,\r\n                jobType: formData.jobType,\r\n                level: formData.level,\r\n                startDate: formData.startDate,\r\n            };\r\n\r\n            // Using payroll instance\r\n            await payroll.post('payroll/jobdetails/create', payrollDto);\r\n            \r\n            // Step 4: Add Personal Leave/Attendance Details (NEW)\r\n            setSubmissionStatus('Adding Leave/Attendance Details...');\r\n            \r\n            const leavesDto = {\r\n                employeeId: formData.employeeId,\r\n                month: parseInt(formData.month),\r\n                year: parseInt(formData.year),\r\n                paid: parseFloat(formData.paid),\r\n                sick: parseFloat(formData.sick),\r\n                casual: parseFloat(formData.casual),\r\n                unpaid: parseFloat(formData.unpaid),\r\n                shiftName: formData.shiftName,\r\n                latitude: parseFloat(formData.latitude),\r\n                longitude: parseFloat(formData.longitude),\r\n                timezone: formData.timezone,\r\n            };\r\n            \r\n            // Using attendanceApi and required endpoint\r\n            await attendanceApi.post('personalleaves/add', leavesDto); \r\n\r\n            setPopup({ show: true, message: 'Employee onboarding completed successfully!', type: 'success' });\r\n            setIsAddEmployeeModalOpen(false);\r\n            setFormData(initialFormData);\r\n            setCurrentStep(1);\r\n            fetchAllEmployees();\r\n\r\n        } catch (error) {\r\n            console.error(\"Error creating employee:\", error);\r\n            const errorMessage = error.response?.data?.message || 'An unexpected error occurred. Please check the data and try again.';\r\n\r\n            setFormErrors({ general: errorMessage });\r\n            setPopup({ show: true, message: errorMessage, type: 'error' });\r\n        } finally {\r\n            setIsUpdating(false);\r\n            setSubmissionStatus('');\r\n        }\r\n    };\r\n\r\n    const handleFormClose = () => {\r\n        setIsAddEmployeeModalOpen(false);\r\n        setFormData(initialFormData);\r\n        setFormErrors({});\r\n        setCurrentStep(1);\r\n    };\r\n\r\n    /**\r\n     * New handler to print ONLY the fourth form's specific payload to the console\r\n     */\r\n    const handlePrintPayload = () => {\r\n        const payload = {\r\n            employeeId: formData.employeeId,\r\n            month: formData.month,\r\n            year: formData.year,\r\n            paid: formData.paid,\r\n            sick: formData.sick,\r\n            casual: formData.casual,\r\n            unpaid: formData.unpaid,\r\n            shiftName: formData.shiftName,\r\n            latitude: formData.latitude,\r\n            longitude: formData.longitude,\r\n            timezone: formData.timezone,\r\n        };\r\n\r\n        console.log(\"--- DEBUG: Leaves/Attendance Payload ---\");\r\n        console.log(JSON.stringify(payload, null, 2));\r\n        console.log(\"---------------------------------------------------------\");\r\n        setPopup({ show: true, message: \"Leaves/Attendance payload printed to console for debugging.\", type: 'default' });\r\n    };\r\n\r\n    const renderField = (field, currentErrors, handleChange, fieldValue) => {\r\n        const { label, name, type, required, options = [], hint, maxLength, disabled = false, hidden = false } = field;\r\n        const isError = currentErrors[name];\r\n\r\n        if (hidden) return null; \r\n\r\n        // Use DepartmentDropdown component for Department fields (in Step 2 and Step 3)\r\n        if (type === 'department-dropdown') {\r\n            const currentOnChange = (value) => handleDepartmentChange(value, name);\r\n            const departmentValue = formData[name]; // Get the value from the respective state field (departmentId or department)\r\n            \r\n            return (\r\n                <DepartmentDropdown\r\n                    key={name}\r\n                    name={name}\r\n                    value={departmentValue}\r\n                    onChange={currentOnChange} \r\n                    theme={theme}\r\n                    isError={isError}\r\n                    hint={hint}\r\n                />\r\n            );\r\n        }\r\n        \r\n        // Use ShiftDropdown for shift-dropdown type\r\n        if (type === 'shift-dropdown') {\r\n            return (\r\n                <ShiftDropdown\r\n                    key={name}\r\n                    name={name}\r\n                    value={fieldValue}\r\n                    onChange={handleChange} \r\n                    theme={theme}\r\n                    isError={isError}\r\n                    hint={hint}\r\n                />\r\n            );\r\n        }\r\n\r\n        return (\r\n            <InputField\r\n                key={name}\r\n                name={name}\r\n                label={label}\r\n                type={type}\r\n                required={required}\r\n                hint={hint}\r\n                placeholder={`Enter ${label.toLowerCase()}...`}\r\n                value={fieldValue}\r\n                onChange={handleFormChange} \r\n                onBlur={handleBlurValidation} \r\n                isError={isError}\r\n                options={options}\r\n                theme={theme}\r\n                maxLength={maxLength}\r\n                disabled={disabled}\r\n            />\r\n        );\r\n    };\r\n\r\n    const renderAddEmployeeModal = () => {\r\n        if (!isAddEmployeeModalOpen) return null;\r\n\r\n        const getStepTitle = (step) => {\r\n            if (step === 1) return \"User Credentials\";\r\n            if (step === 2) return \"Employee Information\";\r\n            if (step === 3) return \"Payroll & Job Details\";\r\n            if (step === 4) return \"Leave/Attendance\"; // NEW STEP 4\r\n        };\r\n\r\n        const getStepIcon = (step) => {\r\n            if (step === 1) return <IoKeyOutline className=\"w-5 h-5 mr-2\" />;\r\n            if (step === 2) return <IoPersonOutline className=\"w-5 h-5 mr-2\" />;\r\n            if (step === 3) return <IoBriefcaseOutline className=\"w-5 h-5 mr-2\" />;\r\n            if (step === 4) return <IoCalendarOutline className=\"w-5 h-5 mr-2\" />; // NEW STEP 4\r\n        };\r\n\r\n        const getStepColor = (step) => {\r\n            if (step === 1) return \"from-blue-500 to-purple-600\";\r\n            if (step === 2) return \"from-purple-500 to-pink-600\";\r\n            if (step === 3) return \"from-green-500 to-teal-600\";\r\n            if (step === 4) return \"from-cyan-500 to-blue-500\"; // NEW STEP 4\r\n        };\r\n\r\n        const steps = [1, 2, 3, 4]; // ADDED 4TH STEP\r\n\r\n        // Determine if a step is considered \"completed\" (visually, without strict validation check as requested)\r\n        const isStepVisuallyCompleted = (step) => step < currentStep;\r\n\r\n\r\n        return (\r\n            <div className=\"fixed inset-0 bg-black/60 backdrop-blur-sm flex justify-center items-center z-[200] p-2 sm:p-4\">\r\n                <div\r\n                    className={`rounded-2xl sm:rounded-3xl w-full max-w-2xl max-h-[95vh] overflow-hidden shadow-2xl flex flex-col ${\r\n                        theme === 'dark' ? 'bg-gray-800' : 'bg-white'\r\n                    }`}\r\n                >\r\n                    {/* Header */}\r\n                    <div className={`px-4 sm:px-6 md:px-8 py-4 sm:py-6 bg-gradient-to-r ${getStepColor(currentStep)} text-white flex-shrink-0`}>\r\n                        <div className=\"flex justify-between items-center\">\r\n                            <div className=\"flex items-center space-x-3 min-w-0 flex-1\">\r\n                                <div className=\"text-xl sm:text-2xl\">\r\n                                    {getStepIcon(currentStep)}\r\n                                </div>\r\n                                <div className=\"min-w-0 flex-1\">\r\n                                    <h2 className=\"text-lg sm:text-xl md:text-2xl font-bold\">Add New Employee</h2>\r\n                                    <p className=\"text-xs sm:text-sm opacity-90 mt-1\">Step {currentStep} of {steps.length}: {getStepTitle(currentStep)}</p>\r\n                                </div>\r\n                            </div>\r\n                            <button onClick={handleFormClose} className=\"p-2 hover:bg-white/20 rounded-lg\">\r\n                                <IoClose className=\"w-5 h-5 sm:w-6 sm:h-6\" />\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Step Navigation Bar (Clickable) */}\r\n                    <div className={`flex justify-between px-4 sm:px-6 md:px-8 py-3 sm:py-4 border-b ${\r\n                        theme === 'dark' ? 'border-gray-700 bg-gray-900/40' : 'bg-gray-200 bg-gray-50'\r\n                    }`}>\r\n                        {steps.map(step => {\r\n                            const isCompleted = isStepVisuallyCompleted(step);\r\n\r\n                            return (\r\n                                <button\r\n                                    key={step}\r\n                                    type=\"button\"\r\n                                    onClick={() => handleStepClick(step)}\r\n                                    // Always enabled as requested\r\n                                    className={`flex-1 p-2 mx-1 sm:mx-2 text-sm sm:text-base font-semibold transition-all duration-300 rounded-lg flex items-center justify-center space-x-2 cursor-pointer ${\r\n                                        step === currentStep\r\n                                            ? `text-white ${getStepColor(step)} shadow-md`\r\n                                            : isCompleted\r\n                                                ? 'text-green-500 hover:text-green-600 dark:text-green-400 dark:hover:text-green-300'\r\n                                                : 'text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200'\r\n                                    } hover:bg-gray-100 dark:hover:bg-gray-700`}\r\n                                >\r\n                                    <span className={`w-6 h-6 rounded-full flex items-center justify-center border-2 transition-all duration-300 ${\r\n                                        step === currentStep\r\n                                            ? 'border-white bg-transparent'\r\n                                            : isCompleted\r\n                                                ? 'border-green-500 bg-green-500 text-white'\r\n                                                : 'border-gray-400 dark:border-gray-500'\r\n                                    }`}>\r\n                                        {step}\r\n                                    </span>\r\n                                    <span className=\"hidden sm:inline\">{getStepTitle(step).split('/')[0]}</span>\r\n                                    {isCompleted && <IoCheckmarkCircle className=\"w-4 h-4 text-white\" />}\r\n                                </button>\r\n                            );\r\n                        })}\r\n                    </div>\r\n\r\n                    {/* Form Content - Fixed Height with Scrollable Content */}\r\n                    <div className=\"flex-1 overflow-hidden flex flex-col\">\r\n                        <div className=\"flex-1 overflow-y-auto px-4 sm:px-6 md:px-8 py-4 sm:py-6\">\r\n                            <form onSubmit={handleFormSubmit} className=\"space-y-6\">\r\n                                {/* Step 1: User Credentials */}\r\n                                {currentStep === 1 && (\r\n                                    <div>\r\n                                        <h3 className={`text-lg font-semibold mb-4 flex items-center ${\r\n                                            theme === 'dark' ? 'text-blue-400' : 'text-blue-600'\r\n                                        }`}>\r\n                                            <IoKeyOutline className=\"w-5 h-5 mr-2\" />\r\n                                            User Credentials\r\n                                        </h3>\r\n                                        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6 md:gap-8\">\r\n                                            {credentialsFormFields.map(field => (\r\n                                                <div key={field.name}>\r\n                                                    {renderField(field, formErrors, handleFormChange, formData[field.name])}\r\n                                                </div>\r\n                                            ))}\r\n                                        </div>\r\n                                    </div>\r\n                                )}\r\n\r\n                                {/* Step 2: Employee Information */}\r\n                                {currentStep === 2 && (\r\n                                    <div>\r\n                                        <h3 className={`text-lg font-semibold mb-4 flex items-center ${\r\n                                            theme === 'dark' ? 'text-purple-400' : 'text-purple-600'\r\n                                        }`}>\r\n                                            <IoPersonOutline className=\"w-5 h-5 mr-2\" />\r\n                                            Employee Information\r\n                                        </h3>\r\n                                        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6 md:gap-8\">\r\n                                            {employeeFormFields.map(field => (\r\n                                                <div key={field.name}>\r\n                                                    {/* Handlers adjusted to send correct context to renderField */}\r\n                                                    {renderField(field, formErrors, field.type === 'department-dropdown' ? handleDepartmentChange : handleFormChange, formData[field.name])}\r\n                                                </div>\r\n                                            ))}\r\n                                        </div>\r\n                                    </div>\r\n                                )}\r\n\r\n                                {/* Step 3: Payroll & Job Details */}\r\n                                {currentStep === 3 && (\r\n                                    <div className=\"p-4 sm:p-6 rounded-lg border-2 border-green-500/50 bg-green-50 dark:bg-green-900/20\">\r\n                                        <h3 className={`text-lg font-semibold mb-4 flex items-center ${\r\n                                            theme === 'dark' ? 'text-green-400' : 'text-green-600'\r\n                                        }`}>\r\n                                            <IoBriefcaseOutline className=\"w-5 h-5 mr-2\" />\r\n                                            Payroll & Job Details\r\n                                        </h3>\r\n                                        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6 md:gap-8\">\r\n                                            {payrollFormFields.map(field => (\r\n                                                <div key={field.name}>\r\n                                                    {/* Handlers adjusted to send correct context to renderField */}\r\n                                                    {renderField(field, formErrors, field.type === 'department-dropdown' ? handleDepartmentChange : handleFormChange, formData[field.name])}\r\n                                                </div>\r\n                                            ))}\r\n                                        </div>\r\n                                    </div>\r\n                                )}\r\n                                \r\n                                {/* NEW: Step 4: Leaves/Attendance */}\r\n                                {currentStep === 4 && (\r\n                                    <div className=\"p-4 sm:p-6 rounded-lg border-2 border-cyan-500/50 bg-cyan-50 dark:bg-cyan-900/20\">\r\n                                        <h3 className={`text-lg font-semibold mb-4 flex items-center ${\r\n                                            theme === 'dark' ? 'text-cyan-400' : 'text-cyan-600'\r\n                                        }`}>\r\n                                            <IoCalendarOutline className=\"w-5 h-5 mr-2\" />\r\n                                            Leave/Attendance Details\r\n                                        </h3>\r\n                                        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6 md:gap-8\">\r\n                                            {leavesFormFields.filter(f => !f.hidden).map(field => ( // Filter out hidden fields\r\n                                                <div key={field.name}>\r\n                                                    {renderField(field, formErrors, handleFormChange, formData[field.name])}\r\n                                                </div>\r\n                                            ))}\r\n                                        </div>\r\n                                    </div>\r\n                                )}\r\n\r\n                                {formErrors.general && (\r\n                                    <div className={`mt-4 sm:mt-6 p-3 sm:p-4 border-l-4 border-red-400 rounded-r-lg ${\r\n                                        theme === 'dark' ? 'bg-red-900/20' : 'bg-red-50'\r\n                                    }`}>\r\n                                        <div className=\"flex items-center\">\r\n                                            <IoWarning className=\"w-4 h-4 sm:w-5 sm:h-5 text-red-400 mr-3\" />\r\n                                            <p className={`font-medium text-sm ${theme === 'dark' ? 'text-red-300' : 'text-red-800'}`}>\r\n                                                {formErrors.general}\r\n                                            </p>\r\n                                        </div>\r\n                                    </div>\r\n                                )}\r\n                            </form>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Footer with Action Buttons */}\r\n                    <div className={`px-4 sm:px-6 md:px-8 py-4 sm:py-6 border-t flex-shrink-0 ${\r\n                        theme === 'dark' ? 'border-gray-700 bg-gray-900/50' : 'bg-gray-200 bg-gray-50/50'\r\n                    } flex flex-col sm:flex-row justify-between space-y-3 sm:space-y-0 sm:space-x-4`}>\r\n                        <div className=\"flex flex-col sm:flex-row gap-2 sm:gap-3\">\r\n                            <button\r\n                                type=\"button\"\r\n                                onClick={handleFormClose}\r\n                                className={`px-6 sm:px-8 py-2 sm:py-3 border-2 rounded-lg sm:rounded-xl font-semibold text-sm ${\r\n                                    theme === 'dark'\r\n                                        ? 'border-gray-600 text-gray-300 hover:bg-gray-600 hover:border-gray-500'\r\n                                        : 'border-gray-300 text-gray-700 hover:bg-gray-100 hover:border-gray-400'\r\n                                }`}\r\n                            >\r\n                                Cancel\r\n                            </button>\r\n\r\n                            {/* New Debug Button only visible on Step 4 */}\r\n                            {currentStep === 4 && (\r\n                                <button\r\n                                    type=\"button\"\r\n                                    onClick={handlePrintPayload}\r\n                                    className={`px-6 sm:px-8 py-2 sm:py-3 border-2 rounded-lg sm:rounded-xl font-semibold text-sm sm:text-base flex items-center justify-center space-x-2 ${\r\n                                        theme === 'dark'\r\n                                            ? 'border-yellow-600 text-yellow-400 hover:bg-yellow-900/30'\r\n                                            : 'border-yellow-300 text-yellow-700 hover:bg-yellow-100'\r\n                                    }`}\r\n                                >\r\n                                    <IoInformationCircleOutline className=\"w-4 h-4\" />\r\n                                    <span>Debug Payload</span>\r\n                                </button>\r\n                            )}\r\n\r\n                            {currentStep > 1 && (\r\n                                <button\r\n                                    type=\"button\"\r\n                                    onClick={handlePreviousStep}\r\n                                    className={`px-6 sm:px-8 py-2 sm:py-3 border-2 rounded-lg sm:rounded-xl font-semibold text-sm ${\r\n                                        theme === 'dark'\r\n                                            ? 'border-gray-600 text-gray-300 hover:bg-gray-600 hover:border-gray-500'\r\n                                            : 'border-gray-300 text-gray-700 hover:bg-gray-100 hover:border-gray-400'\r\n                                    }`}\r\n                                >\r\n                                    <IoArrowBack className=\"w-4 h-4\" />\r\n                                    <span>Previous</span>\r\n                                </button>\r\n                            )}\r\n                        </div>\r\n\r\n                        <div className=\"flex flex-col sm:flex-row gap-2 sm:gap-3\">\r\n                            {currentStep < 4 ? ( // Updated step limit to 4\r\n                                <button\r\n                                    type=\"button\"\r\n                                    onClick={handleNextStep}\r\n                                    className={`px-8 sm:px-10 py-2 sm:py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white font-bold rounded-lg sm:rounded-xl shadow-lg text-sm sm:text-base flex items-center justify-center space-x-2`}\r\n                                >\r\n                                    <span>Next</span>\r\n                                    <IoArrowForward className=\"w-4 h-4\" />\r\n                                </button>\r\n                            ) : (\r\n                                <button\r\n                                    type=\"submit\"\r\n                                    onClick={handleFormSubmit}\r\n                                    disabled={isUpdating}\r\n                                    className={`px-8 sm:px-10 py-2 sm:py-3 bg-gradient-to-r from-green-500 to-teal-600 text-white font-bold rounded-lg sm:rounded-xl shadow-lg text-sm sm:text-base flex items-center justify-center space-x-2 ${\r\n                                        isUpdating ? 'cursor-not-allowed opacity-75' : ''\r\n                                    }`}\r\n                                >\r\n                                    {isUpdating ? (\r\n                                        <>\r\n                                            <div className=\"h-3 w-3 sm:h-4 sm:w-4 border-2 border-white border-t-transparent rounded-full animate-spin\"></div>\r\n                                            <span>{submissionStatus || 'Creating...'}</span>\r\n                                        </>\r\n                                    ) : (\r\n                                        <>\r\n                                            <IoCheckmarkCircle className=\"w-4 h-4\" />\r\n                                            <span>Create Employee</span>\r\n                                        </>\r\n                                    )}\r\n                                </button>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    const loadTerminatedEmployees = useCallback(async (page = 0, reset = false) => {\r\n        if (terminatedLoading || (!terminatedHasMore && !reset)) return;\r\n\r\n        setTerminatedLoading(true);\r\n        try {\r\n            const response = await publicinfoApi.get(`employee/${page}/${TERMINATED_PAGE_SIZE}/employeeId/asc/terminated/employees`);\r\n            const newEmployees = response.data.content || [];\r\n\r\n            setTerminatedEmployeesData(prev => reset ? newEmployees : [...prev, ...newEmployees]);\r\n            setTerminatedCurrentPage(page);\r\n            setTerminatedHasMore(newEmployees.length === TERMINATED_PAGE_SIZE);\r\n        } catch (error) {\r\n            console.error(\"Error fetching terminated employees:\", error);\r\n            if (reset) {\r\n                alert(\"Failed to fetch terminated employees. Check console for details.\");\r\n            }\r\n        } finally {\r\n            setTerminatedLoading(false);\r\n        }\r\n    }, [terminatedLoading, terminatedHasMore]);\r\n\r\n    const handleTerminateEmployees = async () => {\r\n        setTerminatedEmployeesData([]);\r\n        setTerminatedCurrentPage(0);\r\n        setTerminatedHasMore(true);\r\n        setTerminatedSearchTerm(''); // FIXED: Using the correct setter\r\n        setIsTerminatedEmployeesModalOpen(true);\r\n\r\n        loadTerminatedEmployees(0, true);\r\n    };\r\n\r\n    const handleTerminatedScroll = (e) => {\r\n        const { scrollTop, scrollHeight, clientHeight } = e.target;\r\n        if (scrollHeight - scrollTop <= clientHeight + 50 && terminatedHasMore && !terminatedLoading) {\r\n            loadTerminatedEmployees(terminatedCurrentPage + 1);\r\n        }\r\n    };\r\n\r\n    const filteredTerminatedEmployees = terminatedEmployeesData.filter(employee => {\r\n        if (!terminatedSearchTerm) return true;\r\n        const searchLower = terminatedSearchTerm.toLowerCase();\r\n        return (\r\n            (employee.displayName && employee.displayName.toLowerCase().includes(searchLower)) ||\r\n            (employee.employeeId && employee.employeeId.toLowerCase().includes(searchLower)) ||\r\n            (employee.workEmail && employee.workEmail.toLowerCase().includes(searchLower))\r\n        );\r\n    });\r\n\r\n    const renderTerminatedEmployeesModal = () => {\r\n        if (!isTerminatedEmployeesModalOpen) return null;\r\n\r\n        const baseApiUrl = \"https://hrms.anasolconsultancyservices.com/api\";\r\n\r\n        const renderDataField = (label, value) => {\r\n            if (Array.isArray(value)) {\r\n                value = value.join(', ');\r\n            }\r\n            return (\r\n                <div className=\"text-xs\">\r\n                    <span className=\"font-semibold\">{label}:</span> {value || 'N/A'}\r\n                </div>\r\n            );\r\n        };\r\n\r\n        const renderLink = (label, path) => {\r\n            if (!path) return null;\r\n            const fullUrl = path.startsWith(\"http\") ? path : `${baseApiUrl}/${path}`;\r\n            return (\r\n                <a\r\n                    href={fullUrl}\r\n                    target=\"_blank\"\r\n                    rel=\"noopener noreferrer\"\r\n                    className=\"text-blue-500 hover:underline text-xs mt-1 inline-block\"\r\n                >\r\n                    {label}\r\n                </a>\r\n            );\r\n        };\r\n\r\n        return (\r\n            <div className=\"fixed inset-0 bg-black/60 backdrop-blur-md flex justify-center items-center z-[200] p-2 sm:p-4\">\r\n                <div\r\n                    className={`relative w-full max-w-sm sm:max-w-md lg:max-w-6xl max-h-[95vh] overflow-hidden shadow-2xl rounded-xl sm:rounded-2xl ${\r\n                        theme === 'dark' ? 'bg-gray-800 text-white' : 'bg-white text-gray-900'\r\n                    }`}\r\n                >\r\n                    <div className=\"px-4 sm:px-6 py-3 sm:py-4 bg-gradient-to-r from-red-500 to-red-700 text-white relative overflow-hidden\">\r\n                        <div className=\"absolute inset-0 bg-black/10\"></div>\r\n                        <div className=\"relative flex items-center justify-between\">\r\n                            <div className=\"flex items-center space-x-3 min-w-0 flex-1\">\r\n                                <div className=\"text-lg sm:text-2xl\">\r\n                                    <IoTrashOutline />\r\n                                </div>\r\n                                <div className=\"min-w-0 flex-1\">\r\n                                    <h2 className=\"text-lg sm:text-xl font-bold break-words\">Terminated Employees</h2>\r\n                                    <p className=\"text-white/90 text-xs sm:text-sm break-words\">\r\n                                        List of employees who have left the company ({filteredTerminatedEmployees.length} found)\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                            <button\r\n                                onClick={() => setIsTerminatedEmployeesModalOpen(false)}\r\n                                className=\"p-2 hover:bg-white/20 rounded-full flex-shrink-0\"\r\n                            >\r\n                                <IoClose className=\"w-4 h-4 sm:w-5 sm:h-5\" />\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className={`px-4 sm:px-6 py-3 border-b ${theme === 'dark' ? 'border-gray-700' : 'border-gray-200'}`}>\r\n                        <div className=\"relative\">\r\n                            <IoSearchOutline className={`absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 ${\r\n                                theme === 'dark' ? 'text-gray-400' : 'text-gray-500'\r\n                            }`} />\r\n                            <input\r\n                                type=\"text\"\r\n                                placeholder=\"Search terminated employees...\"\r\n                                value={terminatedSearchTerm}\r\n                                onChange={(e) => setTerminatedSearchTerm(e.target.value)} // FIXED: Using the correct setter\r\n                                className={`w-full pl-10 pr-4 py-2 border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-red-500/20 focus:border-red-500 focus:outline-none ${\r\n                                    theme === 'dark'\r\n                                        ? 'bg-gray-700 border-gray-600 text-white placeholder-gray-400'\r\n                                        : 'bg-white border-gray-300 text-gray-800 placeholder-gray-500'\r\n                                }`}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div\r\n                        ref={terminatedScrollRef}\r\n                        className=\"overflow-y-auto max-h-[calc(95vh-180px)] p-4 sm:p-6\"\r\n                        onScroll={handleTerminatedScroll}\r\n                    >\r\n                        {filteredTerminatedEmployees.length > 0 ? (\r\n                            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                                {filteredTerminatedEmployees.map((employee, index) => (\r\n                                    <div\r\n                                        key={`${employee.employeeId}-${index}`}\r\n                                        className={`p-4 rounded-lg border ${\r\n                                            theme === 'dark' ? 'bg-gray-700 border-gray-600' : 'bg-gray-100 border-gray-300'\r\n                                        } shadow-md`}\r\n                                    >\r\n                                        <div className=\"flex items-center space-x-3 mb-3\">\r\n                                            <div className=\"flex-shrink-0\">\r\n                                                {employee.employeeImage ? (\r\n                                                    <img\r\n                                                        src={employee.employeeImage.startsWith(\"http\")\r\n                                                             ? employee.employeeImage\r\n                                                             : `${baseApiUrl}/${employee.employeeImage}`\r\n                                                         }\r\n                                                        alt={`${employee.displayName || 'Employee'}'s profile`}\r\n                                                        className=\"h-12 w-12 rounded-full object-cover border-2 border-red-300 shadow-md\"\r\n                                                        onError={(e) => {\r\n                                                             e.target.style.display = 'none';\r\n                                                             e.target.nextSibling.style.display = 'flex';\r\n                                                         }}\r\n                                                    />\r\n                                                ) : null}\r\n                                                <div\r\n                                                    className={`h-12 w-12 rounded-full bg-gradient-to-br from-red-500 via-red-600 to-red-700 flex items-center justify-center text-white text-sm font-bold shadow-md ${\r\n                                                         employee.employeeImage ? 'hidden' : 'flex'\r\n                                                     }`}\r\n                                                >\r\n                                                    {generateInitials(employee.displayName || employee.employeeId || 'N/A')}\r\n                                                </div>\r\n                                            </div>\r\n                                            <div className=\"flex-1 min-w-0\">\r\n                                                <h4 className=\"font-semibold text-sm truncate\">{employee.displayName || 'N/A'}</h4>\r\n                                                <p className=\"text-xs text-gray-500 truncate\">{employee.employeeId}</p>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div className=\"space-y-1 max-h-40 overflow-y-auto\">\r\n                                            {renderDataField(\"Work Email\", employee.workEmail)}\r\n                                            {renderDataField(\"Work Number\", employee.workNumber)}\r\n                                            {renderDataField(\"Gender\", employee.gender)}\r\n                                            {renderDataField(\"Date of Joining\", employee.dateOfJoining)}\r\n                                            {renderDataField(\"Date of Leaving\", employee.dateOfLeaving)}\r\n                                            {renderDataField(\"Department\", employee.departmentId)}\r\n                                            {renderDataField(\"Projects\", employee.projectId)}\r\n                                            {renderDataField(\"Teams\", employee.teamId)}\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        ) : terminatedLoading ? (\r\n                            <div className=\"flex justify-center items-center py-8\">\r\n                                <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-red-500\"></div>\r\n                                <span className=\"ml-3 text-sm\">Loading terminated employees...</span>\r\n                            </div>\r\n                        ) : (\r\n                            <p className=\"text-center text-sm italic text-gray-500 py-8\">\r\n                                {terminatedSearchTerm ? 'No terminated employees found matching your search.' : 'No terminated employees found.'}\r\n                            </p>\r\n                        )}\r\n\r\n                        {terminatedLoading && terminatedEmployeesData.length > 0 && (\r\n                            <div className=\"flex justify-center items-center py-4 mt-4\">\r\n                                <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-red-500\"></div>\r\n                                <span className=\"ml-3 text-sm\">Loading more...</span>\r\n                            </div>\r\n                        )}\r\n\r\n                        {!terminatedHasMore && terminatedEmployeesData.length > 0 && (\r\n                            <div className=\"text-center py-4 mt-4\">\r\n                                <p className=\"text-sm text-gray-500 italic\">\r\n                                     End of results ({terminatedEmployeesData.length} total employees) \r\n                                </p>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className={`min-h-screen ${theme === 'dark' ? 'bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900' : 'bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100'}`}>\r\n                <div className=\"min-h-screen flex items-center justify-center px-4\">\r\n                    <div className=\"text-center\">\r\n                        <div className=\"relative\">\r\n                            <div className=\"animate-spin rounded-full h-12 w-12 sm:h-16 sm:w-16 border-4 border-blue-500 border-t-transparent mx-auto mb-4\"></div>\r\n                            <div className=\"absolute inset-0 flex items-center justify-center\">\r\n                                <IoPersonOutline className=\"w-5 h-5 sm:w-6 sm:h-6 text-blue-500\" />\r\n                            </div>\r\n                        </div>\r\n                        <h2 className={`text-lg sm:text-xl font-bold mb-2 ${theme === 'dark' ? 'text-white' : 'text-gray-800'}`}>Loading Employee Directory</h2>\r\n                        <p className={`text-sm ${theme === 'dark' ? 'text-gray-300' : 'text-gray-600'}`}>Discovering your colleagues...</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (isAddEmployeeModalOpen) {\r\n        return (\r\n            <>\r\n                {renderAddEmployeeModal()}\r\n                <div className={`min-h-screen absolute inset-0 filter blur-sm ${theme === 'dark' ? 'bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900' : 'bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100'}`}></div>\r\n            </>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className={`min-h-screen px-0 sm:px-4 lg:px-6 xl:px-8 py-4 sm:py-6 lg:py-8 ${theme === 'dark' ? 'bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900' : 'bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100'}`}>\r\n            <div className=\"max-w-7xl mx-auto\">\r\n                {/* Search and Filters Bar */}\r\n                <div\r\n                    className={`rounded-none sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 shadow-lg border mb-4 sm:mb-6 mx-2 sm:mx-0 ${\r\n                        theme === 'dark' ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'\r\n                    }`}\r\n                >\r\n                    <div className=\"mb-3\">\r\n                        <div className=\"relative group max-w-full sm:max-w-sm md:max-w-md\">\r\n                            <div className=\"absolute inset-y-0 left-0 pl-2.5 flex items-center pointer-events-none\">\r\n                                <IoSearchOutline className={`h-3.5 w-3.5 sm:h-4 sm:w-4 ${theme === 'dark' ? 'text-gray-400' : 'text-gray-400'}`} />\r\n                            </div>\r\n                            <input\r\n                                type=\"text\"\r\n                                className={`w-full px-3 sm:px-4 py-2 sm:py-2.5 pl-7 sm:pl-8 border rounded-md sm:rounded-lg focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 focus:outline-none placeholder-gray-500 text-xs sm:text-sm ${\r\n                                    theme === 'dark'\r\n                                        ? 'bg-gray-700 border-gray-600 text-white'\r\n                                        : 'bg-gray-50 border-gray-200 text-gray-800'\r\n                                }`}\r\n                                placeholder=\"Search...\"\r\n                                value={searchTerm}\r\n                                onChange={(e) => setSearchTerm(e.target.value)}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"flex flex-col sm:flex-row gap-2 sm:gap-3 items-stretch sm:items-center justify-between\">\r\n                        <div className=\"flex flex-wrap gap-1.5 sm:gap-2\">\r\n                            {dynamicFilters.map(filter => {\r\n                                const IconComponent = filter.icon;\r\n                                return (\r\n                                    <div key={filter.name} className=\"relative group min-w-0 flex-1 sm:flex-initial\">\r\n                                        <div className=\"absolute inset-y-0 left-0 pl-1.5 sm:pl-2 flex items-center pointer-events-none\">\r\n                                            <IconComponent className={`h-2.5 w-2.5 sm:h-3 sm:w-3 ${theme === 'dark' ? 'text-gray-400' : 'text-gray-400'}`} />\r\n                                        </div>\r\n                                        <select\r\n                                            className={`px-3 sm:px-4 py-2 sm:py-2.5 pl-6 sm:pl-7 pr-4 sm:pr-5 border rounded-md sm:rounded-lg appearance-none cursor-pointer min-w-[100px] sm:min-w-[120px] text-xs truncate focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 focus:outline-none ${\r\n                                                theme === 'dark'\r\n                                                    ? 'bg-gray-700 border-gray-600 text-white'\r\n                                                    : 'bg-gray-50 border-gray-200 text-gray-700'\r\n                                            }`}\r\n                                            value={selectedFilters[filter.name] || filter.options[0]}\r\n                                            onChange={(e) => setSelectedFilters({\r\n                                                ...selectedFilters,\r\n                                                [filter.name]: e.target.value,\r\n                                            })}\r\n                                        >\r\n                                            {filter.options.map(option => (\r\n                                                <option key={option} value={option}>{option}</option>\r\n                                            ))}\r\n                                        </select>\r\n                                        <div className=\"absolute inset-y-0 right-0 pr-1.5 sm:pr-2 flex items-center pointer-events-none\">\r\n                                            <IoChevronDownOutline className={`h-2.5 w-2.5 sm:h-3 sm:w-3 ${theme === 'dark' ? 'text-gray-400' : 'text-gray-400'}`} />\r\n                                        </div>\r\n                                    </div>\r\n                                );\r\n                            })}\r\n                        </div>\r\n\r\n                        <div className=\"flex flex-col sm:flex-row gap-1.5 sm:gap-2\">\r\n                            <button\r\n                                onClick={clearFilters}\r\n                                className={`px-4 sm:px-5 py-1.5 sm:py-2 border rounded-md sm:rounded-lg font-medium text-xs flex items-center justify-center space-x-1.5 ${\r\n                                    theme === 'dark'\r\n                                        ? 'border-gray-600 text-gray-300 hover:bg-gray-600 hover:border-gray-500'\r\n                                        : 'border-gray-300 text-gray-700 hover:bg-gray-100 hover:border-gray-400'\r\n                                }`}\r\n                            >\r\n                                <IoRefreshOutline className=\"w-2.5 h-2.5 sm:w-3 sm:h-3\" />\r\n                                <span>Clear</span>\r\n                            </button>\r\n\r\n                            {matchedArray && matchedArray.includes(\"EMPLOYEES_ADD\") && (\r\n                                <button\r\n                                    onClick={() => setIsAddEmployeeModalOpen(true)}\r\n                                    className=\"px-4 sm:px-5 py-1.5 sm:py-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white font-medium rounded-md sm:rounded-lg shadow-md text-xs flex items-center justify-center space-x-1.5\"\r\n                                >\r\n                                    <IoAddCircleOutline className=\"w-2.5 h-2.5 sm:w-3 sm:h-3\" />\r\n                                    <span>Add</span>\r\n                                </button>\r\n                            )}\r\n\r\n                            {matchedArray && matchedArray.includes(\"EMPLOYEES_TERMINATE\") && (\r\n                                <button\r\n                                    onClick={handleTerminateEmployees}\r\n                                    className=\"px-3 sm:px-4 py-1.5 sm:py-2 bg-red-600 hover:bg-red-700 text-white font-medium rounded-md text-xs flex items-center justify-center space-x-1.5\"\r\n                                >\r\n                                    <IoTrashOutline className=\"w-2.5 h-2.5 sm:w-3 sm:h-3\" />\r\n                                    <span>Terminate</span>\r\n                                </button>\r\n                            )}\r\n\r\n                            <div className={`flex rounded-md p-0.5 ${theme === 'dark' ? 'bg-gray-700' : 'bg-gray-100'}`}>\r\n                                <button\r\n                                    onClick={() => setViewMode('grid')}\r\n                                    className={`p-1 sm:p-1.5 rounded-sm ${\r\n                                        viewMode === 'grid'\r\n                                            ? (theme === 'dark' ? 'bg-gray-600 text-blue-400 shadow-sm' : 'bg-white text-blue-600 shadow-sm')\r\n                                            : (theme === 'dark' ? 'text-gray-400 hover:text-gray-200' : 'text-gray-500 hover:text-gray-700')\r\n                                    }`}\r\n                                >\r\n                                    <IoGridOutline className=\"w-2.5 h-2.5 sm:w-3 sm:h-3\" />\r\n                                </button>\r\n                                <button\r\n                                    onClick={() => setViewMode('list')}\r\n                                    className={`p-1 sm:p-1.5 rounded-sm ${\r\n                                        viewMode === 'list'\r\n                                            ? (theme === 'dark' ? 'bg-gray-600 text-blue-400 shadow-sm' : 'bg-white text-blue-600 shadow-sm')\r\n                                            : (theme === 'dark' ? 'text-gray-400 hover:text-gray-200' : 'text-gray-500 hover:text-gray-700')\r\n                                    }`}\r\n                                >\r\n                                    <IoListOutline className=\"w-2.5 h-2.5 sm:w-3 sm:h-3\" />\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"flex items-center justify-between mb-4 sm:mb-3 mx-4 sm:mx-0\">\r\n                    <h3 className={`text-base sm:text-lg font-semibold ${theme === 'dark' ? 'text-white' : 'text-gray-800'}`}>\r\n                        {filteredEmployees.length} Employee{filteredEmployees.length !== 1 ? 's' : ''} Found\r\n                    </h3>\r\n                </div>\r\n\r\n                {filteredEmployees.length === 0 ? (\r\n                    <div className=\"text-center py-12 sm:py-16 px-4\">\r\n                        <div className={`w-16 h-16 sm:w-20 sm:h-20 rounded-full flex items-center justify-center mx-auto mb-4 ${\r\n                            theme === 'dark' ? 'bg-gray-700' : 'bg-gray-100'\r\n                        }`}>\r\n                            <IoPersonOutline className=\"w-8 h-8 sm:w-10 sm:h-10 text-gray-400\" />\r\n                        </div>\r\n                        <h2 className={`text-lg sm:text-xl font-bold mb-2 ${theme === 'dark' ? 'text-white' : 'text-gray-800'}`}>No Employees Found</h2>\r\n                        <p className={`text-sm sm:text-base mb-4 ${theme === 'dark' ? 'text-gray-300' : 'text-gray-600'}`}>\r\n                            Try adjusting your search terms or filters.\r\n                        </p>\r\n                        <button\r\n                            onClick={clearFilters}\r\n                            className=\"px-6 sm:px-8 py-2 sm:py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white font-bold rounded-lg sm:rounded-xl shadow-lg text-sm sm:text-base\"\r\n                        >\r\n                            Clear All Filters\r\n                        </button>\r\n                    </div>\r\n                ) : (\r\n                    <div\r\n                        className={viewMode === 'grid'\r\n                            ? 'grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6 mx-4 sm:mx-0'\r\n                            : 'space-y-3 sm:space-y-4 mx-4 sm:mx-0'\r\n                        }\r\n                    >\r\n                        {filteredEmployees.map((employee, index) => {\r\n                            const isOwnProfile = employee.employeeId === empID;\r\n\r\n                            return (\r\n                                <div key={employee.employeeId} className=\"relative\">\r\n                                    {viewMode === 'grid' ? (\r\n                                        <div\r\n                                            className={`w-full h-72 rounded-xl shadow-lg border cursor-pointer ${\r\n                                                theme === 'dark'\r\n                                                    ? 'bg-gradient-to-br from-gray-800 to-gray-900 border-gray-700'\r\n                                                    : 'bg-gradient-to-br from-white to-gray-50 border-gray-200'\r\n                                            }`}\r\n                                            onClick={(e) => {\r\n                                                e.stopPropagation();\r\n                                                setFlippedCard(prev => prev === employee.employeeId ? null : employee.employeeId);\r\n                                            }}\r\n                                        >\r\n                                            {flippedCard === employee.employeeId ? (\r\n                                                // Back Card - Scrollable Options\r\n                                                <div className=\"flex flex-col h-72 p-4 sm:p-5\">\r\n                                                    {isOwnProfile ? (\r\n                                                        <div className=\"text-center space-y-4 w-full flex-1 flex flex-col items-center justify-center\">\r\n                                                            <IoPersonOutline className={`w-10 h-10 ${theme === 'dark' ? 'text-green-400' : 'text-green-600'}`} />\r\n                                                            <h3 className={`text-xl sm:text-2xl font-bold ${theme === 'dark' ? 'text-green-400' : 'text-green-700'}`}>\r\n                                                                This is Your Profile\r\n                                                            </h3>\r\n                                                            <p className={`text-sm ${theme === 'dark' ? 'text-gray-300' : 'text-gray-600'}`}>\r\n                                                                Use the main navigation links to manage your information.\r\n                                                            </p>\r\n                                                        </div>\r\n                                                    ) : (\r\n                                                        <>\r\n                                                            <div className=\"text-center mb-3 sm:mb-4 pb-3 border-b border-gray-500/30\">\r\n                                                                <h3 className={`text-base sm:text-lg font-bold mb-1 ${theme === 'dark' ? 'text-white' : 'text-gray-900'}`}>\r\n                                                                    Card Options\r\n                                                                </h3>\r\n                                                                <p className={`text-xs ${theme === 'dark' ? 'text-gray-400' : 'text-gray-600'}`}>\r\n                                                                    Actions for {employee.displayName}\r\n                                                                </p>\r\n                                                            </div>\r\n\r\n                                                            <div className=\"overflow-y-auto flex-1 space-y-1 sm:space-y-2\">\r\n                                                                <button\r\n                                                                    onClick={(e) => {\r\n                                                                        e.stopPropagation();\r\n                                                                        handleChatClick(employee);\r\n                                                                    }}\r\n                                                                    className={`px-4 sm:px-6 py-2 sm:py-2.5 bg-gradient-to-r from-blue-500 to-purple-600 text-white font-bold rounded-lg text-xs sm:text-sm w-full flex items-center justify-center space-x-2`}\r\n                                                                >\r\n                                                                    <IoChatbubbleOutline className=\"w-3 h-3 sm:w-4 sm:h-4\" />\r\n                                                                    <span>Start Chat</span>\r\n                                                                </button>\r\n\r\n                                                                {matchedArray && matchedArray.includes(\"GET_PUBLIC\") && (\r\n                                                                    <button\r\n                                                                        onClick={(e) => {\r\n                                                                            e.stopPropagation();\r\n                                                                            handleViewProfileClick(employee);\r\n                                                                        }}\r\n                                                                        className={`px-4 sm:px-6 py-2 sm:py-2.5 bg-gradient-to-r from-green-500 to-teal-600 text-white font-bold rounded-lg text-xs sm:text-sm w-full flex items-center justify-center space-x-2`}\r\n                                                                    >\r\n                                                                        <IoPersonOutline className=\"w-3 h-3 sm:w-4 sm:h-4\" />\r\n                                                                        <span>View Profile</span>\r\n                                                                    </button>\r\n                                                                )}\r\n\r\n                                                                {matchedArray && matchedArray.includes(\"EMPLOYEE_VIEW_DOCS\") &&\r\n                                                                    <button\r\n                                                                        onClick={(e) => {\r\n                                                                            e.stopPropagation();\r\n                                                                            handleDocumentsClick(employee);\r\n                                                                        }}\r\n                                                                        className={`px-4 sm:px-6 py-2 sm:py-2.5 bg-gradient-to-r from-yellow-500 to-orange-500 text-white font-bold rounded-lg text-xs sm:text-sm w-full flex items-center justify-center space-x-2`}\r\n                                                                    >\r\n                                                                        <IoDocumentsOutline className=\"w-3 h-3 sm:w-4 sm:h-4\" />\r\n                                                                        <span>Documents</span>\r\n                                                                    </button>\r\n                                                                }\r\n\r\n                                                                <button\r\n                                                                    onClick={(e) => {\r\n                                                                        e.stopPropagation();\r\n                                                                        handlePayRollClick(employee);\r\n                                                                    }}\r\n                                                                    className={`px-4 sm:px-6 py-2 sm:py-2.5 bg-gradient-to-r from-teal-500 to-cyan-600 text-white font-bold rounded-lg text-xs sm:text-sm w-full flex items-center justify-center space-x-2`}\r\n                                                                >\r\n                                                                    <IoPeopleOutline className=\"w-3 h-3 sm:w-4 sm:h-4\" />\r\n                                                                    <span>View Payroll</span>\r\n                                                                </button>\r\n\r\n                                                                {matchedArray.includes(\"EMPLOYEES_EMPLOYEE_TERMINATE_EMPLOYEE\") && (\r\n                                                                    <button\r\n                                                                        onClick={(e) => {\r\n                                                                            e.stopPropagation();\r\n                                                                            handleDeleteClick(employee);\r\n                                                                        }}\r\n                                                                        className=\"px-4 sm:px-6 py-2 sm:py-2.5 bg-red-600 hover:bg-red-700 text-white font-semibold rounded-lg text-xs sm:text-sm w-full flex items-center justify-center space-x-2\"\r\n                                                                    >\r\n                                                                        <IoTrashOutline className=\"w-3 h-3 sm:w-4 sm:h-4\" />\r\n                                                                        <span>Terminate</span>\r\n                                                                    </button>\r\n                                                                )}\r\n                                                            </div>\r\n                                                        </>\r\n                                                    )}\r\n                                                </div>\r\n                                            ) : (\r\n                                                // Front Card\r\n                                                <div className=\"flex flex-col h-full p-3 sm:p-4 relative overflow-hidden\">\r\n                                                    <div className=\"absolute top-0 right-0 w-16 h-16 opacity-10 pointer-events-none\">\r\n                                                        <div className={`w-full h-full rounded-full ${theme === 'dark' ? 'bg-blue-400' : 'bg-blue-500'} transform translate-x-8 -translate-y-8`}></div>\r\n                                                    </div>\r\n\r\n                                                    <div className=\"flex flex-col items-center text-center mb-3 z-10\">\r\n                                                        <div className=\"relative mb-2\">\r\n                                                            {employee.employeeImage ? (\r\n                                                                <div className=\"relative\">\r\n                                                                    <img\r\n                                                                        src={employee.employeeImage}\r\n                                                                        alt={`${employee.displayName}'s profile picture`}\r\n                                                                        className=\"h-14 w-14 sm:h-16 sm:w-16 rounded-xl object-cover border-3 border-blue-400 shadow-lg\"\r\n                                                                    />\r\n                                                                    <div className=\"absolute -bottom-1 -right-1 w-3 h-3 sm:w-4 sm:h-4 bg-green-500 rounded-full border-2 border-white shadow-sm\"></div>\r\n                                                                </div>\r\n                                                            ) : (\r\n                                                                <div className=\"relative\">\r\n                                                                    <div className=\"h-14 w-14 sm:h-16 sm:w-16 rounded-xl bg-gradient-to-br from-blue-500 via-indigo-500 to-purple-600 flex items-center justify-center text-white text-sm sm:text-lg font-bold shadow-lg\">\r\n                                                                        {generateInitials(employee.displayName)}\r\n                                                                    </div>\r\n                                                                    <div className=\"absolute -bottom-1 -right-1 w-3 h-3 sm:w-4 sm:h-4 bg-green-500 rounded-full border-2 border-white shadow-sm\"></div>\r\n                                                                </div>\r\n                                                            )}\r\n                                                        </div>\r\n\r\n                                                        <div className=\"w-full px-1\">\r\n                                                            <h3 className={`text-sm sm:text-base font-bold mb-1 truncate ${theme === 'dark' ? 'text-white' : 'text-gray-900'}`}>\r\n                                                                {employee.displayName}\r\n                                                            </h3>\r\n                                                            <p className={`text-xs font-semibold px-2 py-0.5 rounded-full truncate ${theme === 'dark' ? 'text-blue-300 bg-blue-900/40' : 'text-blue-700 bg-blue-100'}`}>\r\n                                                                {employee.jobTitlePrimary || \"Not Updated Job Title\"}\r\n                                                            </p>\r\n                                                        </div>\r\n                                                    </div>\r\n\r\n                                                    <div className=\"flex-1 flex flex-col justify-end min-h-0\">\r\n                                                        <div className=\"space-y-1 px-1\">\r\n                                                            <div className={`flex items-center space-x-2 p-1.5 rounded-lg overflow-hidden ${\r\n                                                                theme === 'dark' ? 'bg-gray-700/50 text-gray-300' : 'bg-gray-100/50 text-gray-600'\r\n                                                            }`}>\r\n                                                                <IoIdCardOutline className={`w-3 h-3 flex-shrink-0 ${theme === 'dark' ? 'text-orange-400' : 'text-orange-500'}`} />\r\n                                                                <span className=\"truncate font-mono text-xs min-w-0\">{employee.employeeId}</span>\r\n                                                            </div>\r\n\r\n                                                            <div className={`flex items-center space-x-2 p-1.5 rounded-lg overflow-hidden ${\r\n                                                                theme === 'dark' ? 'bg-gray-700/50 text-gray-300' : 'bg-gray-100/50 text-gray-600'\r\n                                                            }`}>\r\n                                                                <IoBriefcaseOutline className={`w-3 h-3 flex-shrink-0 ${theme === 'dark' ? 'text-blue-400' : 'text-blue-500'}`} />\r\n                                                                <span className=\"truncate text-xs min-w-0\">{employee.departmentId || 'N/A'}</span>\r\n                                                            </div>\r\n\r\n                                                            <div className={`flex items-center space-x-2 p-1.5 rounded-lg overflow-hidden ${\r\n                                                                theme === 'dark' ? 'bg-gray-700/50 text-gray-300' : 'bg-gray-100/50 text-gray-600'\r\n                                                            }`}>\r\n                                                                <IoLocationOutline className={`w-3 h-3 flex-shrink-0 ${theme === 'dark' ? 'text-green-400' : 'text-green-500'}`} />\r\n                                                                <span className=\"truncate text-xs min-w-0\">{employee.location || 'N/A'}</span>\r\n                                                            </div>\r\n\r\n                                                            <div className={`flex items-center space-x-2 p-1.5 rounded-lg overflow-hidden ${\r\n                                                                theme === 'dark' ? 'bg-gray-700/50 text-gray-300' : 'bg-gray-100/50 text-gray-600'\r\n                                                            }`}>\r\n                                                                <IoMailOutline className={`w-3 h-3 flex-shrink-0 ${theme === 'dark' ? 'text-purple-400' : 'text-purple-500'}`} />\r\n                                                                <span className=\"truncate text-xs min-w-0\" title={employee.workEmail || 'N/A'}>{employee.workEmail || 'N/A'}</span>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            )}\r\n                                        </div>\r\n                                    ) : (\r\n                                        // List View Item\r\n                                        <div\r\n                                            className={`rounded-xl p-3 sm:p-4 shadow-lg border cursor-pointer ${\r\n                                                isOwnProfile\r\n                                                    ? 'border-green-500 ring-2 ring-green-500/50'\r\n                                                    : (theme === 'dark'\r\n                                                        ? 'bg-gradient-to-r from-gray-800 to-gray-900 border-gray-700'\r\n                                                        : 'bg-gradient-to-r from-white to-gray-50 border-gray-200'\r\n                                                    )\r\n                                            }`}\r\n                                            onClick={() => navigate(`/employees/${empID}/public/${employee.employeeId}`)}\r\n                                        >\r\n                                            <div className=\"flex items-center space-x-3 sm:space-x-4 relative overflow-hidden\">\r\n                                                <div className=\"absolute top-0 right-0 w-16 sm:w-20 h-16 sm:h-20 opacity-10 pointer-events-none\">\r\n                                                    <div className={`w-full h-full rounded-full ${theme === 'dark' ? 'bg-blue-400' : 'bg-blue-500'} transform translate-x-8 sm:translate-x-10 -translate-y-8 sm:-translate-y-10`}></div>\r\n                                                </div>\r\n\r\n                                                <div className=\"flex-shrink-0 relative z-10\">\r\n                                                    {employee.employeeImage ? (\r\n                                                        <div className=\"relative\">\r\n                                                            <img\r\n                                                                src={employee.employeeImage}\r\n                                                                alt={`${employee.displayName}'s profile picture`}\r\n                                                                className=\"h-10 w-10 sm:h-12 sm:w-12 rounded-xl object-cover border-4 border-blue-200 shadow-lg\"\r\n                                                            />\r\n                                                            <div className=\"absolute -bottom-1 -right-1 w-3 h-3 sm:w-4 sm:h-4 bg-green-500 rounded-full border-2 border-white\"></div>\r\n                                                        </div>\r\n                                                    ) : (\r\n                                                        <div className=\"relative\">\r\n                                                            <div className=\"h-10 w-10 sm:h-12 sm:w-12 rounded-xl bg-gradient-to-br from-blue-500 via-indigo-500 to-purple-600 flex items-center justify-center text-white text-xs sm:text-sm font-bold shadow-lg\">\r\n                                                                {generateInitials(employee.displayName)}\r\n                                                            </div>\r\n                                                            <div className=\"absolute -bottom-1 -right-1 w-3 h-3 sm:w-4 sm:h-4 bg-green-500 rounded-full border-2 border-white\"></div>\r\n                                                        </div>\r\n                                                    )}\r\n                                                </div>\r\n\r\n                                                <div className=\"flex-1 min-w-0 z-10\">\r\n                                                    <div className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between\">\r\n                                                        <div className=\"min-w-0 flex-1 mb-2 sm:mb-0\">\r\n                                                            <h3 className={`text-sm sm:text-lg font-bold truncate mb-1 ${theme === 'dark' ? 'text-white' : 'text-gray-900'}`}>\r\n                                                                {employee.displayName}\r\n                                                                {isOwnProfile && (\r\n                                                                    <span className={`ml-2 text-xs font-bold ${theme === 'dark' ? 'text-green-400' : 'text-green-600'}`}>(Your Profile)</span>\r\n                                                                )}\r\n                                                            </h3>\r\n                                                            <p className={`text-xs font-semibold px-2 py-1 rounded-full w-fit ${theme === 'dark' ? 'text-blue-300 bg-blue-900/40' : 'text-blue-700 bg-blue-100'}`}>\r\n                                                                {employee.jobTitlePrimary || \"Not Updated\"}\r\n                                                            </p>\r\n                                                        </div>\r\n\r\n                                                        {!isOwnProfile && (\r\n                                                            <div className=\"flex items-center space-x-1 sm:space-x-2\">\r\n                                                                <button\r\n                                                                    onClick={(e) => { e.stopPropagation(); handleChatClick(employee); }}\r\n                                                                    className={`p-1.5 sm:p-2 rounded-lg ${theme === 'dark' ? 'bg-blue-600 hover:bg-blue-700' : 'bg-blue-500 hover:bg-blue-600'} text-white shadow-md`}\r\n                                                                >\r\n                                                                    <IoChatbubbleOutline className=\"w-3 h-3 sm:w-4 sm:h-4\" />\r\n                                                                </button>\r\n\r\n                                                                {matchedArray && matchedArray.includes(\"GET_PUBLIC\") && (\r\n                                                                    <button\r\n                                                                        onClick={(e) => { e.stopPropagation(); handleViewProfileClick(employee); }}\r\n                                                                        className={`p-1.5 sm:p-2 rounded-lg ${theme === 'dark' ? 'bg-green-600 hover:bg-green-700' : 'bg-green-500 hover:bg-green-600'} text-white shadow-md`}\r\n                                                                    >\r\n                                                                        <IoPersonOutline className=\"w-3 h-3 sm:w-4 sm:h-4\" />\r\n                                                                    </button>\r\n                                                                )}\r\n\r\n                                                                {matchedArray && matchedArray.includes(\"EMPLOYEE_VIEW_DOCS\") && (\r\n                                                                    <button\r\n                                                                        onClick={(e) => { e.stopPropagation(); handleDocumentsClick(employee); }}\r\n                                                                        className={`p-1.5 sm:p-2 rounded-lg ${theme === 'dark' ? 'bg-yellow-600 hover:bg-yellow-700' : 'bg-yellow-500 hover:bg-yellow-600'} text-white shadow-md`}\r\n                                                                    >\r\n                                                                        <IoDocumentsOutline className=\"w-3 h-3 sm:w-4 sm:h-4\" />\r\n                                                                    </button>\r\n                                                                )}\r\n\r\n                                                                {matchedArray.includes(\"EMPLOYEES_EMPLOYEE_TERMINATE_EMPLOYEE\") && (\r\n                                                                    <button\r\n                                                                        onClick={(e) => { e.stopPropagation(); handleDeleteClick(employee); }}\r\n                                                                        disabled={isOwnProfile}\r\n                                                                        className={`p-1.5 sm:p-2 rounded-lg text-white shadow-md ${isOwnProfile ? 'opacity-50 cursor-not-allowed' : 'bg-red-600 hover:bg-red-700'}`}\r\n                                                                    >\r\n                                                                        <IoTrashOutline className=\"w-3 h-3 sm:w-4 sm:h-4\" />\r\n                                                                    </button>\r\n                                                                )}\r\n                                                            </div>\r\n                                                        )}\r\n                                                    </div>\r\n\r\n                                                    <div className=\"grid grid-cols-2 md:grid-cols-4 gap-1 sm:gap-2 text-xs mt-2\">\r\n                                                        <div className={`flex items-center space-x-1 p-1 sm:p-1.5 rounded-md overflow-hidden ${\r\n                                                            theme === 'dark' ? 'bg-gray-700/50 text-gray-300' : 'bg-gray-100 text-gray-600'\r\n                                                        }`}>\r\n                                                            <IoIdCardOutline className={`w-3 h-3 flex-shrink-0 ${theme === 'dark' ? 'text-orange-400' : 'text-orange-500'}`} />\r\n                                                            <span className=\"truncate font-mono text-xs\">{employee.employeeId}</span>\r\n                                                        </div>\r\n                                                        <div className={`flex items-center space-x-1 p-1 sm:p-1.5 rounded-md overflow-hidden ${\r\n                                                            theme === 'dark' ? 'bg-gray-700/50 text-gray-300' : 'bg-gray-100 text-gray-600'\r\n                                                        }`}>\r\n                                                            <IoBriefcaseOutline className={`w-3 h-3 flex-shrink-0 ${theme === 'dark' ? 'text-blue-400' : 'text-blue-500'}`} />\r\n                                                            <span className=\"truncate\">{employee.departmentId || 'N/A'}</span>\r\n                                                        </div>\r\n                                                        <div className={`flex items-center space-x-1 p-1 sm:p-1.5 rounded-md overflow-hidden ${\r\n                                                            theme === 'dark' ? 'bg-gray-700/50 text-gray-300' : 'bg-gray-100 text-gray-600'\r\n                                                        }`}>\r\n                                                            <IoLocationOutline className={`w-3 h-3 flex-shrink-0 ${theme === 'dark' ? 'text-green-400' : 'text-green-500'}`} />\r\n                                                            <span className=\"truncate\">{employee.location || 'N/A'}</span>\r\n                                                        </div>\r\n                                                        <div className={`flex items-center space-x-1 p-1 sm:p-1.5 rounded-md overflow-hidden ${\r\n                                                            theme === 'dark' ? 'bg-gray-700/50 text-gray-300' : 'bg-gray-100 text-gray-600'\r\n                                                        }`}>\r\n                                                            <IoMailOutline className={`w-3 h-3 flex-shrink-0 ${theme === 'dark' ? 'text-purple-400' : 'text-purple-500'}`} />\r\n                                                            <span className=\"truncate text-xs\" title={employee.workEmail || 'N/A'}>{employee.workEmail || 'N/A'}</span>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            );\r\n                        })}\r\n                    </div>\r\n                )}\r\n\r\n                <div className=\"flex flex-col sm:flex-row justify-between items-center mt-6 sm:mt-8 gap-4 mx-4 sm:mx-0\">\r\n                    <button\r\n                        onClick={() => setPageNumber(prev => Math.max(0, prev - 1))}\r\n                        disabled={pageNumber === 0}\r\n                        className={`flex items-center space-x-2 px-6 sm:px-8 py-2 sm:py-3 rounded-lg sm:rounded-xl font-semibold text-sm ${\r\n                            theme === 'dark'\r\n                                ? 'bg-gray-700 text-gray-300 hover:bg-gray-600'\r\n                                : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\r\n                        } disabled:opacity-50 disabled:cursor-not-allowed`}\r\n                    >\r\n                        <IoArrowBack className=\"w-3 h-3 sm:w-4 sm:h-4\" />\r\n                        <span>Previous</span>\r\n                    </button>\r\n\r\n                    <div className=\"flex flex-col sm:flex-row items-center space-y-2 sm:space-y-0 sm:space-x-4\">\r\n                        <span className={`text-xs sm:text-sm ${theme === 'dark' ? 'text-gray-300' : 'text-gray-700'}`}>\r\n                            Page {pageNumber + 1}\r\n                        </span>\r\n                        <select\r\n                            value={pageSize}\r\n                            onChange={(e) => {\r\n                                setPageSize(parseInt(e.target.value));\r\n                                setPageNumber(0);\r\n                            }}\r\n                            className={`px-3 sm:px-4 py-2 sm:py-3 border-2 rounded-lg text-xs sm:text-sm ${\r\n                                theme === 'dark'\r\n                                    ? 'bg-gray-700 text-white border-gray-600'\r\n                                    : 'bg-gray-100 text-gray-800 border-gray-300'\r\n                            }`}\r\n                        >\r\n                            <option value=\"15\">15 per page</option>\r\n                            <option value=\"30\">30 per page</option>\r\n                            <option value=\"50\">50 per page</option>\r\n                        </select>\r\n                    </div>\r\n\r\n                    <button\r\n                        onClick={() => setPageNumber(prev => prev + 1)}\r\n                        disabled={filteredEmployees.length < pageSize}\r\n                        className={`flex items-center space-x-2 px-6 sm:px-8 py-2 sm:py-3 rounded-lg sm:rounded-xl font-semibold text-sm ${\r\n                            theme === 'dark'\r\n                                ? 'bg-gray-700 text-gray-300 hover:bg-gray-600'\r\n                                : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\r\n                        } disabled:opacity-50 disabled:cursor-not-allowed`}\r\n                    >\r\n                        <span>{filteredEmployees.length < pageSize ? 'Last Page' : 'Next'}</span>\r\n                        {filteredEmployees.length < pageSize ? (\r\n                            <IoLockClosed className=\"w-3 h-3 sm:w-4 sm:h-4\" />\r\n                        ) : (\r\n                            <IoArrowForward className=\"w-3 h-3 sm:w-4 sm:h-4\" />\r\n                        )}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Modals */}\r\n            {isTerminatedEmployeesModalOpen && renderTerminatedEmployeesModal()}\r\n\r\n            {popup.show && (\r\n                <Modal\r\n                    onClose={() => setPopup({ show: false, message: '', type: '' })}\r\n                    title={popup.type === 'success' ? 'Success' : popup.type === 'default' ? 'Information' : 'Error'}\r\n                    type={popup.type}\r\n                    theme={theme}\r\n                >\r\n                    <p className={`mb-4 sm:mb-6 text-sm ${theme === 'dark' ? 'text-gray-300' : 'text-gray-700'}`}>{popup.message}</p>\r\n                    <div className=\"flex justify-end\">\r\n                        <button\r\n                            onClick={() => setPopup({ show: false, message: '', type: '' })}\r\n                            className={`${popup.type === 'success' ? 'bg-green-600 hover:bg-green-700' : popup.type === 'default' ? 'bg-blue-600 hover:bg-blue-700' : 'bg-red-600 hover:bg-red-700'} text-white font-semibold py-2 px-6 rounded-lg text-sm`}\r\n                        >\r\n                            OK\r\n                        </button>\r\n                    </div>\r\n                </Modal>\r\n            )}\r\n\r\n            {deleteConfirmation.show && (\r\n                <Modal\r\n                    onClose={() => setDeleteConfirmation({ show: false, employee: null })}\r\n                    title=\"Confirm Termination\"\r\n                    type=\"confirm\"\r\n                    theme={theme}\r\n                >\r\n                    <p className={`mb-4 sm:mb-6 text-sm ${theme === 'dark' ? 'text-gray-300' : 'text-gray-700'}`}>\r\n                        Are you sure you want to Terminate employee <strong>{deleteConfirmation.employee?.displayName}</strong>? This action cannot be undone.\r\n                    </p>\r\n                    <div className=\"flex flex-col sm:flex-row justify-end gap-2 sm:gap-3\">\r\n                        <button\r\n                            onClick={() => setDeleteConfirmation({ show: false, employee: null })}\r\n                            className={`w-full sm:w-auto px-6 py-2 rounded-lg font-semibold text-sm ${\r\n                                theme === 'dark' ? 'bg-gray-600 hover:bg-gray-500 text-white' : 'bg-gray-200 hover:bg-gray-300 text-gray-800'\r\n                            }`}\r\n                        >\r\n                            Cancel\r\n                        </button>\r\n                        <button\r\n                            onClick={confirmDelete}\r\n                            className=\"w-full sm:w-auto px-6 py-2 rounded-lg font-semibold text-white bg-red-600 hover:bg-red-700 text-sm\"\r\n                        >\r\n                            Terminate\r\n                        </button>\r\n                    </div>\r\n                </Modal>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default EmployeeApp;","import React from \"react\";\r\nimport { Routes, Route } from \"react-router-dom\";\r\nimport EmployeeApp from \"./EmployeeApp\"; // Assuming this is the correct path\r\nimport EmployeeProfile from \"./EmployeeProfile\"; // Assuming this is the correct path\r\n\r\nconst Employees = () => {\r\n  return (\r\n    <Routes>\r\n      {/* FIX: 'index' specifies that EmployeeApp is the default component for the '/employees' route */}\r\n      <Route index element={<EmployeeApp />} />\r\n      {/* FIX: The path is now relative to '/employees', creating the full path '/employees/employee/:id' */}\r\n      <Route path=\"employee/:id\" element={<EmployeeProfile />} />\r\n    </Routes>\r\n  );\r\n};\r\n\r\nexport default Employees;"],"names":["generateInitials","name","nameParts","split","length","toUpperCase","InfoItem","_ref","icon","label","value","isMail","theme","_jsxs","motion","div","initial","opacity","x","animate","transition","duration","className","children","_jsx","concat","href","EmployeeProfile","_employee$achievement","_employee$projects","empID","employeeID","useParams","navigate","useNavigate","useContext","Context","employee","setEmployee","useState","loading","setLoading","useEffect","async","response","publicinfoApi","get","console","log","data","error","fetchEmployee","exit","button","onClick","whileHover","FiArrowLeft","y","employeeImage","src","alt","displayName","delay","jobTitlePrimary","FiHash","employeeId","FiBriefcase","departmentId","FiMapPin","location","FiMail","workEmail","FiPhone","contact","achievements","map","achievement","index","FiAward","certificationName","issuingAuthorityName","projects","project","projectName","projectDescription","Modal","onClose","title","type","titleClass","IoCheckmarkCircle","IoWarning","IoInformationCircleOutline","IoClose","InputField","_ref2","required","hint","placeholder","onChange","onBlur","isError","options","multiple","accept","maxLength","disabled","normalizedValue","undefined","baseInputClass","textareaClass","selectClass","toLowerCase","option","viewBox","d","rows","IoCloudUpload","credentialsFormFields","employeeFormFields","payrollFormFields","leavesFormFields","min","max","DepartmentDropdown","_ref3","isOpen","setIsOpen","departments","setDepartments","hasMore","setHasMore","currentPage","setCurrentPage","searchTerm","setSearchTerm","dropdownRef","useRef","loadDepartments","useCallback","page","arguments","reset","newDepartments","content","prev","filteredDepartments","filter","dept","searchLower","includes","departmentName","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","ref","getDisplayText","selectedDept","find","IoChevronDownOutline","IoSearchOutline","e","onScroll","scrollTop","scrollHeight","clientHeight","departmentDescription","ShiftDropdown","_ref4","shifts","setShifts","getShifts","shiftNames","attendanceApi","shift","shiftName","_userData$roles","_userData$roles$","_deleteConfirmation$e","employeeData","setEmployeeData","dynamicFilters","setDynamicFilters","viewMode","setViewMode","userprofiledata","userData","selectedFilters","setSelectedFilters","loggedPermissiondata","setLoggedPermissionData","matchedArray","setMatchedArray","LoggedUserRole","roles","flippedCard","setFlippedCard","contextMenu","setContextMenu","visible","isAddEmployeeModalOpen","setIsAddEmployeeModalOpen","isUpdating","setIsUpdating","submissionStatus","setSubmissionStatus","terminatedSearchTerm","setTerminatedSearchTerm","currentStep","setCurrentStep","getCurrentLocation","navigator","geolocation","getCurrentPosition","position","latitude","coords","longitude","setFormData","_objectSpread","String","timezone","Intl","DateTimeFormat","resolvedOptions","timeZone","initialFormData","fullName","username","password","role","email","phoneNumber","firstName","maritalStatus","employeeRole","empNameDisplay","employeeIdDisplay","annualSalary","accountNumber","ifsccode","bankName","pfnum","panNumber","aadharNumber","uanNumber","department","designation","jobType","level","startDate","empName","employeeIdDisplay4","month","Date","getMonth","year","getFullYear","paid","sick","casual","unpaid","formData","formErrors","setFormErrors","popup","setPopup","show","message","deleteConfirmation","setDeleteConfirmation","pageNumber","setPageNumber","pageSize","setPageSize","sortBy","setSortBy","sortOrder","setSortOrder","isTerminatedEmployeesModalOpen","setIsTerminatedEmployeesModalOpen","terminatedEmployeesData","setTerminatedEmployeesData","terminatedLoading","setTerminatedLoading","terminatedHasMore","setTerminatedHasMore","terminatedCurrentPage","setTerminatedCurrentPage","terminatedScrollRef","hasAccess","setHasAccess","userRole","authApi","fetchedData","permissions","handleOutsideClick","window","handleChatClick","state","newChatTarget","chatId","profile","isOnline","lastMessage","unreadMessageCount","handleViewProfileClick","handleDocumentsClick","handleDeleteClick","fetchAllEmployees","err","Set","Boolean","locations","newFilters","IoBriefcaseOutline","IoBusinessOutline","IoLocationOutline","initialFilters","reduce","acc","filteredEmployees","lowercasedSearchTerm","matchesSearch","matchesFilters","Object","entries","every","_ref5","filterName","startsWith","clearFilters","clearedFilters","handleFormChange","updatedData","parseInt","parseFloat","newErrors","handleDepartmentChange","handleBlurValidation","trim","test","isNaN","leaves","validateStep","step","errors","fieldsToValidate","f","endsWith","hidden","push","allFields","forEach","field","requiredCheck","runValidation","handleNextStep","handlePreviousStep","handleFormSubmit","preventDefault","allErrors","step1Errors","step2Errors","step3Errors","step4Errors","keys","terminatedIds","allIds","hasMorePages","newEmployees","emp","add","last","fetchTerminatedEmployeeIds","idToCheck","has","credentialsDto","post","employeeDto","payrollDto","payroll","leavesDto","_error$response","_error$response$data","errorMessage","general","handleFormClose","handlePrintPayload","payload","JSON","stringify","renderField","currentErrors","handleChange","fieldValue","currentOnChange","departmentValue","renderAddEmployeeModal","getStepTitle","getStepColor","steps","IoKeyOutline","IoPersonOutline","IoCalendarOutline","isCompleted","isStepVisuallyCompleted","handleStepClick","stepNumber","onSubmit","IoArrowBack","IoArrowForward","_Fragment","loadTerminatedEmployees","alert","handleTerminatedScroll","filteredTerminatedEmployees","IconComponent","IoRefreshOutline","IoAddCircleOutline","IoTrashOutline","IoGridOutline","IoListOutline","isOwnProfile","stopPropagation","IoChatbubbleOutline","IoDocumentsOutline","handlePayRollClick","IoPeopleOutline","IoIdCardOutline","IoMailOutline","Math","IoLockClosed","renderTerminatedEmployeesModal","baseApiUrl","renderDataField","Array","isArray","join","onError","style","display","nextSibling","workNumber","gender","dateOfJoining","dateOfLeaving","projectId","teamId","employeeIdToDelete","delete","prevData","_err$response","_err$response$data","Employees","Routes","Route","element","EmployeeApp","path"],"sourceRoot":""}